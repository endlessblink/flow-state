###############################################################################
# FlowState Self-Hosting Environment Configuration
###############################################################################
# Copy this file to .env.self-host and fill in the values.
# Run: cp .env.self-host.example .env.self-host
#
# To generate JWT keys and secrets, run:
#   ./scripts/self-host-setup.sh
# Or generate manually:
#   JWT_SECRET:      openssl rand -base64 32
#   ANON_KEY:        See https://supabase.com/docs/guides/self-hosting#api-keys
#   SERVICE_ROLE_KEY: See https://supabase.com/docs/guides/self-hosting#api-keys
#   DASHBOARD_PASSWORD: Choose a strong password

###############################################################################
# PostgreSQL
###############################################################################
POSTGRES_PASSWORD=your-super-secret-db-password
POSTGRES_DB=postgres
POSTGRES_PORT=5432

###############################################################################
# JWT (MUST match across all Supabase services)
###############################################################################
# Generate: openssl rand -base64 32
# Minimum 32 characters. ALL services must use the same secret.
JWT_SECRET=your-super-secret-jwt-token-with-at-least-32-characters-long

# Generate these from your JWT_SECRET using https://supabase.com/docs/guides/self-hosting#api-keys
# or use the setup.sh script which generates them automatically.
ANON_KEY=your-anon-key
SERVICE_ROLE_KEY=your-service-role-key

###############################################################################
# GoTrue (Auth)
###############################################################################
# URL where your FlowState instance will be accessible (no trailing slash)
SITE_URL=http://localhost:3050
# URL where the API gateway (Kong) is accessible (no trailing slash)
API_EXTERNAL_URL=http://localhost:8000

# SMTP for email auth (optional - disable email confirmation if not configured)
SMTP_ADMIN_EMAIL=admin@example.com
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMTP_SENDER_NAME=FlowState

# Auth settings
DISABLE_SIGNUP=false
ENABLE_EMAIL_SIGNUP=true
ENABLE_EMAIL_AUTOCONFIRM=true
ENABLE_PHONE_SIGNUP=false
ENABLE_PHONE_AUTOCONFIRM=false

# Google OAuth (FEATURE-1202) - Optional
# Create credentials at https://console.cloud.google.com/apis/credentials
# Add your API_EXTERNAL_URL + /auth/v1/callback as a redirect URI in Google Console
SUPABASE_AUTH_EXTERNAL_GOOGLE_CLIENT_ID=
SUPABASE_AUTH_EXTERNAL_GOOGLE_SECRET=

###############################################################################
# FlowState App
###############################################################################
# These are injected at build time into the Vue frontend.
# VITE_SUPABASE_URL should point to your Kong API gateway.
VITE_SUPABASE_URL=http://localhost:8000
VITE_SUPABASE_ANON_KEY=your-anon-key

# Optional: Groq AI chat (get key from https://console.groq.com)
VITE_GROQ_API_KEY=

###############################################################################
# Cloudflare Tunnel (optional - for public HTTPS access)
###############################################################################
# Get a tunnel token from https://one.dash.cloudflare.com/ > Zero Trust > Tunnels
# CLOUDFLARE_TUNNEL_TOKEN=your-tunnel-token

###############################################################################
# Ports (change if you have conflicts)
###############################################################################
FLOWSTATE_PORT=3050
KONG_HTTP_PORT=8000
KONG_HTTPS_PORT=8443
