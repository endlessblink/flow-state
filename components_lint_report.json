[{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/ContextMenu.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/QuickSortCard.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/ai/AIChatPanel.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/ai/AIInsightsPanel.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/ai/AITaskAssistPopover.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/ai/ChatMessage.vue","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1569,1572],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1569,1572],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":101,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":104,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1598,1601],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1598,1601],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":112,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":115,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1609,1612],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1609,1612],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":123,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":126,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1620,1623],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1620,1623],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":54,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1725,1728],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1725,1728],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":54,"column":78,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":81,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1754,1757],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1754,1757],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":54,"column":88,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":91,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1764,1767],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1764,1767],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":54,"column":99,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":102,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1775,1778],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1775,1778],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":118,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":118,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4713,4716],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4713,4716],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":124,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":124,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4895,4898],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4895,4898],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":132,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":132,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5108,5111],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5108,5111],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":141,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":141,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5500,5503],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5500,5503],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":146,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":146,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5832,5835],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5832,5835],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":155,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":155,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6158,6161],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6158,6161],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":163,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":163,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6422,6425],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6422,6425],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":167,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":167,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6615,6618],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6615,6618],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":171,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":171,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6803,6806],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6803,6806],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":175,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":175,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6980,6983],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6980,6983],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":179,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":179,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7176,7179],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7176,7179],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":183,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":183,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7334,7337],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7334,7337],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":187,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":187,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7528,7531],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7528,7531],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":246,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":246,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9309,9312],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9309,9312],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":246,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":246,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9337,9340],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9337,9340],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":255,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":255,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9786,9789],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9786,9789],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"vue/no-v-html","severity":1,"message":"'v-html' directive can lead to XSS attack.","line":393,"column":9,"nodeType":"VAttribute","messageId":"unexpected","endLine":393,"endColumn":33}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":25,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<script setup lang=\"ts\">\n/**\n * Chat Message Component\n *\n * Displays a single message in the AI chat panel.\n * Supports:\n * - User and assistant message styling\n * - Markdown rendering via markdown-it\n * - Tool JSON stripping\n * - Copy to clipboard\n * - Streaming animation with thinking indicator\n * - Action buttons\n * - Tool result display\n * - Error states\n * - RTL support\n *\n * @see TASK-1120 in MASTER_PLAN.md\n */\n\nimport { computed, ref } from 'vue'\nimport { User, Sparkles, Loader2, Check, Copy, CheckCheck, Zap, PenLine, Trash2, Trophy, Flame, Shield, Swords, TrendingUp, Target, Play, CheckCircle2, CalendarDays } from 'lucide-vue-next'\nimport MarkdownIt from 'markdown-it'\nimport type { ChatMessage, ChatAction } from '@/stores/aiChat'\nimport { formatRelativeDate } from '@/utils/dateUtils'\nimport TaskQuickEditPopover from './TaskQuickEditPopover.vue'\nimport { executeTool } from '@/services/ai/tools'\n\n// ============================================================================\n// Props\n// ============================================================================\n\nconst props = defineProps<{\n  message: ChatMessage\n}>()\n\nconst emit = defineEmits<{\n  'selectTask': [taskId: string]\n}>()\n\n// ============================================================================\n// Markdown Setup\n// ============================================================================\n\nconst md = new MarkdownIt({\n  html: false,\n  linkify: true,\n  breaks: true\n})\n\n// Make links open in new tab\nconst defaultRender = md.renderer.rules.link_open || function (tokens: any[], idx: number, options: any, _env: any, self: any) {\n  return self.renderToken(tokens, idx, options)\n}\nmd.renderer.rules.link_open = function (tokens: any[], idx: number, options: any, env: any, self: any) {\n  tokens[idx].attrSet('target', '_blank')\n  tokens[idx].attrSet('rel', 'noopener noreferrer')\n  return defaultRender(tokens, idx, options, env, self)\n}\n\n// ============================================================================\n// State\n// ============================================================================\n\nconst loadingActions = ref<Set<string>>(new Set())\nconst copied = ref(false)\n\n// Track which tasks have been actioned (for visual feedback)\nconst completedTaskIds = ref<Set<string>>(new Set())\nconst timerStartedTaskIds = ref<Set<string>>(new Set())\nconst actionLoading = ref<Record<string, string>>({}) // taskId -> 'done' | 'timer'\n\n// ============================================================================\n// Computed\n// ============================================================================\n\nconst isUser = computed(() => props.message.role === 'user')\nconst isAssistant = computed(() => props.message.role === 'assistant')\nconst isStreaming = computed(() => props.message.isStreaming)\nconst hasError = computed(() => !!props.message.error)\nconst hasActions = computed(() =>\n  props.message.actions && props.message.actions.length > 0\n)\nconst isThinking = computed(() =>\n  isStreaming.value && (!props.message.content || props.message.content.trim() === '')\n)\n\n/**\n * Strip tool JSON blocks and AI preamble, then render markdown.\n */\nconst renderedContent = computed(() => {\n  let content = props.message.content || ''\n\n  if (isAssistant.value) {\n    // Strip ```json tool call blocks\n    content = content.replace(/```json\\s*\\{[\\s\\S]*?\\}\\s*```/g, '')\n    // Strip bare JSON tool calls (models sometimes output without code fences)\n    content = content.replace(/\\{\\s*\"tool\"\\s*:\\s*\"[^\"]+\"\\s*,\\s*\"parameters\"\\s*:\\s*\\{[^}]*\\}\\s*\\}/g, '')\n    // Strip \"I'll use the X tool\" preamble lines (EN)\n    content = content.replace(/^I['']ll (?:use|call|invoke) the \\w[\\w\\s]* tool.*$/gm, '')\n    // Strip standalone tool name references (e.g. \"list_tasks\" on its own or at end of line)\n    content = content.replace(/\\b(list_tasks|get_overdue_tasks|search_tasks|get_daily_summary|get_timer_status|get_productivity_stats|suggest_next_task|get_weekly_summary|get_gamification_status|get_active_challenges|get_achievements_near_completion|list_projects|list_groups|create_task|update_task|delete_task|mark_task_done|start_timer|stop_timer|bulk_update_tasks|bulk_delete_tasks)\\b/g, '')\n    // Strip raw HTML tags that AI models may hallucinate (with html:false they appear as raw text)\n    content = content.replace(/<[^>]+>/g, '')\n    // Clean up extra blank lines left behind\n    content = content.replace(/\\n{3,}/g, '\\n\\n').trim()\n  }\n\n  if (!content) return ''\n\n  return md.render(content)\n})\n\n/**\n * Tool results extracted from metadata for display.\n * Includes full data for rich rendering (task lists, summaries, etc.)\n */\nconst toolResults = computed(() => {\n  const meta = props.message.metadata as any\n  if (!meta?.toolResults || !Array.isArray(meta.toolResults)) return []\n  return meta.toolResults as Array<{\n    tool: string\n    message: string\n    success: boolean\n    data?: any\n    type?: 'read' | 'write' | 'destructive'\n  }>\n})\n\n/**\n * Check if a tool result contains a task list that should be rendered as clickable items.\n */\nfunction isTaskListResult(result: { tool: string; data?: any }): boolean {\n  if (!result.data) return false\n  // Direct array of tasks\n  if (Array.isArray(result.data) && result.data.length > 0 && result.data[0]?.title) return true\n  // Daily summary with nested task arrays\n  if (result.data.dueTodayTasks?.length > 0 || result.data.overdueTasks?.length > 0) return true\n  return false\n}\n\nfunction getTasksFromResult(result: { tool: string; data?: any }): Array<{ id: string; title: string; dueDate?: string; priority?: string; status?: string; daysOverdue?: number }> {\n  if (!result.data) return []\n  // Direct array (get_overdue_tasks, list_tasks, search_tasks)\n  if (Array.isArray(result.data)) return result.data\n  // Daily summary — merge overdue + due today\n  const tasks: any[] = []\n  if (result.data.overdueTasks) tasks.push(...result.data.overdueTasks)\n  if (result.data.dueTodayTasks) tasks.push(...result.data.dueTodayTasks)\n  return tasks\n}\n\n/**\n * Check if a tool result is a daily summary with stats to render as a rich card.\n */\nfunction isDailySummaryResult(result: { tool: string; data?: any }): boolean {\n  return result.tool === 'get_daily_summary' && result.data && typeof result.data.totalTasks === 'number'\n}\n\n/**\n * Gamification & productivity tool result detection helpers\n */\n\nfunction isGamificationStatusResult(result: { tool: string; data?: any }): boolean {\n  return result.tool === 'get_gamification_status' && result.data && typeof result.data.level === 'number'\n}\n\nfunction isActiveChallengesResult(result: { tool: string; data?: any }): boolean {\n  return result.tool === 'get_active_challenges' && result.data && Array.isArray(result.data.dailies)\n}\n\nfunction isAchievementsNearResult(result: { tool: string; data?: any }): boolean {\n  return result.tool === 'get_achievements_near_completion' && Array.isArray(result.data)\n}\n\nfunction isProductivityStatsResult(result: { tool: string; data?: any }): boolean {\n  return result.tool === 'get_productivity_stats' && result.data && typeof result.data.totalTasks === 'number'\n}\n\nfunction isSuggestNextTaskResult(result: { tool: string; data?: any }): boolean {\n  return result.tool === 'suggest_next_task' && Array.isArray(result.data)\n}\n\nfunction isWeeklySummaryResult(result: { tool: string; data?: any }): boolean {\n  return result.tool === 'get_weekly_summary' && result.data && typeof result.data.completedThisWeek === 'number'\n}\n\nfunction isWeeklyPlanResult(result: { tool: string; data?: any }): boolean {\n  return result.tool === 'generate_weekly_plan' && result.data && result.data.plan\n}\n\nconst PLAN_DAY_LABELS: Record<string, string> = {\n  monday: 'Monday', tuesday: 'Tuesday', wednesday: 'Wednesday',\n  thursday: 'Thursday', friday: 'Friday', saturday: 'Saturday', sunday: 'Sunday',\n}\n\nfunction formatMinutes(minutes: number): string {\n  if (minutes < 60) return `${minutes}m`\n  const h = Math.floor(minutes / 60)\n  const m = minutes % 60\n  return m > 0 ? `${h}h ${m}m` : `${h}h`\n}\n\nfunction formatTimeRemaining(minutes: number): string {\n  if (minutes < 60) return `${minutes}m left`\n  const h = Math.floor(minutes / 60)\n  const m = minutes % 60\n  return m > 0 ? `${h}h ${m}m left` : `${h}h left`\n}\n\nfunction tierColor(tier?: string): string {\n  switch (tier) {\n    case 'bronze': return '#cd7f32'\n    case 'silver': return '#c0c0c0'\n    case 'gold': return '#ffd700'\n    case 'platinum': return '#e5e4e2'\n    default: return 'var(--text-secondary, rgba(255,255,255,0.6))'\n  }\n}\n\nfunction priorityColor(priority?: string): string {\n  switch (priority) {\n    case 'urgent': return '#ef4444'\n    case 'high': return '#f97316'\n    case 'medium': return '#eab308'\n    case 'low': return '#22c55e'\n    default: return 'rgba(255,255,255,0.4)'\n  }\n}\n\n// ============================================================================\n// Quick-Edit Popover\n// ============================================================================\n\n// Collapse long task lists — show max 3, expandable\nconst MAX_VISIBLE_TASKS = 3\nconst expandedSections = ref<Set<string>>(new Set())\n\nfunction toggleSection(key: string) {\n  if (expandedSections.value.has(key)) {\n    expandedSections.value.delete(key)\n  } else {\n    expandedSections.value.add(key)\n  }\n}\n\nfunction visibleTasks(tasks: any[], sectionKey: string): any[] {\n  if (expandedSections.value.has(sectionKey) || tasks.length <= MAX_VISIBLE_TASKS) return tasks\n  return tasks.slice(0, MAX_VISIBLE_TASKS)\n}\n\nconst quickEditTask = ref<{ id: string; title: string; priority?: string | null; status?: string; dueDate?: string | null; estimatedDuration?: number | null } | null>(null)\nconst quickEditPos = ref({ x: 0, y: 0 })\nconst quickEditPosition = ref<'left' | 'auto'>('left')\n\nfunction openQuickEdit(task: any, event: MouseEvent) {\n  event.stopPropagation()\n  quickEditTask.value = {\n    id: task.id,\n    title: task.title || '(untitled)',\n    priority: task.priority || null,\n    status: task.status || 'planned',\n    dueDate: task.dueDate || null,\n    estimatedDuration: task.estimatedDuration || null,\n  }\n  const panel = document.querySelector('.ai-chat-panel')\n  const isFullscreen = panel?.classList.contains('panel-fullscreen')\n  if (isFullscreen || !panel) {\n    // Fullscreen or no panel: position at click point with auto layout\n    quickEditPos.value = { x: event.clientX, y: event.clientY }\n    quickEditPosition.value = 'auto'\n  } else {\n    // Compact/expanded: position to the left of the panel\n    const panelRect = panel.getBoundingClientRect()\n    quickEditPos.value = { x: panelRect.left, y: event.clientY }\n    quickEditPosition.value = 'left'\n  }\n}\n\nfunction closeQuickEdit() {\n  quickEditTask.value = null\n}\n\nfunction openFullEditor() {\n  if (quickEditTask.value) {\n    emit('selectTask', quickEditTask.value.id)\n  }\n  closeQuickEdit()\n}\n\n// ============================================================================\n// Actions\n// ============================================================================\n\nasync function handleAction(action: ChatAction) {\n  if (loadingActions.value.has(action.id)) return\n  if (action.completed) return\n\n  loadingActions.value.add(action.id)\n\n  try {\n    await action.handler()\n    action.completed = true\n  } catch (err) {\n    console.error('[ChatMessage] Action failed:', err)\n  } finally {\n    loadingActions.value.delete(action.id)\n  }\n}\n\nfunction isActionLoading(action: ChatAction): boolean {\n  return loadingActions.value.has(action.id)\n}\n\nasync function copyMessage() {\n  try {\n    await navigator.clipboard.writeText(props.message.content || '')\n    copied.value = true\n    setTimeout(() => { copied.value = false }, 2000)\n  } catch (err) {\n    console.error('[ChatMessage] Copy failed:', err)\n  }\n}\n\nfunction toolIcon(type?: string) {\n  switch (type) {\n    case 'write': return PenLine\n    case 'destructive': return Trash2\n    default: return Zap\n  }\n}\n\nasync function markTaskDone(taskId: string, event: MouseEvent) {\n  event.stopPropagation() // Don't open popover\n  if (actionLoading.value[taskId]) return\n\n  actionLoading.value[taskId] = 'done'\n  try {\n    await executeTool({ tool: 'update_task', parameters: { taskId, updates: { status: 'done' } } })\n    completedTaskIds.value.add(taskId)\n  } catch (err) {\n    console.error('[ChatMessage] Mark done failed:', err)\n  } finally {\n    delete actionLoading.value[taskId]\n  }\n}\n\nasync function startTaskTimer(taskId: string, event: MouseEvent) {\n  event.stopPropagation() // Don't open popover\n  if (actionLoading.value[taskId]) return\n\n  actionLoading.value[taskId] = 'timer'\n  try {\n    await executeTool({ tool: 'start_timer', parameters: { taskId } })\n    timerStartedTaskIds.value.add(taskId)\n  } catch (err) {\n    console.error('[ChatMessage] Start timer failed:', err)\n  } finally {\n    delete actionLoading.value[taskId]\n  }\n}\n</script>\n\n<template>\n  <div\n    class=\"chat-message\"\n    :class=\"{\n      'message-user': isUser,\n      'message-assistant': isAssistant,\n      'message-streaming': isStreaming,\n      'message-error': hasError\n    }\"\n  >\n    <!-- Avatar -->\n    <div class=\"message-avatar\">\n      <User v-if=\"isUser\" :size=\"16\" />\n      <Sparkles v-else :size=\"16\" />\n    </div>\n\n    <!-- Content -->\n    <div class=\"message-content\">\n      <!-- Thinking Indicator -->\n      <div v-if=\"isThinking\" class=\"thinking-indicator\">\n        <span class=\"thinking-dot\" />\n        <span class=\"thinking-dot\" />\n        <span class=\"thinking-dot\" />\n      </div>\n\n      <!-- Rendered Message Text -->\n      <div\n        v-else-if=\"renderedContent\"\n        class=\"message-text markdown-body\"\n        dir=\"auto\"\n        v-html=\"renderedContent\"\n      />\n\n      <!-- Streaming cursor (when there IS content) -->\n      <span v-if=\"isStreaming && !isThinking && renderedContent\" class=\"cursor-blink\">|</span>\n\n      <!-- Tool Results -->\n      <div v-if=\"toolResults.length > 0 && !isStreaming\" class=\"tool-results\">\n        <template v-for=\"(result, idx) in toolResults\" :key=\"idx\">\n          <!-- Daily summary stats card -->\n          <div v-if=\"isDailySummaryResult(result)\" class=\"tool-result-card\">\n            <div class=\"tool-result-header tool-read\">\n              <component :is=\"toolIcon(result.type)\" :size=\"14\" class=\"tool-result-icon\" />\n              <span class=\"tool-result-title\">{{ result.message }}</span>\n            </div>\n            <div class=\"summary-stats-grid\">\n              <div class=\"summary-stat\">\n                <span class=\"summary-stat-value\">{{ result.data.totalTasks }}</span>\n                <span class=\"summary-stat-label\">Total</span>\n              </div>\n              <div class=\"summary-stat\">\n                <span class=\"summary-stat-value\">{{ result.data.inProgress }}</span>\n                <span class=\"summary-stat-label\">In Progress</span>\n              </div>\n              <div class=\"summary-stat\">\n                <span class=\"summary-stat-value summary-stat-success\">{{ result.data.completedToday }}</span>\n                <span class=\"summary-stat-label\">Done Today</span>\n              </div>\n              <div class=\"summary-stat\">\n                <span class=\"summary-stat-value\">{{ result.data.dueToday }}</span>\n                <span class=\"summary-stat-label\">Due Today</span>\n              </div>\n              <div class=\"summary-stat\">\n                <span class=\"summary-stat-value\" :class=\"{ 'summary-stat-danger': result.data.overdueCount > 0 }\">{{ result.data.overdueCount }}</span>\n                <span class=\"summary-stat-label\">Overdue</span>\n              </div>\n              <div class=\"summary-stat\">\n                <span class=\"summary-stat-value\">{{ result.data.timerSessionsCompleted }}</span>\n                <span class=\"summary-stat-label\">Pomodoros</span>\n              </div>\n            </div>\n            <!-- Overdue task list if any -->\n            <div v-if=\"result.data.overdueTasks?.length > 0\" class=\"task-list\">\n              <div class=\"summary-section-label\">\n                Overdue Tasks\n                <span class=\"section-count\">({{ result.data.overdueTasks.length }})</span>\n              </div>\n              <button\n                v-for=\"task in visibleTasks(result.data.overdueTasks, 'overdue-' + result.tool)\"\n                :key=\"task.id\"\n                class=\"task-list-item\"\n                :class=\"{ 'task-completed': completedTaskIds.has(task.id) }\"\n                @click=\"openQuickEdit(task, $event)\"\n              >\n                <span\n                  class=\"task-priority-dot\"\n                  :style=\"{ background: '#ef4444' }\"\n                />\n                <span class=\"task-title\" dir=\"auto\">{{ task.title || '(untitled)' }}</span>\n                <div class=\"task-meta-row\">\n                  <span v-if=\"task.dueDate\" class=\"task-due-date\">{{ formatRelativeDate(task.dueDate) }}</span>\n                </div>\n                <div class=\"task-inline-actions\" @click.stop>\n                  <button\n                    v-if=\"!completedTaskIds.has(task.id)\"\n                    class=\"inline-action-btn inline-done-btn\"\n                    :class=\"{ loading: actionLoading[task.id] === 'done' }\"\n                    title=\"Mark done\"\n                    @click=\"markTaskDone(task.id, $event)\"\n                  >\n                    <Loader2 v-if=\"actionLoading[task.id] === 'done'\" :size=\"12\" class=\"spin\" />\n                    <CheckCircle2 v-else :size=\"12\" />\n                  </button>\n                  <button\n                    v-if=\"!timerStartedTaskIds.has(task.id)\"\n                    class=\"inline-action-btn inline-timer-btn\"\n                    :class=\"{ loading: actionLoading[task.id] === 'timer' }\"\n                    title=\"Start timer\"\n                    @click=\"startTaskTimer(task.id, $event)\"\n                  >\n                    <Loader2 v-if=\"actionLoading[task.id] === 'timer'\" :size=\"12\" class=\"spin\" />\n                    <Play v-else :size=\"12\" />\n                  </button>\n                  <span v-if=\"completedTaskIds.has(task.id)\" class=\"inline-action-done-badge\">\n                    <CheckCircle2 :size=\"12\" /> Done\n                  </span>\n                  <span v-if=\"timerStartedTaskIds.has(task.id)\" class=\"inline-action-timer-badge\">\n                    <Play :size=\"12\" /> Timer started\n                  </span>\n                </div>\n              </button>\n              <button\n                v-if=\"result.data.overdueTasks.length > MAX_VISIBLE_TASKS\"\n                class=\"show-more-btn\"\n                @click=\"toggleSection('overdue-' + result.tool)\"\n              >\n                {{ expandedSections.has('overdue-' + result.tool)\n                  ? 'Show less'\n                  : `Show all ${result.data.overdueTasks.length} overdue tasks` }}\n              </button>\n            </div>\n            <!-- Due today task list if any -->\n            <div v-if=\"result.data.dueTodayTasks?.length > 0\" class=\"task-list\">\n              <div class=\"summary-section-label\">\n                Due Today\n                <span class=\"section-count\">({{ result.data.dueTodayTasks.length }})</span>\n              </div>\n              <button\n                v-for=\"task in visibleTasks(result.data.dueTodayTasks, 'duetoday-' + result.tool)\"\n                :key=\"task.id\"\n                class=\"task-list-item\"\n                :class=\"{ 'task-completed': completedTaskIds.has(task.id) }\"\n                @click=\"openQuickEdit(task, $event)\"\n              >\n                <span\n                  class=\"task-priority-dot\"\n                  :style=\"{ background: priorityColor(task.priority) }\"\n                />\n                <span class=\"task-title\" dir=\"auto\">{{ task.title || '(untitled)' }}</span>\n                <div class=\"task-meta-row\">\n                  <span\n                    v-if=\"task.status\"\n                    class=\"task-status-badge\"\n                    :class=\"'status-' + task.status\"\n                  >{{ task.status }}</span>\n                </div>\n                <div class=\"task-inline-actions\" @click.stop>\n                  <button\n                    v-if=\"!completedTaskIds.has(task.id)\"\n                    class=\"inline-action-btn inline-done-btn\"\n                    :class=\"{ loading: actionLoading[task.id] === 'done' }\"\n                    title=\"Mark done\"\n                    @click=\"markTaskDone(task.id, $event)\"\n                  >\n                    <Loader2 v-if=\"actionLoading[task.id] === 'done'\" :size=\"12\" class=\"spin\" />\n                    <CheckCircle2 v-else :size=\"12\" />\n                  </button>\n                  <button\n                    v-if=\"!timerStartedTaskIds.has(task.id)\"\n                    class=\"inline-action-btn inline-timer-btn\"\n                    :class=\"{ loading: actionLoading[task.id] === 'timer' }\"\n                    title=\"Start timer\"\n                    @click=\"startTaskTimer(task.id, $event)\"\n                  >\n                    <Loader2 v-if=\"actionLoading[task.id] === 'timer'\" :size=\"12\" class=\"spin\" />\n                    <Play v-else :size=\"12\" />\n                  </button>\n                  <span v-if=\"completedTaskIds.has(task.id)\" class=\"inline-action-done-badge\">\n                    <CheckCircle2 :size=\"12\" /> Done\n                  </span>\n                  <span v-if=\"timerStartedTaskIds.has(task.id)\" class=\"inline-action-timer-badge\">\n                    <Play :size=\"12\" /> Timer started\n                  </span>\n                </div>\n              </button>\n              <button\n                v-if=\"result.data.dueTodayTasks.length > MAX_VISIBLE_TASKS\"\n                class=\"show-more-btn\"\n                @click=\"toggleSection('duetoday-' + result.tool)\"\n              >\n                {{ expandedSections.has('duetoday-' + result.tool)\n                  ? 'Show less'\n                  : `Show all ${result.data.dueTodayTasks.length} tasks` }}\n              </button>\n            </div>\n          </div>\n          <!-- Gamification Status Card -->\n          <div v-else-if=\"isGamificationStatusResult(result)\" class=\"tool-result-card gamification-card\">\n            <div class=\"tool-result-header tool-read\">\n              <Trophy :size=\"14\" class=\"tool-result-icon\" />\n              <span class=\"tool-result-title\">{{ result.message }}</span>\n            </div>\n            <div class=\"gam-profile-row\">\n              <div class=\"gam-level-badge\">\n                <span class=\"gam-level-number\">{{ result.data.level }}</span>\n                <span class=\"gam-level-label\">LEVEL</span>\n              </div>\n              <div class=\"gam-xp-section\">\n                <div class=\"gam-xp-bar-wrapper\">\n                  <div class=\"gam-xp-bar\" :style=\"{ width: result.data.levelProgress + '%' }\" />\n                </div>\n                <div class=\"gam-xp-text\">\n                  {{ result.data.totalXp }} XP &middot; {{ result.data.xpToNextLevel }} to next\n                </div>\n              </div>\n            </div>\n            <div class=\"gam-stats-row\">\n              <div class=\"gam-stat\">\n                <Flame :size=\"14\" class=\"gam-stat-icon gam-streak-icon\" />\n                <span class=\"gam-stat-value\">{{ result.data.currentStreak }}</span>\n                <span class=\"gam-stat-label\">Streak</span>\n              </div>\n              <div class=\"gam-stat\">\n                <Shield :size=\"14\" class=\"gam-stat-icon gam-corruption-icon\" :class=\"{ 'gam-corruption-high': result.data.corruptionLevel > 60 }\" />\n                <span class=\"gam-stat-value\">{{ result.data.corruptionLevel }}%</span>\n                <span class=\"gam-stat-label\">Corruption</span>\n              </div>\n              <div class=\"gam-stat\">\n                <Trophy :size=\"14\" class=\"gam-stat-icon gam-achievement-icon\" />\n                <span class=\"gam-stat-value\">{{ result.data.achievementsEarned }}/{{ result.data.achievementsTotal }}</span>\n                <span class=\"gam-stat-label\">Achievements</span>\n              </div>\n            </div>\n            <div v-if=\"result.data.streakAtRisk\" class=\"gam-warning\">\n              Streak at risk! Complete a task today to keep your {{ result.data.currentStreak }}-day streak.\n            </div>\n          </div>\n\n          <!-- Active Challenges Card -->\n          <div v-else-if=\"isActiveChallengesResult(result)\" class=\"tool-result-card challenges-card\">\n            <div class=\"tool-result-header tool-read\">\n              <Swords :size=\"14\" class=\"tool-result-icon\" />\n              <span class=\"tool-result-title\">{{ result.message }}</span>\n            </div>\n            <!-- Daily Challenges -->\n            <div v-if=\"result.data.dailies.length > 0\" class=\"challenge-section\">\n              <div class=\"summary-section-label\">\n                Daily Missions\n              </div>\n              <div\n                v-for=\"ch in result.data.dailies\"\n                :key=\"ch.id\"\n                class=\"challenge-item\"\n              >\n                <div class=\"challenge-header\">\n                  <span class=\"challenge-title\" dir=\"auto\">{{ ch.title }}</span>\n                  <span class=\"challenge-difficulty\" :class=\"'diff-' + ch.difficulty\">{{ ch.difficulty }}</span>\n                </div>\n                <div v-if=\"ch.narrativeFlavor\" class=\"challenge-flavor\" dir=\"auto\">\n                  {{ ch.narrativeFlavor }}\n                </div>\n                <div class=\"challenge-progress-row\">\n                  <div class=\"challenge-progress-bar-wrapper\">\n                    <div\n                      class=\"challenge-progress-bar\"\n                      :style=\"{ width: ch.progressPercent + '%' }\"\n                      :class=\"{ 'bar-complete': ch.progressPercent >= 100 }\"\n                    />\n                  </div>\n                  <span class=\"challenge-progress-text\">{{ ch.objectiveCurrent }}/{{ ch.objectiveTarget }}</span>\n                </div>\n                <div class=\"challenge-meta\">\n                  <span class=\"challenge-reward\">+{{ ch.rewardXp }} XP</span>\n                  <span class=\"challenge-time\">{{ formatTimeRemaining(ch.timeRemaining) }}</span>\n                </div>\n              </div>\n            </div>\n            <!-- Boss Fight -->\n            <div v-if=\"result.data.boss\" class=\"challenge-section\">\n              <div class=\"summary-section-label\">\n                Boss Fight\n              </div>\n              <div class=\"challenge-item challenge-boss\">\n                <div class=\"challenge-header\">\n                  <span class=\"challenge-title boss-title\" dir=\"auto\">{{ result.data.boss.title }}</span>\n                  <span class=\"challenge-difficulty diff-boss\">BOSS</span>\n                </div>\n                <div v-if=\"result.data.boss.narrativeFlavor\" class=\"challenge-flavor\" dir=\"auto\">\n                  {{ result.data.boss.narrativeFlavor }}\n                </div>\n                <div class=\"challenge-progress-row\">\n                  <div class=\"challenge-progress-bar-wrapper boss-bar-wrapper\">\n                    <div\n                      class=\"challenge-progress-bar boss-bar\"\n                      :style=\"{ width: result.data.boss.progressPercent + '%' }\"\n                    />\n                  </div>\n                  <span class=\"challenge-progress-text\">{{ result.data.boss.objectiveCurrent }}/{{ result.data.boss.objectiveTarget }}</span>\n                </div>\n                <div class=\"challenge-meta\">\n                  <span class=\"challenge-reward boss-reward\">+{{ result.data.boss.rewardXp }} XP</span>\n                  <span class=\"challenge-time\">{{ formatTimeRemaining(result.data.boss.timeRemaining) }}</span>\n                </div>\n              </div>\n            </div>\n            <div v-if=\"result.data.dailies.length === 0 && !result.data.boss\" class=\"gam-empty\">\n              No active challenges. New dailies generate each morning.\n            </div>\n          </div>\n\n          <!-- Achievements Near Completion Card -->\n          <div v-else-if=\"isAchievementsNearResult(result)\" class=\"tool-result-card achievements-card\">\n            <div class=\"tool-result-header tool-read\">\n              <Target :size=\"14\" class=\"tool-result-icon\" />\n              <span class=\"tool-result-title\">{{ result.message }}</span>\n            </div>\n            <div v-if=\"result.data.length === 0\" class=\"gam-empty\">\n              No achievements close to completion yet. Keep going!\n            </div>\n            <div\n              v-for=\"ach in result.data\"\n              :key=\"ach.id\"\n              class=\"achievement-item\"\n            >\n              <div class=\"achievement-header\">\n                <span class=\"achievement-tier-dot\" :style=\"{ background: tierColor(ach.tier) }\" />\n                <span class=\"achievement-name\">{{ ach.name }}</span>\n                <span class=\"achievement-percent\">{{ ach.progressPercent }}%</span>\n              </div>\n              <div class=\"achievement-desc\">\n                {{ ach.description }}\n              </div>\n              <div class=\"achievement-progress-row\">\n                <div class=\"achievement-bar-wrapper\">\n                  <div\n                    class=\"achievement-bar\"\n                    :style=\"{ width: ach.progressPercent + '%', background: tierColor(ach.tier) }\"\n                  />\n                </div>\n                <span class=\"achievement-remaining\">{{ ach.remaining }} left</span>\n              </div>\n              <span class=\"achievement-reward\">+{{ ach.xpReward }} XP</span>\n            </div>\n          </div>\n\n          <!-- Productivity Stats Card -->\n          <div v-else-if=\"isProductivityStatsResult(result)\" class=\"tool-result-card\">\n            <div class=\"tool-result-header tool-read\">\n              <TrendingUp :size=\"14\" class=\"tool-result-icon\" />\n              <span class=\"tool-result-title\">{{ result.message }}</span>\n            </div>\n            <div class=\"summary-stats-grid\">\n              <div class=\"summary-stat\">\n                <span class=\"summary-stat-value summary-stat-success\">{{ result.data.completedToday }}</span>\n                <span class=\"summary-stat-label\">Done Today</span>\n              </div>\n              <div class=\"summary-stat\">\n                <span class=\"summary-stat-value\">{{ result.data.totalTasks }}</span>\n                <span class=\"summary-stat-label\">Total Tasks</span>\n              </div>\n              <div class=\"summary-stat\">\n                <span class=\"summary-stat-value\" :class=\"{ 'summary-stat-danger': result.data.overdueCount > 0 }\">{{ result.data.overdueCount }}</span>\n                <span class=\"summary-stat-label\">Overdue</span>\n              </div>\n              <div class=\"summary-stat\">\n                <span class=\"summary-stat-value\">{{ result.data.pomodorosToday }}</span>\n                <span class=\"summary-stat-label\">Pomodoros</span>\n              </div>\n              <div v-if=\"result.data.totalFocusMinutes != null\" class=\"summary-stat\">\n                <span class=\"summary-stat-value\">{{ formatMinutes(result.data.totalFocusMinutes) }}</span>\n                <span class=\"summary-stat-label\">Focus Time</span>\n              </div>\n              <div v-if=\"result.data.currentStreak != null\" class=\"summary-stat\">\n                <span class=\"summary-stat-value\">{{ result.data.currentStreak }}d</span>\n                <span class=\"summary-stat-label\">Streak</span>\n              </div>\n            </div>\n          </div>\n\n          <!-- Suggest Next Task Card -->\n          <div v-else-if=\"isSuggestNextTaskResult(result)\" class=\"tool-result-card\">\n            <div class=\"tool-result-header tool-read\">\n              <TrendingUp :size=\"14\" class=\"tool-result-icon\" />\n              <span class=\"tool-result-title\">{{ result.message }}</span>\n            </div>\n            <div v-if=\"result.data.length === 0\" class=\"gam-empty\">\n              No suggestions available. All tasks are done!\n            </div>\n            <div class=\"task-list\">\n              <button\n                v-for=\"(task, taskIdx) in result.data\"\n                :key=\"task.id\"\n                class=\"task-list-item suggest-item\"\n                :class=\"{ 'task-completed': completedTaskIds.has(task.id) }\"\n                @click=\"openQuickEdit(task, $event)\"\n              >\n                <span class=\"suggest-rank\">{{ Number(taskIdx) + 1 }}</span>\n                <span class=\"task-title\" dir=\"auto\">{{ task.title }}</span>\n                <div class=\"task-meta-row\">\n                  <span\n                    class=\"task-priority-dot\"\n                    :style=\"{ background: priorityColor(task.priority) }\"\n                  />\n                  <span class=\"suggest-reason\" :class=\"'reason-' + task.reason.replace(/\\s+/g, '-')\">{{ task.reason }}</span>\n                  <span v-if=\"task.dueDate\" class=\"task-due-date\">{{ formatRelativeDate(task.dueDate) }}</span>\n                </div>\n                <div class=\"task-inline-actions\" @click.stop>\n                  <button\n                    v-if=\"!completedTaskIds.has(task.id)\"\n                    class=\"inline-action-btn inline-done-btn\"\n                    :class=\"{ loading: actionLoading[task.id] === 'done' }\"\n                    title=\"Mark done\"\n                    @click=\"markTaskDone(task.id, $event)\"\n                  >\n                    <Loader2 v-if=\"actionLoading[task.id] === 'done'\" :size=\"12\" class=\"spin\" />\n                    <CheckCircle2 v-else :size=\"12\" />\n                  </button>\n                  <button\n                    v-if=\"!timerStartedTaskIds.has(task.id)\"\n                    class=\"inline-action-btn inline-timer-btn\"\n                    :class=\"{ loading: actionLoading[task.id] === 'timer' }\"\n                    title=\"Start timer\"\n                    @click=\"startTaskTimer(task.id, $event)\"\n                  >\n                    <Loader2 v-if=\"actionLoading[task.id] === 'timer'\" :size=\"12\" class=\"spin\" />\n                    <Play v-else :size=\"12\" />\n                  </button>\n                  <span v-if=\"completedTaskIds.has(task.id)\" class=\"inline-action-done-badge\">\n                    <CheckCircle2 :size=\"12\" /> Done\n                  </span>\n                  <span v-if=\"timerStartedTaskIds.has(task.id)\" class=\"inline-action-timer-badge\">\n                    <Play :size=\"12\" /> Timer started\n                  </span>\n                </div>\n              </button>\n            </div>\n          </div>\n\n          <!-- Weekly Summary Card -->\n          <div v-else-if=\"isWeeklySummaryResult(result)\" class=\"tool-result-card\">\n            <div class=\"tool-result-header tool-read\">\n              <TrendingUp :size=\"14\" class=\"tool-result-icon\" />\n              <span class=\"tool-result-title\">{{ result.message }}</span>\n            </div>\n            <div class=\"summary-stats-grid\">\n              <div class=\"summary-stat\">\n                <span class=\"summary-stat-value summary-stat-success\">{{ result.data.completedThisWeek }}</span>\n                <span class=\"summary-stat-label\">Done This Week</span>\n              </div>\n              <div class=\"summary-stat\">\n                <span class=\"summary-stat-value\">{{ result.data.remainingTasks }}</span>\n                <span class=\"summary-stat-label\">Remaining</span>\n              </div>\n              <div v-if=\"result.data.level != null\" class=\"summary-stat\">\n                <span class=\"summary-stat-value\">Lv.{{ result.data.level }}</span>\n                <span class=\"summary-stat-label\">Level</span>\n              </div>\n              <div v-if=\"result.data.currentStreak != null\" class=\"summary-stat\">\n                <span class=\"summary-stat-value\">{{ result.data.currentStreak }}d</span>\n                <span class=\"summary-stat-label\">Streak</span>\n              </div>\n              <div v-if=\"result.data.focusMinutes != null\" class=\"summary-stat\">\n                <span class=\"summary-stat-value\">{{ formatMinutes(result.data.focusMinutes) }}</span>\n                <span class=\"summary-stat-label\">Focus Time</span>\n              </div>\n              <div v-if=\"result.data.totalXp != null\" class=\"summary-stat\">\n                <span class=\"summary-stat-value\">{{ result.data.totalXp }}</span>\n                <span class=\"summary-stat-label\">Total XP</span>\n              </div>\n            </div>\n            <!-- Challenge info if available -->\n            <div v-if=\"result.data.challenges\" class=\"gam-footer-row\">\n              <span v-if=\"result.data.challenges.completedToday > 0\" class=\"gam-footer-badge gam-badge-success\">\n                {{ result.data.challenges.completedToday }} challenges done today\n              </span>\n              <span v-if=\"result.data.challenges.corruptionLevel > 0\" class=\"gam-footer-badge gam-badge-corruption\">\n                Corruption: {{ result.data.challenges.corruptionLevel }}%\n              </span>\n            </div>\n          </div>\n\n          <!-- Weekly Plan Card -->\n          <div v-else-if=\"isWeeklyPlanResult(result)\" class=\"tool-result-card weekly-plan-card\">\n            <div class=\"tool-result-header tool-read\">\n              <CalendarDays :size=\"14\" class=\"tool-result-icon\" />\n              <span class=\"tool-result-title\">{{ result.message }}</span>\n            </div>\n            <div class=\"summary-stats-grid\">\n              <div class=\"summary-stat\">\n                <span class=\"summary-stat-value summary-stat-success\">{{ result.data.totalScheduled }}</span>\n                <span class=\"summary-stat-label\">Scheduled</span>\n              </div>\n              <div class=\"summary-stat\">\n                <span class=\"summary-stat-value\">{{ result.data.daysUsed }}</span>\n                <span class=\"summary-stat-label\">Days Used</span>\n              </div>\n              <div class=\"summary-stat\">\n                <span class=\"summary-stat-value\" :class=\"{ 'summary-stat-danger': result.data.unscheduled?.length > 0 }\">{{ result.data.unscheduled?.length || 0 }}</span>\n                <span class=\"summary-stat-label\">Unscheduled</span>\n              </div>\n            </div>\n            <template v-for=\"(dayKey) in ['monday','tuesday','wednesday','thursday','friday','saturday','sunday']\" :key=\"dayKey\">\n              <div v-if=\"result.data.plan[dayKey]?.length > 0\" class=\"task-list\">\n                <div class=\"summary-section-label\">\n                  {{ PLAN_DAY_LABELS[dayKey] }}\n                  <span class=\"section-count\">({{ result.data.plan[dayKey].length }})</span>\n                </div>\n                <button\n                  v-for=\"task in result.data.plan[dayKey]\"\n                  :key=\"task.id\"\n                  class=\"task-list-item\"\n                  :class=\"{ 'task-completed': completedTaskIds.has(task.id) }\"\n                  @click=\"openQuickEdit(task, $event)\"\n                >\n                  <span\n                    class=\"task-priority-dot\"\n                    :style=\"{ background: priorityColor(task.priority) }\"\n                  />\n                  <span class=\"task-title\" dir=\"auto\">{{ task.title }}</span>\n                  <div class=\"task-inline-actions\" @click.stop>\n                    <button\n                      v-if=\"!completedTaskIds.has(task.id)\"\n                      class=\"inline-action-btn inline-done-btn\"\n                      :class=\"{ loading: actionLoading[task.id] === 'done' }\"\n                      title=\"Mark done\"\n                      @click=\"markTaskDone(task.id, $event)\"\n                    >\n                      <Loader2 v-if=\"actionLoading[task.id] === 'done'\" :size=\"12\" class=\"spin\" />\n                      <CheckCircle2 v-else :size=\"12\" />\n                    </button>\n                    <button\n                      v-if=\"!timerStartedTaskIds.has(task.id)\"\n                      class=\"inline-action-btn inline-timer-btn\"\n                      :class=\"{ loading: actionLoading[task.id] === 'timer' }\"\n                      title=\"Start timer\"\n                      @click=\"startTaskTimer(task.id, $event)\"\n                    >\n                      <Loader2 v-if=\"actionLoading[task.id] === 'timer'\" :size=\"12\" class=\"spin\" />\n                      <Play v-else :size=\"12\" />\n                    </button>\n                    <span v-if=\"completedTaskIds.has(task.id)\" class=\"inline-action-done-badge\">\n                      <CheckCircle2 :size=\"12\" /> Done\n                    </span>\n                    <span v-if=\"timerStartedTaskIds.has(task.id)\" class=\"inline-action-timer-badge\">\n                      <Play :size=\"12\" /> Timer started\n                    </span>\n                  </div>\n                </button>\n              </div>\n            </template>\n            <div v-if=\"result.data.unscheduled?.length > 0\" class=\"task-list\">\n              <div class=\"summary-section-label\">\n                Unscheduled\n                <span class=\"section-count\">({{ result.data.unscheduled.length }})</span>\n              </div>\n              <button\n                v-for=\"task in result.data.unscheduled\"\n                :key=\"task.id\"\n                class=\"task-list-item task-unscheduled\"\n                @click=\"openQuickEdit(task, $event)\"\n              >\n                <span\n                  class=\"task-priority-dot\"\n                  :style=\"{ background: priorityColor(task.priority) }\"\n                />\n                <span class=\"task-title\" dir=\"auto\">{{ task.title }}</span>\n              </button>\n            </div>\n            <div v-if=\"result.data.reasoning\" class=\"plan-reasoning\">\n              {{ result.data.reasoning }}\n            </div>\n          </div>\n\n          <!-- Rich task list for read tools that return tasks -->\n          <div v-else-if=\"isTaskListResult(result)\" class=\"tool-result-card\">\n            <div class=\"tool-result-header\" :class=\"'tool-' + (result.type || 'read')\">\n              <component :is=\"toolIcon(result.type)\" :size=\"14\" class=\"tool-result-icon\" />\n              <span class=\"tool-result-title\">{{ result.message }}</span>\n              <span v-if=\"getTasksFromResult(result).length > MAX_VISIBLE_TASKS\" class=\"section-count\">({{ getTasksFromResult(result).length }})</span>\n            </div>\n            <div class=\"task-list\">\n              <button\n                v-for=\"task in visibleTasks(getTasksFromResult(result), 'tasklist-' + result.tool)\"\n                :key=\"task.id\"\n                class=\"task-list-item\"\n                :class=\"{ 'task-completed': completedTaskIds.has(task.id) }\"\n                @click=\"openQuickEdit(task, $event)\"\n              >\n                <span\n                  class=\"task-priority-dot\"\n                  :style=\"{ background: priorityColor(task.priority) }\"\n                />\n                <span class=\"task-title\" dir=\"auto\">{{ task.title || '(untitled)' }}</span>\n                <div class=\"task-meta-row\">\n                  <span v-if=\"task.daysOverdue\" class=\"task-overdue-badge\">{{ task.daysOverdue }}d overdue</span>\n                  <span\n                    v-else-if=\"task.dueDate\"\n                    class=\"task-due-date\"\n                  >{{ formatRelativeDate(task.dueDate) }}</span>\n                  <span\n                    v-if=\"task.status\"\n                    class=\"task-status-badge\"\n                    :class=\"'status-' + task.status\"\n                  >{{ task.status }}</span>\n                </div>\n                <div class=\"task-inline-actions\" @click.stop>\n                  <button\n                    v-if=\"!completedTaskIds.has(task.id)\"\n                    class=\"inline-action-btn inline-done-btn\"\n                    :class=\"{ loading: actionLoading[task.id] === 'done' }\"\n                    title=\"Mark done\"\n                    @click=\"markTaskDone(task.id, $event)\"\n                  >\n                    <Loader2 v-if=\"actionLoading[task.id] === 'done'\" :size=\"12\" class=\"spin\" />\n                    <CheckCircle2 v-else :size=\"12\" />\n                  </button>\n                  <button\n                    v-if=\"!timerStartedTaskIds.has(task.id)\"\n                    class=\"inline-action-btn inline-timer-btn\"\n                    :class=\"{ loading: actionLoading[task.id] === 'timer' }\"\n                    title=\"Start timer\"\n                    @click=\"startTaskTimer(task.id, $event)\"\n                  >\n                    <Loader2 v-if=\"actionLoading[task.id] === 'timer'\" :size=\"12\" class=\"spin\" />\n                    <Play v-else :size=\"12\" />\n                  </button>\n                  <span v-if=\"completedTaskIds.has(task.id)\" class=\"inline-action-done-badge\">\n                    <CheckCircle2 :size=\"12\" /> Done\n                  </span>\n                  <span v-if=\"timerStartedTaskIds.has(task.id)\" class=\"inline-action-timer-badge\">\n                    <Play :size=\"12\" /> Timer started\n                  </span>\n                </div>\n              </button>\n              <button\n                v-if=\"getTasksFromResult(result).length > MAX_VISIBLE_TASKS\"\n                class=\"show-more-btn\"\n                @click=\"toggleSection('tasklist-' + result.tool)\"\n              >\n                {{ expandedSections.has('tasklist-' + result.tool)\n                  ? 'Show less'\n                  : `Show all ${getTasksFromResult(result).length} tasks` }}\n              </button>\n            </div>\n          </div>\n          <!-- Simple chip for write/destructive results or results without task data -->\n          <div v-else class=\"tool-result-chip\" :class=\"'tool-' + (result.type || 'read')\">\n            <component :is=\"toolIcon(result.type)\" :size=\"12\" class=\"tool-result-icon\" />\n            <span>{{ result.message }}</span>\n          </div>\n        </template>\n      </div>\n\n      <!-- Error -->\n      <div v-if=\"hasError\" class=\"message-error-text\">\n        {{ message.error }}\n      </div>\n\n      <!-- Actions -->\n      <div v-if=\"hasActions && !isStreaming\" class=\"message-actions\">\n        <button\n          v-for=\"action in message.actions\"\n          :key=\"action.id\"\n          class=\"action-btn\"\n          :class=\"{\n            'action-primary': action.variant === 'primary',\n            'action-secondary': action.variant === 'secondary',\n            'action-danger': action.variant === 'danger',\n            'action-completed': action.completed\n          }\"\n          :disabled=\"isActionLoading(action) || action.completed\"\n          @click=\"handleAction(action)\"\n        >\n          <Loader2\n            v-if=\"isActionLoading(action)\"\n            class=\"action-icon spin\"\n            :size=\"14\"\n          />\n          <Check\n            v-else-if=\"action.completed\"\n            class=\"action-icon\"\n            :size=\"14\"\n          />\n          <span>{{ action.label }}</span>\n        </button>\n      </div>\n\n      <!-- Metadata -->\n      <div v-if=\"message.metadata && !isStreaming\" class=\"message-meta\">\n        <span v-if=\"message.metadata.model\">{{ message.metadata.model }}</span>\n        <span v-if=\"message.metadata.latencyMs\">{{ message.metadata.latencyMs }}ms</span>\n      </div>\n    </div>\n\n    <!-- Copy Button (hover overlay) -->\n    <button\n      v-if=\"!isStreaming && message.content\"\n      class=\"copy-btn\"\n      :class=\"{ 'copy-success': copied }\"\n      :title=\"copied ? 'Copied!' : 'Copy message'\"\n      @click=\"copyMessage\"\n    >\n      <CheckCheck v-if=\"copied\" :size=\"14\" />\n      <Copy v-else :size=\"14\" />\n    </button>\n\n    <!-- Task Quick-Edit Popover -->\n    <TaskQuickEditPopover\n      :is-visible=\"!!quickEditTask\"\n      :task=\"quickEditTask\"\n      :x=\"quickEditPos.x\"\n      :y=\"quickEditPos.y\"\n      :position=\"quickEditPosition\"\n      @close=\"closeQuickEdit\"\n      @open-full-editor=\"openFullEditor\"\n    />\n  </div>\n</template>\n\n<style scoped>\n/* ============================================================================\n   Message Container\n   ============================================================================ */\n\n.chat-message {\n  display: flex;\n  gap: var(--space-3);\n  padding: var(--space-3);\n  padding-inline-end: calc(var(--space-3) + 36px); /* Reserve space for copy button */\n  border-radius: var(--radius-lg);\n  animation: fadeIn 0.2s ease;\n  position: relative;\n}\n\n.chat-message:hover .copy-btn {\n  opacity: 1;\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(var(--space-1));\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n/* ============================================================================\n   User Message\n   ============================================================================ */\n\n.message-user {\n  background: var(--purple-bg-subtle);\n  margin-inline-start: var(--space-4);\n}\n\n.message-user .message-avatar {\n  background: var(--color-focus);\n  color: white;\n}\n\n/* ============================================================================\n   Assistant Message\n   ============================================================================ */\n\n.message-assistant {\n  background: var(--glass-bg-weak);\n  margin-inline-end: var(--space-4);\n}\n\n.message-assistant .message-avatar {\n  background: linear-gradient(135deg, var(--color-focus), #06b6d4);\n  color: white;\n}\n\n/* ============================================================================\n   Avatar\n   ============================================================================ */\n\n.message-avatar {\n  width: 28px;\n  height: 28px;\n  border-radius: var(--radius-md);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n/* ============================================================================\n   Content\n   ============================================================================ */\n\n.message-content {\n  flex: 1;\n  min-width: 0;\n}\n\n.message-text {\n  color: var(--text-primary);\n  font-size: var(--text-sm);\n  line-height: 1.6;\n  word-break: break-word;\n}\n\n/* ============================================================================\n   Copy Button\n   ============================================================================ */\n\n.copy-btn {\n  position: absolute;\n  top: var(--space-2);\n  inset-inline-end: var(--space-2);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 28px;\n  height: 28px;\n  border: none;\n  background: var(--border-subtle);\n  color: var(--text-secondary);\n  border-radius: var(--radius-md);\n  cursor: pointer;\n  opacity: 0;\n  transition: opacity 0.15s ease, background 0.15s ease, color 0.15s ease;\n}\n\n.copy-btn:hover {\n  background: var(--border-medium);\n  color: var(--text-primary);\n}\n\n.copy-btn.copy-success {\n  opacity: 1;\n  color: var(--color-success);\n}\n\n/* ============================================================================\n   Thinking Indicator\n   ============================================================================ */\n\n.thinking-indicator {\n  display: flex;\n  gap: var(--space-1);\n  padding: var(--space-2) 0;\n}\n\n.thinking-dot {\n  width: var(--space-1_5);\n  height: var(--space-1_5);\n  border-radius: 50%;\n  background: var(--color-focus);\n  animation: thinking 1.4s ease-in-out infinite;\n}\n\n.thinking-dot:nth-child(2) {\n  animation-delay: 0.2s;\n}\n\n.thinking-dot:nth-child(3) {\n  animation-delay: 0.4s;\n}\n\n@keyframes thinking {\n  0%, 80%, 100% {\n    opacity: 0.3;\n    transform: scale(0.8);\n  }\n  40% {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n/* ============================================================================\n   Streaming Cursor\n   ============================================================================ */\n\n.cursor-blink {\n  animation: blink 1s step-end infinite;\n  color: var(--color-focus);\n  font-weight: bold;\n}\n\n@keyframes blink {\n  0%, 100% { opacity: 1; }\n  50% { opacity: 0; }\n}\n\n.message-streaming {\n  border: 1px solid var(--color-focus);\n  border-style: dashed;\n}\n\n/* ============================================================================\n   Markdown Styles\n   ============================================================================ */\n\n.markdown-body :deep(p) {\n  margin: 0 0 var(--space-2);\n}\n\n.markdown-body :deep(p:last-child) {\n  margin-bottom: 0;\n}\n\n.markdown-body :deep(h1),\n.markdown-body :deep(h2),\n.markdown-body :deep(h3),\n.markdown-body :deep(h4) {\n  color: var(--text-primary);\n  font-weight: var(--font-semibold);\n  margin: var(--space-3) 0 var(--space-2);\n}\n\n.markdown-body :deep(h1) { font-size: 1.25em; }\n.markdown-body :deep(h2) { font-size: 1.15em; }\n.markdown-body :deep(h3) { font-size: 1.05em; }\n.markdown-body :deep(h4) { font-size: 1em; }\n\n.markdown-body :deep(h1:first-child),\n.markdown-body :deep(h2:first-child),\n.markdown-body :deep(h3:first-child),\n.markdown-body :deep(h4:first-child) {\n  margin-top: 0;\n}\n\n.markdown-body :deep(ul),\n.markdown-body :deep(ol) {\n  padding-inline-start: var(--space-4);\n  margin: 0 0 var(--space-2);\n}\n\n.markdown-body :deep(li) {\n  margin-bottom: var(--space-1);\n}\n\n.markdown-body :deep(li:last-child) {\n  margin-bottom: 0;\n}\n\n.markdown-body :deep(code) {\n  background: var(--overlay-bg);\n  padding: 1px 5px;\n  border-radius: var(--radius-sm);\n  font-family: 'JetBrains Mono', 'Fira Code', monospace;\n  font-size: 0.9em;\n  color: var(--color-focus);\n}\n\n.markdown-body :deep(pre) {\n  background: var(--overlay-dark);\n  border: 1px solid var(--border-subtle);\n  border-radius: var(--radius-md);\n  padding: var(--space-3);\n  margin: var(--space-2) 0;\n  overflow-x: auto;\n}\n\n.markdown-body :deep(pre code) {\n  background: transparent;\n  padding: 0;\n  color: var(--text-primary);\n  font-size: var(--text-meta);\n  line-height: 1.5;\n}\n\n.markdown-body :deep(blockquote) {\n  border-inline-start: 3px solid var(--color-focus);\n  padding-inline-start: var(--space-3);\n  margin: var(--space-2) 0;\n  color: var(--text-secondary);\n  font-style: italic;\n}\n\n.markdown-body :deep(a) {\n  color: var(--color-focus);\n  text-decoration: none;\n}\n\n.markdown-body :deep(a:hover) {\n  text-decoration: underline;\n}\n\n.markdown-body :deep(strong) {\n  color: var(--text-primary);\n  font-weight: var(--font-semibold);\n}\n\n.markdown-body :deep(em) {\n  color: var(--text-secondary);\n}\n\n.markdown-body :deep(hr) {\n  border: none;\n  border-top: 1px solid var(--border-subtle);\n  margin: var(--space-3) 0;\n}\n\n.markdown-body :deep(table) {\n  width: 100%;\n  border-collapse: collapse;\n  margin: var(--space-2) 0;\n  font-size: var(--text-meta);\n}\n\n.markdown-body :deep(th),\n.markdown-body :deep(td) {\n  border: 1px solid var(--border-subtle);\n  padding: var(--space-1) var(--space-2);\n  text-align: inherit;\n}\n\n.markdown-body :deep(th) {\n  background: var(--overlay-dark);\n  font-weight: var(--font-semibold);\n}\n\n/* ============================================================================\n   Tool Result Chips\n   ============================================================================ */\n\n.tool-results {\n  display: flex;\n  flex-wrap: wrap;\n  gap: var(--space-1);\n  margin-top: var(--space-2);\n}\n\n.tool-result-chip {\n  display: inline-flex;\n  align-items: center;\n  gap: var(--space-1);\n  padding: var(--space-0_5) var(--space-2);\n  border-radius: var(--radius-full);\n  font-size: var(--text-xs);\n  font-weight: var(--font-medium);\n}\n\n.tool-read {\n  background: var(--blue-bg-light);\n  color: var(--status-planned-text);\n}\n\n.tool-write {\n  background: var(--success-bg-light);\n  color: var(--color-success-500);\n}\n\n.tool-destructive {\n  background: var(--danger-bg-light);\n  color: var(--color-priority-high);\n}\n\n.tool-result-icon {\n  flex-shrink: 0;\n}\n\n/* ============================================================================\n   Rich Tool Result Cards (task lists)\n   ============================================================================ */\n\n.tool-result-card {\n  width: 100%;\n  border-radius: var(--radius-md);\n  border: 1px solid var(--border-subtle);\n  overflow: visible;\n  margin-top: var(--space-2);\n}\n\n.tool-result-header {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  padding: var(--space-2) var(--space-3);\n  font-size: var(--text-xs);\n  font-weight: var(--font-semibold);\n}\n\n.tool-result-header.tool-read {\n  background: var(--blue-bg-subtle);\n  color: var(--status-planned-text);\n}\n\n.tool-result-header.tool-write {\n  background: var(--success-bg-light);\n  color: var(--color-success-500);\n}\n\n.tool-result-header.tool-destructive {\n  background: var(--danger-bg-light);\n  color: var(--color-priority-high);\n}\n\n.tool-result-title {\n  flex: 1;\n  min-width: 0;\n}\n\n.task-list {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-1);\n  padding: var(--space-1) var(--space-2);\n}\n\n.task-list-item {\n  display: grid;\n  grid-template-columns: auto 1fr auto;\n  grid-template-rows: auto auto;\n  gap: var(--space-0_5) var(--space-2);\n  align-items: center;\n  padding: var(--space-2_5) var(--space-3);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-md);\n  background: rgba(255, 255, 255, 0.04);\n  color: var(--text-primary);\n  font-size: var(--text-sm);\n  text-align: start;\n  cursor: pointer;\n  transition: all 0.12s ease;\n  width: 100%;\n  position: relative;\n}\n\n.task-list-item:hover {\n  background: var(--glass-bg-light);\n  border-color: var(--glass-border);\n}\n\n.task-priority-dot {\n  grid-row: 1;\n  grid-column: 1;\n  width: var(--space-2_5);\n  height: var(--space-2_5);\n  border-radius: 50%;\n  flex-shrink: 0;\n  margin-top: var(--space-1);\n  cursor: pointer;\n  /* Bigger click target via padding + negative margin */\n  padding: var(--space-1);\n  background-clip: content-box;\n}\n\n.task-meta-row {\n  grid-row: 2;\n  grid-column: 2 / -1;\n  display: flex;\n  gap: var(--space-1);\n  flex-wrap: wrap;\n  align-items: center;\n}\n\n.task-title {\n  grid-row: 1;\n  grid-column: 2;\n  min-width: 0;\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  word-break: break-word;\n  text-align: start;\n  unicode-bidi: plaintext;\n  font-weight: var(--font-medium);\n  line-height: 1.4;\n}\n\n.task-overdue-badge {\n  font-size: var(--text-xs);\n  font-weight: var(--font-medium);\n  color: var(--color-priority-high);\n  background: var(--danger-bg-light);\n  padding: 1px var(--space-1_5);\n  border-radius: var(--radius-full);\n  flex-shrink: 0;\n  cursor: pointer;\n}\n\n.task-due-date {\n  font-size: var(--text-xs);\n  color: var(--text-tertiary);\n  flex-shrink: 0;\n}\n\n.task-status-badge {\n  font-size: var(--text-xs);\n  font-weight: var(--font-medium);\n  padding: 1px 5px;\n  border-radius: var(--radius-sm);\n  flex-shrink: 0;\n  text-transform: uppercase;\n  letter-spacing: 0.03em;\n}\n\n.status-planned { background: var(--purple-bg-subtle); color: var(--status-planned-text); }\n.status-in_progress { background: var(--blue-bg-light); color: var(--status-in-progress-text); }\n.status-done { background: var(--success-bg-light); color: var(--status-done-text); }\n.status-backlog { background: var(--glass-bg-light); color: var(--text-muted); }\n\n/* ============================================================================\n   Daily Summary Stats Grid\n   ============================================================================ */\n\n.summary-stats-grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 1px;\n  background: var(--glass-border-faint);\n}\n\n.summary-stat {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: var(--space-0_5);\n  padding: var(--space-2) var(--space-1);\n  background: var(--overlay-component-bg);\n}\n\n.summary-stat-value {\n  font-size: var(--text-lg);\n  font-weight: var(--font-bold);\n  color: var(--text-primary);\n  line-height: 1;\n}\n\n.summary-stat-label {\n  font-size: var(--text-xs);\n  font-weight: var(--font-medium);\n  color: var(--text-tertiary);\n  text-transform: uppercase;\n  letter-spacing: 0.04em;\n}\n\n.summary-stat-success {\n  color: var(--color-success-500);\n}\n\n.summary-stat-danger {\n  color: var(--color-priority-high);\n}\n\n.summary-section-label {\n  display: flex;\n  align-items: center;\n  gap: var(--space-1);\n  font-size: var(--text-xs);\n  font-weight: var(--font-semibold);\n  color: var(--text-secondary);\n  padding: var(--space-2) var(--space-3) var(--space-1);\n  text-transform: uppercase;\n  letter-spacing: 0.04em;\n  border-top: 1px solid var(--glass-border-faint);\n}\n\n.section-count {\n  font-weight: var(--font-medium);\n  color: var(--text-muted);\n  text-transform: none;\n  letter-spacing: normal;\n}\n\n.show-more-btn {\n  display: block;\n  width: 100%;\n  padding: var(--space-2) var(--space-3);\n  border: none;\n  background: transparent;\n  color: var(--accent-primary, #8b5cf6);\n  font-size: var(--text-xs);\n  font-weight: var(--font-medium);\n  cursor: pointer;\n  text-align: center;\n  border-top: 1px solid var(--glass-border-faint);\n  transition: background var(--duration-fast) ease;\n}\n\n.show-more-btn:hover {\n  background: var(--purple-bg-subtle);\n}\n\n/* ============================================================================\n   Error\n   ============================================================================ */\n\n.message-error {\n  border: 1px solid var(--color-danger);\n}\n\n.message-error-text {\n  color: var(--color-danger);\n  font-size: var(--text-xs);\n  margin-top: var(--space-2);\n}\n\n/* ============================================================================\n   Actions\n   ============================================================================ */\n\n.message-actions {\n  display: flex;\n  flex-wrap: wrap;\n  gap: var(--space-2);\n  margin-top: var(--space-3);\n}\n\n.action-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: var(--space-1);\n  padding: var(--space-1) var(--space-3);\n  border-radius: var(--radius-md);\n  font-size: var(--text-meta);\n  font-weight: var(--font-medium);\n  cursor: pointer;\n  transition: all 0.15s ease;\n  border: 1px solid transparent;\n}\n\n.action-primary {\n  background: var(--color-focus);\n  color: white;\n}\n\n.action-primary:hover:not(:disabled) {\n  background: var(--brand-hover);\n}\n\n.action-secondary {\n  background: transparent;\n  border-color: var(--border-medium);\n  color: var(--text-primary);\n}\n\n.action-secondary:hover:not(:disabled) {\n  background: var(--border-subtle);\n}\n\n.action-danger {\n  background: transparent;\n  border-color: var(--color-danger);\n  color: var(--color-danger);\n}\n\n.action-danger:hover:not(:disabled) {\n  background: var(--danger-bg-light);\n}\n\n.action-completed {\n  background: var(--success-bg-light);\n  border-color: var(--color-success);\n  color: var(--color-success);\n}\n\n.action-btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.action-icon {\n  flex-shrink: 0;\n}\n\n/* ============================================================================\n   Metadata\n   ============================================================================ */\n\n.message-meta {\n  display: flex;\n  gap: var(--space-2);\n  margin-top: var(--space-2);\n  font-size: var(--text-xs);\n  color: var(--text-tertiary);\n}\n\n/* ============================================================================\n   Animations\n   ============================================================================ */\n\n.spin {\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n\n/* ============================================================================\n   Gamification Status Card\n   ============================================================================ */\n\n.gam-profile-row {\n  display: flex;\n  align-items: center;\n  gap: var(--space-3);\n  padding: var(--space-3);\n}\n\n.gam-level-badge {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 52px;\n  height: 52px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, var(--color-focus), #06b6d4);\n  flex-shrink: 0;\n}\n\n.gam-level-number {\n  font-size: var(--text-xl);\n  font-weight: 800;\n  color: white;\n  line-height: 1;\n}\n\n.gam-level-label {\n  font-size: 8px;\n  font-weight: var(--font-semibold);\n  color: var(--text-secondary);\n  text-transform: uppercase;\n  letter-spacing: 0.1em;\n}\n\n.gam-xp-section {\n  flex: 1;\n  min-width: 0;\n}\n\n.gam-xp-bar-wrapper {\n  height: var(--space-2);\n  background: var(--border-subtle);\n  border-radius: var(--radius-full);\n  overflow: hidden;\n}\n\n.gam-xp-bar {\n  height: 100%;\n  background: linear-gradient(90deg, var(--color-focus), #06b6d4);\n  border-radius: var(--radius-full);\n  transition: width 0.3s ease;\n}\n\n.gam-xp-text {\n  font-size: var(--text-xs);\n  color: var(--text-tertiary);\n  margin-top: var(--space-1);\n}\n\n.gam-stats-row {\n  display: flex;\n  border-top: 1px solid var(--glass-border-faint);\n}\n\n.gam-stat {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: var(--space-0_5);\n  padding: var(--space-2) var(--space-1);\n}\n\n.gam-stat-icon {\n  color: var(--text-secondary);\n}\n\n.gam-streak-icon {\n  color: var(--color-priority-medium);\n}\n\n.gam-corruption-icon {\n  color: #06b6d4;\n}\n\n.gam-corruption-icon.gam-corruption-high {\n  color: var(--color-priority-high);\n}\n\n.gam-achievement-icon {\n  color: rgb(var(--tier-gold));\n}\n\n.gam-stat-value {\n  font-size: var(--text-sm);\n  font-weight: var(--font-bold);\n  color: var(--text-primary);\n}\n\n.gam-stat-label {\n  font-size: var(--text-xs);\n  color: var(--text-tertiary);\n  text-transform: uppercase;\n  letter-spacing: 0.04em;\n}\n\n.gam-warning {\n  padding: var(--space-2) var(--space-3);\n  font-size: var(--text-xs);\n  color: var(--color-priority-medium);\n  background: var(--orange-bg-light);\n  border-top: 1px solid var(--orange-bg-medium);\n}\n\n.gam-empty {\n  padding: var(--space-3);\n  font-size: var(--text-xs);\n  color: var(--text-tertiary);\n  text-align: center;\n  font-style: italic;\n}\n\n/* ============================================================================\n   Challenges Card\n   ============================================================================ */\n\n.challenge-section {\n  /* Sections container */\n}\n\n.challenge-item {\n  padding: var(--space-2) var(--space-3);\n  border-top: 1px solid var(--glass-border-faint);\n}\n\n.challenge-item.challenge-boss {\n  background: var(--danger-bg-subtle);\n}\n\n.challenge-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: var(--space-2);\n}\n\n.challenge-title {\n  font-size: var(--text-meta);\n  font-weight: var(--font-semibold);\n  color: var(--text-primary);\n  flex: 1;\n  min-width: 0;\n}\n\n.boss-title {\n  color: var(--color-priority-high);\n}\n\n.challenge-difficulty {\n  font-size: var(--text-xs);\n  font-weight: var(--font-semibold);\n  padding: 1px var(--space-1_5);\n  border-radius: var(--radius-sm);\n  text-transform: uppercase;\n  letter-spacing: 0.04em;\n  flex-shrink: 0;\n}\n\n.diff-easy { background: var(--success-bg-light); color: var(--status-done-text); }\n.diff-normal { background: var(--blue-bg-light); color: var(--status-planned-text); }\n.diff-hard { background: var(--orange-bg-light); color: var(--color-priority-medium); }\n.diff-boss { background: var(--danger-bg-light); color: var(--color-priority-high); }\n\n.challenge-flavor {\n  font-size: var(--text-xs);\n  color: var(--text-tertiary);\n  font-style: italic;\n  margin-top: var(--space-0_5);\n}\n\n.challenge-progress-row {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  margin-top: var(--space-1);\n}\n\n.challenge-progress-bar-wrapper {\n  flex: 1;\n  height: var(--space-1_5);\n  background: var(--border-subtle);\n  border-radius: var(--radius-full);\n  overflow: hidden;\n}\n\n.challenge-progress-bar {\n  height: 100%;\n  background: var(--color-focus);\n  border-radius: var(--radius-full);\n  transition: width 0.3s ease;\n}\n\n.challenge-progress-bar.bar-complete {\n  background: var(--status-done-text);\n}\n\n.boss-bar-wrapper {\n  height: var(--space-2);\n}\n\n.boss-bar {\n  background: linear-gradient(90deg, var(--color-priority-high), var(--color-priority-medium));\n}\n\n.challenge-progress-text {\n  font-size: var(--text-xs);\n  font-weight: var(--font-semibold);\n  color: var(--text-secondary);\n  white-space: nowrap;\n}\n\n.challenge-meta {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: var(--space-1);\n}\n\n.challenge-reward {\n  font-size: var(--text-xs);\n  font-weight: var(--font-semibold);\n  color: var(--color-focus);\n}\n\n.boss-reward {\n  color: var(--color-priority-high);\n}\n\n.challenge-time {\n  font-size: var(--text-xs);\n  color: var(--text-tertiary);\n}\n\n/* ============================================================================\n   Achievements Near Completion Card\n   ============================================================================ */\n\n.achievement-item {\n  padding: var(--space-2) var(--space-3);\n  border-top: 1px solid var(--glass-border-faint);\n}\n\n.achievement-header {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n}\n\n.achievement-tier-dot {\n  width: var(--space-2);\n  height: var(--space-2);\n  border-radius: 50%;\n  flex-shrink: 0;\n}\n\n.achievement-name {\n  font-size: var(--text-meta);\n  font-weight: var(--font-semibold);\n  color: var(--text-primary);\n  flex: 1;\n}\n\n.achievement-percent {\n  font-size: var(--text-xs);\n  font-weight: var(--font-bold);\n  color: var(--color-focus);\n}\n\n.achievement-desc {\n  font-size: var(--text-xs);\n  color: var(--text-tertiary);\n  margin-top: var(--space-0_5);\n}\n\n.achievement-progress-row {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  margin-top: var(--space-1);\n}\n\n.achievement-bar-wrapper {\n  flex: 1;\n  height: var(--space-1);\n  background: var(--border-subtle);\n  border-radius: var(--radius-full);\n  overflow: hidden;\n}\n\n.achievement-bar {\n  height: 100%;\n  border-radius: var(--radius-full);\n  transition: width 0.3s ease;\n}\n\n.achievement-remaining {\n  font-size: var(--text-xs);\n  color: var(--text-tertiary);\n  white-space: nowrap;\n}\n\n.achievement-reward {\n  font-size: var(--text-xs);\n  font-weight: var(--font-semibold);\n  color: var(--color-focus);\n}\n\n/* ============================================================================\n   Suggest Next Task Card\n   ============================================================================ */\n\n.suggest-item {\n  grid-template-columns: auto auto 1fr;\n}\n\n.suggest-rank {\n  grid-row: 1;\n  grid-column: 1;\n  width: var(--space-5);\n  height: var(--space-5);\n  border-radius: 50%;\n  background: var(--color-focus);\n  color: white;\n  font-size: var(--text-xs);\n  font-weight: var(--font-bold);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.suggest-item .task-title {\n  grid-row: 1;\n  grid-column: 2 / -1;\n}\n\n.suggest-item .task-meta-row {\n  grid-row: 2;\n  grid-column: 2 / -1;\n}\n\n.suggest-reason {\n  font-size: var(--text-xs);\n  font-weight: var(--font-medium);\n  padding: 1px var(--space-1_5);\n  border-radius: var(--radius-full);\n}\n\n.reason-overdue { background: var(--danger-bg-light); color: var(--color-priority-high); }\n.reason-due-today { background: var(--orange-bg-light); color: var(--color-priority-medium); }\n.reason-high-priority { background: var(--purple-bg-subtle); color: var(--status-planned-text); }\n.reason-next-up { background: var(--blue-bg-light); color: var(--status-planned-text); }\n\n/* ============================================================================\n   Weekly Summary Footer\n   ============================================================================ */\n\n.gam-footer-row {\n  display: flex;\n  gap: var(--space-2);\n  padding: var(--space-2) var(--space-3);\n  border-top: 1px solid var(--glass-border-faint);\n  flex-wrap: wrap;\n}\n\n.gam-footer-badge {\n  font-size: var(--text-xs);\n  font-weight: var(--font-medium);\n  padding: var(--space-0_5) var(--space-2);\n  border-radius: var(--radius-full);\n}\n\n.gam-badge-success {\n  background: var(--success-bg-light);\n  color: var(--status-done-text);\n}\n\n.gam-badge-corruption {\n  background: var(--danger-bg-light);\n  color: var(--color-priority-high);\n}\n\n/* ============================================================================\n   Inline Task Actions (hover)\n   ============================================================================ */\n\n.task-inline-actions {\n  grid-row: 1;\n  grid-column: 3;\n  display: flex;\n  align-items: center;\n  gap: var(--space-1);\n  opacity: 0.7;\n  transition: opacity 0.15s ease;\n}\n\n.task-list-item:hover .task-inline-actions {\n  opacity: 1;\n}\n\n.inline-action-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 28px;\n  height: 28px;\n  border: 1px solid var(--glass-border-faint);\n  border-radius: var(--radius-sm);\n  cursor: pointer;\n  transition: all 0.15s ease;\n  flex-shrink: 0;\n}\n\n.inline-done-btn {\n  background: var(--success-bg-light);\n  color: var(--color-success);\n}\n\n.inline-done-btn:hover {\n  background: var(--color-success);\n  color: white;\n}\n\n.inline-timer-btn {\n  background: var(--blue-bg-light);\n  color: var(--status-in-progress-text);\n}\n\n.inline-timer-btn:hover {\n  background: var(--status-in-progress-text);\n  color: white;\n}\n\n.inline-action-btn.loading {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.inline-action-done-badge,\n.inline-action-timer-badge {\n  display: flex;\n  align-items: center;\n  gap: var(--space-0_5);\n  font-size: var(--text-xs);\n  font-weight: var(--font-medium);\n  padding: 2px var(--space-1_5);\n  border-radius: var(--radius-sm);\n}\n\n.inline-action-done-badge {\n  background: var(--success-bg-light);\n  color: var(--color-success);\n}\n\n.inline-action-timer-badge {\n  background: var(--blue-bg-light);\n  color: var(--status-in-progress-text);\n}\n\n.task-list-item.task-completed .task-title {\n  text-decoration: line-through;\n  opacity: 0.6;\n}\n\n/* ============================================================================\n   Weekly Plan Card\n   ============================================================================ */\n\n.weekly-plan-card .task-list-item {\n  grid-template-columns: auto 1fr auto;\n  grid-template-rows: auto;\n}\n\n.task-unscheduled {\n  opacity: 0.6;\n}\n\n.plan-reasoning {\n  padding: var(--space-2) var(--space-3);\n  font-size: var(--text-xs);\n  color: var(--text-tertiary);\n  font-style: italic;\n  border-top: 1px solid var(--glass-border-faint);\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/ai/TaskQuickEditPopover.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/ai/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/auth/AuthModal.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/auth/GoogleSignInButton.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/auth/LoginForm.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/auth/ResetPasswordView.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/auth/SignupForm.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/auth/UserProfile.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/base/BaseBadge.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/base/BaseButton.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/base/BaseCard.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/base/BaseDropdown.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/base/BaseIconButton.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/base/BaseInput.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/base/BaseModal.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/base/BaseNavItem.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/base/BasePopover.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/base/FilterControls.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/base/OverflowTooltip.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/base/ProjectEmojiIcon.vue","messages":[{"ruleId":"vue/no-v-html","severity":1,"message":"'v-html' directive can lead to XSS attack.","line":21,"column":7,"nodeType":"VAttribute","messageId":"unexpected","endLine":21,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<template>\n  <div\n    class=\"project-emoji-icon\"\n    :class=\"{\n      'project-emoji-icon--native': shouldUseNative,\n      'project-emoji-icon--svg': hasSvg || hasColorfulSvg,\n      'project-emoji-icon--clickable': clickable,\n      'project-emoji-icon--default': variant === 'default',\n      'project-emoji-icon--plain': variant === 'plain'\n    }\"\n    :style=\"customStyles\"\n    :title=\"_computedTitle\"\n    :aria-label=\"_computedTitle\"\n    role=\"img\"\n    @click=\"$emit('click', $event)\"\n  >\n    <!-- Colorful SVG (Premium Gradients) -->\n    <div\n      v-if=\"hasColorfulSvg\"\n      class=\"project-emoji-icon__colorful\"\n      v-html=\"colorfulSvg\"\n    />\n\n    <!-- Regular SVG (Crisp Vector) -->\n    <svg\n      v-else-if=\"hasSvg\"\n      class=\"project-emoji-icon__svg\"\n      :viewBox=\"svgData?.viewBox\"\n      aria-hidden=\"true\"\n    >\n      <path :d=\"svgData?.path\" :fill=\"svgData?.fill || 'currentColor'\" />\n    </svg>\n\n    <!-- Native emoji fallback -->\n    <span\n      v-else\n      class=\"project-emoji-icon__native\"\n      :style=\"nativeStyles\"\n      aria-hidden=\"true\"\n    >\n      {{ emoji }}\n    </span>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from 'vue'\nimport { getEmojiSvgData, getColorfulSvgData, hasSvgRepresentation, hasColorfulSvgRepresentation } from '@/utils/emojiSvgMap'\n\ninterface Props {\n  emoji: string\n  size?: 'xs' | 'sm' | 'md' | 'lg' | 'xl'\n  color?: string\n  clickable?: boolean\n  title?: string\n  variant?: 'default' | 'plain' // 'default' has background/border, 'plain' is just the emoji\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  size: 'sm',\n  color: undefined,\n  clickable: false,\n  title: '',\n  variant: 'plain' // Default to plain (no background/border) to avoid gray dots\n})\n\ndefineEmits<{\n  click: [event: MouseEvent]\n}>()\n\n// SVG Detection\nconst hasSvg = computed(() => hasSvgRepresentation(props.emoji))\nconst hasColorfulSvg = computed(() => hasColorfulSvgRepresentation(props.emoji))\nconst svgData = computed(() => getEmojiSvgData(props.emoji))\nconst colorfulSvg = computed(() => getColorfulSvgData(props.emoji))\n\n// Only use native if no SVG is found\nconst shouldUseNative = computed(() => !hasSvg.value && !hasColorfulSvg.value)\n\n// Size calculations\nconst sizeMap = {\n  xs: 16,\n  sm: 20,\n  md: 24,\n  lg: 32,\n  xl: 48\n}\n\nconst containerSize = computed(() => sizeMap[props.size])\n\n// Dynamic styles\nconst customStyles = computed(() => ({\n  width: `${containerSize.value}px`,\n  height: `${containerSize.value}px`\n}))\n\nconst nativeStyles = computed(() => ({\n  fontSize: `${Math.max(12, Math.floor(containerSize.value * 0.65))}px`,\n  lineHeight: '1'\n}))\n\n// Computed title if not provided\nconst _computedTitle = computed(() => {\n  if (props.title) return props.title\n  return `Project emoji: ${props.emoji}`\n})\n</script>\n\n<style scoped>\n.project-emoji-icon {\n  /* Container with inline-flex for consistent alignment with other inline elements */\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  vertical-align: middle;\n  transition: all var(--duration-fast) var(--spring-smooth);\n  position: relative;\n  overflow: hidden;\n  /* Hardware acceleration for smooth animations */\n  transform: translateZ(0);\n  will-change: transform;\n}\n\n/* Default variant with background and border */\n.project-emoji-icon--default {\n  border-radius: var(--radius-full);\n  background: var(--glass-bg-subtle);\n  backdrop-filter: blur(8px);\n  -webkit-backdrop-filter: blur(8px);\n  border: 1px solid var(--glass-border);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n/* Plain variant - just the emoji, no background or border */\n.project-emoji-icon--plain {\n  /* No background, border, or borderRadius - just the emoji */\n}\n\n.project-emoji-icon--clickable {\n  cursor: pointer;\n}\n\n.project-emoji-icon--default.project-emoji-icon--clickable:hover {\n  transform: scale(1.05);\n  border-color: var(--border-medium);\n  background-color: var(--surface-hover);\n  box-shadow: var(--shadow-sm);\n}\n\n.project-emoji-icon--plain.project-emoji-icon--clickable:hover {\n  transform: scale(1.1);\n  /* No background changes for plain variant */\n}\n\n/* Native emoji styles - optimized for Noto Color Emoji */\n.project-emoji-icon__native {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  /* Enhanced emoji rendering */\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  image-rendering: -webkit-optimize-contrast;\n  image-rendering: crisp-edges;\n  /* Prevent baseline issues */\n  line-height: 1;\n  vertical-align: middle;\n  /* Prioritize Noto Color Emoji for consistency */\n  font-family: \"Noto Color Emoji\", \"Apple Color Emoji\", \"Segoe UI Emoji\", \"EmojiSymbols\", system-ui, sans-serif;\n  /* Ensure consistent sizing */\n  width: 1em;\n  height: 1em;\n  /* Force colorful emoji rendering */\n  font-style: normal;\n  font-weight: normal;\n  /* Ensure proper emoji display */\n  -webkit-text-stroke-width: 0;\n  -webkit-text-stroke-color: transparent;\n}\n\n/* SVG Emoji Styles */\n.project-emoji-icon__svg {\n  width: 75%;\n  height: 75%;\n  display: block;\n}\n\n.project-emoji-icon__colorful {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n/* Ensure raw SVG inside colorful container respects container size */\n.project-emoji-icon__colorful :deep(svg) {\n  width: 85%;\n  height: 85%;\n  display: block;\n}\n\n/* Theme integration - only for default variant */\n.project-emoji-icon--default:hover {\n  background-color: var(--surface-elevated);\n  border-color: var(--brand-border-subtle);\n}\n\n/* Size variants */\n.project-emoji-icon[data-size=\"xs\"] {\n  /* 16px container - minimal */\n}\n\n.project-emoji-icon[data-size=\"sm\"] {\n  /* 20px container - standard */\n}\n\n.project-emoji-icon[data-size=\"md\"] {\n  /* 24px container - larger */\n}\n\n.project-emoji-icon[data-size=\"lg\"] {\n  /* 32px container - prominent */\n}\n\n/* Reduced motion support */\n@media (prefers-reduced-motion: reduce) {\n  .project-emoji-icon {\n    transition: none;\n  }\n}\n\n/* Focus styles for accessibility */\n.project-emoji-icon--clickable:focus-visible {\n  outline: 2px solid var(--color-primary);\n  outline-offset: 2px;\n}\n</style>","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/calendar/CalendarDayView.vue","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":64,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2608,2611],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2608,2611],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<script setup lang=\"ts\">\nimport { inject, computed } from 'vue'\nimport { Play } from 'lucide-vue-next'\nimport ProjectEmojiIcon from '@/components/base/ProjectEmojiIcon.vue'\nimport type { CalendarEvent, DragGhost } from '@/types/tasks'\nimport type { TimeSlot } from '@/composables/calendar/useCalendarDayView'\nimport type { ExternalCalendarEvent } from '@/composables/calendar/useExternalCalendar'\n\nconst props = defineProps<{\n  timeSlots: TimeSlot[]\n  hours: number[]\n  isViewingToday: boolean\n  timeIndicatorPosition: number\n  dragGhost: DragGhost\n  activeDropSlot: number | null\n  currentTaskId?: string | null\n  isDragging: boolean\n  draggedEventId: string | null\n  hoveredEventId: string | null\n  resizePreview?: {\n    isResizing: boolean\n    taskId: string | null\n    previewDuration: number\n    direction: 'top' | 'bottom'\n  } | null\n  externalEvents?: ExternalCalendarEvent[]\n}>()\n\ndefineEmits<{\n  (e: 'dragover', event: DragEvent, slot: TimeSlot): void\n  (e: 'dragenter', event: DragEvent, slot: TimeSlot): void\n  (e: 'dragleave'): void\n  (e: 'drop', event: DragEvent, slot: TimeSlot): void\n  (e: 'slotMouseDown', event: MouseEvent, slot: TimeSlot): void\n  (e: 'eventMouseEnter', eventId: string): void\n  (e: 'eventMouseLeave'): void\n  (e: 'eventDragStart', event: DragEvent, calEvent: CalendarEvent): void\n  (e: 'eventDragEnd', event: DragEvent, calEvent: CalendarEvent): void\n  (e: 'eventClick', event: MouseEvent, calEvent: CalendarEvent): void\n  (e: 'eventDblClick', calEvent: CalendarEvent): void\n  (e: 'eventContextMenu', event: MouseEvent, calEvent: CalendarEvent): void\n  (e: 'cycleStatus', event: MouseEvent, calEvent: CalendarEvent): void\n  (e: 'removeFromCalendar', calEvent: CalendarEvent): void\n  (e: 'startTimer', calEvent: CalendarEvent): void\n  (e: 'startResize', event: MouseEvent, calEvent: CalendarEvent, direction: 'top' | 'bottom'): void\n}>()\n// Compute positioned external events for time grid\nconst positionedExternalEvents = computed(() => {\n  if (!props.externalEvents?.length) return []\n  return props.externalEvents\n    .filter(e => !e.isAllDay)\n    .map(e => {\n      const startMinutes = e.startTime.getHours() * 60 + e.startTime.getMinutes()\n      const durationMinutes = Math.max(15, (e.endTime.getTime() - e.startTime.getTime()) / 60000)\n      return {\n        ...e,\n        top: startMinutes,\n        height: durationMinutes,\n        formattedTime: `${e.startTime.getHours().toString().padStart(2, '0')}:${e.startTime.getMinutes().toString().padStart(2, '0')}`\n      }\n    })\n})\n// Inject helpers from parent CalendarView\nconst helpers = inject('calendar-helpers') as any\nconst {\n  formatHour,\n  formatEventTime,\n  isCurrentTimeSlot,\n  getTasksForSlot,\n  isTaskPrimarySlot,\n  getSlotTaskStyle,\n  getProjectVisual,\n  getProjectName,\n  getProjectColor,\n  getPriorityClass,\n  getPriorityLabel,\n  getTaskStatus,\n  getStatusLabel,\n  getStatusIcon\n} = helpers\n\n</script>\n\n<template>\n  <div class=\"calendar-grid\">\n    <!-- Time Labels Column -->\n    <div class=\"time-labels\">\n      <div\n        v-for=\"hour in hours\"\n        :key=\"hour\"\n        class=\"time-label\"\n      >\n        {{ formatHour(hour) }}\n      </div>\n    </div>\n\n    <!-- Slots Container -->\n    <div class=\"slots-container\">\n      <!-- Current Time Indicator -->\n      <div\n        v-if=\"isViewingToday\"\n        class=\"current-time-indicator\"\n        :style=\"{ top: `${timeIndicatorPosition}px` }\"\n      >\n        <div class=\"time-indicator-dot\" />\n        <div class=\"time-indicator-line\" />\n      </div>\n\n      <!-- Ghost Preview (during inbox drag) -->\n      <div\n        v-if=\"dragGhost.visible\"\n        class=\"ghost-preview-inline\"\n        :style=\"{\n          position: 'absolute',\n          top: `${dragGhost.slotIndex * 30}px`,\n          height: `${Math.ceil(dragGhost.duration / 30) * 30}px`,\n          width: 'calc(100% - 8px)',\n          left: '4px',\n          zIndex: 40\n        }\"\n      >\n        <div class=\"ghost-content\">\n          <span class=\"ghost-title\">{{ dragGhost.title }}</span>\n          <span class=\"ghost-duration\">{{ dragGhost.duration }}min</span>\n        </div>\n      </div>\n\n      <!-- Time Slots -->\n      <div\n        v-for=\"slot in timeSlots\"\n        :key=\"slot.id\"\n        class=\"time-slot\"\n        :data-slot-index=\"slot.slotIndex\"\n        :class=\"{\n          'drag-over': activeDropSlot === slot.slotIndex,\n          'current-time': isCurrentTimeSlot(slot)\n        }\"\n        @dragover.prevent=\"$emit('dragover', $event, slot)\"\n        @dragenter.prevent=\"$emit('dragenter', $event, slot)\"\n        @dragleave=\"$emit('dragleave')\"\n        @drop.prevent=\"$emit('drop', $event, slot)\"\n        @mousedown=\"$emit('slotMouseDown', $event, slot)\"\n      >\n        <!-- Tasks rendered INSIDE the slot with entrance animation -->\n        <TransitionGroup name=\"task-appear\">\n          <div\n            v-for=\"calEvent in getTasksForSlot(slot)\"\n            v-show=\"isTaskPrimarySlot(slot, calEvent)\"\n            :key=\"`${calEvent.id}-${slot.slotIndex}`\"\n            class=\"slot-task is-primary\"\n            :class=\"{\n              'timer-active-event': currentTaskId === calEvent.taskId,\n              'dragging': isDragging && draggedEventId === calEvent.id,\n              'is-hovered': hoveredEventId === calEvent.id,\n              'has-overlap': calEvent.totalColumns > 1,\n              'is-compact': calEvent.duration <= 30,\n              'status-done': getTaskStatus(calEvent) === 'done'\n            }\"\n            :style=\"getSlotTaskStyle(calEvent)\"\n            draggable=\"true\"\n            @mouseenter=\"$emit('eventMouseEnter', calEvent.id)\"\n            @mouseleave=\"$emit('eventMouseLeave')\"\n            @dragstart=\"$emit('eventDragStart', $event, calEvent)\"\n            @dragend=\"$emit('eventDragEnd', $event, calEvent)\"\n            @click=\"$emit('eventClick', $event, calEvent)\"\n            @dblclick=\"$emit('eventDblClick', calEvent)\"\n            @contextmenu.prevent=\"$emit('eventContextMenu', $event, calEvent)\"\n          >\n            <!-- Project Stripe -->\n            <div\n              v-if=\"getProjectVisual(calEvent).type === 'emoji'\"\n              class=\"project-stripe project-emoji-stripe\"\n              :title=\"`Project: ${getProjectName(calEvent)}`\"\n            >\n              <ProjectEmojiIcon\n                :emoji=\"getProjectVisual(calEvent).content\"\n                size=\"xs\"\n                class=\"project-emoji\"\n              />\n            </div>\n            <div\n              v-else\n              class=\"project-stripe project-color-stripe\"\n              :style=\"{ backgroundColor: getProjectColor(calEvent) }\"\n              :title=\"`Project: ${getProjectName(calEvent)}`\"\n            />\n\n            <!-- Priority Stripe -->\n            <div\n              class=\"priority-stripe\"\n              :class=\"`priority-${getPriorityClass(calEvent)}`\"\n              :title=\"`Priority: ${getPriorityLabel(calEvent)}`\"\n            />\n\n            <!-- Task Content - dir=\"auto\" detects RTL/LTR from content -->\n            <div class=\"task-content--calendar\" dir=\"auto\">\n              <div class=\"task-header\">\n                <div class=\"task-title\" dir=\"auto\" :title=\"calEvent.title\">\n                  {{ calEvent.title }}\n                </div>\n                <div class=\"task-actions\">\n                  <button\n                    class=\"play-timer-btn\"\n                    title=\"Start timer for this task\"\n                    @click.stop=\"$emit('startTimer', calEvent)\"\n                  >\n                    <Play :size=\"12\" />\n                  </button>\n                  <div\n                    class=\"status-indicator\"\n                    :class=\"`status-${getTaskStatus(calEvent)}`\"\n                    :title=\"`Status: ${getStatusLabel(calEvent)} (click to change)`\"\n                    @click.stop=\"$emit('cycleStatus', $event, calEvent)\"\n                  >\n                    {{ getStatusIcon(getTaskStatus(calEvent)) }}\n                  </div>\n                  <button\n                    class=\"remove-from-calendar-btn\"\n                    title=\"Remove from calendar (move to inbox)\"\n                    @click.stop=\"$emit('removeFromCalendar', calEvent)\"\n                  >\n                    ✕\n                  </button>\n                </div>\n              </div>\n              <div class=\"task-meta\">\n                <span v-if=\"formatEventTime(calEvent)\" class=\"task-time\">{{ formatEventTime(calEvent) }}</span>\n                <span class=\"task-duration\">{{ calEvent.duration }}min</span>\n              </div>\n            </div>\n\n            <!-- Resize Handles -->\n            <div\n              class=\"resize-handle resize-top\"\n              title=\"Drag to change start time\"\n              @mousedown.stop=\"$emit('startResize', $event, calEvent, 'top')\"\n            />\n            <div\n              class=\"resize-handle resize-bottom\"\n              title=\"Drag to change duration\"\n              @mousedown.stop=\"$emit('startResize', $event, calEvent, 'bottom')\"\n            />\n\n            <!-- Resize Preview -->\n            <div\n              v-if=\"resizePreview?.isResizing && resizePreview.taskId === calEvent.taskId\"\n              class=\"resize-preview-overlay\"\n              :style=\"{\n                height: `${Math.ceil(resizePreview.previewDuration / 30) * 30}px`,\n                top: resizePreview.direction === 'top' ? 'auto' : '0',\n                bottom: resizePreview.direction === 'top' ? '0' : 'auto'\n              }\"\n            >\n              <span class=\"preview-duration\">{{ resizePreview.previewDuration }}min</span>\n            </div>\n          </div>\n        </TransitionGroup>\n      </div>\n\n      <!-- TASK-1317: External calendar events (read-only overlays) -->\n      <div\n        v-for=\"ext in positionedExternalEvents\"\n        :key=\"`ext-${ext.id}`\"\n        class=\"external-event\"\n        :style=\"{\n          top: `${ext.top}px`,\n          height: `${ext.height}px`,\n          backgroundColor: ext.color + '25',\n          borderColor: ext.color\n        }\"\n        :title=\"`${ext.title}${ext.location ? '\\n📍 ' + ext.location : ''}`\"\n      >\n        <span class=\"external-event-time\">{{ ext.formattedTime }}</span>\n        <span class=\"external-event-title\" dir=\"auto\">{{ ext.title }}</span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.calendar-grid {\n  flex: 1;\n  display: grid;\n  grid-template-columns: 80px 1fr;\n  overflow: visible;\n  min-height: 0;\n  position: relative;\n  z-index: 1;\n}\n\n.time-labels {\n  background: linear-gradient(\n    135deg,\n    var(--glass-bg-tint) 0%,\n    var(--glass-bg-weak) 100%\n  );\n  backdrop-filter: blur(16px);\n  border-inline-end: 1px solid var(--glass-border-light);\n  overflow-y: auto;\n  box-shadow: var(--shadow-xs);\n  scrollbar-width: none;\n}\n\n.time-labels::-webkit-scrollbar {\n  display: none;\n}\n\n.time-label {\n  height: 60px;\n  display: flex;\n  align-items: flex-start;\n  justify-content: end;\n  padding-top: var(--space-1);\n  padding-inline-end: var(--space-3);\n  color: var(--text-muted);\n  font-size: var(--text-xs);\n  font-weight: var(--font-medium);\n  border-bottom: 1px solid var(--glass-bg-tint);\n}\n\n.slots-container {\n  position: relative;\n  background: linear-gradient(180deg, var(--glass-bg-subtle) 0%, transparent 100%);\n  overflow-y: auto;\n  z-index: 2;\n}\n\n.slots-container::-webkit-scrollbar {\n  width: 6px;\n}\n\n.slots-container::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.slots-container::-webkit-scrollbar-thumb {\n  background: var(--glass-border);\n  border-radius: var(--radius-md);\n}\n\n.time-slot {\n  height: 30px;\n  border-bottom: 1px solid var(--glass-border-light);\n  position: relative;\n  transition: background var(--duration-fast);\n}\n\n.time-slot:nth-child(even) {\n  border-bottom-style: dashed;\n  border-bottom-color: var(--glass-border-faint);\n}\n\n.time-slot:hover {\n  background: var(--glass-bg-tint);\n}\n\n.time-slot.drag-over {\n  background: var(--glass-bg-soft);\n  border-color: var(--accent-primary);\n}\n\n.time-slot.current-time {\n  background: var(--color-danger-bg-subtle);\n}\n\n.slot-task {\n  position: relative;\n  margin: var(--space-0_5) var(--space-1);\n  padding: var(--space-2) var(--space-3);\n  border-radius: var(--radius-lg);\n  border: 1px solid var(--border-subtle);\n  background: var(--surface-tertiary);\n  color: var(--text-primary);\n  font-weight: var(--font-medium);\n  transition: all var(--duration-normal) var(--spring-smooth);\n  pointer-events: auto;\n  box-shadow: var(--shadow-sm);\n  cursor: grab;\n  min-height: 24px;\n  font-size: var(--text-xs);\n  z-index: 5;\n}\n\n.slot-task:hover {\n  background: var(--state-hover-bg);\n  border-color: var(--state-hover-border);\n  backdrop-filter: var(--state-active-glass);\n  transform: translateY(-1px);\n  box-shadow: var(--state-hover-shadow), var(--state-hover-glow);\n}\n\n.slot-task.is-primary {\n  border-left: 4px solid var(--accent-primary);\n  padding-left: calc(var(--space-3) - 2px);\n}\n\n.task-content--calendar {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-0_5);\n  flex: 1;\n  min-width: 0;\n  overflow: hidden;\n}\n\n.task-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: var(--space-2);\n}\n\n.task-title {\n  flex: 1;\n  font-size: var(--text-xs);\n  font-weight: var(--font-semibold);\n  color: var(--text-primary);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.task-actions {\n  display: flex;\n  gap: var(--space-1);\n  opacity: 0;\n  transition: opacity var(--duration-fast);\n}\n\n.slot-task:hover .task-actions {\n  opacity: 1;\n}\n\n.task-meta {\n  display: flex;\n  align-items: center;\n  gap: var(--space-1);\n  font-size: var(--text-xs);\n  color: var(--text-secondary);\n  white-space: nowrap;\n}\n\n.task-time {\n  opacity: 0.8;\n}\n\n.task-time::after {\n  content: \" · \";\n  opacity: 0.5;\n}\n\n.task-duration {\n  font-weight: var(--font-medium);\n}\n\n/* ========================================\n   COMPACT TASK LAYOUT (short duration tasks)\n   Single horizontal line: Title ... Time · Duration\n   RTL text (Hebrew/Arabic) auto-detected and layout flipped\n   ======================================== */\n\n.slot-task.is-compact {\n  padding: var(--space-1) var(--space-2);\n}\n\n.slot-task.is-compact .task-content--calendar {\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  gap: var(--space-2);\n}\n\n/* RTL: Reverse flex direction so title appears on right, meta on left */\n/* Use :dir(rtl) pseudo-class which detects computed direction from dir=\"auto\" */\n.slot-task.is-compact .task-content--calendar:dir(rtl) {\n  flex-direction: row-reverse;\n}\n\n.slot-task.is-compact .task-header {\n  flex: 1;\n  min-width: 0;\n}\n\n.slot-task.is-compact .task-title {\n  font-size: var(--text-xs);\n}\n\n.slot-task.is-compact .task-meta {\n  flex-shrink: 0;\n  font-size: var(--text-xs);\n}\n\n/* Hide actions in compact mode to save space */\n.slot-task.is-compact .task-actions {\n  display: none;\n}\n\n.project-stripe {\n  width: 3px;\n  border-radius: var(--radius-xs);\n  height: calc(100% - 8px);\n  position: absolute;\n  left: 2px;\n  top: var(--space-1);\n}\n\n.project-emoji-stripe {\n  /* Hide emoji stripe - causes layout issues */\n  display: none;\n}\n\n.project-color-stripe {\n  /* Inherits height and top from .project-stripe */\n}\n\n.priority-stripe {\n  width: 2px;\n  border-radius: 1px;\n  height: calc(100% - 12px);\n  position: absolute;\n  left: 0;\n  top: var(--space-1_5);\n}\n\n.resize-handle {\n  position: absolute;\n  left: 0;\n  right: 0;\n  height: 8px;\n  background: transparent;\n  cursor: ns-resize;\n  z-index: 20;\n  opacity: 0;\n  transition: all var(--duration-fast);\n  pointer-events: none;\n}\n\n.resize-handle.resize-top {\n  top: 0;\n  border-radius: var(--radius-lg) var(--radius-lg) 0 0;\n}\n\n.resize-handle.resize-bottom {\n  bottom: 0;\n  border-radius: 0 0 var(--radius-lg) var(--radius-lg);\n}\n\n.slot-task.is-primary:hover .resize-handle,\n.slot-task.is-primary.is-hovered .resize-handle {\n  opacity: 1 !important;\n  pointer-events: auto !important;\n  background: rgba(99, 102, 241, 0.4) !important;\n  transition: none !important;\n}\n\n.resize-preview-overlay {\n  position: absolute;\n  left: 0;\n  right: 0;\n  background: var(--color-indigo-bg-medium);\n  border: 2px dashed rgba(99, 102, 241, 0.6);\n  border-radius: var(--radius-md);\n  pointer-events: none;\n  z-index: 50;\n  display: flex;\n  align-items: flex-end;\n  justify-content: center;\n  padding-bottom: var(--space-1);\n}\n\n.resize-preview-overlay .preview-duration {\n  font-size: var(--text-xs);\n  font-weight: 600;\n  color: rgba(99, 102, 241, 0.9);\n  background: rgba(255, 255, 255, 0.9);\n  padding: var(--space-0_5) var(--space-1_5);\n  border-radius: var(--radius-sm);\n}\n\n.current-time-indicator {\n  position: absolute;\n  left: 0;\n  right: 0;\n  z-index: 2; /* Behind tasks (z-index: 5) so events stay visible */\n  pointer-events: none;\n  display: flex;\n  align-items: center;\n}\n\n.time-indicator-dot {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background: var(--color-danger);\n  box-shadow: 0 0 4px var(--color-danger);\n  flex-shrink: 0;\n  margin-left: calc(-1 * var(--space-1));\n}\n\n.time-indicator-line {\n  flex: 1;\n  height: 2px;\n  background: var(--color-danger);\n  opacity: 0.7; /* Semi-transparent so tasks show through */\n}\n\n.ghost-preview-inline {\n  background: linear-gradient(135deg, var(--calendar-ghost-bg-start) 0%, var(--calendar-ghost-bg-end) 100%);\n  backdrop-filter: blur(8px);\n  border: 3px solid var(--calendar-ghost-border);\n  border-radius: var(--radius-lg);\n  pointer-events: none;\n}\n\n.ghost-content {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color: var(--text-primary);\n  gap: var(--space-1);\n}\n\n.ghost-title {\n  font-weight: 700;\n  font-size: var(--text-sm);\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\n}\n\n.ghost-duration {\n  font-size: var(--text-xs);\n  font-weight: 500;\n  opacity: 0.9;\n  background: var(--border-hover);\n  padding: var(--space-0_5) var(--space-2);\n  border-radius: var(--radius-lg);\n}\n\n.status-indicator {\n  width: 20px;\n  height: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: var(--radius-sm);\n  cursor: pointer;\n  transition: all var(--duration-fast);\n}\n\n.status-indicator:hover {\n  background: var(--glass-border);\n}\n\n.play-timer-btn {\n  background: transparent;\n  border: none;\n  color: var(--text-muted);\n  padding: var(--space-1);\n  cursor: pointer;\n  border-radius: var(--radius-sm);\n  transition: all var(--duration-fast);\n  line-height: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.play-timer-btn:hover {\n  color: var(--color-success);\n  background: var(--color-success-bg-light, rgba(34, 197, 94, 0.1));\n}\n\n.remove-from-calendar-btn {\n  background: transparent;\n  border: none;\n  color: var(--text-muted);\n  padding: var(--space-1);\n  cursor: pointer;\n  border-radius: var(--radius-sm);\n  transition: all var(--duration-fast);\n  line-height: 1;\n}\n\n.remove-from-calendar-btn:hover {\n  color: var(--color-danger);\n  background: var(--color-danger-bg-light);\n}\n\n/* ========================================\n   TASK ENTRANCE ANIMATION\n   ======================================== */\n\n/* Keyframes for task appearing on calendar */\n@keyframes task-appear {\n  from {\n    opacity: 0;\n    transform: scale(0.95) translateY(-4px);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1) translateY(0);\n  }\n}\n\n/* TransitionGroup animation classes */\n.task-appear-enter-active {\n  animation: task-appear var(--duration-normal) var(--spring-smooth);\n}\n\n.task-appear-leave-active {\n  animation: task-appear var(--duration-fast) var(--spring-smooth) reverse;\n}\n\n.task-appear-move {\n  transition: transform var(--duration-normal) var(--spring-smooth);\n}\n\n/* ========================================\n   RTL (Right-to-Left) SUPPORT\n   ======================================== */\n\n/* Task title and meta inherit document direction */\n.task-title,\n.task-meta {\n  direction: inherit;\n  text-align: start;\n}\n\n/* RTL-specific styles - use element:dir(rtl) since dir=\"auto\" is on the element itself */\n.task-title:dir(rtl) {\n  direction: rtl;\n  unicode-bidi: plaintext;\n  text-align: right;\n}\n\n.task-meta:dir(rtl) {\n  direction: rtl;\n  unicode-bidi: plaintext;\n  text-align: right;\n}\n\n.task-content--calendar:dir(rtl) {\n  text-align: right;\n}\n\n/* Flip project stripe from left to right in RTL */\n:dir(rtl) .slot-task.is-primary {\n  border-left: 1px solid var(--border-subtle);\n  border-right: 4px solid var(--accent-primary);\n  padding-left: var(--space-3);\n  padding-right: calc(var(--space-3) - 2px);\n}\n\n:dir(rtl) .project-stripe {\n  left: auto;\n  right: 2px;\n}\n\n:dir(rtl) .priority-stripe {\n  left: auto;\n  right: 0;\n}\n\n/* ========================================\n   TIMER-ACTIVE HIGHLIGHT\n   Amber glow when task has active timer\n   ======================================== */\n\n.slot-task.timer-active-event {\n  border-color: var(--timer-active-border);\n  box-shadow: var(--timer-active-glow), var(--timer-active-shadow);\n  animation: timer-pulse 2s ease-in-out infinite;\n}\n\n.slot-task.timer-active-event:hover {\n  box-shadow: var(--timer-active-glow-strong), var(--timer-active-shadow-hover);\n}\n\n@keyframes timer-pulse {\n  0%, 100% { opacity: 1; }\n  50% { opacity: 0.85; }\n}\n\n/* BUG-1304: Visual indicator for done tasks — low opacity only, no strikethrough */\n.slot-task.status-done {\n  filter: grayscale(0.6) brightness(0.85);\n  opacity: 0.55;\n}\n\n/* TASK-1317: External calendar events (read-only overlays) */\n.external-event {\n  position: absolute;\n  right: 4px;\n  width: 35%;\n  min-height: 20px;\n  border-left: 3px solid;\n  border-radius: var(--radius-md);\n  padding: var(--space-1) var(--space-2);\n  font-size: var(--text-xs);\n  color: var(--text-secondary);\n  pointer-events: auto;\n  z-index: 3;\n  overflow: hidden;\n  border-style: solid;\n  border-width: 1px 1px 1px 3px;\n  display: flex;\n  flex-direction: column;\n  gap: 1px;\n  cursor: default;\n}\n\n.external-event-time {\n  font-weight: var(--font-semibold);\n  font-size: 10px;\n  opacity: 0.8;\n}\n\n.external-event-title {\n  font-size: var(--text-xs);\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/calendar/CalendarHeader.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/calendar/CalendarMonthView.vue","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":90,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":90,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3354,3357],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3354,3357],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":110,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":110,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3832,3835],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3832,3835],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<script setup lang=\"ts\">\nimport { ref, inject, computed } from 'vue'\nimport ProjectEmojiIcon from '@/components/base/ProjectEmojiIcon.vue'\nimport { useCalendarCore } from '@/composables/useCalendarCore'\nimport { useTaskStore } from '@/stores/tasks'\nimport type { CalendarEvent } from '@/types/tasks'\nimport type { MonthDay } from '@/composables/calendar/useCalendarMonthView'\nimport type { ExternalCalendarEvent } from '@/composables/calendar/useExternalCalendar'\nimport { truncateUrlsInText } from '@/utils/urlTruncate'\n\nconst props = defineProps<{\n  monthDays: MonthDay[]\n  currentTaskId?: string | null\n  externalEvents?: ExternalCalendarEvent[]\n}>()\nconst emit = defineEmits<{\n  (e: 'monthDrop', event: DragEvent, dateString: string): void\n  (e: 'monthDayClick', dateString: string): void\n  (e: 'eventDragStart', event: DragEvent, calEvent: CalendarEvent): void\n  (e: 'eventDragEnd', event: DragEvent): void\n  (e: 'eventDblClick', calEvent: CalendarEvent): void\n  (e: 'eventContextMenu', event: MouseEvent, calEvent: CalendarEvent): void\n  (e: 'cycleStatus', event: MouseEvent, calEvent: CalendarEvent): void\n  (e: 'cellDblClick', dateString: string): void\n}>()\n\n// Debounce single-click vs double-click on day cells\n// Single click → navigate to day view, Double click → open create modal\nlet clickTimer: ReturnType<typeof setTimeout> | null = null\nconst handleDayCellClick = (dateString: string) => {\n  if (clickTimer) clearTimeout(clickTimer)\n  clickTimer = setTimeout(() => {\n    emit('monthDayClick', dateString)\n  }, 250)\n}\nconst handleDayCellDblClick = (dateString: string) => {\n  if (clickTimer) { clearTimeout(clickTimer); clickTimer = null }\n  emit('cellDblClick', dateString)\n}\n\n// Local drag state for visual feedback\nconst activeDragDay = ref<string | null>(null)\nconst draggedEventId = ref<string | null>(null)\n\nconst handleCellDragEnter = (dateString: string) => {\n  activeDragDay.value = dateString\n}\n\nconst handleCellDragLeave = (event: DragEvent, dateString: string) => {\n  // Only clear if actually leaving the cell (not entering a child element)\n  const related = event.relatedTarget as HTMLElement | null\n  const cell = event.currentTarget as HTMLElement\n  if (!related || !cell.contains(related)) {\n    if (activeDragDay.value === dateString) {\n      activeDragDay.value = null\n    }\n  }\n}\n\nconst handleCellDrop = (event: DragEvent, dateString: string) => {\n  activeDragDay.value = null\n  emit('monthDrop', event, dateString)\n}\n\nconst handleEventDragStart = (event: DragEvent, calEvent: CalendarEvent) => {\n  draggedEventId.value = calEvent.taskId\n  emit('eventDragStart', event, calEvent)\n}\n\nconst handleEventDragEnd = (event: DragEvent) => {\n  draggedEventId.value = null\n  activeDragDay.value = null\n  emit('eventDragEnd', event)\n}\n\n// External events grouped by date\nconst externalEventsByDate = computed(() => {\n  const map = new Map<string, ExternalCalendarEvent[]>()\n  if (!props.externalEvents?.length) return map\n  for (const event of props.externalEvents) {\n    const d = event.startTime\n    const dateString = `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}-${String(d.getDate()).padStart(2, '0')}`\n    if (!map.has(dateString)) map.set(dateString, [])\n    map.get(dateString)!.push(event)\n  }\n  return map\n})\n\n// Inject helpers from parent CalendarView\nconst helpers = inject('calendar-helpers') as any\nconst {\n  getProjectVisual,\n  getProjectName,\n  getProjectColor,\n  getPriorityClass,\n  getPriorityLabel,\n  getTaskStatus,\n  getStatusLabel,\n  getStatusIcon,\n  formatEventTime\n} = helpers\n\n// TASK-1321: Dynamic weekday headers based on weekStartsOn setting\nconst { getWeekDayHeaders } = useCalendarCore()\nconst weekDayHeaders = computed(() => getWeekDayHeaders())\n\n// TASK-1322: Tooltip with task description\nconst taskStore = useTaskStore()\n\nconst getEventTooltip = (event: any) => {\n  const task = taskStore.getTask(event.taskId)\n  const lines = [event.title]\n  if (task?.description) {\n    const plain = task.description.replace(/<[^>]*>/g, '').trim()\n    if (plain) lines.push(plain.substring(0, 200))\n  }\n  const time = formatEventTime(event)\n  if (time) lines.unshift(`🕐 ${time}`)\n  const status = getStatusLabel(getTaskStatus(event))\n  if (status) lines.push(`Status: ${status}`)\n  return lines.join('\\n')\n}\n\n</script>\n\n<template>\n  <div class=\"month-view\">\n    <!-- Day-of-week header row -->\n    <div class=\"month-weekday-header\">\n      <div v-for=\"day in weekDayHeaders\" :key=\"day\" class=\"weekday-label\">\n        {{ day }}\n      </div>\n    </div>\n\n    <!-- Month Grid -->\n    <div class=\"month-grid\">\n      <div\n        v-for=\"day in monthDays\"\n        :key=\"day.dateString\"\n        class=\"month-day-cell\"\n        :class=\"{\n          'other-month': !day.isCurrentMonth,\n          'today': day.isToday,\n          'drag-over': activeDragDay === day.dateString\n        }\"\n        @drop.prevent=\"handleCellDrop($event, day.dateString)\"\n        @dragover.prevent\n        @dragenter.prevent=\"handleCellDragEnter(day.dateString)\"\n        @dragleave=\"handleCellDragLeave($event, day.dateString)\"\n        @click=\"handleDayCellClick(day.dateString)\"\n        @dblclick.stop=\"handleDayCellDblClick(day.dateString)\"\n      >\n        <div class=\"day-number\">\n          {{ day.dayNumber }}\n        </div>\n\n        <div class=\"day-events\">\n          <div\n            v-for=\"event in day.events\"\n            :key=\"event.id\"\n            class=\"month-event\"\n            :class=\"{ 'timer-active-event': currentTaskId === event.taskId, 'status-done': getTaskStatus(event) === 'done', 'dragging': draggedEventId === event.taskId }\"\n            :style=\"{ backgroundColor: event.color }\"\n            :title=\"getEventTooltip(event)\"\n            draggable=\"true\"\n            @dragstart=\"handleEventDragStart($event, event)\"\n            @dragend=\"handleEventDragEnd($event)\"\n            @dblclick.stop=\"$emit('eventDblClick', event)\"\n            @contextmenu.prevent.stop=\"$emit('eventContextMenu', $event, event)\"\n            @click.stop\n          >\n            <!-- Project Stripe -->\n            <div\n              v-if=\"getProjectVisual(event).type === 'emoji'\"\n              class=\"project-indicator project-emoji-indicator\"\n              :title=\"`Project: ${getProjectName(event)}`\"\n            >\n              <ProjectEmojiIcon\n                :emoji=\"getProjectVisual(event).content\"\n                size=\"xs\"\n                :title=\"`Project: ${getProjectName(event)}`\"\n                class=\"project-emoji\"\n              />\n            </div>\n            <div\n              v-else\n              class=\"project-indicator project-color-indicator\"\n              :style=\"{ backgroundColor: getProjectColor(event) }\"\n              :title=\"`Project: ${getProjectName(event)}`\"\n            />\n\n            <!-- Priority Stripe -->\n            <div\n              class=\"priority-stripe\"\n              :class=\"`priority-${getPriorityClass(event)}`\"\n              :title=\"`Priority: ${getPriorityLabel(event)}`\"\n            />\n            <span v-if=\"formatEventTime(event)\" class=\"event-time\">{{ formatEventTime(event) }}</span>\n            <span\n              class=\"event-title-short\"\n              dir=\"auto\"\n              :title=\"event.title\"\n              @click.stop=\"$emit('cycleStatus', $event, event)\"\n            >\n              {{ getStatusIcon(getTaskStatus(event)) }} {{ truncateUrlsInText(event.title) }}\n            </span>\n          </div>\n\n          <!-- TASK-1317: External calendar events (read-only pills) -->\n          <div\n            v-for=\"ext in (externalEventsByDate.get(day.dateString) || [])\"\n            :key=\"`ext-${ext.id}`\"\n            class=\"month-event month-event--external\"\n            :style=\"{ borderColor: ext.color, backgroundColor: ext.color + '20' }\"\n            :title=\"`${ext.title}${ext.location ? '\\n📍 ' + ext.location : ''}`\"\n          >\n            <div class=\"external-dot\" :style=\"{ backgroundColor: ext.color }\" />\n            <span class=\"event-title-short\" dir=\"auto\">{{ ext.title }}</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.month-view {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  position: relative;\n  z-index: 1;\n}\n\n.month-weekday-header {\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n  gap: 1px;\n  background: var(--glass-border-light);\n  flex-shrink: 0;\n}\n\n.weekday-label {\n  background: var(--glass-panel-bg);\n  padding: var(--space-2);\n  text-align: center;\n  font-size: var(--text-sm);\n  font-weight: var(--font-semibold);\n  color: var(--text-muted);\n}\n\n.month-grid {\n  flex: 1;\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n  grid-template-rows: repeat(6, 1fr);\n  gap: 1px;\n  background: var(--glass-border-light);\n  overflow-y: auto;\n}\n\n.month-day-cell {\n  background: var(--glass-panel-bg);\n  min-height: 120px;\n  padding: var(--space-2);\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-1);\n  cursor: pointer;\n  transition: background var(--duration-fast);\n}\n\n.month-day-cell:hover {\n  background: var(--glass-bg-subtle);\n}\n\n.month-day-cell.drag-over {\n  background: rgba(99, 102, 241, 0.2) !important;\n  box-shadow: inset 0 0 0 2px rgba(99, 102, 241, 0.5) !important;\n  opacity: 1 !important;\n}\n\n.month-day-cell.other-month {\n  background: var(--glass-bg-tint);\n  opacity: 0.6;\n}\n\n.month-day-cell.today {\n  background: rgba(239, 68, 68, 0.05);\n}\n\n.day-number {\n  font-size: var(--text-sm);\n  font-weight: var(--font-semibold);\n  color: var(--text-muted);\n  text-align: right;\n}\n\n.month-day-cell.today .day-number {\n  color: var(--color-danger);\n  background: var(--color-danger);\n  color: white;\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  margin-left: auto;\n}\n\n.day-events {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-0_5);\n  flex: 1;\n  overflow-y: auto;\n}\n\n/* TASK-1322: Vertical compact layout — shows more content per event */\n.month-event {\n  padding: var(--space-0_5) var(--space-1);\n  padding-left: var(--space-2_5);\n  border-radius: var(--radius-sm);\n  font-size: var(--text-xs);\n  color: white;\n  cursor: grab;\n  position: relative;\n  line-height: 1.3;\n}\n\n.month-event.timer-active-event {\n  box-shadow: 0 0 8px rgba(255, 255, 255, 0.5), inset 0 0 0 1px rgba(255, 255, 255, 0.5);\n}\n\n.event-time {\n  font-weight: var(--font-bold);\n  opacity: 0.8;\n  font-size: 0.6rem;\n  display: block;\n  margin-bottom: 1px;\n}\n\n.project-indicator {\n  width: 4px;\n  height: calc(100% - 4px);\n  border-radius: var(--radius-xs);\n  position: absolute;\n  left: var(--space-0_5);\n  top: var(--space-0_5);\n}\n\n.project-emoji-indicator {\n  width: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.priority-stripe {\n  width: 2px;\n  height: calc(100% - 6px);\n  border-radius: 1px;\n  position: absolute;\n  left: 0;\n  top: 3px;\n}\n\n.event-title-short {\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  word-break: break-word;\n}\n\n/* BUG-1304: Visual indicator for done tasks — low opacity only, no strikethrough */\n.month-event.status-done {\n  filter: grayscale(0.6) brightness(0.85);\n  opacity: 0.55;\n}\n\n.month-event.dragging {\n  opacity: 0.35 !important;\n  transform: scale(0.95);\n}\n\n/* TASK-1317: External calendar events */\n.month-event--external {\n  background: transparent !important;\n  border: 1px solid;\n  color: var(--text-secondary) !important;\n  cursor: default;\n  padding-left: var(--space-1);\n}\n\n.month-event--external:hover {\n  filter: brightness(1.1);\n}\n\n.external-dot {\n  width: 6px;\n  height: 6px;\n  border-radius: 50%;\n  flex-shrink: 0;\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/calendar/CalendarStatusOverlays.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/calendar/CalendarWeekView.vue","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":10,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[433,436],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[433,436],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":46,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1897,1900],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1897,1900],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":60,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2161,2164],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2161,2164],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":109,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":109,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3974,3977],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3974,3977],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<script setup lang=\"ts\">\nimport { ref, computed, inject } from 'vue'\nimport { useTaskStore } from '@/stores/tasks'\nimport type { WeekEvent, DragGhost } from '@/types/tasks'\nimport type { TimeSlot } from '@/composables/calendar/useCalendarDayView'\nimport type { ExternalCalendarEvent } from '@/composables/calendar/useExternalCalendar'\nimport { truncateUrlsInText } from '@/utils/urlTruncate'\n\nconst props = defineProps<{\n  weekDays: any[]\n  workingHours: number[]\n  weekEvents: WeekEvent[]\n  currentTaskId?: string | null\n  // Same props as CalendarDayView for drag/resize visual feedback\n  dragGhost: DragGhost\n  isDragging: boolean\n  draggedEventId: string | null\n  resizePreview?: {\n    isResizing: boolean\n    taskId: string | null\n    previewDuration: number\n    direction: 'top' | 'bottom'\n  } | null\n  externalEvents?: ExternalCalendarEvent[]\n}>()\n\n// Same emit signatures as CalendarDayView — uses TimeSlot for drop targets\ndefineEmits<{\n  (e: 'dragover', event: DragEvent, slot: TimeSlot): void\n  (e: 'dragenter', event: DragEvent, slot: TimeSlot): void\n  (e: 'dragleave'): void\n  (e: 'drop', event: DragEvent, slot: TimeSlot): void\n  (e: 'eventDragStart', event: DragEvent, weekEvent: WeekEvent): void\n  (e: 'eventDragEnd', event: DragEvent, weekEvent: WeekEvent): void\n  (e: 'eventClick', event: MouseEvent, weekEvent: WeekEvent): void\n  (e: 'eventDblClick', weekEvent: WeekEvent): void\n  (e: 'eventContextMenu', event: MouseEvent, weekEvent: WeekEvent): void\n  (e: 'cycleStatus', event: MouseEvent, weekEvent: WeekEvent): void\n  (e: 'removeFromCalendar', weekEvent: WeekEvent): void\n  (e: 'startTimer', weekEvent: WeekEvent): void\n  (e: 'startResize', event: MouseEvent, weekEvent: WeekEvent, direction: 'top' | 'bottom'): void\n  (e: 'cellDblClick', dateString: string, hour: number): void\n}>()\n\n// Inject helpers from parent CalendarView\nconst helpers = inject('calendar-helpers') as any\nconst {\n  formatHour,\n  formatEventTime,\n  isCurrentWeekTimeCell,\n  getPriorityClass,\n  getTaskStatus,\n  getStatusIcon,\n  getStatusLabel\n} = helpers\n\n// TASK-1322: Tooltip with task description\nconst taskStore = useTaskStore()\n\nconst getEventTooltip = (event: any) => {\n  const task = taskStore.getTask(event.taskId)\n  const lines = [event.title]\n  if (task?.description) {\n    const plain = task.description.replace(/<[^>]*>/g, '').trim()\n    if (plain) lines.push(plain.substring(0, 200))\n  }\n  const time = formatEventTime(event)\n  if (time) lines.unshift(`🕐 ${time}`)\n  const status = getStatusLabel(getTaskStatus(event))\n  if (status) lines.push(`Status: ${status}`)\n  return lines.join('\\n')\n}\n\n// Local drag cell tracking for ghost preview positioning\nconst activeDragCell = ref<{ dayIndex: number; hour: number } | null>(null)\n\n// Create a TimeSlot from week cell data — same shape as day view slots\nconst createSlot = (dateString: string, hour: number): TimeSlot => ({\n  id: `${dateString}-${hour}-0`,\n  hour,\n  minute: 0,\n  slotIndex: hour * 2,\n  date: dateString\n})\n\n// Group events by their starting cell for in-cell rendering (like day view)\nconst eventsByCell = computed(() => {\n  const map = new Map<string, WeekEvent[]>()\n  for (const event of props.weekEvents) {\n    const startHour = Math.floor(event.startSlot / 2) + 6\n    const key = `${event.dayIndex}-${startHour}`\n    if (!map.has(key)) map.set(key, [])\n    map.get(key)!.push(event)\n  }\n  return map\n})\n\nconst getEventsForCell = (dayIndex: number, hour: number): WeekEvent[] => {\n  return eventsByCell.value.get(`${dayIndex}-${hour}`) || []\n}\n\n// TASK-1317: External events grouped by cell\nconst externalEventsByCell = computed(() => {\n  const map = new Map<string, ExternalCalendarEvent[]>()\n  if (!props.externalEvents?.length) return map\n  for (const event of props.externalEvents) {\n    const d = event.startTime\n    const dateString = `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}-${String(d.getDate()).padStart(2, '0')}`\n    const dayIndex = props.weekDays.findIndex((day: any) => day.dateString === dateString)\n    if (dayIndex === -1) continue\n    const hour = d.getHours()\n    const key = `${dayIndex}-${hour}`\n    if (!map.has(key)) map.set(key, [])\n    map.get(key)!.push(event)\n  }\n  return map\n})\n\n// Absolute positioning for time-spanning blocks (like Google Calendar)\n// Overlapping events split into side-by-side columns using event.column / event.totalColumns\nconst HALF_HOUR_HEIGHT = 30\nconst getWeekEventCellStyle = (event: WeekEvent) => {\n  const topOffset = (event.startSlot % 2) * HALF_HOUR_HEIGHT\n  const height = event.slotSpan * HALF_HOUR_HEIGHT\n  if (event.totalColumns > 1) {\n    const widthPercent = 100 / event.totalColumns\n    const leftPercent = widthPercent * event.column\n    return {\n      position: 'absolute' as const,\n      top: `${topOffset}px`,\n      height: `${height}px`,\n      width: `calc(${widthPercent}% - 4px)`,\n      left: `calc(${leftPercent}% + 2px)`,\n      zIndex: 10 + event.column\n    }\n  }\n  return {\n    position: 'absolute' as const,\n    top: `${topOffset}px`,\n    height: `${height}px`,\n    left: '2px',\n    right: '2px',\n    zIndex: 10\n  }\n}\n\n</script>\n\n<template>\n  <div class=\"week-view\">\n    <!-- Week Header -->\n    <div class=\"week-header\">\n      <div class=\"week-time-label\" />\n      <div\n        v-for=\"(day, index) in weekDays\"\n        :key=\"index\"\n        class=\"week-day-header\"\n      >\n        <div class=\"week-day-name\">\n          {{ day.dayName }}\n        </div>\n        <div class=\"week-day-date\">\n          {{ day.date }}\n        </div>\n      </div>\n    </div>\n\n    <!-- Week Grid Container -->\n    <div class=\"week-grid-container\">\n      <!-- Time Labels -->\n      <div class=\"week-time-labels\">\n        <div\n          v-for=\"hour in workingHours\"\n          :key=\"hour\"\n          class=\"week-time-label\"\n        >\n          {{ formatHour(hour) }}\n        </div>\n      </div>\n\n      <!-- Week Days Grid -->\n      <div class=\"week-days-grid\">\n        <div class=\"week-time-grid\">\n          <div\n            v-for=\"(day, dayIndex) in weekDays\"\n            :key=\"`col-${dayIndex}`\"\n            class=\"week-day-column\"\n          >\n            <div\n              v-for=\"hour in workingHours\"\n              :key=\"`${dayIndex}-${hour}`\"\n              class=\"week-time-cell\"\n              :class=\"{\n                'current-time': isCurrentWeekTimeCell(day.dateString, hour),\n                'drag-over': activeDragCell?.dayIndex === dayIndex && activeDragCell?.hour === hour\n              }\"\n              @dragover.prevent=\"activeDragCell = { dayIndex, hour }; $emit('dragover', $event, createSlot(day.dateString, hour))\"\n              @dragenter.prevent=\"activeDragCell = { dayIndex, hour }; $emit('dragenter', $event, createSlot(day.dateString, hour))\"\n              @dragleave=\"$emit('dragleave')\"\n              @drop.prevent=\"activeDragCell = null; $emit('drop', $event, createSlot(day.dateString, hour))\"\n              @dblclick.self=\"$emit('cellDblClick', day.dateString, hour)\"\n            >\n              <!-- Ghost Preview (during inbox drag) — same as day view -->\n              <div\n                v-if=\"dragGhost.visible && activeDragCell?.dayIndex === dayIndex && activeDragCell?.hour === hour\"\n                class=\"ghost-preview-inline\"\n                :style=\"{\n                  position: 'absolute',\n                  top: '0',\n                  height: `${Math.ceil(dragGhost.duration / 30) * 30}px`,\n                  left: '2px',\n                  right: '2px',\n                  zIndex: 40\n                }\"\n              >\n                <div class=\"ghost-content\">\n                  <span class=\"ghost-title\">{{ dragGhost.title }}</span>\n                  <span class=\"ghost-duration\">{{ dragGhost.duration }}min</span>\n                </div>\n              </div>\n\n              <!-- Week events as absolute-positioned time-spanning blocks -->\n              <div\n                v-for=\"event in getEventsForCell(dayIndex, hour)\"\n                :key=\"event.id\"\n                class=\"week-event\"\n                :class=\"{\n                  'timer-active-event': currentTaskId === event.taskId,\n                  'dragging': isDragging && draggedEventId === event.id,\n                  'status-done': getTaskStatus(event) === 'done'\n                }\"\n                :style=\"{ ...getWeekEventCellStyle(event), backgroundColor: event.color }\"\n                :title=\"getEventTooltip(event)\"\n                draggable=\"true\"\n                @dragstart=\"$emit('eventDragStart', $event, event)\"\n                @dragend=\"$emit('eventDragEnd', $event, event)\"\n                @click.stop=\"$emit('eventClick', $event, event)\"\n                @dblclick.stop=\"$emit('eventDblClick', event)\"\n                @contextmenu.prevent.stop=\"$emit('eventContextMenu', $event, event)\"\n              >\n                <!-- Priority Stripe -->\n                <div\n                  class=\"priority-stripe\"\n                  :class=\"`priority-${getPriorityClass(event)}`\"\n                />\n\n                <!-- Event Content — optimized for narrow columns -->\n                <div class=\"event-content\">\n                  <span class=\"event-time\">{{ formatEventTime(event) }}</span>\n                  <span class=\"event-title\" dir=\"auto\">\n                    {{ getStatusIcon(getTaskStatus(event)) }} {{ truncateUrlsInText(event.title) }}\n                  </span>\n                </div>\n\n                <!-- Resize handle (bottom edge) — drag to change duration -->\n                <div\n                  class=\"resize-handle resize-handle-bottom\"\n                  title=\"Drag to change duration\"\n                  @mousedown.stop.prevent=\"$emit('startResize', $event, event, 'bottom')\"\n                />\n              </div>\n\n              <!-- TASK-1317: External calendar events in this cell -->\n              <div\n                v-for=\"ext in (externalEventsByCell.get(`${dayIndex}-${hour}`) || [])\"\n                :key=\"`ext-${ext.id}`\"\n                class=\"week-event week-event--external\"\n                :style=\"{\n                  position: 'absolute',\n                  top: `${(ext.startTime.getMinutes() >= 30 ? 30 : 0)}px`,\n                  height: `${Math.max(20, Math.ceil((ext.endTime.getTime() - ext.startTime.getTime()) / 60000 / 30) * 30)}px`,\n                  right: '2px',\n                  width: '35%',\n                  borderColor: ext.color,\n                  backgroundColor: ext.color + '20'\n                }\"\n                :title=\"`${ext.title}${ext.location ? '\\n📍 ' + ext.location : ''}`\"\n              >\n                <span class=\"external-event-title\" dir=\"auto\">{{ ext.title }}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.week-view {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  position: relative;\n  z-index: 1;\n}\n\n.week-header {\n  display: grid;\n  grid-template-columns: 80px repeat(7, 1fr);\n  background: var(--glass-panel-bg);\n  backdrop-filter: blur(8px);\n  border-bottom: 1px solid var(--border-subtle);\n  position: sticky;\n  top: 0;\n  z-index: 20;\n}\n\n.week-time-label {\n  padding: var(--space-2) var(--space-4);\n}\n\n.week-day-header {\n  padding: var(--space-3) var(--space-2);\n  text-align: center;\n  border-left: 1px solid var(--glass-border-light);\n}\n\n.week-day-name {\n  font-size: var(--text-xs);\n  font-weight: var(--font-bold);\n  text-transform: uppercase;\n  color: var(--text-muted);\n  margin-bottom: var(--space-0_5);\n}\n\n.week-day-date {\n  font-size: var(--text-lg);\n  font-weight: var(--font-semibold);\n  color: var(--text-primary);\n}\n\n.week-grid-container {\n  flex: 1;\n  display: grid;\n  grid-template-columns: 80px 1fr;\n  overflow-y: auto;\n  position: relative;\n}\n\n.week-time-labels {\n  background: var(--glass-bg-subtle);\n  border-right: 1px solid var(--border-subtle);\n}\n\n.week-time-label {\n  height: 60px;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  padding-right: var(--space-4);\n  color: var(--text-muted);\n  font-size: var(--text-xs);\n  border-bottom: 1px solid var(--glass-border-light);\n}\n\n.week-days-grid {\n  position: relative;\n  display: grid;\n  grid-template-columns: 1fr;\n}\n\n.week-time-grid {\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n  height: 100%;\n}\n\n.week-day-column {\n  border-left: 1px solid var(--glass-border-light);\n}\n\n/* Cell — overflow visible so blocks can extend beyond cell boundaries */\n.week-time-cell {\n  height: 60px;\n  border-bottom: 1px solid var(--glass-border-light);\n  position: relative;\n  overflow: visible;\n  transition: background var(--duration-fast);\n}\n\n.week-time-cell:hover {\n  background: var(--glass-bg-tint);\n}\n\n.week-time-cell.drag-over {\n  background: var(--glass-bg-soft);\n  border-color: var(--accent-primary);\n}\n\n.week-time-cell.current-time {\n  background: rgba(239, 68, 68, 0.05);\n  box-shadow: inset 0 -2px 0 var(--color-danger);\n}\n\n/* Week event — absolute-positioned time-spanning block (like Google Calendar) */\n.week-event {\n  border-radius: var(--radius-sm);\n  font-size: var(--text-xs);\n  color: white;\n  cursor: grab;\n  overflow: hidden;\n  transition: filter var(--duration-fast), opacity var(--duration-fast);\n}\n\n.week-event:hover {\n  filter: brightness(1.1);\n}\n\n.week-event.dragging {\n  opacity: 0.35 !important;\n  transform: scale(0.95);\n  cursor: grabbing;\n}\n\n/* Event content — column layout, time at top, title below */\n.event-content {\n  padding: 2px 4px 2px 6px;\n  display: flex;\n  flex-direction: column;\n  gap: 0;\n  height: 100%;\n  overflow: hidden;\n}\n\n/* Time — bold, always visible at top of block */\n.event-time {\n  font-weight: var(--font-bold);\n  opacity: 0.9;\n  font-size: 0.6rem;\n  white-space: nowrap;\n  flex-shrink: 0;\n  line-height: 1.4;\n}\n\n/* Title — aggressive truncation for narrow 1/7th columns */\n.event-title {\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  word-break: break-word;\n  line-height: 1.2;\n  font-size: 0.65rem;\n}\n\n/* Priority stripe — thin left edge */\n.priority-stripe {\n  width: 3px;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  border-radius: var(--radius-sm) 0 0 var(--radius-sm);\n}\n\n/* Resize handle — appears on hover at bottom edge of event block */\n.resize-handle {\n  position: absolute;\n  left: 0;\n  right: 0;\n  height: 6px;\n  cursor: ns-resize;\n  opacity: 0;\n  transition: opacity var(--duration-fast);\n}\n\n.resize-handle-bottom {\n  bottom: 0;\n  border-radius: 0 0 var(--radius-sm) var(--radius-sm);\n  background: rgba(255, 255, 255, 0.3);\n}\n\n.week-event:hover .resize-handle {\n  opacity: 1;\n}\n\n/* Ghost preview — IDENTICAL to day view */\n.ghost-preview-inline {\n  background: linear-gradient(135deg, var(--calendar-ghost-bg-start) 0%, var(--calendar-ghost-bg-end) 100%);\n  backdrop-filter: blur(8px);\n  border: 3px solid var(--calendar-ghost-border);\n  border-radius: var(--radius-lg);\n  pointer-events: none;\n  z-index: 40;\n}\n\n.ghost-content {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color: var(--text-primary);\n  gap: var(--space-1);\n}\n\n.ghost-title {\n  font-weight: 700;\n  font-size: var(--text-xs);\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  max-width: 100%;\n  padding: 0 var(--space-1);\n}\n\n.ghost-duration {\n  font-size: var(--text-xs);\n  font-weight: 500;\n  opacity: 0.9;\n  background: var(--border-hover);\n  padding: var(--space-0_5) var(--space-2);\n  border-radius: var(--radius-lg);\n}\n\n/* Timer active glow */\n.week-event.timer-active-event {\n  box-shadow: 0 0 8px rgba(255, 255, 255, 0.5), inset 0 0 0 1px rgba(255, 255, 255, 0.5);\n  animation: timer-pulse 2s ease-in-out infinite;\n}\n\n@keyframes timer-pulse {\n  0%, 100% { opacity: 1; }\n  50% { opacity: 0.85; }\n}\n\n/* BUG-1304: Visual indicator for done tasks */\n.week-event.status-done {\n  filter: grayscale(0.6) brightness(0.85);\n  opacity: 0.55;\n}\n\n/* TASK-1317: External calendar events */\n.week-event--external {\n  background: transparent !important;\n  border: 1px solid;\n  color: var(--text-secondary) !important;\n  cursor: default;\n  padding-left: var(--space-1);\n}\n\n.week-event--external:hover {\n  filter: brightness(1.1);\n}\n\n.week-event--external .external-event-title {\n  font-size: 10px;\n  color: var(--text-secondary);\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  padding: 2px 4px;\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/canvas/CanvasContextMenu.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/canvas/CanvasContextMenus.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/canvas/CanvasEmptyState.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/canvas/CanvasGroup.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/canvas/CanvasLoadingOverlay.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/canvas/CanvasModals.vue","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":97,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":97,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3225,3228],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3225,3228],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":98,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":98,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3271,3274],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3271,3274],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":99,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":99,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3317,3320],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3317,3320],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":100,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3373,3376],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3373,3376],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<template>\n  <!-- Task Edit Modal -->\n  <TaskEditModal\n    :is-open=\"modals.isEditModalOpen\"\n    :task=\"modals.selectedTask\"\n    @close=\"modals.closeEditModal\"\n  />\n\n  <!-- Quick Task Create Modal -->\n  <QuickTaskCreateModal\n    :is-open=\"modals.isQuickTaskCreateOpen\"\n    :loading=\"false\"\n    @cancel=\"modals.closeQuickTaskCreate\"\n    @create=\"handleQuickTaskCreateAndClose\"\n  />\n\n  <!-- Batch Edit Modal -->\n  <BatchEditModal\n    :is-open=\"modals.isBatchEditModalOpen\"\n    :task-ids=\"modals.batchEditTaskIds\"\n    @close=\"modals.closeBatchEditModal\"\n    @applied=\"$emit('handleBatchEditApplied')\"\n  />\n\n  <!-- Section Settings Modal -->\n  <GroupSettingsMenu\n    :section=\"modals.editingSection\"\n    :is-visible=\"modals.isSectionSettingsOpen\"\n    @close=\"modals.closeSectionSettings\"\n    @save=\"(settings) => $emit('handleSectionSettingsSave', settings)\"\n  />\n\n  <!-- Unified Group Modal (create + edit with optional smart settings) -->\n  <UnifiedGroupModal\n    :is-open=\"modals.isGroupModalOpen\"\n    :group=\"modals.selectedGroup\"\n    :position=\"modals.groupModalPosition\"\n    @close=\"modals.closeGroupModal\"\n    @created=\"(group) => $emit('handleGroupCreated', group)\"\n    @updated=\"(group) => $emit('handleGroupUpdated', group)\"\n  />\n\n  <!-- Group Edit Modal -->\n  <GroupEditModal\n    :section=\"modals.selectedSectionForEdit\"\n    :is-visible=\"modals.isGroupEditModalOpen\"\n    @close=\"modals.closeGroupEditModal\"\n    @save=\"(updatedSection) => $emit('handleGroupEditSave', updatedSection)\"\n  />\n\n  <!-- Group Delete Confirmation Modal -->\n  <ConfirmationModal\n    :is-open=\"modals.isDeleteGroupModalOpen\"\n    title=\"Delete Group\"\n    :message=\"modals.deleteGroupMessage\"\n    confirm-text=\"Delete\"\n    @confirm=\"handleDeleteGroupConfirm\"\n    @cancel=\"modals.closeDeleteGroupModal\"\n  />\n\n  <!-- Bulk Delete Confirmation Modal (Shift+Delete on multiple items) -->\n  <ConfirmationModal\n    :is-open=\"modals.isBulkDeleteModalOpen\"\n    :title=\"modals.bulkDeleteTitle\"\n    :message=\"modals.bulkDeleteMessage\"\n    :details=\"modals.bulkDeleteItems.map(item => `${item.type === 'section' ? '▤' : '📌'} ${item.name}`)\"\n    :confirm-text=\"modals.bulkDeleteIsPermanent ? 'Delete Permanently' : 'Remove'\"\n    @confirm=\"handleBulkDeleteConfirm\"\n    @cancel=\"modals.closeBulkDeleteModal\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport { useCanvasModalsStore } from '@/stores/canvas/modals'\n\n// Components\nimport TaskEditModal from '@/components/tasks/TaskEditModal.vue'\nimport QuickTaskCreateModal from '@/components/tasks/QuickTaskCreateModal.vue'\nimport BatchEditModal from '@/components/tasks/BatchEditModal.vue'\nimport GroupSettingsMenu from '@/components/canvas/GroupSettingsMenu.vue'\nimport UnifiedGroupModal from '@/components/canvas/UnifiedGroupModal.vue'\nimport GroupEditModal from '@/components/canvas/GroupEditModal.vue'\nimport ConfirmationModal from '@/components/common/ConfirmationModal.vue'\n\ninterface QuickTaskData {\n  title: string\n  description: string\n  status: string\n  priority: 'low' | 'medium' | 'high'\n  dueDate?: string\n  projectId?: string\n}\n\nconst emit = defineEmits<{\n  (e: 'handleQuickTaskCreate', data: QuickTaskData): void\n  (e: 'handleBatchEditApplied'): void\n  (e: 'handleSectionSettingsSave', settings: any): void\n  (e: 'handleGroupCreated', group: any): void\n  (e: 'handleGroupUpdated', group: any): void\n  (e: 'handleGroupEditSave', updatedSection: any): void\n  (e: 'confirmDeleteGroup'): void\n  (e: 'confirmBulkDelete'): void\n}>()\n\nconst modals = useCanvasModalsStore()\n\n// FIX: Handle quick task create - emit full data AND close modal\nconst handleQuickTaskCreateAndClose = (data: QuickTaskData) => {\n  emit('handleQuickTaskCreate', data)\n  modals.closeQuickTaskCreate()\n}\n\n// BUG-1074 FIX: Use explicit emit function to ensure proper event propagation\n// BUG-1089 FIX: Close modal via Pinia store after emitting confirm event\nconst handleBulkDeleteConfirm = () => {\n  emit('confirmBulkDelete')\n  modals.closeBulkDeleteModal()\n}\n\n// BUG-1076 FIX: Handler for delete group confirmation\n// BUG-1089 FIX: Close modal via Pinia store after emitting confirm event\nconst handleDeleteGroupConfirm = () => {\n  emit('confirmDeleteGroup')\n  modals.closeDeleteGroupModal()\n}\n\n</script>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/canvas/CanvasSelectionBox.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/canvas/CanvasStatusBanner.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/canvas/CanvasToolbar.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/canvas/EdgeContextMenu.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/canvas/GroupEditModal.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/canvas/GroupNodeSimple.vue","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useTaskStore' is defined but never used. Allowed unused vars must match /^_/u.","line":88,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":88,"endColumn":22,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"useTaskStore"},"fix":{"range":[3217,3262],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":97,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":97,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3558,3561],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3558,3561],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":130,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":130,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4533,4536],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4533,4536],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'nearMin' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":263,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":263,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'nearMax' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":264,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":264,"endColumn":18}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<template>\n  <div\n    class=\"section-node\"\n    :class=\"[`section-type-${section.type}`, { 'collapsed': isCollapsed, 'is-dragging': dragging }]\"\n    :style=\"{ borderColor: groupColor, backgroundColor: groupColor + '25' }\"\n    @contextmenu.prevent=\"handleContextMenu\"\n  >\n    <!-- Section Header -->\n    <div class=\"section-header\" :style=\"{ background: groupColor + '20' }\">\n      <div class=\"section-color-dot\" :style=\"{ background: groupColor }\" />\n      <button class=\"collapse-btn\" :title=\"isCollapsed ? 'Expand group' : 'Collapse group'\" @click=\"toggleCollapse\">\n        <ChevronDown v-if=\"!isCollapsed\" :size=\"14\" />\n        <ChevronRight v-else :size=\"14\" />\n      </button>\n      <input\n        v-model=\"sectionName\"\n        class=\"section-name-input\"\n        placeholder=\"Group name...\"\n        :disabled=\"isCollapsed\"\n        @blur=\"updateName\"\n        @keydown.enter=\"($event.target as HTMLInputElement).blur()\"\n      >\n      <!-- TASK-130: Show date suffix for day-of-week groups (e.g., \"/ Jan 10\") -->\n      <!-- TASK-166: Clickable date picker for bi-directional editing -->\n      <NPopover\n        v-if=\"dayOfWeekDateSuffix\"\n        trigger=\"click\"\n        placement=\"bottom\"\n        :show=\"showDatePicker\"\n        @update:show=\"showDatePicker = $event\"\n      >\n        <template #trigger>\n          <span\n            class=\"section-date-suffix clickable\"\n            title=\"Click to change date\"\n            @click.stop=\"showDatePicker = true\"\n          >\n            / {{ dayOfWeekDateSuffix }}\n          </span>\n        </template>\n        <NDatePicker\n          panel\n          type=\"date\"\n          :value=\"currentTargetTimestamp\"\n          @update:value=\"handleDateSelect\"\n        />\n      </NPopover>\n\n      <!-- TASK-068: All actions moved to context menu for cleaner header -->\n\n      <div class=\"section-count\" :class=\"{ 'has-tasks': taskCount > 0 }\">\n        {{ taskCount }}\n        <span v-if=\"isCollapsed && taskCount > 0\" class=\"hidden-indicator\" :title=\"`${taskCount} hidden tasks`\">📦</span>\n      </div>\n    </div>\n\n    <!-- TASK-141: ADD SLOT FOR CHILD NODES (CRITICAL FOR VUE FLOW NESTING) -->\n    <div v-if=\"!isCollapsed\" class=\"section-body\">\n      <slot />\n    </div>\n\n    <!-- RESIZE HANDLES - BUG-043: Enable all corners AND edges for resizing -->\n    <!-- TASK-290: Always render NodeResizer, use CSS to show/hide on hover -->\n    <NodeResizer\n      is-visible\n      :min-width=\"200\"\n      :min-height=\"80\"\n      :max-width=\"50000\"\n      :max-height=\"50000\"\n      :line-positions=\"[Position.Top, Position.Right, Position.Bottom, Position.Left]\"\n      @resize-start=\"handleResizeStart\"\n      @resize=\"handleResize\"\n      @resize-end=\"handleResizeEnd\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, watch, onMounted } from 'vue'\nimport { ChevronDown, ChevronRight } from 'lucide-vue-next'\nimport { NodeResizer } from '@vue-flow/node-resizer'\nimport '@vue-flow/node-resizer/dist/style.css'\n// TASK-072: Import useNode for reactive node data from Vue Flow state\n// TASK-072: Use reactive node data if needed\n// BUG-043: Import Position for edge resize handles\nimport { Position } from '@vue-flow/core'\nimport { useCanvasStore } from '@/stores/canvas'\nimport { useTaskStore } from '@/stores/tasks'\n// TASK-167: Direct import to ensure latest logic\nimport { detectPowerKeyword } from '@/composables/usePowerKeywords'\n// TASK-166: Date picker for bi-directional day group editing\nimport { NPopover, NDatePicker } from 'naive-ui'\n\n// Define Props\nconst props = defineProps<{\n  id: string\n  data: any\n  selected?: boolean\n  dragging?: boolean\n}>()\n\n// Define Emits\nconst emit = defineEmits([\n  'update',\n  'collect',\n  'contextMenu',\n  'open-settings',\n  'resizeStart',\n  'resize',\n  'resizeEnd'\n])\n\n// Initialize Stores\nconst canvasStore = useCanvasStore()\n\n// Computed Properties\n// Ensure we handle both structure formats (direct props or nested in data)\nconst section = computed(() => props.data?.section || props.data)\nconst isCollapsed = computed(() => !!props.data?.isCollapsed)\n\n// BUG-225 FIX: Get color reactively from store instead of static props.data\n// This ensures color updates immediately when changed in the modal without page refresh\nconst groupColor = computed(() => {\n  const groupId = props.data?.id\n  if (!groupId) return props.data?.color || '#3b82f6'\n  const storeGroup = canvasStore.groups.find(g => g.id === groupId)\n  return storeGroup?.color || props.data?.color || '#3b82f6'\n})\nconst taskCount = computed(() => {\n  const data = props.data as any\n  if (!data) return 0\n\n  // Determine which count to show based on whether this is a root or child group\n  // - Root groups (no parent): show aggregated count (includes descendants)\n  // - Child groups: show only direct count (tasks in this group only)\n  const isRootGroup = !data.parentGroupId || data.parentGroupId === 'NONE'\n  const direct = data.directTaskCount ?? 0\n  const aggregated = data.aggregatedTaskCount ?? direct\n\n  return isRootGroup ? aggregated : direct\n})\n\n// Local State\nconst sectionName = ref(props.data?.name || '')\n\n// TASK-166: Date picker state for bi-directional day group editing\nconst showDatePicker = ref(false)\nconst DAY_NAMES = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']\n\n// Get the current target date as timestamp for the date picker\nconst currentTargetTimestamp = computed(() => {\n  const currentName = sectionName.value\n  if (!currentName) return Date.now()\n\n  const explicitKeyword = detectPowerKeyword(currentName)\n  if (!explicitKeyword || explicitKeyword.category !== 'day_of_week') {\n    return Date.now()\n  }\n\n  const targetDayIndex = parseInt(explicitKeyword.value, 10)\n  if (isNaN(targetDayIndex)) return Date.now()\n\n  const today = new Date()\n  const daysUntilTarget = ((7 + targetDayIndex - today.getDay()) % 7) || 7\n  const targetDate = new Date(today)\n  targetDate.setDate(today.getDate() + daysUntilTarget)\n  return targetDate.getTime()\n})\n\n// Handle date selection from picker\nconst handleDateSelect = (timestamp: number | null) => {\n  if (!timestamp) return\n\n  const selectedDate = new Date(timestamp)\n  const dayName = DAY_NAMES[selectedDate.getDay()]\n\n  // Update the group name to the new day\n  sectionName.value = dayName\n  emit('update', { name: dayName })\n\n  showDatePicker.value = false\n}\n\n// TASK-130: Compute upcoming date for day-of-week groups\nconst dayOfWeekDateSuffix = computed(() => {\n  // Use local name ref for immediate reactivity\n  const currentName = sectionName.value\n  if (!currentName) return null\n  \n  // Re-detect keyword locally to ensure reactivity allows \"instant\" feedback\n  const explicitKeyword = detectPowerKeyword(currentName)\n  \n  if (!explicitKeyword || explicitKeyword.category !== 'day_of_week') {\n    return null\n  }\n\n  const targetDayIndex = parseInt(explicitKeyword.value, 10)\n  if (isNaN(targetDayIndex)) return null\n\n  const today = new Date()\n  // Calculate next occurrence: same formula as drag-drop\n  const daysUntilTarget = ((7 + targetDayIndex - today.getDay()) % 7) || 7\n  const targetDate = new Date(today)\n  targetDate.setDate(today.getDate() + daysUntilTarget)\n\n  // Format as \"D.M.YY\" (e.g. 10.1.26)\n  const day = targetDate.getDate()\n  const month = targetDate.getMonth() + 1\n  const year = targetDate.getFullYear().toString().slice(-2)\n  \n  return `${day}.${month}.${year}`\n})\n\n// Watch for external name changes\nwatch(() => props.data.name, (newName) => {\n  sectionName.value = newName\n})\n\nconst updateName = () => {\n  if (sectionName.value !== props.data.name) {\n    emit('update', { name: sectionName.value })\n  }\n}\n\nconst toggleCollapse = () => {\n  // Use props.data.id (raw group ID), not props.id (Vue Flow node ID 'section-xxx')\n  const groupId = props.data?.id || props.id.replace('section-', '')\n  canvasStore.toggleSectionCollapse(groupId)\n}\n\n// TASK-068: Removed toggleAutoCollect - feature consolidated\n\nconst handleContextMenu = (event: MouseEvent) => {\n  emit('contextMenu', event, props.data)\n}\n\n// Resize event handlers\nconst handleResizeStart = (event: unknown) => {\n  emit('resizeStart', { sectionId: props.id, event })\n}\n\nconst rafId = ref<number | null>(null)\nconst isMounting = ref(true)\n\nonMounted(() => {\n  // Guard against spurious resize events during initial render\n  setTimeout(() => {\n    isMounting.value = false\n  }, 500)\n})\n\nconst handleResize = (event: unknown) => {\n  if (isMounting.value) return\n  if (rafId.value) cancelAnimationFrame(rafId.value)\n\n  rafId.value = requestAnimationFrame(() => {\n    // Try to cast for logging\n    const resizeEvent = event as { height?: number; params?: { height?: number } }\n    // Extract height being requested by NodeResizer\n    const nodeResizerHeight = resizeEvent?.height || resizeEvent?.params?.height\n\n    // Only log when near constraints to reduce noise\n    const nearMin = nodeResizerHeight && nodeResizerHeight <= 120\n    const nearMax = nodeResizerHeight && nodeResizerHeight >= 1950\n\n    emit('resize', { sectionId: props.id, event })\n    rafId.value = null\n  })\n}\n\nconst handleResizeEnd = (event: unknown) => {\n  if (isMounting.value) return\n  emit('resizeEnd', { sectionId: props.id, event })\n}\n</script>\n\n<style scoped>\n/* TASK-073 + TASK-079: Enhanced group outline styling for visibility and distinction */\n.section-node {\n  width: 100%;\n  height: 100%;\n  /* BUG-251 FIX: Use flexbox so section-body can fill remaining space */\n  display: flex;\n  flex-direction: column;\n  /* TASK-073: Double-line border effect - inner solid + outer subtle */\n  border: var(--space-0_5) solid rgba(var(--color-slate-50), 0.35) !important;\n  border-radius: var(--radius-lg);\n  /* BUG-1216: backdrop-filter removed for performance */\n  background: rgba(45, 48, 58, 0.92) !important;\n  position: relative;\n  z-index: 1;\n  /* TASK-073: Outer line via outline for double-border effect */\n  outline: var(--space-0_5) solid rgba(var(--color-slate-50), 0.12);\n  outline-offset: var(--space-0_5);\n  box-shadow:\n    0 var(--space-2) var(--space-6) rgba(var(--color-slate-900), 0.4),\n    inset 0 var(--space-0_5) 0 rgba(var(--color-slate-50), 0.08);\n  /* BUG-1216: removed 80px glow spread - too expensive during pan/zoom */\n  /* BUG-1216: explicit properties only - 'all' causes drag sluggishness */\n  transition: box-shadow var(--duration-fast) ease, border-color var(--duration-fast) ease, outline var(--duration-fast) ease, opacity var(--duration-fast) ease;\n}\n\n.section-node.is-dragging {\n  transition: none !important;\n  backdrop-filter: none !important;\n  -webkit-backdrop-filter: none !important;\n  filter: none !important;\n  box-shadow: 0 var(--space-2) var(--space-8) rgba(var(--color-slate-900), 0.4) !important;\n}\n\n.section-node:hover {\n  /* TASK-073: Enhanced hover - brighter border and stronger outline */\n  border-color: rgba(var(--color-slate-50), 0.50) !important;\n  outline: var(--space-0_5) solid rgba(var(--color-slate-50), 0.20);\n  outline-offset: var(--space-0_75);\n  box-shadow:\n    0 var(--space-3) var(--space-8) rgba(var(--color-slate-900), 0.5),\n    inset 0 var(--space-0_5) 0 rgba(var(--color-slate-50), 0.1);\n  /* BUG-1216: removed 100px glow spread on hover */\n}\n\n/* TASK-073: Selected group state - highly visible */\n.section-node.selected,\n.section-node:focus-within {\n  border-color: var(--accent-primary) !important;\n  outline: var(--space-0_5) solid rgba(99, 102, 241, 0.4);\n  outline-offset: var(--space-0_75);\n  box-shadow:\n    0 var(--space-5) var(--space-14) rgba(var(--color-slate-900), 0.55),\n    0 var(--space-2_5) var(--space-7) rgba(var(--color-slate-900), 0.35),\n    0 0 var(--space-25) var(--space-6_25) currentColor,\n    /* Accent glow for selection */\n    0 0 var(--space-5) var(--space-1) rgba(99, 102, 241, 0.4),\n    inset 0 var(--space-0_5) 0 rgba(var(--color-slate-50), 0.12);\n}\n\n.section-header {\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  padding: var(--space-2) var(--space-3);\n  padding-right: var(--space-12_5); /* Make space for count badge */\n  border-bottom: var(--space-0_5) solid var(--glass-border-soft);\n  border-radius: var(--radius-lg) var(--radius-lg) 0 0;\n  min-height: var(--space-10); /* Ensure consistent header height */\n  overflow: hidden; /* Prevent header overflow */\n  flex-shrink: 0; /* BUG-251: Don't shrink header when using flexbox layout */\n}\n\n.section-color-dot {\n  width: var(--space-2_5);\n  height: var(--space-2_5);\n  border-radius: var(--radius-full);\n  flex-shrink: 0;\n}\n\n.collapse-btn {\n  background: transparent;\n  border: none;\n  color: var(--text-secondary);\n  cursor: pointer;\n  padding: var(--space-1);\n  border-radius: var(--radius-sm);\n  transition: all var(--duration-fast);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.collapse-btn:hover {\n  background: var(--glass-bg-heavy);\n  color: var(--text-primary);\n}\n\n.collapse-btn:focus {\n  outline: var(--space-0_5) solid var(--accent-primary);\n  outline-offset: var(--space-0_5);\n}\n\n/* Header Actions Container - handles overflow gracefully */\n.header-actions {\n  display: flex;\n  align-items: center;\n  gap: var(--space-1);\n  flex-shrink: 1;\n  min-width: 0; /* Allow shrinking below content size */\n  overflow: hidden;\n  position: relative;\n}\n\n/* Fade mask to indicate overflow */\n.header-actions::after {\n  content: '';\n  position: absolute;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  width: var(--space-4);\n  background: linear-gradient(to right, transparent, var(--glass-bg-light));\n  pointer-events: none;\n  opacity: 0;\n  transition: opacity var(--duration-fast);\n}\n\n/* Show fade mask when container might be overflowing */\n.section-header:hover .header-actions::after {\n  opacity: 0.8;\n}\n\n/* TASK-068: Removed .auto-collect-btn CSS - feature removed to reduce clutter */\n\n.section-name-input {\n  flex: 1 1 var(--space-15); /* Grow, shrink, min basis of 60px */\n  min-width: var(--space-15); /* Minimum readable width */\n  background: transparent;\n  border: none;\n  color: var(--text-primary);\n  font-size: var(--text-sm);\n  font-weight: var(--font-semibold);\n  outline: none;\n  padding: var(--space-1) var(--space-2);\n  border-radius: var(--radius-sm);\n  transition: background var(--duration-fast);\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n}\n\n.section-name-input:hover,\n.section-name-input:focus {\n  background: var(--glass-bg-medium);\n}\n\n/* TASK-130: Day-of-week date suffix styling */\n/* TASK-166: Made clickable for date picker */\n.section-date-suffix {\n  color: var(--text-secondary);\n  font-size: var(--text-xs);\n  font-weight: var(--font-medium);\n  white-space: nowrap;\n  flex-shrink: 0;\n  padding-left: var(--space-1);\n}\n\n.section-date-suffix.clickable {\n  cursor: pointer;\n  padding: var(--space-0_5) var(--space-1_5);\n  border-radius: var(--radius-sm);\n  transition: all var(--duration-fast);\n}\n\n.section-date-suffix.clickable:hover {\n  background: var(--glass-bg-medium);\n  color: var(--text-primary);\n}\n\n/* TASK-068: Removed .section-type-badge CSS - non-actionable element removed */\n\n.section-count {\n  /* Position badge absolutely to prevent overflow */\n  position: absolute;\n  top: 50%;\n  right: var(--space-3);\n  transform: translateY(-50%);\n\n  /* Badge styling */\n  background: var(--glass-bg-medium);\n  color: var(--text-secondary);\n  font-size: var(--text-xs);\n  font-weight: var(--font-medium);\n  padding: var(--space-0_5) var(--space-2);\n  border-radius: var(--radius-sm);\n  min-width: var(--space-5);\n  text-align: center;\n  display: flex;\n  align-items: center;\n  gap: var(--space-1);\n\n  /* Prevent interference with resize handles */\n  pointer-events: none;\n  z-index: 10;\n}\n\n.section-count.has-tasks {\n  background: var(--blue-bg-medium);\n  color: var(--blue-text);\n  border: var(--space-0_5) solid var(--blue-border-active);\n}\n\n.hidden-indicator {\n  font-size: var(--text-xs);\n  opacity: 0.7;\n  animation: hidden-pulse 2s ease-in-out infinite;\n}\n\n@keyframes hidden-pulse {\n  0%, 100% {\n    opacity: 0.5;\n    transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    transform: scale(1.1);\n  }\n}\n\n/* BUG-251 FIX: Ensure section body captures right-click events */\n.section-body {\n  flex: 1;\n  min-height: var(--space-10); /* Minimum clickable area even when empty */\n  position: relative;\n  /* Ensure clicks on empty space are captured by the group, not the pane */\n  pointer-events: auto;\n}\n\n.section-node.collapsed {\n  min-height: auto;\n  height: auto !important;\n  cursor: pointer;\n  /* TASK-073: Subtle dashed outline for collapsed state distinction */\n  border-style: dashed !important;\n  border-color: var(--border-interactive) !important;\n  outline: var(--space-0_5) dashed rgba(var(--color-slate-50), 0.08);\n  outline-offset: var(--space-0_5);\n}\n\n.section-node.collapsed:hover {\n  border-color: rgba(var(--color-slate-50), 0.40) !important;\n  outline: var(--space-0_5) dashed rgba(var(--color-slate-50), 0.15);\n}\n\n.section-node.collapsed .section-header {\n  border-bottom: none;\n  border-radius: var(--radius-lg);\n}\n\n/* Hide Vue Flow handles when collapsed */\n.section-node.collapsed .vue-flow__handle {\n  display: none;\n}\n\n/* TASK-073: Collapsed + selected state with accent outline */\n.section-node.collapsed.vue-flow__node--selected {\n  border-color: var(--accent-primary) !important;\n  outline: var(--space-0_5) solid rgba(99, 102, 241, 0.4);\n  outline-offset: var(--space-0_75);\n  box-shadow:\n    0 var(--space-4) var(--space-12) rgba(var(--color-slate-900), 0.5),\n    0 var(--space-2) var(--space-6) rgba(var(--color-slate-900), 0.3),\n    0 0 var(--space-5) var(--space-1) rgba(99, 102, 241, 0.4);\n}\n\n/* Visual hint for collapsed sections */\n.section-node.collapsed::after {\n  content: '';\n  position: absolute;\n  bottom: var(--space-2);\n  right: var(--space-2);\n  width: 0;\n  height: 0;\n  border-left: var(--space-1) solid transparent;\n  border-right: var(--space-1) solid transparent;\n  border-top: var(--space-1) solid var(--text-secondary);\n  opacity: 0.3;\n}\n\n/* Power Mode Styles - TASK-068: Removed redundant .power-indicator (toggle button shows state) */\n\n.collect-wrapper {\n  position: relative;\n  flex-shrink: 0;\n}\n\n.collect-btn {\n  display: flex;\n  align-items: center;\n  gap: var(--space-0_5);\n  background: var(--glass-bg-medium);\n  border: var(--space-0_5) solid var(--glass-border);\n  color: var(--text-secondary);\n  padding: var(--space-0_5) var(--space-1);\n  border-radius: var(--radius-sm);\n  cursor: pointer;\n  transition: all var(--duration-fast);\n  font-size: var(--text-xs);\n}\n\n.collect-btn:hover {\n  background: var(--glass-bg-heavy);\n  color: var(--text-primary);\n}\n\n.collect-btn.has-matches {\n  background: var(--blue-bg-medium);\n  border-color: var(--blue-border-active);\n  color: var(--blue-text);\n}\n\n.collect-badge {\n  background: var(--blue-bg-medium);\n  color: var(--blue-text);\n  font-size: var(--text-2xs);\n  font-weight: var(--font-bold);\n  padding: 0 var(--space-1);\n  border-radius: var(--radius-full);\n  min-width: var(--space-3_5);\n  text-align: center;\n}\n\n.collect-menu {\n  position: absolute;\n  top: 100%;\n  right: 0;\n  margin-top: var(--space-1);\n  background: var(--glass-bg-solid);\n  backdrop-filter: blur(var(--space-5));\n  -webkit-backdrop-filter: blur(var(--space-5));\n  border: var(--space-0_5) solid var(--glass-border);\n  border-radius: var(--radius-md);\n  box-shadow: var(--shadow-xl);\n  z-index: 100;\n  min-width: 180px;\n  overflow: hidden;\n}\n\n.collect-option {\n  display: block;\n  width: 100%;\n  padding: var(--space-2) var(--space-3);\n  background: transparent;\n  border: none;\n  color: var(--text-secondary);\n  font-size: var(--text-sm);\n  text-align: left;\n  cursor: pointer;\n  transition: all var(--duration-fast);\n}\n\n.collect-option:hover {\n  background: var(--glass-bg-medium);\n  color: var(--text-primary);\n}\n\n.power-toggle-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--glass-bg-light);\n  border: var(--space-0_5) solid var(--glass-border);\n  color: var(--text-muted);\n  padding: var(--space-0_5);\n  border-radius: var(--radius-sm);\n  cursor: pointer;\n  transition: all var(--duration-fast);\n  flex-shrink: 0;\n}\n\n.power-toggle-btn:hover {\n  background: var(--glass-bg-medium);\n  color: var(--text-secondary);\n}\n\n.power-toggle-btn.power-active {\n  background: var(--amber-bg-medium);\n  border-color: var(--amber-border-active);\n  color: var(--amber-text);\n}\n\n/* Settings Button */\n.settings-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--glass-bg-light);\n  border: var(--space-0_5) solid var(--glass-border);\n  color: var(--text-muted);\n  padding: var(--space-0_5);\n  border-radius: var(--radius-sm);\n  cursor: pointer;\n  transition: all var(--duration-fast);\n  flex-shrink: 0;\n}\n\n.settings-btn:hover {\n  background: var(--glass-bg-medium);\n  color: var(--text-primary);\n  border-color: var(--glass-border-hover);\n}\n\n.settings-btn:active {\n  background: var(--glass-bg-heavy);\n  transform: scale(0.95);\n}\n\n/* TASK-290: Resize handle styles moved to canvas-view-overrides.css for global control */\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/canvas/GroupSettingsMenu.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/canvas/InboxFilters.vue","messages":[{"ruleId":"@typescript-eslint/no-unused-expressions","severity":2,"message":"Expected an assignment or function call and instead saw an expression.","line":334,"column":3,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":334,"endColumn":66},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":2,"message":"Expected an assignment or function call and instead saw an expression.","line":345,"column":3,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":345,"endColumn":69},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":2,"message":"Expected an assignment or function call and instead saw an expression.","line":356,"column":3,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":356,"endColumn":66}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<template>\n  <div class=\"inbox-filters\">\n    <!-- TASK-1073: Sort Controls -->\n    <div class=\"sort-row\">\n      <span class=\"sort-label\">Sort:</span>\n      <div class=\"sort-buttons\">\n        <button\n          class=\"sort-btn\"\n          :class=\"{ active: sortBy === 'newest' }\"\n          title=\"Sort by newest first\"\n          @click=\"$emit('update:sortBy', 'newest')\"\n        >\n          <Clock :size=\"12\" />\n          Newest\n        </button>\n        <button\n          class=\"sort-btn\"\n          :class=\"{ active: sortBy === 'priority' }\"\n          title=\"Sort by priority (high first)\"\n          @click=\"$emit('update:sortBy', 'priority')\"\n        >\n          <Flag :size=\"12\" />\n          Priority\n        </button>\n        <button\n          class=\"sort-btn\"\n          :class=\"{ active: sortBy === 'dueDate' }\"\n          title=\"Sort by due date\"\n          @click=\"$emit('update:sortBy', 'dueDate')\"\n        >\n          <CalendarDays :size=\"12\" />\n          Due\n        </button>\n        <button\n          v-if=\"context !== 'canvas'\"\n          class=\"sort-btn\"\n          :class=\"{ active: sortBy === 'canvasOrder' }\"\n          title=\"Sort by canvas position (top to bottom)\"\n          @click=\"$emit('update:sortBy', 'canvasOrder')\"\n        >\n          <LayoutGrid :size=\"12\" />\n          Canvas\n        </button>\n      </div>\n    </div>\n\n    <div class=\"filter-divider\" />\n\n    <!-- Filter Chips Row -->\n    <div class=\"filter-chips-row\">\n      <!-- All Tasks (Reset Filters) -->\n      <button\n        class=\"filter-chip\"\n        :class=\"{ active: !hasActiveFilters }\"\n        title=\"Show all tasks\"\n        @click=\"clearAllFilters\"\n      >\n        <List :size=\"14\" />\n        <span class=\"chip-label\">All</span>\n      </button>\n\n      <!-- TASK-076: Hide Done Toggle -->\n      <button\n        v-if=\"hideDoneTasks !== undefined\"\n        class=\"filter-chip\"\n        :class=\"{ active: hideDoneTasks }\"\n        title=\"Hide completed tasks\"\n        @click=\"$emit('update:hideDoneTasks', !hideDoneTasks)\"\n      >\n        <CheckCircle2 :size=\"14\" />\n        <span class=\"chip-label\">{{ hideDoneTasks ? 'Hiding Done' : 'Show Done' }}</span>\n      </button>\n\n      <!-- Unscheduled Toggle -->\n      <button\n        class=\"filter-chip\"\n        :class=\"{ active: unscheduledOnly }\"\n        title=\"Show only unscheduled tasks (not on calendar)\"\n        @click=\"$emit('update:unscheduledOnly', !unscheduledOnly)\"\n      >\n        <CalendarOff :size=\"14\" />\n        <span class=\"chip-label\">Unscheduled</span>\n        <span v-if=\"unscheduledCount > 0\" class=\"chip-count\">{{ unscheduledCount }}</span>\n      </button>\n\n      <!-- TASK-1246: Priority Multi-Select Filter -->\n      <div ref=\"priorityDropdownRef\" class=\"filter-dropdown\">\n        <button\n          class=\"filter-chip\"\n          :class=\"{ active: selectedPriorities.size > 0 }\"\n          @click=\"showPriorityDropdown = !showPriorityDropdown\"\n        >\n          <Flag :size=\"14\" />\n          <span class=\"chip-label\">{{ priorityLabel }}</span>\n          <ChevronDown :size=\"12\" class=\"chevron\" :class=\"{ rotated: showPriorityDropdown }\" />\n        </button>\n        <div v-if=\"showPriorityDropdown\" class=\"dropdown-menu\">\n          <button\n            class=\"dropdown-item\"\n            @click=\"clearPriorities\"\n          >\n            All Priorities\n          </button>\n          <button\n            v-for=\"priority in priorities\"\n            :key=\"priority.value\"\n            class=\"dropdown-item\"\n            :class=\"{ selected: selectedPriorities.has(priority.value) }\"\n            @click.stop=\"togglePriority(priority.value)\"\n          >\n            <span class=\"checkbox-indicator\" :class=\"{ checked: selectedPriorities.has(priority.value) }\">\n              <Check v-if=\"selectedPriorities.has(priority.value)\" :size=\"10\" />\n            </span>\n            <span class=\"priority-dot\" :class=\"`priority-${priority.value}`\" />\n            {{ priority.label }}\n            <span class=\"item-count\">{{ getPriorityCount(priority.value) }}</span>\n          </button>\n        </div>\n      </div>\n\n      <!-- TASK-1246: Duration Multi-Select Filter -->\n      <div ref=\"durationDropdownRef\" class=\"filter-dropdown\">\n        <button\n          class=\"filter-chip\"\n          :class=\"{ active: selectedDurations.size > 0 }\"\n          @click=\"showDurationDropdown = !showDurationDropdown\"\n        >\n          <Clock :size=\"14\" />\n          <span class=\"chip-label\">{{ durationLabel }}</span>\n          <ChevronDown :size=\"12\" class=\"chevron\" :class=\"{ rotated: showDurationDropdown }\" />\n        </button>\n        <div v-if=\"showDurationDropdown\" class=\"dropdown-menu\">\n          <button\n            class=\"dropdown-item\"\n            @click=\"clearDurations\"\n          >\n            All Durations\n          </button>\n          <button\n            v-for=\"duration in durations\"\n            :key=\"duration.value\"\n            class=\"dropdown-item\"\n            :class=\"{ selected: selectedDurations.has(duration.value) }\"\n            @click.stop=\"toggleDuration(duration.value)\"\n          >\n            <span class=\"checkbox-indicator\" :class=\"{ checked: selectedDurations.has(duration.value) }\">\n              <Check v-if=\"selectedDurations.has(duration.value)\" :size=\"10\" />\n            </span>\n            <span class=\"duration-icon\">{{ duration.icon }}</span>\n            {{ duration.label }}\n            <span class=\"item-count\">{{ getDurationCount(duration.value) }}</span>\n          </button>\n        </div>\n      </div>\n\n      <!-- TASK-1246: Project Multi-Select Filter -->\n      <div ref=\"projectDropdownRef\" class=\"filter-dropdown\">\n        <button\n          class=\"filter-chip\"\n          :class=\"{ active: selectedProjects.size > 0 }\"\n          @click=\"showProjectDropdown = !showProjectDropdown\"\n        >\n          <FolderOpen :size=\"14\" />\n          <span class=\"chip-label\">{{ projectLabel }}</span>\n          <ChevronDown :size=\"12\" class=\"chevron\" :class=\"{ rotated: showProjectDropdown }\" />\n        </button>\n        <div v-if=\"showProjectDropdown\" class=\"dropdown-menu\">\n          <button\n            class=\"dropdown-item\"\n            @click=\"clearProjects\"\n          >\n            All Projects\n          </button>\n          <button\n            class=\"dropdown-item\"\n            :class=\"{ selected: selectedProjects.has('none') }\"\n            @click.stop=\"toggleProject('none')\"\n          >\n            <span class=\"checkbox-indicator\" :class=\"{ checked: selectedProjects.has('none') }\">\n              <Check v-if=\"selectedProjects.has('none')\" :size=\"10\" />\n            </span>\n            <span class=\"project-icon\">&#128229;</span>\n            No Project\n            <span class=\"item-count\">{{ getProjectCount(null) }}</span>\n          </button>\n          <button\n            v-for=\"project in projects\"\n            :key=\"project.id\"\n            class=\"dropdown-item\"\n            :class=\"{ selected: selectedProjects.has(project.id) }\"\n            @click.stop=\"toggleProject(project.id)\"\n          >\n            <span class=\"checkbox-indicator\" :class=\"{ checked: selectedProjects.has(project.id) }\">\n              <Check v-if=\"selectedProjects.has(project.id)\" :size=\"10\" />\n            </span>\n            <span class=\"project-icon\">{{ project.emoji || '&#128193;' }}</span>\n            {{ project.name }}\n            <span class=\"item-count\">{{ getProjectCount(project.id) }}</span>\n          </button>\n        </div>\n      </div>\n\n      <!-- Clear All Filters -->\n      <button\n        v-if=\"hasActiveFilters\"\n        class=\"clear-filters-btn\"\n        title=\"Clear all filters\"\n        @click=\"clearAllFilters\"\n      >\n        <X :size=\"14\" />\n      </button>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, onMounted, onBeforeUnmount } from 'vue'\nimport { CalendarOff, Flag, FolderOpen, ChevronDown, X, List, Clock, CheckCircle2, CalendarDays, Check, LayoutGrid } from 'lucide-vue-next'\nimport type { Task, Project } from '@/stores/tasks'\nimport type { SortByType } from '@/composables/inbox/useUnifiedInboxState'\n// TASK-144: Use centralized duration categories\nimport { type DurationCategory, DURATION_FILTER_OPTIONS, matchesDurationCategory } from '@/utils/durationCategories'\n\n\n// TASK-1246: Multi-select props (Set types)\ninterface Props {\n  tasks: Task[]\n  projects: Project[]\n  unscheduledOnly: boolean\n  selectedPriorities: Set<string>\n  selectedProjects: Set<string>\n  selectedDurations: Set<DurationCategory>\n  hideDoneTasks?: boolean // TASK-076: Separate done filter for each view\n  sortBy?: SortByType // TASK-1073: Sort option\n  context?: string // Hide canvas sort when inside canvas view\n}\n\nconst props = defineProps<Props>()\n\nconst emit = defineEmits<{\n  'update:unscheduledOnly': [value: boolean]\n  'update:selectedPriorities': [value: Set<string>]\n  'update:selectedProjects': [value: Set<string>]\n  'update:selectedDurations': [value: Set<DurationCategory>]\n  'update:hideDoneTasks': [value: boolean] // TASK-076\n  'update:sortBy': [value: SortByType] // TASK-1073\n  clearAll: []\n}>()\n\n// Dropdown visibility state\nconst showPriorityDropdown = ref(false)\nconst showProjectDropdown = ref(false)\nconst showDurationDropdown = ref(false)\nconst priorityDropdownRef = ref<HTMLElement>()\nconst projectDropdownRef = ref<HTMLElement>()\nconst durationDropdownRef = ref<HTMLElement>()\n\n// Priority options\nconst priorities = [\n  { value: 'high' as const, label: 'High' },\n  { value: 'medium' as const, label: 'Medium' },\n  { value: 'low' as const, label: 'Low' }\n]\n\n// TASK-144: Duration options from centralized source\nconst durations = DURATION_FILTER_OPTIONS\n\n// Computed: Check if task is scheduled on calendar (has instances with dates)\nconst isScheduledOnCalendar = (task: Task): boolean => {\n  if (!task.instances || task.instances.length === 0) return false\n  return task.instances.some(inst => inst.scheduledDate)\n}\n\n// Computed: Count of unscheduled tasks\nconst unscheduledCount = computed(() => {\n  return props.tasks.filter(task => !isScheduledOnCalendar(task)).length\n})\n\n// TASK-1246: Computed labels with count badges\nconst priorityLabel = computed(() => {\n  const count = props.selectedPriorities.size\n  if (count === 0) return 'Priority'\n  if (count === 1) return priorities.find(p => p.value === [...props.selectedPriorities][0])?.label || 'Priority'\n  return `Priority (${count})`\n})\n\nconst durationLabel = computed(() => {\n  const count = props.selectedDurations.size\n  if (count === 0) return 'Duration'\n  if (count === 1) return durations.find(d => d.value === [...props.selectedDurations][0])?.label.split(' ')[0] || 'Duration'\n  return `Duration (${count})`\n})\n\nconst projectLabel = computed(() => {\n  const count = props.selectedProjects.size\n  if (count === 0) return 'Project'\n  if (count === 1) {\n    const first = [...props.selectedProjects][0]\n    if (first === 'none') return 'No Project'\n    const project = props.projects.find(p => p.id === first)\n    return project?.name || 'Project'\n  }\n  return `Project (${count})`\n})\n\n// Computed: Check if any filters are active\nconst hasActiveFilters = computed(() => {\n  return props.unscheduledOnly || props.selectedPriorities.size > 0 || props.selectedProjects.size > 0 || props.selectedDurations.size > 0 || props.hideDoneTasks\n})\n\n// Get count of tasks with specific priority\nconst getPriorityCount = (priority: 'high' | 'medium' | 'low'): number => {\n  return props.tasks.filter(task => task.priority === priority).length\n}\n\n// Get count of tasks with specific project\nconst getProjectCount = (projectId: string | null): number => {\n  if (projectId === null) {\n    return props.tasks.filter(task => !task.projectId).length\n  }\n  return props.tasks.filter(task => task.projectId === projectId).length\n}\n\n// TASK-144: Get count of tasks with specific duration using centralized matching\nconst getDurationCount = (duration: DurationCategory): number => {\n  return props.tasks.filter(task =>\n    matchesDurationCategory(task.estimatedDuration, duration)\n  ).length\n}\n\n// TASK-1246: Toggle handlers (multi-select, don't close dropdown)\nconst togglePriority = (priority: 'high' | 'medium' | 'low') => {\n  const next = new Set(props.selectedPriorities)\n  next.has(priority) ? next.delete(priority) : next.add(priority)\n  emit('update:selectedPriorities', next)\n}\n\nconst clearPriorities = () => {\n  emit('update:selectedPriorities', new Set())\n  showPriorityDropdown.value = false\n}\n\nconst toggleProject = (projectId: string) => {\n  const next = new Set(props.selectedProjects)\n  next.has(projectId) ? next.delete(projectId) : next.add(projectId)\n  emit('update:selectedProjects', next)\n}\n\nconst clearProjects = () => {\n  emit('update:selectedProjects', new Set())\n  showProjectDropdown.value = false\n}\n\nconst toggleDuration = (duration: DurationCategory) => {\n  const next = new Set(props.selectedDurations)\n  next.has(duration) ? next.delete(duration) : next.add(duration)\n  emit('update:selectedDurations', next)\n}\n\nconst clearDurations = () => {\n  emit('update:selectedDurations', new Set())\n  showDurationDropdown.value = false\n}\n\n// Clear all filters\nconst clearAllFilters = () => {\n  emit('update:unscheduledOnly', false)\n  emit('update:selectedPriorities', new Set())\n  emit('update:selectedProjects', new Set())\n  emit('update:selectedDurations', new Set())\n  emit('update:hideDoneTasks', false) // TASK-076\n  emit('clearAll')\n}\n\n// Close dropdowns when clicking outside\nconst handleClickOutside = (event: MouseEvent) => {\n  const target = event.target as Node\n  if (priorityDropdownRef.value && !priorityDropdownRef.value.contains(target)) {\n    showPriorityDropdown.value = false\n  }\n  if (projectDropdownRef.value && !projectDropdownRef.value.contains(target)) {\n    showProjectDropdown.value = false\n  }\n  if (durationDropdownRef.value && !durationDropdownRef.value.contains(target)) {\n    showDurationDropdown.value = false\n  }\n}\n\nonMounted(() => {\n  document.addEventListener('click', handleClickOutside)\n})\n\nonBeforeUnmount(() => {\n  document.removeEventListener('click', handleClickOutside)\n})\n</script>\n\n<style scoped>\n.inbox-filters {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-2);\n  padding: var(--space-2) var(--space-3);\n  border-bottom: 1px solid var(--border-subtle);\n}\n\n/* TASK-1073: Sort Row */\n.sort-row {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n}\n\n.sort-label {\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n  font-weight: 500;\n}\n\n.sort-buttons {\n  display: flex;\n  gap: var(--space-1);\n}\n\n.sort-btn {\n  display: flex;\n  align-items: center;\n  gap: var(--space-1);\n  padding: var(--space-1) var(--space-2);\n  background: transparent;\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-md);\n  color: var(--text-secondary);\n  font-size: var(--text-xs);\n  cursor: pointer;\n  transition: all var(--duration-fast) var(--spring-smooth);\n}\n\n.sort-btn:hover {\n  background: var(--glass-bg-medium);\n  border-color: var(--glass-border-hover);\n  color: var(--text-primary);\n}\n\n.sort-btn.active {\n  background: var(--state-active-bg);\n  border-color: var(--state-active-border);\n  color: var(--state-active-text);\n}\n\n.filter-divider {\n  height: 1px;\n  background: var(--border-subtle);\n  margin: var(--space-1) 0;\n}\n\n/* Filter chips row */\n.filter-chips-row {\n  display: flex;\n  flex-wrap: wrap;\n  gap: var(--space-2);\n}\n\n.filter-chip {\n  display: flex;\n  align-items: center;\n  gap: var(--space-1);\n  padding: var(--space-1) var(--space-2);\n  background: var(--glass-bg-light);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-full);\n  color: var(--text-secondary);\n  font-size: var(--text-xs);\n  cursor: pointer;\n  transition: all var(--duration-fast) var(--spring-smooth);\n  white-space: nowrap;\n}\n\n.filter-chip:hover {\n  background: var(--glass-bg-medium);\n  border-color: var(--glass-border-hover);\n  color: var(--text-primary);\n}\n\n.filter-chip.active {\n  background: var(--state-active-bg);\n  border-color: var(--state-active-border);\n  color: var(--state-active-text);\n}\n\n.chip-label {\n  max-width: 80px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.chip-count {\n  background: var(--accent-primary);\n  color: white;\n  font-size: var(--text-2xs);\n  font-weight: var(--font-semibold);\n  padding: 0 var(--space-1);\n  border-radius: var(--radius-full);\n  min-width: var(--space-3_5);\n  height: var(--space-3_5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.filter-chip.active .chip-count {\n  background: var(--surface-primary);\n  color: var(--accent-primary);\n}\n\n.chevron {\n  transition: transform var(--duration-fast) var(--spring-smooth);\n}\n\n.chevron.rotated {\n  transform: rotate(180deg);\n}\n\n.filter-dropdown {\n  position: relative;\n}\n\n.dropdown-menu {\n  position: absolute;\n  top: calc(100% + var(--space-1));\n  left: 0;\n  z-index: 100;\n  min-width: 160px;\n  max-height: 240px;\n  overflow-y: auto;\n  background: var(--dropdown-bg);\n  backdrop-filter: blur(16px);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-lg);\n  box-shadow: var(--shadow-xl);\n  padding: var(--space-1);\n}\n\n.dropdown-item {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  width: 100%;\n  padding: var(--space-2) var(--space-3);\n  background: transparent;\n  border: none;\n  border-radius: var(--radius-md);\n  color: var(--text-secondary);\n  font-size: var(--text-xs);\n  text-align: left;\n  cursor: pointer;\n  transition: all var(--duration-fast) var(--spring-smooth);\n}\n\n.dropdown-item:hover {\n  background: var(--glass-bg-medium);\n  color: var(--text-primary);\n}\n\n.dropdown-item.selected {\n  background: var(--state-active-bg);\n  color: var(--state-active-text);\n}\n\n/* TASK-1246: Checkbox indicator for multi-select */\n.checkbox-indicator {\n  width: var(--space-3_5);\n  height: var(--space-3_5);\n  border: var(--space-px) solid var(--glass-border);\n  border-radius: var(--radius-sm);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  transition: all var(--duration-fast) var(--spring-smooth);\n}\n\n.checkbox-indicator.checked {\n  background: var(--state-active-bg);\n  border-color: var(--state-active-border);\n  color: var(--state-active-text);\n}\n\n.priority-dot {\n  width: var(--space-2);\n  height: var(--space-2);\n  border-radius: 50%;\n  flex-shrink: 0;\n}\n\n.priority-dot.priority-high {\n  background: var(--color-priority-high);\n}\n\n.priority-dot.priority-medium {\n  background: var(--color-priority-medium);\n}\n\n.priority-dot.priority-low {\n  background: var(--color-priority-low);\n}\n\n.project-icon, .duration-icon {\n  font-size: var(--text-sm);\n}\n\n.item-count {\n  margin-left: auto;\n  color: var(--text-muted);\n  font-size: var(--text-xs);\n}\n\n.clear-filters-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n  background: var(--glass-bg-light);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-full);\n  color: var(--text-muted);\n  cursor: pointer;\n  transition: all var(--duration-fast) var(--spring-smooth);\n}\n\n.clear-filters-btn:hover {\n  background: var(--danger-bg-light);\n  border-color: var(--danger-border-medium);\n  color: var(--color-danger);\n}\n\n/* Scrollbar for dropdown */\n.dropdown-menu::-webkit-scrollbar {\n  width: var(--space-1);\n}\n\n.dropdown-menu::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.dropdown-menu::-webkit-scrollbar-thumb {\n  background: var(--glass-border);\n  border-radius: var(--radius-full);\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/canvas/InboxTimeFilters.vue","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'today' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":95,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":95,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'todayStr' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":168,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":168,"endColumn":23}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<template>\n  <div class=\"inbox-time-filters\">\n    <div class=\"filter-buttons\">\n      <button\n        v-for=\"filter in timeFilters\"\n        :key=\"filter.key\"\n        class=\"filter-btn\"\n        :class=\"{ active: activeFilter === filter.key }\"\n        :title=\"`${filter.description} (${filter.count} tasks)`\"\n        @click=\"$emit('filterChanged', filter.key)\"\n      >\n        <component :is=\"filter.icon\" :size=\"14\" />\n        <span v-if=\"filter.count > 0\" class=\"filter-count\">{{ filter.count }}</span>\n      </button>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, type Component } from 'vue'\nimport {\n  Inbox,\n  Clock,\n  Calendar,\n  CalendarDays,\n  CalendarRange,\n  CalendarPlus,\n  CalendarX\n} from 'lucide-vue-next'\nimport type { Task } from '@/stores/tasks'\n\ninterface TimeFilter {\n  key: 'all' | 'now' | 'today' | 'tomorrow' | 'next3days' | 'thisWeek' | 'noDate'\n  label: string\n  description: string\n  icon: Component\n  count: number\n}\n\ninterface Props {\n  tasks: Task[]\n  activeFilter: string\n}\n\nconst props = defineProps<Props>()\n\ndefineEmits<{\n  filterChanged: [filterKey: string]\n}>()\n\n// Helper functions for date calculations\nconst getToday = () => {\n  const today = new Date()\n  today.setHours(0, 0, 0, 0)\n  return today\n}\n\nconst getTomorrow = () => {\n  const tomorrow = new Date(getToday())\n  tomorrow.setDate(tomorrow.getDate() + 1)\n  return tomorrow\n}\n\n// TASK-1089: Use calendar week ending at Sunday 00:00 (exclusive)\nconst getWeekEnd = () => {\n  const today = getToday()\n  const dayOfWeek = today.getDay()\n  // When today is Sunday (0), we want NEXT Sunday (7 days away)\n  // When today is Monday (1), we want this Sunday (6 days away)\n  const daysUntilSunday = dayOfWeek === 0 ? 7 : (7 - dayOfWeek)\n  const weekEnd = new Date(today)\n  weekEnd.setDate(today.getDate() + daysUntilSunday)\n  return weekEnd\n}\n\nconst _isToday = (dateStr?: string) => {\n  if (!dateStr) return false\n  const today = getToday()\n  const date = new Date(dateStr)\n  date.setHours(0, 0, 0, 0)\n  return date.getTime() === today.getTime()\n}\n\nconst _isTomorrow = (dateStr?: string) => {\n  if (!dateStr) return false\n  const tomorrow = getTomorrow()\n  const date = new Date(dateStr)\n  date.setHours(0, 0, 0, 0)\n  return date.getTime() === tomorrow.getTime()\n}\n\n// TASK-1089: Use calendar week ending at Sunday 00:00 (exclusive)\nconst _isThisWeek = (dateStr?: string) => {\n  if (!dateStr) return false\n  const today = getToday()\n  const weekEnd = getWeekEnd()\n  const date = new Date(dateStr)\n  date.setHours(0, 0, 0, 0)\n  // Include overdue tasks (< today) and tasks due before Sunday\n  return date < weekEnd\n}\n\nconst hasDate = (task: Task) => {\n  // Check instances first (new format)\n  if (task.instances && task.instances.length > 0) {\n    return task.instances.some(inst => inst.scheduledDate)\n  }\n  // Fallback to legacy scheduledDate\n  return !!task.scheduledDate\n}\n\nconst filterTasks = (filterKey: string) => {\n  return props.tasks.filter(task => {\n    switch (filterKey) {\n      case 'all':\n        return true\n\n      case 'now': {\n        // Tasks due today, created today, currently in progress, or currently running (timer active)\n        const today = getToday().toISOString().split('T')[0]\n        const taskCreatedDate = new Date(task.createdAt)\n        taskCreatedDate.setHours(0, 0, 0, 0)\n\n        // Check instances for today scheduling\n        if (task.instances && task.instances.length > 0) {\n          if (task.instances.some(inst => inst.scheduledDate === today)) return true\n        }\n        // Fallback to legacy scheduledDate\n        if (task.scheduledDate === today) return true\n\n        // Tasks created today\n        if (taskCreatedDate.getTime() === getToday().getTime()) return true\n\n        // Tasks due today\n        if (task.dueDate === today) return true\n\n        // Tasks currently in progress\n        if (task.status === 'in_progress') return true\n\n        return false\n      }\n\n      case 'today': {\n        // Tasks scheduled for today\n        const todayStr = getToday().toISOString().split('T')[0]\n\n        // Check instances first\n        if (task.instances && task.instances.length > 0) {\n          return task.instances.some(inst => inst.scheduledDate === todayStr)\n        }\n        // Fallback to legacy scheduledDate\n        return task.scheduledDate === todayStr\n      }\n\n      case 'tomorrow': {\n        // Tasks scheduled for tomorrow\n        const tomorrowStr = getTomorrow().toISOString().split('T')[0]\n\n        // Check instances first\n        if (task.instances && task.instances.length > 0) {\n          return task.instances.some(inst => inst.scheduledDate === tomorrowStr)\n        }\n        // Fallback to legacy scheduledDate\n        return task.scheduledDate === tomorrowStr\n      }\n\n      case 'next3days': {\n        const todayStr = getToday().toISOString().split('T')[0]\n        const boundary = new Date(getToday())\n        boundary.setDate(boundary.getDate() + 3)\n        const boundaryStr = boundary.toISOString().split('T')[0]\n        // Check instances first (authoritative)\n        if (task.instances && task.instances.length > 0) {\n          return task.instances.some(inst =>\n            inst.scheduledDate && inst.scheduledDate < boundaryStr\n          )\n        }\n        // Fallback to legacy scheduledDate\n        if (!task.scheduledDate) return false\n        return task.scheduledDate < boundaryStr\n      }\n\n      case 'thisWeek': {\n        // TASK-1089: Tasks scheduled within calendar week (until Sunday 00:00, exclusive)\n        const weekEndStr = getWeekEnd().toISOString().split('T')[0]\n\n        // Check instances first - include overdue and tasks before Sunday\n        if (task.instances && task.instances.length > 0) {\n          return task.instances.some(inst =>\n            inst.scheduledDate && inst.scheduledDate < weekEndStr\n          )\n        }\n        // Fallback to legacy scheduledDate\n        if (!task.scheduledDate) return false\n        return task.scheduledDate < weekEndStr\n      }\n\n      case 'noDate':\n        // Tasks without any scheduled date\n        return !hasDate(task)\n\n      default:\n        return true\n    }\n  })\n}\n\n// Computed filter definitions with counts\nconst timeFilters = computed((): TimeFilter[] => [\n  {\n    key: 'all',\n    label: 'All',\n    description: 'Show all inbox tasks',\n    icon: Inbox,\n    count: props.tasks.length\n  },\n  {\n    key: 'now',\n    label: 'Now',\n    description: 'Tasks for right now (today, in progress, or created today)',\n    icon: Clock,\n    count: filterTasks('now').length\n  },\n  {\n    key: 'today',\n    label: 'Today',\n    description: 'Tasks scheduled for today',\n    icon: Calendar,\n    count: filterTasks('today').length\n  },\n  {\n    key: 'tomorrow',\n    label: 'Tomorrow',\n    description: 'Tasks scheduled for tomorrow',\n    icon: CalendarDays,\n    count: filterTasks('tomorrow').length\n  },\n  {\n    key: 'next3days',\n    label: 'Next 3 Days',\n    description: 'Tasks due in the next 3 days',\n    icon: CalendarRange,\n    count: filterTasks('next3days').length\n  },\n  {\n    key: 'thisWeek',\n    label: 'This Week',\n    description: 'Tasks scheduled until Sunday (calendar week)',\n    icon: CalendarPlus,\n    count: filterTasks('thisWeek').length\n  },\n  {\n    key: 'noDate',\n    label: 'No Date',\n    description: 'Tasks without a scheduled date',\n    icon: CalendarX,\n    count: filterTasks('noDate').length\n  }\n])\n</script>\n\n<style scoped>\n.inbox-time-filters {\n  padding: var(--space-3) var(--space-4) 0;\n}\n\n.filter-buttons {\n  display: flex;\n  gap: var(--space-0_5);\n}\n\n.filter-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  width: var(--space-8);\n  height: var(--space-8);\n  background: var(--glass-bg-light);\n  backdrop-filter: var(--overlay-component-backdrop);\n  border: var(--space-px) solid var(--glass-border);\n  border-radius: var(--radius-md);\n  color: var(--text-secondary);\n  cursor: pointer;\n  transition: all var(--duration-fast) var(--spring-smooth);\n  overflow: hidden;\n}\n\n.filter-btn:hover {\n  background: var(--glass-bg-medium);\n  border-color: var(--glass-border-hover);\n  color: var(--text-primary);\n  transform: translateY(-1px) scale(1.05);\n  box-shadow: var(--state-hover-shadow);\n}\n\n.filter-btn.active {\n  background: var(--state-active-bg);\n  border-color: var(--state-active-border);\n  backdrop-filter: var(--state-active-glass);\n  color: var(--state-active-text);\n  box-shadow: var(--state-hover-shadow), var(--state-hover-glow);\n  transform: scale(1.05);\n}\n\n.filter-count {\n  position: absolute;\n  top: var(--space-neg-px);\n  right: var(--space-neg-px);\n  background: var(--accent-primary);\n  border: var(--space-px) solid var(--surface-primary);\n  border-radius: var(--radius-full);\n  font-size: var(--text-2xs);\n  font-weight: var(--font-semibold);\n  padding: 0 var(--space-0_5);\n  min-width: var(--space-3);\n  height: var(--space-3);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  line-height: 1;\n  box-shadow: var(--shadow-sm);\n}\n\n.filter-btn.active .filter-count {\n  background: var(--surface-primary);\n  color: var(--accent-primary);\n  border-color: var(--accent-primary);\n}\n\n/* Icon scaling for different screen sizes */\n@media (max-width: 320px) {\n  .filter-btn {\n    width: var(--space-7);\n    height: var(--space-7);\n  }\n\n  .filter-btn:hover,\n  .filter-btn.active {\n    transform: scale(1.02);\n  }\n}\n\n/* Smooth transitions for count badges */\n.filter-count {\n  transition: all var(--duration-fast) var(--spring-smooth);\n}\n\n/* Ensure icons are properly centered */\n.filter-btn > :first-child {\n  flex-shrink: 0;\n}\n</style>","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/canvas/MultiSelectionOverlay.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/canvas/ResizeHandle.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/canvas/SectionSelectionModal.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/canvas/SectionSelector.vue","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":100,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3096,3099],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3096,3099],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<template>\n  <div ref=\"selectRef\" class=\"section-selector\" :class=\"{ 'is-compact': compact }\">\n    <button\n      ref=\"triggerElement\"\n      type=\"button\"\n      class=\"select-trigger\"\n      :class=\"{ 'is-open': isOpen }\"\n      @click=\"toggleDropdown\"\n    >\n      <div v-if=\"selectedSection\" class=\"selected-info\">\n        <div\n          class=\"section-color-dot\"\n          :style=\"{ backgroundColor: selectedSection.color || 'var(--brand-primary)' }\"\n        />\n        <span class=\"select-value\">{{ selectedSection.name }}</span>\n      </div>\n      <span v-else class=\"select-value placeholder\">{{ placeholder }}</span>\n\n      <ChevronDown :size=\"compact ? 12 : 14\" class=\"select-icon\" :class=\"{ 'is-open': isOpen }\" />\n    </button>\n\n    <Teleport to=\"body\">\n      <Transition name=\"dropdown\">\n        <div\n          v-if=\"isOpen\"\n          :style=\"dropdownStyle\"\n          role=\"listbox\"\n        >\n          <!-- Special Option: None / Inbox -->\n          <div\n            class=\"select-option none-option\"\n            :class=\"{ 'is-selected': !modelValue }\"\n            role=\"option\"\n            @click=\"selectOption(null)\"\n          >\n            <Inbox :size=\"14\" />\n            <span>None (Move to Inbox)</span>\n          </div>\n\n          <!-- Section Groups -->\n          <div v-for=\"group in categorizedSections\" :key=\"group.type\" class=\"dropdown-group\">\n            <div class=\"group-header\">\n              {{ group.label }}\n            </div>\n            <div\n              v-for=\"section in group.sections\"\n              :key=\"section.id\"\n              class=\"select-option\"\n              :class=\"{ 'is-selected': section.id === modelValue }\"\n              role=\"option\"\n              @click=\"selectOption(section.id)\"\n            >\n              <div \n                class=\"section-color-dot\" \n                :style=\"{ backgroundColor: section.color || 'var(--brand-primary)' }\"\n              />\n              <span>{{ section.name }}</span>\n            </div>\n          </div>\n\n          <div v-if=\"canvasStore.sections.length === 0\" class=\"empty-state\">\n            No sections found on canvas\n          </div>\n        </div>\n      </Transition>\n    </Teleport>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, onMounted, onBeforeUnmount, nextTick } from 'vue'\nimport { ChevronDown, Inbox } from 'lucide-vue-next'\nimport { useCanvasStore } from '@/stores/canvas'\n\ninterface Props {\n  modelValue: string | null\n  placeholder?: string\n  compact?: boolean\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  placeholder: 'Select a section...',\n  compact: false\n})\n\nconst emit = defineEmits<{\n  'update:modelValue': [value: string | null]\n  'change': [value: string | null]\n}>()\n\nconst canvasStore = useCanvasStore()\nconst selectRef = ref<HTMLElement>()\nconst triggerElement = ref<HTMLButtonElement>()\nconst isOpen = ref(false)\n\n// Unique ID for this dropdown instance (for global close coordination)\nconst dropdownId = Math.random().toString(36).substring(2, 9)\n\n// Dropdown positioning (copied from CustomSelect for consistency)\nconst dropdownStyle = ref<any>({\n  position: 'fixed',\n  top: '0px',\n  left: '0px',\n  width: '0px',\n  minWidth: '0px'\n})\n\nconst calculateDropdownPosition = () => {\n  if (!triggerElement.value) return\n\n  const rect = triggerElement.value.getBoundingClientRect()\n  const viewportHeight = window.innerHeight\n  const spaceBelow = viewportHeight - rect.bottom\n  const spaceAbove = rect.top\n  \n  // Estimate height: header (30) + options (8 options * 40 approx)\n  const dropdownHeight = Math.min(350, 48 + (canvasStore.sections.length + 1) * 40) \n\n  const positionAbove = spaceBelow < dropdownHeight && spaceAbove > spaceBelow\n\n  dropdownStyle.value = {\n    position: 'fixed',\n    top: positionAbove ? `${rect.top - dropdownHeight - 4}px` : `${rect.bottom + 4}px`,\n    left: `${rect.left}px`,\n    minWidth: '200px',\n    width: 'auto' as const // Explicitly cast 'auto' to ensure type compatibility\n  }\n}\n\nconst selectedSection = computed(() => {\n  if (!props.modelValue) return null\n  return canvasStore.sections.find(s => s.id === props.modelValue) || null\n})\n\nconst categorizedSections = computed(() => {\n  const sections = canvasStore.sections\n  const groups = [\n    { type: 'custom', label: 'Custom Groups', sections: sections.filter(s => s.type === 'custom') },\n    { type: 'status', label: 'Status Columns', sections: sections.filter(s => s.type === 'status') },\n    { type: 'priority', label: 'Priority Areas', sections: sections.filter(s => s.type === 'priority') },\n    { type: 'timeline', label: 'Timeline Sections', sections: sections.filter(s => s.type === 'timeline') },\n    { type: 'project', label: 'Project Containers', sections: sections.filter(s => s.type === 'project') }\n  ]\n  \n  return groups.filter(g => g.sections.length > 0)\n})\n\nconst toggleDropdown = async () => {\n  isOpen.value = !isOpen.value\n  if (isOpen.value) {\n    // Close any other open dropdowns\n    window.dispatchEvent(new CustomEvent('close-all-dropdowns', { detail: { except: dropdownId } }))\n    await nextTick()\n    calculateDropdownPosition()\n  }\n}\n\nconst closeDropdown = () => {\n  isOpen.value = false\n}\n\nconst selectOption = (sectionId: string | null) => {\n  emit('update:modelValue', sectionId)\n  emit('change', sectionId)\n  closeDropdown()\n}\n\nconst handleClickOutside = (event: MouseEvent) => {\n  if (selectRef.value && !selectRef.value.contains(event.target as Node)) {\n    closeDropdown()\n  }\n}\n\n// Handle global close event (when another dropdown opens)\nconst handleGlobalClose = (event: Event) => {\n  const customEvent = event as CustomEvent<{ except: string }>\n  if (customEvent.detail?.except !== dropdownId && isOpen.value) {\n    closeDropdown()\n  }\n}\n\nonMounted(() => {\n  document.addEventListener('click', handleClickOutside)\n  window.addEventListener('resize', calculateDropdownPosition)\n  window.addEventListener('scroll', closeDropdown, true)\n  window.addEventListener('close-all-dropdowns', handleGlobalClose)\n})\n\nonBeforeUnmount(() => {\n  document.removeEventListener('click', handleClickOutside)\n  window.removeEventListener('resize', calculateDropdownPosition)\n  window.removeEventListener('scroll', closeDropdown, true)\n  window.removeEventListener('close-all-dropdowns', handleGlobalClose)\n})\n</script>\n\n<style scoped>\n.section-selector {\n  position: relative;\n  width: 100%;\n}\n\n.select-trigger {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: var(--space-2);\n  padding: var(--space-2) var(--space-3);\n  background: var(--glass-bg-medium);\n  backdrop-filter: var(--overlay-component-backdrop);\n  -webkit-backdrop-filter: var(--overlay-component-backdrop);\n  border: var(--space-px) solid var(--glass-border-hover);\n  border-radius: var(--radius-lg);\n  color: var(--text-primary);\n  font-size: var(--text-sm);\n  cursor: pointer;\n  outline: none;\n  transition: all var(--duration-normal) var(--ease-out);\n  min-height: var(--space-10);\n}\n\n.select-trigger:hover {\n  border-color: var(--border-interactive);\n  background: var(--glass-bg-heavy);\n}\n\n.selected-info {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  flex: 1;\n}\n\n.section-color-dot {\n  width: var(--space-2_5);\n  height: var(--space-2_5);\n  border-radius: 50%;\n  flex-shrink: 0;\n}\n\n.select-value {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.select-value.placeholder {\n  color: var(--text-muted);\n}\n\n.select-icon {\n  color: var(--text-muted);\n  transition: transform var(--duration-normal) var(--ease-out);\n}\n\n.select-icon.is-open {\n  transform: rotate(180deg);\n}\n\n.select-dropdown {\n  /* Position is set via inline style from Teleport */\n  z-index: var(--z-tooltip);\n\n  /* Use design tokens for consistent overlay styling */\n  background: var(--overlay-component-bg);\n  backdrop-filter: var(--overlay-component-backdrop);\n  -webkit-backdrop-filter: var(--overlay-component-backdrop);\n  border: var(--overlay-component-border);\n  box-shadow: var(--overlay-component-shadow);\n  border-radius: var(--radius-xl);\n\n  max-height: 350px;\n  overflow-y: auto;\n  padding: var(--space-2);\n  min-width: 200px;\n\n  /* Ensure backdrop-filter works */\n  isolation: isolate;\n  transform: translateZ(0);\n}\n\n.select-option {\n  display: flex;\n  align-items: center;\n  gap: var(--space-3);\n  padding: var(--space-2_5) var(--space-3);\n  border-radius: var(--radius-md);\n  color: var(--text-primary);\n  font-size: var(--text-sm);\n  cursor: pointer;\n  transition: all var(--duration-normal) var(--ease-out);\n  white-space: nowrap;\n}\n\n.select-option:hover {\n  background: var(--glass-bg-heavy);\n}\n\n.select-option.is-selected {\n  background: var(--brand-primary-bg-medium);\n  color: var(--brand-primary);\n}\n\n.none-option {\n  border-bottom: 1px solid var(--glass-border);\n  margin-bottom: var(--space-2);\n  color: var(--text-muted);\n}\n\n.group-header {\n  padding: var(--space-2) var(--space-3) var(--space-1);\n  font-size: var(--text-xs);\n  text-transform: uppercase;\n  letter-spacing: 0.1em;\n  color: var(--text-muted);\n  font-weight: var(--font-bold);\n}\n\n.empty-state {\n  padding: var(--space-4);\n  text-align: center;\n  color: var(--text-muted);\n  font-size: var(--text-sm);\n}\n\n/* Transitions */\n.dropdown-enter-active, .dropdown-leave-active {\n  transition: opacity var(--duration-normal) var(--var(--ease-out)-out), transform var(--duration-normal) ease;\n}\n.dropdown-enter-from, .dropdown-leave-to {\n  opacity: 0;\n  transform: translateY(-8px);\n}\n\n/* ============================================\n   COMPACT VARIANT - for use inside metadata bars\n   ============================================ */\n.section-selector.is-compact {\n  width: auto;\n}\n\n.section-selector.is-compact .select-trigger {\n  /* Remove glass morphism - parent provides container styling */\n  background: transparent;\n  backdrop-filter: none;\n  -webkit-backdrop-filter: none;\n  border: none;\n\n  /* Compact sizing */\n  padding: 0;\n  min-height: unset;\n  height: auto;\n  width: auto;\n}\n\n.section-selector.is-compact .select-trigger:hover {\n  background: transparent;\n  border: none;\n}\n\n.section-selector.is-compact .select-value {\n  font-size: var(--text-xs);\n  font-weight: var(--font-medium);\n}\n\n.section-selector.is-compact .section-color-dot {\n  width: var(--space-2);\n  height: var(--space-2);\n}\n\n.section-selector.is-compact .select-icon {\n  color: var(--text-tertiary);\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/canvas/TaskNode.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/canvas/UnifiedGroupModal.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/canvas/node/OverdueBadge.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/canvas/node/TaskNodeDescription.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/canvas/node/TaskNodeHeader.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/canvas/node/TaskNodeMeta.vue","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":80,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":80,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2224,2227],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2224,2227],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<template>\n  <div class=\"task-metadata\">\n    <!-- Status -->\n    <span v-if=\"showStatus\" class=\"status-badge\">{{ statusLabel }}</span>\n\n    <!-- \"Done for now\" Badge - shows when task was rescheduled via this feature -->\n    <span\n      v-if=\"isDoneForNow\"\n      class=\"done-for-now-badge clickable\"\n      title=\"Click to clear\"\n      @click.stop=\"$emit('clearDoneForNow')\"\n    >\n      <Clock :size=\"12\" />\n      Done for now\n    </span>\n\n    <!-- TASK-282: Overdue Badge (takes priority over regular due date display) -->\n    <OverdueBadge\n      v-if=\"isOverdue\"\n      :current-due-date=\"dueDate\"\n      @reschedule=\"(dateType) => $emit('reschedule', dateType)\"\n    />\n\n    <!-- Due Date (only show if not overdue) -->\n    <span v-else-if=\"dueDate\" class=\"due-date-badge\" title=\"Due Date\">\n      <Calendar :size=\"12\" />\n      {{ formattedDueDate }}\n    </span>\n\n    <!-- Schedule -->\n    <span v-if=\"showSchedule && hasSchedule\" class=\"schedule-badge\" title=\"Scheduled\">\n      📅\n    </span>\n\n    <!-- Duration -->\n    <span\n      v-if=\"showDuration && duration\"\n      class=\"duration-badge\"\n      :class=\"durationBadgeClass\"\n      :title=\"`Duration: ${formattedDuration}`\"\n    >\n      <component :is=\"durationIcon\" :size=\"12\" />\n      {{ formattedDuration }}\n    </span>\n\n    <!-- Subtasks -->\n    <span\n      v-if=\"subtaskCount && subtaskCount > 0\"\n      class=\"subtask-badge\"\n      :class=\"{ 'subtask-complete': completedSubtaskCount === subtaskCount }\"\n      :title=\"`Subtasks: ${completedSubtaskCount}/${subtaskCount}`\"\n    >\n      <ListChecks :size=\"12\" />\n      {{ completedSubtaskCount }}/{{ subtaskCount }}\n    </span>\n\n    <!-- Done Indicator -->\n    <span v-if=\"isDone\" class=\"done-badge\" title=\"Completed\">\n      <Check :size=\"12\" />\n      Done\n    </span>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from 'vue'\nimport { Calendar, Check, Clock, ListChecks } from 'lucide-vue-next'\nimport OverdueBadge from './OverdueBadge.vue'\n\nconst props = defineProps<{\n  showStatus: boolean\n  statusLabel: string\n  dueDate?: string | null\n  formattedDueDate: string\n  showSchedule: boolean\n  hasSchedule: boolean\n  showDuration: boolean\n  duration?: number\n  durationBadgeClass: string\n  durationIcon: any // Component type\n  formattedDuration: string\n  isDone: boolean\n  isOverdue: boolean\n  doneForNowUntil?: string | null\n  subtaskCount?: number\n  completedSubtaskCount?: number\n}>()\n\ndefineEmits<{\n  reschedule: [dateType: string]\n  clearDoneForNow: []\n}>()\n\n// BUG-1187: Show \"Done for now\" badge when doneForNowUntil has a value\n// Badge only clears when user explicitly clicks it (clearDoneForNow event)\nconst isDoneForNow = computed(() => {\n  return !!props.doneForNowUntil\n})\n\n</script>\n\n<style scoped>\n.task-metadata {\n  display: flex;\n  flex-wrap: wrap;\n  gap: var(--space-3);\n  align-items: center;\n}\n\n.status-badge, .due-date-badge, .schedule-badge, .duration-badge, .done-badge, .done-for-now-badge, .subtask-badge {\n  display: flex;\n  align-items: center;\n  gap: var(--space-1);\n  font-size: var(--text-xs);\n  padding: var(--space-0_5) var(--space-1_5);\n  border-radius: var(--radius-sm);\n  background: var(--glass-bg-soft);\n  border: 1px solid var(--glass-border);\n  color: var(--text-secondary);\n}\n\n.due-date-badge {\n  color: var(--text-primary);\n}\n\n.done-badge {\n  color: var(--color-success);\n  background: var(--green-bg-soft);\n  border: 1px solid var(--green-border);\n}\n\n/* \"Done for now\" badge - amber text to indicate rescheduled */\n.done-for-now-badge {\n  color: var(--color-amber);\n}\n\n/* Clickable badges */\n.clickable {\n  cursor: pointer;\n  transition: opacity var(--duration-fast) var(--ease-out);\n}\n\n.clickable:hover {\n  opacity: 0.7;\n}\n\n/* Duration Styles */\n.duration-quick { color: var(--color-success); border-color: var(--color-success-dim); }\n.duration-short { color: var(--color-info); border-color: var(--color-info-dim); }\n.duration-medium { color: var(--color-warning); border-color: var(--color-warning-dim); }\n.duration-long { color: var(--color-error); border-color: var(--color-error-dim); }\n\n/* Subtask Badge Styles */\n.subtask-badge {\n  color: var(--text-secondary);\n}\n\n.subtask-complete {\n  color: var(--color-success);\n  background: var(--green-bg-soft);\n  border: 1px solid var(--green-border);\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/canvas/node/TaskNodePriority.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/canvas/node/TaskNodeSelection.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/common/ConfirmationModal.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/common/CustomSelect.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/common/EmojiPicker.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/common/ErrorBoundary.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/common/FaviconManager.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/common/GroupModal.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/common/IOSInstallPrompt.vue","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":77,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":80,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[368,371],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[368,371],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":97,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":100,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[513,516],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[513,516],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<script setup lang=\"ts\">\nimport { ref, onMounted } from 'vue'\nimport { Share, PlusSquare, X } from 'lucide-vue-next'\nimport { NButton, NCard, NText } from 'naive-ui'\n\nconst isIOS = ref(false)\nconst isStandalone = ref(false)\nconst showTooltip = ref(false)\n\nonMounted(() => {\n  // Check if iOS\n  isIOS.value = /iPad|iPhone|iPod/.test(navigator.userAgent) && !(window as any).MSStream\n  \n  // Check if already installed\n  isStandalone.value = window.matchMedia('(display-mode: standalone)').matches || (navigator as any).standalone\n  \n  // Show tooltip only for iOS users not in standalone mode\n  if (isIOS.value && !isStandalone.value) {\n    // Check if dismissed before\n    const dismissed = localStorage.getItem('flowstate-ios-install-prompt-dismissed')\n    if (!dismissed) {\n      showTooltip.value = true\n    }\n  }\n})\n\nconst dismiss = () => {\n  showTooltip.value = false\n  localStorage.setItem('flowstate-ios-install-prompt-dismissed', 'true')\n}\n</script>\n\n<template>\n  <Transition name=\"slide-up\">\n    <div v-if=\"showTooltip\" class=\"ios-install-tooltip\">\n      <NCard class=\"tooltip-card\" size=\"small\" :bordered=\"false\">\n        <div class=\"tooltip-header\">\n          <NText strong>\n            Install FlowState\n          </NText>\n          <NButton\n            quaternary\n            circle\n            size=\"tiny\"\n            @click=\"dismiss\"\n          >\n            <template #icon>\n              <X :size=\"14\" />\n            </template>\n          </NButton>\n        </div>\n        \n        <div class=\"tooltip-body\">\n          <NText depth=\"3\">\n            To install FlowState on your iPhone:\n          </NText>\n          <div class=\"instruction-steps\">\n            <div class=\"step\">\n              <span class=\"step-icon\"><Share :size=\"16\" /></span>\n              <span>Tap the <strong>Share</strong> button below</span>\n            </div>\n            <div class=\"step\">\n              <span class=\"step-icon\"><PlusSquare :size=\"16\" /></span>\n              <span>Select <strong>Add to Home Screen</strong></span>\n            </div>\n          </div>\n        </div>\n      </NCard>\n      <div class=\"tooltip-arrow\" />\n    </div>\n  </Transition>\n</template>\n\n<style scoped>\n.ios-install-tooltip {\n  position: fixed;\n  bottom: 24px;\n  left: 50%;\n  transform: translateX(-50%);\n  z-index: var(--z-tooltip);\n  width: calc(100% - 32px);\n  max-width: 300px;\n}\n\n.tooltip-card {\n  background: var(--bg-secondary) !important;\n  border: 1px solid var(--border-default) !important;\n  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.4) !important;\n  border-radius: 16px !important;\n}\n\n.tooltip-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n}\n\n.tooltip-body {\n  font-size: var(--text-meta);\n  line-height: 1.4;\n}\n\n.instruction-steps {\n  margin-top: 12px;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.step {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.step-icon {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: var(--brand-primary);\n}\n\n.tooltip-arrow {\n  position: absolute;\n  bottom: -8px;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 16px;\n  height: 16px;\n  background: var(--bg-secondary);\n  border-right: 1px solid var(--border-default);\n  border-bottom: 1px solid var(--border-default);\n  rotate: 45deg;\n}\n\n/* Transitions */\n.slide-up-enter-active,\n.slide-up-leave-active {\n  transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);\n}\n\n.slide-up-enter-from,\n.slide-up-leave-to {\n  opacity: 0;\n  transform: translate(-50%, 40px) scale(0.9);\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/common/MarkdownEditor.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/common/MarkdownRenderer.vue","messages":[{"ruleId":"vue/no-v-html","severity":1,"message":"'v-html' directive can lead to XSS attack.","line":7,"column":5,"nodeType":"VAttribute","messageId":"unexpected","endLine":7,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<template>\n  <div \n    class=\"markdown-content\" \n    :class=\"{ 'rtl-aware': rtlAware }\"\n    :dir=\"calculatedDir\"\n    @click=\"handleClick\"\n    v-html=\"renderedHtml\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from 'vue'\nimport { parseMarkdown } from '@/utils/markdown'\n\ninterface Props {\n  content: string\n  rtlAware?: boolean\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  content: '',\n  rtlAware: true\n})\n\nconst emit = defineEmits<{\n  checkboxClick: [index: number, isChecked: boolean]\n}>()\n\nconst renderedHtml = computed(() => parseMarkdown(props.content))\n\nconst calculatedDir = computed(() => {\n  if (!props.content.trim()) return 'auto'\n  // Look for first strong directional character in the first 100 characters\n  const sample = props.content.trim().substring(0, 100)\n  const rtlRegex = /[\\u0590-\\u05FF\\u0600-\\u06FF\\u0750-\\u077F\\u08A0-\\u08FF\\uFB50-\\uFDFF\\uFE70-\\uFEFF]/\n  return rtlRegex.test(sample) ? 'rtl' : 'ltr'\n})\n\nconst handleClick = (event: MouseEvent) => {\n  const target = event.target as HTMLElement\n  if (target.tagName === 'INPUT' && target.classList.contains('md-checkbox')) {\n    event.stopPropagation()\n    event.preventDefault()\n    \n    // Find index of this checkbox among all checkboxes in this renderer\n    const allCheckboxes = (event.currentTarget as HTMLElement).querySelectorAll('.md-checkbox')\n    const index = Array.from(allCheckboxes).indexOf(target)\n    \n    if (index !== -1) {\n      emit('checkboxClick', index, (target as HTMLInputElement).checked)\n    }\n  }\n}\n</script>\n\n<style scoped>\n.markdown-content {\n  line-height: 1.6;\n  font-size: var(--text-sm);\n  color: var(--text-primary);\n  overflow-wrap: break-word;\n  word-break: break-word;\n  overflow: hidden;\n}\n\n.markdown-content.rtl-aware {\n  width: 100%;\n}\n\n:deep(p), :deep(h1), :deep(h2), :deep(h3), :deep(h4), :deep(h5), :deep(h6) {\n  width: 100%;\n  margin-top: 0;\n  margin-bottom: var(--space-4);\n  line-height: var(--leading-relaxed);\n  /* Let dir=\"auto\" on the parent or the element itself handle alignment */\n}\n\n/* Markdown Styling */\n:deep(h1), :deep(h2), :deep(h3) {\n  margin-top: var(--space-4);\n  margin-bottom: var(--space-2);\n  font-weight: var(--font-bold);\n  color: var(--text-primary);\n}\n\n:deep(h1) { font-size: var(--text-xl); border-bottom: 1px solid var(--border-subtle); padding-bottom: 0.3rem; }\n:deep(h2) { font-size: var(--text-lg); }\n:deep(h3) { font-size: var(--text-base); }\n\n:deep(p) {\n  margin-bottom: var(--space-3);\n}\n\n:deep(ul), :deep(ol) {\n  padding-inline-start: var(--space-6);\n  margin-bottom: var(--space-3);\n}\n\n:deep(li) {\n  margin-bottom: var(--space-1);\n  position: relative;\n}\n\n/* GFM Task List Styling */\n:deep(li.task-list-item) {\n  list-style-type: none;\n  display: flex;\n  align-items: flex-start;\n  gap: var(--space-2);\n  margin-inline-start: -var(--space-6); /* Counteract parent padding for task items */\n  padding-inline-start: var(--space-2);\n}\n\n:deep(ul.task-list) {\n  list-style-type: none;\n  padding-inline-start: var(--space-6);\n}\n\n/* Custom Checkbox Styling */\n:deep(input.md-checkbox) {\n  appearance: none;\n  -webkit-appearance: none;\n  width: 16px;\n  height: 16px;\n  border: 1.5px solid var(--glass-border-heavy);\n  border-radius: var(--radius-sm);\n  background: var(--glass-bg-soft);\n  cursor: pointer;\n  position: relative;\n  margin-top: var(--space-0_5); /* Center with text line height */\n  flex-shrink: 0;\n  transition: all var(--duration-normal) cubic-bezier(0.4, 0, 0.2, 1);\n  display: inline-block;\n  vertical-align: middle;\n}\n\n:deep(input.md-checkbox:checked) {\n  background: var(--brand-primary);\n  border-color: var(--brand-primary);\n}\n\n:deep(input.md-checkbox:checked::after) {\n  content: '';\n  position: absolute;\n  top: 1px;\n  left: var(--space-1);\n  width: 5px;\n  height: 9px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n}\n\n:deep(input.md-checkbox:hover) {\n  border-color: var(--brand-primary);\n  box-shadow: 0 0 8px var(--brand-primary-alpha-20);\n}\n\n:deep(code) {\n  background: var(--glass-bg-medium);\n  padding: 0.1rem 0.3rem;\n  border-radius: var(--radius-sm);\n  font-family: var(--font-mono, monospace);\n  font-size: 0.9em;\n}\n\n:deep(pre) {\n  background: var(--glass-bg-heavy);\n  padding: var(--space-3);\n  border-radius: var(--radius-md);\n  overflow-x: auto;\n  margin-bottom: var(--space-3);\n  border: 1px solid var(--glass-border);\n}\n\n:deep(pre code) {\n  background: transparent;\n  padding: 0;\n}\n\n:deep(blockquote) {\n  border-inline-start: 4px solid var(--brand-primary);\n  padding-inline-start: var(--space-3);\n  margin-inline: 0;\n  margin-bottom: var(--space-3);\n  color: var(--text-muted);\n  font-style: italic;\n}\n\n:deep(hr) {\n  border: 0;\n  border-top: 1px solid var(--border-subtle);\n  margin: var(--space-4) 0;\n}\n\n:deep(a) {\n  color: var(--brand-primary);\n  text-decoration: none;\n  display: inline-block;\n  max-width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  vertical-align: bottom;\n}\n\n:deep(a:hover) {\n  text-decoration: underline;\n}\n\n:deep(img) {\n  max-width: 100%;\n  border-radius: var(--radius-md);\n}\n\n/* Checkbox lists */\n:deep(ul li input[type=\"checkbox\"]) {\n  margin-inline-end: var(--space-2);\n  vertical-align: middle;\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/common/MultiSelectToggle.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/common/ReloadPrompt.vue","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":14,"column":3,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":14,"endColumn":61,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[490,548],"text":"// @ts-expect-error - Virtual module provided by vite-plugin-pwa"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":2,"message":"Expected an assignment or function call and instead saw an expression.","line":22,"column":5,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":22,"endColumn":57},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":2,"message":"Expected an assignment or function call and instead saw an expression.","line":23,"column":5,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":23,"endColumn":55}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<script setup lang=\"ts\">\nimport { computed, ref } from 'vue'\nimport { RefreshCw, X, CheckCircle2 } from 'lucide-vue-next'\nimport { NButton, NCard, NText } from 'naive-ui'\n\n// --- State ---\n// PWA registration - only available in web builds with PWA plugin\nconst offlineReady = ref(false)\nconst needRefresh = ref(false)\nlet updateServiceWorker = () => {}\n\n// Dynamically import PWA register only when available (web builds)\nif (typeof window !== 'undefined' && !('__TAURI__' in window)) {\n  // @ts-ignore - Virtual module provided by vite-plugin-pwa\n  import('virtual:pwa-register/vue').then(({ useRegisterSW }) => {\n    const sw = useRegisterSW()\n    offlineReady.value = sw.offlineReady.value\n    needRefresh.value = sw.needRefresh.value\n    updateServiceWorker = sw.updateServiceWorker\n\n    // Watch for changes\n    sw.offlineReady.value && (offlineReady.value = true)\n    sw.needRefresh.value && (needRefresh.value = true)\n  }).catch(() => {\n    // PWA plugin not available (Tauri build), ignore\n  })\n}\n\n// --- Computed ---\nconst showPrompt = computed(() => offlineReady.value || needRefresh.value)\n\n// --- Methods ---\nconst close = async () => {\n  offlineReady.value = false\n  needRefresh.value = false\n}\n\nconst handleReload = async () => {\n  updateServiceWorker()\n}\n</script>\n\n<template>\n  <Transition name=\"slide-up\">\n    <div v-if=\"showPrompt\" class=\"pwa-reload-prompt\">\n      <NCard class=\"prompt-card\" size=\"small\" :bordered=\"false\">\n        <div class=\"prompt-content\">\n          <!-- Update Available Mode -->\n          <div v-if=\"needRefresh\" class=\"state-update\">\n            <div class=\"icon-wrapper update\">\n              <RefreshCw class=\"icon-spin\" :size=\"20\" />\n            </div>\n            <div class=\"text-content\">\n              <NText strong class=\"title\">\n                Update Available\n              </NText>\n              <NText depth=\"3\" class=\"description\">\n                A new version of FlowState is available.\n              </NText>\n            </div>\n            <div class=\"actions\">\n              <NButton \n                secondary \n                type=\"primary\" \n                size=\"small\" \n                @click=\"handleReload\"\n              >\n                Reload\n              </NButton>\n\n              <NButton\n                quaternary\n                circle\n                size=\"small\"\n                @click=\"close\"\n              >\n                <template #icon>\n                  <X :size=\"16\" />\n                </template>\n              </NButton>\n            </div>\n          </div>\n\n          <!-- Offline Ready Mode -->\n          <div v-else-if=\"offlineReady\" class=\"state-offline\">\n            <div class=\"icon-wrapper offline\">\n              <CheckCircle2 :size=\"20\" />\n            </div>\n            <div class=\"text-content\">\n              <NText strong class=\"title\">\n                Ready for Offline\n              </NText>\n              <NText depth=\"3\" class=\"description\">\n                App ready to work offline.\n              </NText>\n            </div>\n            <div class=\"actions\">\n              <NButton\n                quaternary\n                circle\n                size=\"small\"\n                @click=\"close\"\n              >\n                <template #icon>\n                  <X :size=\"16\" />\n                </template>\n              </NButton>\n            </div>\n          </div>\n        </div>\n      </NCard>\n    </div>\n  </Transition>\n</template>\n\n<style scoped>\n.pwa-reload-prompt {\n  position: fixed;\n  bottom: 24px;\n  right: 24px;\n  z-index: var(--z-tooltip);\n  max-width: 400px;\n  width: calc(100% - 48px);\n}\n\n.prompt-card {\n  background: var(--bg-secondary) !important;\n  border: 1px solid var(--border-default) !important;\n  box-shadow: 0 8px 16px -4px rgba(0, 0, 0, 0.2), \n              0 4px 6px -2px rgba(0, 0, 0, 0.1) !important;\n  backdrop-filter: blur(8px);\n}\n\n.prompt-content {\n  display: flex;\n  flex-direction: column;\n}\n\n.state-update, .state-offline {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.icon-wrapper {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  flex-shrink: 0;\n}\n\n.icon-wrapper.update {\n  background: rgba(99, 102, 241, 0.15); /* Indigo 500 alpha */\n  color: #818cf8; /* Indigo 400 */\n}\n\n.icon-wrapper.offline {\n  background: rgba(34, 197, 94, 0.15); /* Green 500 alpha */\n  color: #4ade80; /* Green 400 */\n}\n\n.text-content {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  line-height: 1.3;\n}\n\n.title {\n  font-size: var(--text-sm);\n}\n\n.description {\n  font-size: var(--text-xs);\n  margin-top: 2px;\n}\n\n.warning {\n  color: var(--warning-text);\n  font-weight: 600;\n}\n\n.actions {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.icon-spin {\n  animation: spin 2s linear infinite;\n}\n\n@keyframes spin {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n\n/* Transitions */\n.slide-up-enter-active,\n.slide-up-leave-active {\n  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);\n}\n\n.slide-up-enter-from,\n.slide-up-leave-to {\n  opacity: 0;\n  transform: translateY(20px) scale(0.95);\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/common/TauriUpdateNotification.vue","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'UpdateStatus' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":44,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"UpdateStatus"},"fix":{"range":[522,541],"text":""},"desc":"Remove unused variable \"UpdateStatus\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'hasUpdate' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":24,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isChecking' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":25,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isDownloading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":26,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":16}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<script setup lang=\"ts\">\n/**\n * TauriUpdateNotification.vue\n *\n * Shows a notification when a new version of the app is available.\n * Only renders in Tauri environment. Checks for updates on mount\n * and provides download + install functionality.\n *\n * TASK-1114: Tauri Auto-Update from GitHub Releases\n */\nimport { ref, onMounted, computed } from 'vue'\nimport { Download, X, RefreshCw, CheckCircle2, AlertCircle } from 'lucide-vue-next'\nimport { NButton, NCard, NText, NProgress } from 'naive-ui'\nimport { useTauriUpdater, type UpdateStatus } from '@/composables/useTauriUpdater'\nimport { isTauri } from '@/composables/useTauriStartup'\nimport { useSettingsStore } from '@/stores/settings'\n\n// --- State ---\nconst {\n  status,\n  updateInfo,\n  error,\n  downloadProgress,\n  hasUpdate,\n  isChecking,\n  isDownloading,\n  checkForUpdates,\n  downloadAndInstall,\n  restart\n} = useTauriUpdater()\n\nconst dismissed = ref(false)\n\n// --- Computed ---\nconst showNotification = computed(() => {\n  if (!isTauri() || dismissed.value) return false\n  // Show when: update available, downloading, ready to install, or error\n  return ['available', 'downloading', 'ready', 'error'].includes(status.value)\n})\n\nconst statusIcon = computed(() => {\n  switch (status.value) {\n    case 'available':\n      return Download\n    case 'downloading':\n      return RefreshCw\n    case 'ready':\n      return CheckCircle2\n    case 'error':\n      return AlertCircle\n    default:\n      return Download\n  }\n})\n\nconst statusColor = computed(() => {\n  switch (status.value) {\n    case 'available':\n    case 'downloading':\n      return 'indigo'\n    case 'ready':\n      return 'green'\n    case 'error':\n      return 'red'\n    default:\n      return 'indigo'\n  }\n})\n\nconst statusTitle = computed(() => {\n  switch (status.value) {\n    case 'available':\n      return 'Update Available'\n    case 'downloading':\n      return 'Downloading Update...'\n    case 'ready':\n      return 'Ready to Install'\n    case 'error':\n      return 'Update Failed'\n    default:\n      return 'Update'\n  }\n})\n\nconst statusDescription = computed(() => {\n  if (status.value === 'error') {\n    return error.value || 'An error occurred while checking for updates.'\n  }\n  if (status.value === 'ready') {\n    return `Version ${updateInfo.value?.version} is ready. Restart to apply.`\n  }\n  if (updateInfo.value) {\n    return `Version ${updateInfo.value.version} is available (current: ${updateInfo.value.currentVersion})`\n  }\n  return 'A new version of FlowState is available.'\n})\n\n// --- Methods ---\nconst handleDismiss = () => {\n  dismissed.value = true\n}\n\nconst handleDownload = async () => {\n  await downloadAndInstall()\n}\n\nconst handleRestart = async () => {\n  await restart()\n}\n\nconst handleRetry = async () => {\n  dismissed.value = false\n  await checkForUpdates()\n}\n\n// --- Lifecycle ---\nonMounted(async () => {\n  if (!isTauri()) return\n\n  // Check for updates after a short delay to not block startup\n  setTimeout(async () => {\n    console.log('[TauriUpdater] Checking for updates...')\n    const hasNewVersion = await checkForUpdates()\n    if (hasNewVersion) {\n      console.log('[TauriUpdater] Update available:', updateInfo.value?.version)\n      // FEATURE-1194: Auto-download if enabled in settings\n      const settingsStore = useSettingsStore()\n      if (settingsStore.autoUpdateEnabled) {\n        console.log('[TauriUpdater] Auto-update enabled, downloading...')\n        await downloadAndInstall()\n      }\n    } else if (status.value === 'error') {\n      // Don't show error notification for \"no releases yet\" - this is expected\n      // when there's no published release or latest.json doesn't exist\n      console.log('[TauriUpdater] No update manifest found (expected if no releases published)')\n      dismissed.value = true // Hide the error notification\n    } else {\n      console.log('[TauriUpdater] App is up to date')\n    }\n  }, 3000)\n})\n</script>\n\n<template>\n  <Transition name=\"slide-up\">\n    <div v-if=\"showNotification\" class=\"tauri-update-notification\">\n      <NCard class=\"notification-card\" size=\"small\" :bordered=\"false\">\n        <div class=\"notification-content\">\n          <!-- Icon -->\n          <div class=\"icon-wrapper\" :class=\"statusColor\">\n            <component\n              :is=\"statusIcon\"\n              :class=\"{ 'icon-spin': status === 'downloading' }\"\n              :size=\"20\"\n            />\n          </div>\n\n          <!-- Text Content -->\n          <div class=\"text-content\">\n            <NText strong class=\"title\">\n              {{ statusTitle }}\n            </NText>\n            <NText depth=\"3\" class=\"description\">\n              {{ statusDescription }}\n            </NText>\n\n            <!-- Progress bar for downloading -->\n            <NProgress\n              v-if=\"status === 'downloading'\"\n              type=\"line\"\n              :percentage=\"downloadProgress\"\n              :show-indicator=\"false\"\n              :height=\"4\"\n              class=\"download-progress\"\n            />\n          </div>\n\n          <!-- Actions -->\n          <div class=\"actions\">\n            <!-- Download button (when update available) -->\n            <NButton\n              v-if=\"status === 'available'\"\n              secondary\n              type=\"primary\"\n              size=\"small\"\n              @click=\"handleDownload\"\n            >\n              Download\n            </NButton>\n\n            <!-- Restart button (when ready to install) -->\n            <NButton\n              v-if=\"status === 'ready'\"\n              secondary\n              type=\"success\"\n              size=\"small\"\n              @click=\"handleRestart\"\n            >\n              Restart Now\n            </NButton>\n\n            <!-- Retry button (on error) -->\n            <NButton\n              v-if=\"status === 'error'\"\n              secondary\n              type=\"warning\"\n              size=\"small\"\n              @click=\"handleRetry\"\n            >\n              Retry\n            </NButton>\n\n            <!-- Dismiss button -->\n            <NButton\n              v-if=\"status !== 'downloading'\"\n              quaternary\n              circle\n              size=\"small\"\n              @click=\"handleDismiss\"\n            >\n              <template #icon>\n                <X :size=\"16\" />\n              </template>\n            </NButton>\n          </div>\n        </div>\n      </NCard>\n    </div>\n  </Transition>\n</template>\n\n<style scoped>\n.tauri-update-notification {\n  position: fixed;\n  bottom: var(--space-6);\n  right: var(--space-6);\n  z-index: var(--z-toast);\n  max-width: 420px;\n  width: calc(100% - calc(var(--space-6) * 2));\n}\n\n.notification-card {\n  background: var(--surface-primary) !important;\n  border: 1px solid var(--glass-border) !important;\n  box-shadow: var(--shadow-xl) !important;\n  backdrop-filter: blur(20px);\n  -webkit-backdrop-filter: blur(20px);\n}\n\n.notification-content {\n  display: flex;\n  align-items: flex-start;\n  gap: var(--space-3);\n}\n\n.icon-wrapper {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: var(--space-9);\n  height: var(--space-9);\n  border-radius: var(--radius-full);\n  flex-shrink: 0;\n  margin-top: var(--space-0_5);\n}\n\n.icon-wrapper.indigo {\n  background: var(--purple-bg-subtle);\n  color: var(--color-info);\n}\n\n.icon-wrapper.green {\n  background: var(--success-bg-subtle);\n  color: var(--color-work);\n}\n\n.icon-wrapper.red {\n  background: var(--danger-bg-subtle);\n  color: var(--color-danger);\n}\n\n.text-content {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  line-height: var(--leading-tight);\n  min-width: 0;\n}\n\n.title {\n  font-size: var(--text-sm);\n  color: var(--text-primary);\n}\n\n.description {\n  font-size: var(--text-xs);\n  margin-top: var(--space-0_5);\n  word-break: break-word;\n  color: var(--text-secondary);\n}\n\n.download-progress {\n  margin-top: var(--space-2);\n}\n\n.actions {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  flex-shrink: 0;\n}\n\n.icon-spin {\n  animation: spin 2s linear infinite;\n}\n\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n/* Transitions */\n.slide-up-enter-active,\n.slide-up-leave-active {\n  transition: all var(--duration-slow) var(--spring-bounce);\n}\n\n.slide-up-enter-from,\n.slide-up-leave-to {\n  opacity: 0;\n  transform: translateY(var(--space-5)) scale(0.95);\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/common/TimeDisplay.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/common/TiptapEditor.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/debug/KeyboardDeletionTest.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/debug/PerformanceTest.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/error/RouteErrorBoundary.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/ARIAMessage.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/AchievementBadge.vue","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":27,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[807,810],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[807,810],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<script setup lang=\"ts\">\n/**\n * Achievement Badge Component\n * FEATURE-1118: Displays an achievement with tier-based glow\n */\nimport { computed } from 'vue'\nimport type { AchievementWithProgress, AchievementTier } from '@/types/gamification'\nimport {\n  Rocket, Target, Award, Crown, Flame, Clock, Hourglass, Layers,\n  Calendar, Trophy, Star, RefreshCw, Shield, Timer, Brain,\n  Zap, Infinity, Activity, Layout, Columns, Smartphone, Palette,\n  Moon, Sunrise, CheckCircle, Database, Lock\n} from 'lucide-vue-next'\n\nconst props = withDefaults(defineProps<{\n  achievement: AchievementWithProgress\n  size?: 'sm' | 'md' | 'lg'\n  showProgress?: boolean\n  showDescription?: boolean\n}>(), {\n  size: 'md',\n  showProgress: true,\n  showDescription: false\n})\n\n// Map icon names to components\nconst iconMap: Record<string, any> = {\n  rocket: Rocket, target: Target, award: Award, crown: Crown, flame: Flame,\n  clock: Clock, hourglass: Hourglass, layers: Layers, fire: Flame,\n  calendar: Calendar, trophy: Trophy, star: Star, 'refresh-cw': RefreshCw,\n  shield: Shield, timer: Timer, brain: Brain, zap: Zap, infinity: Infinity,\n  activity: Activity, layout: Layout, columns: Columns, smartphone: Smartphone,\n  palette: Palette, moon: Moon, sunrise: Sunrise, 'check-circle': CheckCircle,\n  database: Database\n}\n\nconst IconComponent = computed(() => iconMap[props.achievement.icon] || Award)\n\nconst tierGlow = computed(() => {\n  const tierMap: Record<AchievementTier, string> = {\n    bronze: 'var(--tier-glow-bronze)',\n    silver: 'var(--tier-glow-silver)',\n    gold: 'var(--tier-glow-gold)',\n    platinum: 'var(--tier-glow-platinum)'\n  }\n  return tierMap[props.achievement.tier]\n})\n\nconst tierColor = computed(() => {\n  const tierMap: Record<AchievementTier, string> = {\n    bronze: 'rgb(var(--tier-bronze))',\n    silver: 'rgb(var(--tier-silver))',\n    gold: 'rgb(var(--tier-gold))',\n    platinum: 'rgb(var(--tier-platinum))'\n  }\n  return tierMap[props.achievement.tier]\n})\n\nconst progressPercent = computed(() => {\n  if (props.achievement.isEarned) return 100\n  return Math.min(100, Math.round(\n    (props.achievement.progress / props.achievement.conditionValue) * 100\n  ))\n})\n\nconst sizeClass = computed(() => `badge--${props.size}`)\n</script>\n\n<template>\n  <div\n    class=\"achievement-badge\"\n    :class=\"[\n      sizeClass,\n      `badge--${achievement.tier}`,\n      { 'badge--earned': achievement.isEarned, 'badge--secret': achievement.isSecret && !achievement.isEarned }\n    ]\"\n    :title=\"achievement.isEarned ? achievement.name : (achievement.isSecret ? '???' : achievement.name)\"\n  >\n    <div\n      class=\"badge-icon-wrapper\"\n      :style=\"{ boxShadow: achievement.isEarned ? tierGlow : 'none' }\"\n    >\n      <Lock\n        v-if=\"achievement.isSecret && !achievement.isEarned\"\n        class=\"badge-icon badge-icon--locked\"\n        :size=\"size === 'sm' ? 16 : size === 'lg' ? 32 : 24\"\n      />\n      <component\n        :is=\"IconComponent\"\n        v-else\n        class=\"badge-icon\"\n        :style=\"{ color: achievement.isEarned ? tierColor : undefined }\"\n        :size=\"size === 'sm' ? 16 : size === 'lg' ? 32 : 24\"\n      />\n    </div>\n\n    <div\n      v-if=\"showDescription || showProgress\"\n      class=\"badge-content\"\n    >\n      <span\n        v-if=\"showDescription\"\n        class=\"badge-name\"\n      >\n        {{ achievement.isSecret && !achievement.isEarned ? '???' : achievement.name }}\n      </span>\n\n      <div\n        v-if=\"showProgress && !achievement.isEarned && !achievement.isSecret\"\n        class=\"badge-progress\"\n      >\n        <div\n          class=\"badge-progress-bar\"\n          :style=\"{ width: `${progressPercent}%` }\"\n        />\n      </div>\n\n      <span\n        v-if=\"showProgress && !achievement.isEarned && !achievement.isSecret\"\n        class=\"badge-progress-text\"\n      >\n        {{ achievement.progress }}/{{ achievement.conditionValue }}\n      </span>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.achievement-badge {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  padding: var(--space-2);\n  background: var(--gamification-card-bg);\n  border-radius: var(--radius-md);\n  border: 1px solid var(--purple-border-medium);\n  transition: transform var(--duration-normal) ease, box-shadow var(--duration-normal) ease;\n}\n\n.achievement-badge:hover {\n  transform: translateY(calc(-1 * var(--space-0_5)));\n}\n\n.badge--earned:hover {\n  box-shadow: var(--tier-glow-bronze);\n}\n\n.badge--earned.badge--silver:hover {\n  box-shadow: var(--tier-glow-silver);\n}\n\n.badge--earned.badge--gold:hover {\n  box-shadow: var(--tier-glow-gold);\n}\n\n.badge--earned.badge--platinum:hover {\n  box-shadow: var(--tier-glow-platinum);\n}\n\n.badge--secret {\n  opacity: 0.5;\n}\n\n.badge--sm {\n  padding: var(--space-1);\n  gap: var(--space-1);\n}\n\n.badge--lg {\n  padding: var(--space-3);\n  gap: var(--space-3);\n}\n\n.badge-icon-wrapper {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: var(--space-1);\n  background: var(--purple-bg-subtle);\n  border-radius: var(--radius-sm);\n  transition: box-shadow var(--duration-slow) ease;\n}\n\n.badge--sm .badge-icon-wrapper {\n  padding: var(--space-1);\n}\n\n.badge--lg .badge-icon-wrapper {\n  padding: var(--space-2);\n}\n\n.badge-icon {\n  color: var(--gamification-text-secondary);\n  transition: color var(--duration-slow) ease;\n}\n\n.badge--earned .badge-icon {\n  filter: drop-shadow(0 0 var(--space-1) currentColor);\n}\n\n.badge-icon--locked {\n  color: rgba(var(--color-slate-500), 0.5);\n}\n\n.badge-content {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-1);\n  flex: 1;\n  min-width: 0;\n}\n\n.badge-name {\n  font-size: var(--text-sm);\n  font-weight: var(--font-medium);\n  color: var(--gamification-text-primary);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.badge-progress {\n  height: var(--space-1);\n  background: var(--purple-bg-subtle);\n  border-radius: var(--space-0_5);\n  overflow: hidden;\n}\n\n.badge-progress-bar {\n  height: 100%;\n  background: rgba(var(--neon-cyan), 0.6);\n  border-radius: var(--space-0_5);\n  transition: width var(--duration-slow) ease;\n}\n\n.badge-progress-text {\n  font-size: var(--text-xs);\n  color: var(--gamification-text-secondary);\n}\n\n/* Tier-specific icon wrapper backgrounds */\n.badge--earned.badge--bronze .badge-icon-wrapper {\n  background: rgba(var(--tier-bronze), 0.15);\n}\n\n.badge--earned.badge--silver .badge-icon-wrapper {\n  background: rgba(var(--tier-silver), 0.15);\n}\n\n.badge--earned.badge--gold .badge-icon-wrapper {\n  background: rgba(var(--tier-gold), 0.15);\n}\n\n.badge--earned.badge--platinum .badge-icon-wrapper {\n  background: rgba(var(--tier-platinum), 0.15);\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/AchievementToast.vue","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":21,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[573,576],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[573,576],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<script setup lang=\"ts\">\n/**\n * Achievement Toast Component\n * FEATURE-1118: Pop-up notification for XP gains, level ups, and achievements\n */\nimport { computed, onMounted, ref } from 'vue'\nimport type { GamificationToast, AchievementTier } from '@/types/gamification'\nimport { X, Zap, ArrowUp, Award, Flame, ShoppingBag, Shield, ShieldOff } from 'lucide-vue-next'\n\nconst props = defineProps<{\n  toast: GamificationToast\n}>()\n\nconst emit = defineEmits<{\n  dismiss: [id: string]\n}>()\n\nconst isVisible = ref(false)\nconst isExiting = ref(false)\n\nconst iconMap: Record<string, any> = {\n  xp: Zap,\n  level_up: ArrowUp,\n  achievement: Award,\n  streak: Flame,\n  purchase: ShoppingBag,\n  exposure: Shield,\n}\n\nconst IconComponent = computed(() => {\n  if (props.toast.type === 'exposure') {\n    return props.toast.title === 'SHIELDED' ? Shield : ShieldOff\n  }\n  return iconMap[props.toast.type] || Zap\n})\n\nconst tierClass = computed(() => {\n  if (props.toast.tier) {\n    return `toast--${props.toast.tier}`\n  }\n  return ''\n})\n\nconst borderColor = computed(() => {\n  if (props.toast.type === 'achievement' && props.toast.tier) {\n    const tierMap: Record<AchievementTier, string> = {\n      bronze: 'rgba(var(--tier-bronze), 0.5)',\n      silver: 'rgba(var(--tier-silver), 0.5)',\n      gold: 'rgba(var(--tier-gold), 0.6)',\n      platinum: 'rgba(var(--tier-platinum), 0.6)'\n    }\n    return tierMap[props.toast.tier]\n  }\n  if (props.toast.type === 'level_up') {\n    return 'rgba(var(--neon-magenta), 0.5)'\n  }\n  if (props.toast.type === 'exposure') {\n    return props.toast.title === 'SHIELDED'\n      ? 'rgba(var(--neon-cyan), 0.5)'\n      : 'rgba(var(--neon-magenta), 0.5)'\n  }\n  return 'var(--toast-xp-border)'\n})\n\nfunction dismiss() {\n  isExiting.value = true\n  setTimeout(() => {\n    emit('dismiss', props.toast.id)\n  }, 300)\n}\n\nonMounted(() => {\n  // Trigger enter animation\n  requestAnimationFrame(() => {\n    isVisible.value = true\n  })\n\n  // Auto-dismiss after duration\n  const duration = props.toast.duration || 3000\n  setTimeout(dismiss, duration)\n})\n</script>\n\n<template>\n  <div\n    class=\"achievement-toast\"\n    :class=\"[\n      tierClass,\n      `toast--${toast.type}`,\n      { 'toast--visible': isVisible, 'toast--exiting': isExiting,\n        'toast--shielded': toast.type === 'exposure' && toast.title === 'SHIELDED',\n        'toast--exposed': toast.type === 'exposure' && toast.title === 'EXPOSED' }\n    ]\"\n    :style=\"{ borderColor }\"\n    @click=\"dismiss\"\n  >\n    <div class=\"toast-icon\">\n      <component\n        :is=\"IconComponent\"\n        :size=\"24\"\n      />\n    </div>\n\n    <div class=\"toast-content\">\n      <span class=\"toast-title\">{{ toast.title }}</span>\n      <span\n        v-if=\"toast.description\"\n        class=\"toast-description\"\n      >{{ toast.description }}</span>\n    </div>\n\n    <div\n      v-if=\"toast.xpAmount\"\n      class=\"toast-xp\"\n    >\n      <Zap :size=\"14\" />\n      <span>+{{ toast.xpAmount }}</span>\n    </div>\n\n    <button\n      class=\"toast-close\"\n      @click.stop=\"dismiss\"\n    >\n      <X :size=\"14\" />\n    </button>\n  </div>\n</template>\n\n<style scoped>\n.achievement-toast {\n  display: flex;\n  align-items: center;\n  gap: var(--space-3);\n  padding: var(--space-3) var(--space-4);\n  background: var(--toast-xp-bg);\n  border: 1px solid var(--toast-xp-border);\n  border-radius: var(--radius-lg);\n  box-shadow: 0 var(--space-1) var(--space-5) rgba(0, 0, 0, 0.3);\n  backdrop-filter: blur(var(--space-2));\n  cursor: pointer;\n  transform: translateX(100%) scale(0.9);\n  opacity: 0;\n  transition: transform var(--toast-animation-duration) ease-out,\n              opacity var(--toast-animation-duration) ease-out;\n  min-width: 280px;\n  max-width: 400px;\n}\n\n.toast--visible {\n  transform: translateX(0) scale(1);\n  opacity: 1;\n}\n\n.toast--exiting {\n  transform: translateX(100%) scale(0.9);\n  opacity: 0;\n}\n\n.toast-icon {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: var(--space-2);\n  background: rgba(var(--neon-cyan), 0.15);\n  border-radius: var(--radius-md);\n  color: rgba(var(--neon-cyan), 1);\n}\n\n.toast--level_up .toast-icon {\n  background: rgba(var(--neon-magenta), 0.15);\n  color: rgba(var(--neon-magenta), 1);\n  animation: levelUpPulse 1s ease-in-out infinite;\n}\n\n.toast--achievement .toast-icon {\n  animation: achievementUnlock 0.6s ease-out;\n}\n\n.toast--bronze .toast-icon {\n  background: rgba(var(--tier-bronze), 0.15);\n  color: rgb(var(--tier-bronze));\n}\n\n.toast--silver .toast-icon {\n  background: rgba(var(--tier-silver), 0.15);\n  color: rgb(var(--tier-silver));\n}\n\n.toast--gold .toast-icon {\n  background: rgba(var(--tier-gold), 0.15);\n  color: rgb(var(--tier-gold));\n}\n\n.toast--platinum .toast-icon {\n  background: rgba(var(--tier-platinum), 0.15);\n  color: rgb(var(--tier-platinum));\n}\n\n.toast--streak .toast-icon {\n  background: var(--orange-bg-light);\n  color: var(--streak-flame-color);\n  animation: streakFlame 1s ease-in-out infinite;\n}\n\n.toast--exposed .toast-icon {\n  background: rgba(var(--neon-magenta), 0.15);\n  color: rgba(var(--neon-magenta), 1);\n}\n\n.toast--shielded .toast-icon {\n  background: rgba(var(--neon-cyan), 0.15);\n  color: rgba(var(--neon-cyan), 1);\n}\n\n.toast-content {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-0_5);\n  flex: 1;\n  min-width: 0;\n}\n\n.toast-title {\n  font-size: var(--text-base);\n  font-weight: var(--font-semibold);\n  color: var(--gamification-text-primary);\n}\n\n.toast-description {\n  font-size: var(--text-sm);\n  color: var(--gamification-text-secondary);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.toast-xp {\n  display: flex;\n  align-items: center;\n  gap: var(--space-1);\n  padding: var(--space-1) var(--space-2);\n  background: rgba(var(--neon-cyan), 0.15);\n  border-radius: var(--radius-sm);\n  font-size: var(--text-sm);\n  font-weight: var(--font-semibold);\n  color: rgba(var(--neon-cyan), 1);\n  animation: xpPopIn 0.4s ease-out;\n}\n\n.toast-close {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: var(--space-1);\n  background: transparent;\n  border: none;\n  border-radius: var(--radius-sm);\n  color: var(--gamification-text-secondary);\n  cursor: pointer;\n  opacity: 0.6;\n  transition: opacity var(--duration-normal) ease, background var(--duration-normal) ease;\n}\n\n.toast-close:hover {\n  opacity: 1;\n  background: var(--purple-bg-subtle);\n}\n\n/* Hover glow effect */\n.achievement-toast:hover {\n  box-shadow: 0 var(--space-1) var(--space-6) rgba(0, 0, 0, 0.4),\n              0 0 var(--space-4) rgba(var(--neon-cyan), 0.1);\n}\n\n.toast--level_up:hover {\n  box-shadow: 0 var(--space-1) var(--space-6) rgba(0, 0, 0, 0.4),\n              0 0 var(--space-4) rgba(var(--neon-magenta), 0.2);\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/AchievementsModal.vue","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'props' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":12,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'emit' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":16,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":11},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":24,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[704,707],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[704,707],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<script setup lang=\"ts\">\n/**\n * Achievements Modal Component\n * FEATURE-1118: Full achievements list with category filtering\n */\nimport { computed, ref } from 'vue'\nimport { useGamificationStore } from '@/stores/gamification'\nimport AchievementBadge from './AchievementBadge.vue'\nimport type { AchievementCategory } from '@/types/gamification'\nimport { X, Trophy, Target, Flame, Compass, Lock } from 'lucide-vue-next'\n\nconst props = defineProps<{\n  open: boolean\n}>()\n\nconst emit = defineEmits<{\n  close: []\n}>()\n\nconst gamificationStore = useGamificationStore()\n\nconst selectedCategory = ref<AchievementCategory | 'all'>('all')\n\nconst categories: { id: AchievementCategory | 'all'; label: string; icon: any }[] = [\n  { id: 'all', label: 'All', icon: Trophy },\n  { id: 'productivity', label: 'Productivity', icon: Target },\n  { id: 'consistency', label: 'Consistency', icon: Flame },\n  { id: 'mastery', label: 'Mastery', icon: Trophy },\n  { id: 'exploration', label: 'Exploration', icon: Compass },\n  { id: 'secret', label: 'Secret', icon: Lock }\n]\n\nconst filteredAchievements = computed(() => {\n  const all = gamificationStore.achievementsWithProgress\n\n  if (selectedCategory.value === 'all') {\n    // Sort: earned first, then by tier (platinum > gold > silver > bronze)\n    return [...all].sort((a, b) => {\n      if (a.isEarned !== b.isEarned) return a.isEarned ? -1 : 1\n      const tierOrder = { platinum: 0, gold: 1, silver: 2, bronze: 3 }\n      return tierOrder[a.tier] - tierOrder[b.tier]\n    })\n  }\n\n  return all\n    .filter(a => a.category === selectedCategory.value)\n    .sort((a, b) => {\n      if (a.isEarned !== b.isEarned) return a.isEarned ? -1 : 1\n      return 0\n    })\n})\n\nconst earnedCount = computed(() => gamificationStore.unlockedAchievementsCount)\nconst totalCount = computed(() => gamificationStore.achievements.length)\n\nconst categoryStats = computed(() => {\n  const stats: Record<string, { earned: number; total: number }> = {\n    all: { earned: earnedCount.value, total: totalCount.value }\n  }\n\n  for (const cat of categories.slice(1)) {\n    const inCategory = gamificationStore.achievementsWithProgress.filter(\n      a => a.category === cat.id\n    )\n    stats[cat.id] = {\n      earned: inCategory.filter(a => a.isEarned).length,\n      total: inCategory.length\n    }\n  }\n\n  return stats\n})\n</script>\n\n<template>\n  <Teleport to=\"body\">\n    <Transition name=\"modal\">\n      <div\n        v-if=\"open\"\n        class=\"modal-overlay\"\n        @click.self=\"$emit('close')\"\n      >\n        <div class=\"modal-container\">\n          <div class=\"modal-header\">\n            <div class=\"header-title\">\n              <Trophy\n                :size=\"24\"\n                class=\"header-icon\"\n              />\n              <h2>Achievements</h2>\n              <span class=\"header-count\">{{ earnedCount }}/{{ totalCount }}</span>\n            </div>\n            <button\n              class=\"close-btn\"\n              @click=\"$emit('close')\"\n            >\n              <X :size=\"20\" />\n            </button>\n          </div>\n\n          <div class=\"category-tabs\">\n            <button\n              v-for=\"cat in categories\"\n              :key=\"cat.id\"\n              class=\"category-tab\"\n              :class=\"{ active: selectedCategory === cat.id }\"\n              @click=\"selectedCategory = cat.id\"\n            >\n              <component\n                :is=\"cat.icon\"\n                :size=\"16\"\n              />\n              <span>{{ cat.label }}</span>\n              <span class=\"tab-count\">\n                {{ categoryStats[cat.id].earned }}/{{ categoryStats[cat.id].total }}\n              </span>\n            </button>\n          </div>\n\n          <div class=\"achievements-list\">\n            <AchievementBadge\n              v-for=\"achievement in filteredAchievements\"\n              :key=\"achievement.id\"\n              :achievement=\"achievement\"\n              size=\"md\"\n              show-progress\n              show-description\n            />\n\n            <div\n              v-if=\"filteredAchievements.length === 0\"\n              class=\"empty-state\"\n            >\n              <Lock :size=\"32\" />\n              <span>No achievements in this category yet</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </Transition>\n  </Teleport>\n</template>\n\n<style scoped>\n.modal-overlay {\n  position: fixed;\n  inset: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--overlay-bg);\n  backdrop-filter: blur(var(--space-1));\n  z-index: var(--z-modal);\n}\n\n.modal-container {\n  display: flex;\n  flex-direction: column;\n  width: 90%;\n  max-width: 600px;\n  max-height: 80vh;\n  background: var(--gamification-panel-bg);\n  border: 1px solid var(--gamification-panel-border);\n  border-radius: var(--radius-xl);\n  overflow: hidden;\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: var(--space-4) var(--space-5);\n  border-bottom: 1px solid var(--purple-border-medium);\n}\n\n.header-title {\n  display: flex;\n  align-items: center;\n  gap: var(--space-3);\n}\n\n.header-icon {\n  color: rgba(var(--tier-gold), 0.9);\n}\n\n.header-title h2 {\n  font-size: var(--text-xl);\n  font-weight: var(--font-bold);\n  color: var(--gamification-text-primary);\n  margin: 0;\n}\n\n.header-count {\n  padding: var(--space-1) var(--space-2_5);\n  background: rgba(var(--tier-gold), 0.15);\n  border-radius: var(--radius-full);\n  font-size: var(--text-sm);\n  font-weight: var(--font-medium);\n  color: rgba(var(--tier-gold), 0.9);\n}\n\n.close-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: var(--space-2);\n  background: transparent;\n  border: none;\n  border-radius: var(--radius-md);\n  color: var(--gamification-text-secondary);\n  cursor: pointer;\n  transition: all var(--duration-normal) ease;\n}\n\n.close-btn:hover {\n  background: var(--purple-bg-subtle);\n  color: var(--gamification-text-primary);\n}\n\n.category-tabs {\n  display: flex;\n  gap: var(--space-2);\n  padding: var(--space-3) var(--space-5);\n  overflow-x: auto;\n  border-bottom: 1px solid var(--border-medium);\n}\n\n.category-tab {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  padding: var(--space-2) var(--space-3);\n  background: transparent;\n  border: 1px solid var(--purple-border-medium);\n  border-radius: var(--radius-md);\n  color: var(--gamification-text-secondary);\n  font-size: var(--text-sm);\n  white-space: nowrap;\n  cursor: pointer;\n  transition: all var(--duration-normal) ease;\n}\n\n.category-tab:hover {\n  background: var(--purple-bg-subtle);\n  border-color: var(--purple-border-strong);\n}\n\n.category-tab.active {\n  background: rgba(var(--neon-cyan), 0.15);\n  border-color: rgba(var(--neon-cyan), 0.4);\n  color: rgba(var(--neon-cyan), 1);\n}\n\n.tab-count {\n  font-size: var(--text-xs);\n  opacity: 0.7;\n}\n\n.achievements-list {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-2);\n  padding: var(--space-4) var(--space-5);\n  overflow-y: auto;\n  flex: 1;\n}\n\n.empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: var(--space-3);\n  padding: var(--space-8);\n  color: var(--gamification-text-secondary);\n  text-align: center;\n}\n\n/* Modal transitions */\n.modal-enter-active,\n.modal-leave-active {\n  transition: opacity var(--duration-normal) ease;\n}\n\n.modal-enter-active .modal-container,\n.modal-leave-active .modal-container {\n  transition: transform var(--duration-normal) ease;\n}\n\n.modal-enter-from,\n.modal-leave-to {\n  opacity: 0;\n}\n\n.modal-enter-from .modal-container,\n.modal-leave-to .modal-container {\n  transform: scale(0.95) translateY(var(--space-2_5));\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/BossFightPanel.vue","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'props' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":15,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'lastWeeklyGeneration' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":21,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":55}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<script setup lang=\"ts\">\n/**\n * BossFightPanel Component\n * FEATURE-1132: Weekly boss fight display with HP bar and timer\n */\nimport { computed, ref, onMounted } from 'vue'\nimport { useChallengesStore } from '@/stores/challenges'\nimport { createAIRouter } from '@/services/ai/router'\nimport type { ChatMessage } from '@/services/ai/types'\nimport { storeToRefs } from 'pinia'\nimport ARIAMessage from './ARIAMessage.vue'\nimport { Skull, Swords, Clock, Zap, Trophy, RefreshCw, Sparkles } from 'lucide-vue-next'\n\n// Props\nconst props = defineProps<{\n  compact?: boolean\n}>()\n\n// Store\nconst challengesStore = useChallengesStore()\nconst { activeBoss, isGenerating, lastWeeklyGeneration } = storeToRefs(challengesStore)\n\n// AI Router for boss generation\nlet router: ReturnType<typeof createAIRouter> | null = null\nconst aiAvailable = ref(false)\n\n// Initialize router and check availability\nonMounted(async () => {\n  try {\n    router = createAIRouter({ debug: false })\n    await router.initialize()\n    const provider = await router.getActiveProvider()\n    aiAvailable.value = !!provider\n  } catch (e) {\n    console.warn('[BossFight] AI router init failed:', e)\n    aiAvailable.value = false\n  }\n})\n\n// Chat wrapper for gamemaster\nasync function chatWithAI(messages: ChatMessage[], options?: { taskType?: string }): Promise<{ content: string }> {\n  if (!router) {\n    return { content: '' }\n  }\n  try {\n    const response = await router.chat(messages, { taskType: options?.taskType as 'planning' })\n    return { content: response.content }\n  } catch (e) {\n    console.warn('[BossFight] AI chat failed:', e)\n    return { content: '' }\n  }\n}\n\n// Local state\nconst generationError = ref<string | null>(null)\n\n// Computed\nconst bossHp = computed(() => {\n  if (!activeBoss.value) return { current: 0, max: 0, percent: 0 }\n\n  const context = activeBoss.value.aiContext as { total_hp?: number } | undefined\n  const maxHp = context?.total_hp ?? activeBoss.value.objectiveTarget * 10\n  const damage = activeBoss.value.objectiveCurrent * 10\n  const currentHp = Math.max(0, maxHp - damage)\n  const percent = (currentHp / maxHp) * 100\n\n  return { current: currentHp, max: maxHp, percent }\n})\n\nconst damageDealt = computed(() => {\n  if (!activeBoss.value) return 0\n  return activeBoss.value.objectiveCurrent * 10\n})\n\nconst timeRemaining = computed(() => {\n  if (!activeBoss.value) return 'No active boss'\n\n  const now = new Date()\n  const expires = new Date(activeBoss.value.expiresAt)\n  const diff = expires.getTime() - now.getTime()\n\n  if (diff <= 0) return 'Time expired!'\n\n  const days = Math.floor(diff / (1000 * 60 * 60 * 24))\n  const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))\n\n  return `${days}d ${hours}h remaining`\n})\n\nconst hpBarColor = computed(() => {\n  const percent = bossHp.value.percent\n  if (percent > 66) return 'bg-red-500'\n  if (percent > 33) return 'bg-orange-500'\n  return 'bg-green-500'\n})\n\nconst isDefeated = computed(() =>\n  activeBoss.value?.status === 'completed' || bossHp.value.percent <= 0\n)\n\nconst needsGeneration = computed(() => {\n  if (activeBoss.value) return false\n\n  // Only suggest generation on Monday or if explicitly requested\n  const now = new Date()\n  return now.getDay() === 1 // Monday\n})\n\nconst ariaMessage = computed(() => {\n  if (!activeBoss.value) {\n    return needsGeneration.value\n      ? 'Netrunner, a major threat has emerged in the Grid. Ready to engage?'\n      : 'No active threats detected. Weekly boss spawns on Monday.'\n  }\n\n  if (isDefeated.value) {\n    return 'Victory! The threat has been neutralized. The Grid thanks you.'\n  }\n\n  if (bossHp.value.percent < 25) {\n    return 'Critical damage! The boss is weakened. Finish it!'\n  }\n\n  if (bossHp.value.percent < 50) {\n    return 'Making progress. Keep the pressure on, netrunner.'\n  }\n\n  return `Engaging ${activeBoss.value.title}. Deal damage by completing tasks.`\n})\n\n// Actions\nasync function generateBoss() {\n  generationError.value = null\n\n  try {\n    await challengesStore.generateWeeklyBossAction({\n      aiAvailable: aiAvailable.value,\n      chat: chatWithAI,\n    })\n  } catch (error) {\n    generationError.value = error instanceof Error ? error.message : 'Failed to generate boss'\n    console.error('[BossFight] Generation failed:', error)\n  }\n}\n</script>\n\n<template>\n  <div class=\"boss-fight-panel\" :class=\"{ 'panel--compact': compact }\">\n    <!-- Header -->\n    <div class=\"panel-header\">\n      <div class=\"header-title\">\n        <Skull class=\"header-icon\" :size=\"18\" />\n        <h3>Weekly Boss</h3>\n      </div>\n      <div v-if=\"activeBoss && !isDefeated\" class=\"header-timer\">\n        <Clock :size=\"14\" />\n        <span>{{ timeRemaining }}</span>\n      </div>\n    </div>\n\n    <!-- Active Boss -->\n    <div v-if=\"activeBoss\" class=\"boss-content\">\n      <!-- Boss Info -->\n      <div class=\"boss-info\" :class=\"{ 'boss-info--defeated': isDefeated }\">\n        <h4 class=\"boss-name\">\n          {{ activeBoss.title }}\n        </h4>\n        <p v-if=\"!compact\" class=\"boss-description\">\n          {{ activeBoss.description }}\n        </p>\n      </div>\n\n      <!-- HP Bar -->\n      <div class=\"hp-section\">\n        <div class=\"hp-labels\">\n          <span class=\"hp-label\">HP</span>\n          <span class=\"hp-value\">{{ bossHp.current }} / {{ bossHp.max }}</span>\n        </div>\n        <div class=\"hp-bar-container\">\n          <div\n            class=\"hp-bar\"\n            :class=\"[hpBarColor, { 'hp-bar--empty': isDefeated }]\"\n            :style=\"{ width: `${bossHp.percent}%` }\"\n          />\n        </div>\n      </div>\n\n      <!-- Damage Stats -->\n      <div class=\"damage-stats\">\n        <div class=\"stat\">\n          <Swords :size=\"14\" />\n          <span>{{ damageDealt }} damage dealt</span>\n        </div>\n        <div class=\"stat\">\n          <Zap :size=\"14\" />\n          <span>{{ activeBoss.rewardXp }} XP reward</span>\n        </div>\n      </div>\n\n      <!-- Victory State -->\n      <div v-if=\"isDefeated\" class=\"victory-banner\">\n        <Trophy class=\"trophy-icon\" :size=\"24\" />\n        <span>VICTORY!</span>\n      </div>\n\n      <!-- ARIA Message -->\n      <ARIAMessage\n        v-if=\"!compact\"\n        :message=\"ariaMessage\"\n        :type=\"isDefeated ? 'success' : bossHp.percent < 25 ? 'warning' : 'info'\"\n        :show-avatar=\"false\"\n      />\n    </div>\n\n    <!-- No Boss State -->\n    <div v-else class=\"no-boss\">\n      <ARIAMessage\n        :message=\"ariaMessage\"\n        :type=\"needsGeneration ? 'warning' : 'info'\"\n        :show-avatar=\"!compact\"\n      />\n\n      <button\n        v-if=\"needsGeneration\"\n        class=\"generate-button\"\n        :disabled=\"isGenerating\"\n        @click=\"generateBoss\"\n      >\n        <RefreshCw\n          v-if=\"isGenerating\"\n          class=\"button-icon spinning\"\n          :size=\"16\"\n        />\n        <Sparkles v-else class=\"button-icon\" :size=\"16\" />\n        {{ isGenerating ? 'Summoning...' : 'Engage Boss' }}\n      </button>\n\n      <p v-if=\"generationError\" class=\"error-message\">\n        {{ generationError }}\n      </p>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.boss-fight-panel {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-3);\n  padding: var(--space-4);\n  background: linear-gradient(135deg, rgba(139, 0, 0, 0.1), var(--glass-bg-heavy));\n  border-radius: var(--radius-lg);\n  border: 1px solid var(--danger-border-medium);\n}\n\n.panel--compact {\n  padding: var(--space-3);\n  gap: var(--space-2);\n}\n\n.panel-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.header-title {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n}\n\n.header-icon {\n  color: var(--color-error-400);\n}\n\n.header-title h3 {\n  font-size: var(--text-base);\n  font-weight: var(--font-semibold);\n  color: var(--text-primary);\n  margin: 0;\n}\n\n.header-timer {\n  display: flex;\n  align-items: center;\n  gap: var(--space-1);\n  font-size: var(--text-xs);\n  color: var(--color-warning-400);\n}\n\n.boss-content {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-3);\n}\n\n.boss-info {\n  text-align: center;\n}\n\n.boss-info--defeated {\n  opacity: 0.6;\n}\n\n.boss-name {\n  font-size: var(--text-lg);\n  font-weight: var(--font-bold);\n  color: var(--color-error-400);\n  text-transform: uppercase;\n  letter-spacing: 0.1em;\n  margin: 0 0 var(--space-1);\n  text-shadow: 0 0 var(--space-5) var(--color-error-500);\n}\n\n.boss-description {\n  font-size: var(--text-sm);\n  color: var(--text-tertiary);\n  margin: 0;\n  line-height: var(--leading-snug);\n}\n\n.hp-section {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-1);\n}\n\n.hp-labels {\n  display: flex;\n  justify-content: space-between;\n  font-size: var(--text-xs);\n}\n\n.hp-label {\n  font-weight: var(--font-semibold);\n  color: var(--text-tertiary);\n  text-transform: uppercase;\n}\n\n.hp-value {\n  font-weight: var(--font-semibold);\n  color: var(--text-secondary);\n}\n\n.hp-bar-container {\n  height: var(--space-3);\n  background: var(--glass-bg-tint);\n  border-radius: var(--radius-sm);\n  overflow: hidden;\n  position: relative;\n}\n\n.hp-bar {\n  height: 100%;\n  border-radius: var(--radius-sm);\n  transition: width var(--duration-slower) var(--ease-out), background-color var(--duration-slow) var(--ease-out);\n  box-shadow: 0 0 var(--space-2_5) currentColor;\n}\n\n.hp-bar--empty {\n  width: 0 !important;\n}\n\n.bg-red-500 { background: #ef4444; color: #ef4444; }\n.bg-orange-500 { background: #f97316; color: #f97316; }\n.bg-green-500 { background: #22c55e; color: #22c55e; }\n\n.damage-stats {\n  display: flex;\n  justify-content: center;\n  gap: var(--space-4);\n}\n\n.stat {\n  display: flex;\n  align-items: center;\n  gap: var(--space-1);\n  font-size: var(--text-xs);\n  color: var(--text-tertiary);\n}\n\n.stat svg {\n  color: var(--color-warning-400);\n}\n\n.victory-banner {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: var(--space-2);\n  padding: var(--space-3);\n  background: linear-gradient(135deg, var(--color-success-600), var(--color-success-500));\n  border-radius: var(--radius-md);\n  color: var(--text-primary);\n  font-size: var(--text-lg);\n  font-weight: var(--font-bold);\n  text-transform: uppercase;\n  letter-spacing: 0.1em;\n  animation: victory-glow 1s var(--ease-in-out) infinite alternate;\n}\n\n@keyframes victory-glow {\n  from { box-shadow: 0 0 var(--space-2_5) var(--color-success-500); }\n  to { box-shadow: 0 0 var(--space-8) var(--color-success-400); }\n}\n\n.trophy-icon {\n  animation: trophy-bounce 0.5s ease-in-out infinite alternate;\n}\n\n@keyframes trophy-bounce {\n  from { transform: translateY(0); }\n  to { transform: translateY(calc(-1 * var(--space-1))); }\n}\n\n.no-boss {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: var(--space-3);\n  text-align: center;\n}\n\n.generate-button {\n  display: inline-flex;\n  align-items: center;\n  gap: var(--space-2);\n  padding: var(--space-2) var(--space-4);\n  background: linear-gradient(135deg, var(--color-error-600), var(--color-error-500));\n  color: var(--text-primary);\n  border: none;\n  border-radius: var(--radius-md);\n  font-size: var(--text-sm);\n  font-weight: var(--font-semibold);\n  cursor: pointer;\n  transition: all var(--duration-normal) var(--ease-out);\n}\n\n.generate-button:hover:not(:disabled) {\n  transform: translateY(calc(-1 * var(--space-px) * 2));\n  box-shadow: 0 var(--space-1) var(--space-3) var(--danger-shadow-strong);\n}\n\n.generate-button:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.button-icon {\n  flex-shrink: 0;\n}\n\n.spinning {\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n\n.error-message {\n  font-size: var(--text-xs);\n  color: var(--color-error-400);\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/ChallengeCard.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/ChallengeComplete.vue","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'props' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":12,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":12}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<script setup lang=\"ts\">\n/**\n * ChallengeComplete Component\n * FEATURE-1132: Victory animation + rewards toast\n *\n * Displayed when a challenge is completed.\n */\nimport { ref, onMounted, onUnmounted } from 'vue'\nimport type { Challenge } from '@/types/challenges'\nimport { Trophy, Zap, TrendingDown, Sparkles } from 'lucide-vue-next'\n\nconst props = defineProps<{\n  challenge: Challenge\n  xpAwarded: number\n  corruptionReduction: number\n  narrative?: string\n}>()\n\nconst emit = defineEmits<{\n  (e: 'close'): void\n}>()\n\n// Animation state\nconst isVisible = ref(false)\nconst showContent = ref(false)\n\n// Auto-close timer\nlet closeTimeout: ReturnType<typeof setTimeout> | null = null\n\nonMounted(() => {\n  // Trigger entrance animation\n  requestAnimationFrame(() => {\n    isVisible.value = true\n    setTimeout(() => {\n      showContent.value = true\n    }, 200)\n  })\n\n  // Auto-close after 5 seconds\n  closeTimeout = setTimeout(() => {\n    handleClose()\n  }, 5000)\n})\n\nonUnmounted(() => {\n  if (closeTimeout) {\n    clearTimeout(closeTimeout)\n  }\n})\n\nfunction handleClose() {\n  showContent.value = false\n  setTimeout(() => {\n    isVisible.value = false\n    setTimeout(() => {\n      emit('close')\n    }, 300)\n  }, 200)\n}\n</script>\n\n<template>\n  <Teleport to=\"body\">\n    <Transition name=\"overlay\">\n      <div\n        v-if=\"isVisible\"\n        class=\"challenge-complete-overlay\"\n        @click.self=\"handleClose\"\n      >\n        <Transition name=\"content\">\n          <div v-if=\"showContent\" class=\"challenge-complete-card\">\n            <!-- Decorative sparkles -->\n            <div class=\"sparkles\">\n              <Sparkles\n                v-for=\"i in 5\"\n                :key=\"i\"\n                class=\"sparkle\"\n                :style=\"{\n                  '--delay': `${i * 0.1}s`,\n                  '--offset-x': `${(i - 3) * 30}px`,\n                }\"\n                :size=\"16\"\n              />\n            </div>\n\n            <!-- Trophy icon -->\n            <div class=\"trophy-container\">\n              <Trophy class=\"trophy-icon\" :size=\"48\" />\n            </div>\n\n            <!-- Title -->\n            <h2 class=\"complete-title\">\n              Mission Complete!\n            </h2>\n\n            <!-- Challenge name -->\n            <p class=\"challenge-name\">\n              {{ challenge.title }}\n            </p>\n\n            <!-- Rewards -->\n            <div class=\"rewards\">\n              <div class=\"reward reward--xp\">\n                <Zap :size=\"20\" />\n                <span class=\"reward-value\">+{{ xpAwarded }}</span>\n                <span class=\"reward-label\">XP</span>\n              </div>\n\n              <div\n                v-if=\"corruptionReduction > 0\"\n                class=\"reward reward--corruption\"\n              >\n                <TrendingDown :size=\"20\" />\n                <span class=\"reward-value\">-{{ corruptionReduction }}%</span>\n                <span class=\"reward-label\">Corruption</span>\n              </div>\n            </div>\n\n            <!-- ARIA narrative -->\n            <p v-if=\"narrative\" class=\"aria-narrative\">\n              \"{{ narrative }}\"\n            </p>\n\n            <!-- Close button -->\n            <button class=\"close-button\" @click=\"handleClose\">\n              Continue\n            </button>\n          </div>\n        </Transition>\n      </div>\n    </Transition>\n  </Teleport>\n</template>\n\n<style scoped>\n.challenge-complete-overlay {\n  position: fixed;\n  inset: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--overlay-bg);\n  backdrop-filter: blur(var(--space-1));\n  z-index: var(--z-tooltip);\n}\n\n.challenge-complete-card {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: var(--space-4);\n  padding: var(--space-6);\n  background: linear-gradient(\n    135deg,\n    rgba(34, 197, 94, 0.2) 0%,\n    var(--glass-bg-solid) 50%,\n    rgba(0, 200, 255, 0.1) 100%\n  );\n  border: var(--space-px) solid var(--color-success-500);\n  border-radius: var(--radius-xl);\n  box-shadow:\n    0 0 var(--space-10) var(--success-shadow),\n    var(--shadow-dark-xl);\n  text-align: center;\n  max-width: 400px;\n  width: 90%;\n  overflow: hidden;\n}\n\n/* Decorative sparkles */\n.sparkles {\n  position: absolute;\n  top: calc(-1 * var(--space-5));\n  left: 50%;\n  transform: translateX(-50%);\n  display: flex;\n  gap: var(--space-4);\n}\n\n.sparkle {\n  color: var(--color-warning-400);\n  animation: sparkle-float 1.5s ease-in-out infinite;\n  animation-delay: var(--delay, 0s);\n  transform: translateX(var(--offset-x, 0));\n}\n\n@keyframes sparkle-float {\n  0%, 100% {\n    transform: translateX(var(--offset-x, 0)) translateY(0) scale(1);\n    opacity: 0.5;\n  }\n  50% {\n    transform: translateX(var(--offset-x, 0)) translateY(calc(-1 * var(--space-2_5))) scale(1.2);\n    opacity: 1;\n  }\n}\n\n/* Trophy */\n.trophy-container {\n  width: var(--space-20);\n  height: var(--space-20);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: linear-gradient(135deg, var(--color-warning-500), var(--color-warning-400));\n  border-radius: var(--radius-full);\n  box-shadow: 0 0 var(--space-8) var(--color-warning-500/50);\n  animation: trophy-pulse 1s var(--ease-in-out) infinite alternate;\n}\n\n@keyframes trophy-pulse {\n  from {\n    box-shadow: 0 0 var(--space-5) var(--color-warning-500/30);\n    transform: scale(1);\n  }\n  to {\n    box-shadow: 0 0 var(--space-10) var(--color-warning-500/60);\n    transform: scale(1.05);\n  }\n}\n\n.trophy-icon {\n  color: var(--text-primary);\n  animation: trophy-bounce 0.6s var(--ease-in-out) infinite alternate;\n}\n\n@keyframes trophy-bounce {\n  from { transform: translateY(0) rotate(-5deg); }\n  to { transform: translateY(calc(-1 * var(--space-1))) rotate(5deg); }\n}\n\n/* Title */\n.complete-title {\n  margin: 0;\n  font-size: var(--text-2xl);\n  font-weight: var(--font-bold);\n  color: var(--color-success-400);\n  text-transform: uppercase;\n  letter-spacing: 0.1em;\n  text-shadow: 0 0 var(--space-5) var(--success-shadow);\n}\n\n/* Challenge name */\n.challenge-name {\n  margin: 0;\n  font-size: var(--text-base);\n  color: var(--text-tertiary);\n  font-weight: var(--font-medium);\n}\n\n/* Rewards */\n.rewards {\n  display: flex;\n  gap: var(--space-6);\n  padding: var(--space-3) var(--space-4);\n  background: var(--glass-bg-weak);\n  border-radius: var(--radius-lg);\n}\n\n.reward {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: var(--space-1);\n}\n\n.reward svg {\n  opacity: 0.8;\n}\n\n.reward--xp svg {\n  color: var(--color-warning-400);\n}\n\n.reward--corruption svg {\n  color: var(--color-success-400);\n}\n\n.reward-value {\n  font-size: var(--text-xl);\n  font-weight: var(--font-bold);\n  color: var(--text-primary);\n}\n\n.reward-label {\n  font-size: var(--text-xs);\n  color: var(--color-gray-500);\n  text-transform: uppercase;\n}\n\n/* ARIA narrative */\n.aria-narrative {\n  margin: 0;\n  font-size: var(--text-sm);\n  font-style: italic;\n  color: var(--color-primary-300);\n  max-width: 300px;\n  line-height: var(--leading-normal);\n}\n\n/* Close button */\n.close-button {\n  padding: var(--space-2) var(--space-6);\n  background: linear-gradient(135deg, var(--color-success-600), var(--color-success-500));\n  color: var(--text-primary);\n  border: none;\n  border-radius: var(--radius-md);\n  font-size: var(--text-sm);\n  font-weight: var(--font-semibold);\n  cursor: pointer;\n  transition: all var(--duration-normal) var(--ease-out);\n}\n\n.close-button:hover {\n  transform: translateY(calc(-1 * var(--space-px) * 2));\n  box-shadow: 0 var(--space-1) var(--space-3) var(--success-shadow);\n}\n\n/* Transitions */\n.overlay-enter-active,\n.overlay-leave-active {\n  transition: opacity var(--duration-slow) var(--ease-out);\n}\n\n.overlay-enter-from,\n.overlay-leave-to {\n  opacity: 0;\n}\n\n.content-enter-active,\n.content-leave-active {\n  transition: all var(--duration-slow) var(--ease-out);\n}\n\n.content-enter-from {\n  opacity: 0;\n  transform: scale(0.8) translateY(var(--space-5));\n}\n\n.content-leave-to {\n  opacity: 0;\n  transform: scale(0.9) translateY(calc(-1 * var(--space-2_5)));\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/ChallengePips.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/CorruptionOverlay.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/DailyChallengesPanel.vue","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'props' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":17,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'lastDailyGeneration' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":31,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":22}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<script setup lang=\"ts\">\n/**\n * DailyChallengesPanel Component\n * FEATURE-1132: Display 3 daily missions with generation trigger\n */\nimport { computed, ref, onMounted } from 'vue'\nimport { useChallengesStore } from '@/stores/challenges'\nimport { createAIRouter } from '@/services/ai/router'\nimport type { ChatMessage } from '@/services/ai/types'\nimport type { Challenge } from '@/types/challenges'\nimport { storeToRefs } from 'pinia'\nimport ChallengeCard from './ChallengeCard.vue'\nimport ARIAMessage from './ARIAMessage.vue'\nimport { RefreshCw, Sparkles, CheckCircle2, AlertCircle, Target } from 'lucide-vue-next'\n\n// Props\nconst props = defineProps<{\n  compact?: boolean\n}>()\n\nconst emit = defineEmits<{\n  pickChallenge: [challenge: Challenge]\n}>()\n\n// Store\nconst challengesStore = useChallengesStore()\nconst {\n  activeDailies,\n  allDailiesComplete,\n  isGenerating,\n  lastDailyGeneration,\n  completedTodayCount,\n  pickedChallengeId,\n  pickedChallenge,\n} = storeToRefs(challengesStore)\n\n// AI Router for challenge generation\nlet router: ReturnType<typeof createAIRouter> | null = null\nconst aiAvailable = ref(false)\n\n// Initialize router and check availability\nonMounted(async () => {\n  try {\n    router = createAIRouter({ debug: false })\n    await router.initialize()\n    const provider = await router.getActiveProvider()\n    aiAvailable.value = !!provider\n  } catch (e) {\n    console.warn('[DailyChallenges] AI router init failed:', e)\n    aiAvailable.value = false\n  }\n})\n\n// Chat wrapper for gamemaster\nasync function chatWithAI(messages: ChatMessage[], options?: { taskType?: string }): Promise<{ content: string }> {\n  if (!router) {\n    return { content: '' }\n  }\n  try {\n    const response = await router.chat(messages, { taskType: options?.taskType as 'planning' })\n    return { content: response.content }\n  } catch (e) {\n    console.warn('[DailyChallenges] AI chat failed:', e)\n    return { content: '' }\n  }\n}\n\n// Local state\nconst showGenerateConfirm = ref(false)\nconst generationError = ref<string | null>(null)\n\n// Computed\nconst needsGeneration = computed(() =>\n  activeDailies.value.length === 0 && !allDailiesComplete.value\n)\n\nconst statusMessage = computed(() => {\n  if (isGenerating.value) {\n    return 'ARIA is analyzing your patterns...'\n  }\n  if (allDailiesComplete.value) {\n    return 'All daily missions complete. Grid stability restored.'\n  }\n  if (activeDailies.value.length > 0) {\n    return `${3 - activeDailies.value.length} of 3 missions complete`\n  }\n  return 'Daily missions ready for deployment'\n})\n\n// Actions\nasync function generateChallenges() {\n  generationError.value = null\n\n  try {\n    await challengesStore.generateDailyChallengesAction({\n      aiAvailable: aiAvailable.value,\n      chat: chatWithAI,\n    })\n    showGenerateConfirm.value = false\n  } catch (error) {\n    generationError.value = error instanceof Error ? error.message : 'Failed to generate challenges'\n    console.error('[DailyChallenges] Generation failed:', error)\n  }\n}\n\nfunction handleChallengeClick(challenge: Challenge) {\n  // Toggle: click again to deselect\n  if (pickedChallengeId.value === challenge.id) {\n    challengesStore.pickChallengeById(null)\n    return\n  }\n  challengesStore.pickChallengeById(challenge.id)\n  emit('pickChallenge', challenge)\n}\n</script>\n\n<template>\n  <div class=\"daily-challenges-panel\" :class=\"{ 'panel--compact': compact }\">\n    <!-- Header -->\n    <div class=\"panel-header\">\n      <div class=\"header-title\">\n        <Sparkles class=\"header-icon\" :size=\"18\" />\n        <h3>Daily Missions</h3>\n      </div>\n      <div class=\"header-status\">\n        <span\n          class=\"status-indicator\"\n          :class=\"{\n            'status--complete': allDailiesComplete,\n            'status--active': activeDailies.length > 0,\n            'status--pending': needsGeneration,\n          }\"\n        />\n        <span class=\"status-text\">{{ completedTodayCount }}/3</span>\n      </div>\n    </div>\n\n    <!-- ARIA Message -->\n    <ARIAMessage\n      v-if=\"!compact\"\n      :message=\"statusMessage\"\n      :type=\"allDailiesComplete ? 'success' : isGenerating ? 'loading' : 'info'\"\n    />\n\n    <!-- Active Mission Banner -->\n    <div v-if=\"pickedChallenge\" class=\"active-mission-banner\">\n      <div class=\"mission-banner-indicator\" />\n      <Target :size=\"14\" class=\"mission-banner-icon\" />\n      <div class=\"mission-banner-content\">\n        <span class=\"mission-banner-label\">ACTIVE MISSION</span>\n        <span class=\"mission-banner-title\">{{ pickedChallenge.title }}</span>\n      </div>\n      <span class=\"mission-banner-progress\">{{ pickedChallenge.objectiveCurrent }}/{{ pickedChallenge.objectiveTarget }}</span>\n    </div>\n\n    <!-- Challenge Cards -->\n    <div v-if=\"activeDailies.length > 0\" class=\"challenges-list\">\n      <ChallengeCard\n        v-for=\"challenge in activeDailies\"\n        :key=\"challenge.id\"\n        :challenge=\"challenge\"\n        :compact=\"compact\"\n        :class=\"{\n          'card--picked': pickedChallengeId === challenge.id,\n          'card--other': pickedChallengeId && pickedChallengeId !== challenge.id\n        }\"\n        @click=\"handleChallengeClick(challenge)\"\n      />\n    </div>\n\n    <!-- All Complete State -->\n    <div v-else-if=\"allDailiesComplete\" class=\"all-complete\">\n      <CheckCircle2 class=\"complete-icon\" :size=\"32\" />\n      <p>Excellent work, netrunner.</p>\n      <p class=\"subtext\">\n        Return tomorrow for new missions.\n      </p>\n    </div>\n\n    <!-- Generate Button -->\n    <div v-else-if=\"needsGeneration\" class=\"generate-section\">\n      <p class=\"generate-prompt\">\n        ARIA has prepared your daily missions.\n        <br>\n        Ready to accept the challenge?\n      </p>\n\n      <button\n        class=\"generate-button\"\n        :disabled=\"isGenerating\"\n        @click=\"generateChallenges\"\n      >\n        <RefreshCw\n          v-if=\"isGenerating\"\n          class=\"button-icon spinning\"\n          :size=\"16\"\n        />\n        <Sparkles v-else class=\"button-icon\" :size=\"16\" />\n        {{ isGenerating ? 'Generating...' : 'Accept Missions' }}\n      </button>\n\n      <!-- Error message -->\n      <div v-if=\"generationError\" class=\"error-message\">\n        <AlertCircle :size=\"14\" />\n        {{ generationError }}\n      </div>\n    </div>\n\n    <!-- Loading State -->\n    <div v-else-if=\"isGenerating\" class=\"loading-state\">\n      <RefreshCw class=\"spinning\" :size=\"24\" />\n      <p>ARIA is analyzing the Grid...</p>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.daily-challenges-panel {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-3);\n  padding: var(--space-4);\n  background: var(--overlay-component-bg);\n  border-radius: var(--radius-lg);\n  border: 1px solid var(--border-color);\n}\n\n.panel--compact {\n  padding: var(--space-3);\n  gap: var(--space-2);\n}\n\n.panel-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.header-title {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n}\n\n.header-icon {\n  color: var(--color-accent-cyan);\n}\n\n.header-title h3 {\n  font-size: var(--text-base);\n  font-weight: var(--font-semibold);\n  color: var(--text-primary);\n  margin: 0;\n}\n\n.header-status {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n}\n\n.status-indicator {\n  width: var(--space-2);\n  height: var(--space-2);\n  border-radius: var(--radius-full);\n  background: var(--text-muted);\n}\n\n.status--complete {\n  background: var(--color-success-500);\n  box-shadow: 0 0 var(--space-2) var(--color-success-500);\n}\n\n.status--active {\n  background: var(--color-primary-500);\n  animation: pulse 2s ease-in-out infinite;\n}\n\n.status--pending {\n  background: var(--color-warning-500);\n}\n\n@keyframes pulse {\n  0%, 100% { opacity: 1; }\n  50% { opacity: 0.5; }\n}\n\n.status-text {\n  font-size: var(--text-sm);\n  font-weight: var(--font-semibold);\n  color: var(--text-tertiary);\n}\n\n.challenges-list {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-2);\n}\n\n.all-complete {\n  text-align: center;\n  padding: var(--space-4);\n}\n\n.complete-icon {\n  color: var(--color-success-500);\n  margin-bottom: var(--space-2);\n}\n\n.all-complete p {\n  color: var(--text-secondary);\n  margin: 0;\n}\n\n.all-complete .subtext {\n  font-size: var(--text-sm);\n  color: var(--color-gray-500);\n  margin-top: var(--space-1);\n}\n\n.generate-section {\n  text-align: center;\n  padding: var(--space-4);\n}\n\n.generate-prompt {\n  font-size: var(--text-sm);\n  color: var(--text-tertiary);\n  margin-bottom: var(--space-3);\n  line-height: var(--leading-normal);\n}\n\n.generate-button {\n  display: inline-flex;\n  align-items: center;\n  gap: var(--space-2);\n  padding: var(--space-2) var(--space-4);\n  background: linear-gradient(135deg, var(--color-primary-600), var(--color-accent-cyan));\n  color: var(--text-primary);\n  border: none;\n  border-radius: var(--radius-md);\n  font-size: var(--text-sm);\n  font-weight: var(--font-semibold);\n  cursor: pointer;\n  transition: all var(--duration-normal) var(--ease-out);\n}\n\n.generate-button:hover:not(:disabled) {\n  transform: translateY(calc(-1 * var(--space-px) * 2));\n  box-shadow: 0 var(--space-1) var(--space-3) rgba(0, 200, 255, 0.3);\n}\n\n.generate-button:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.button-icon {\n  flex-shrink: 0;\n}\n\n.spinning {\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n\n.error-message {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: var(--space-2);\n  margin-top: var(--space-3);\n  padding: var(--space-2);\n  background: var(--danger-bg-medium);\n  border-radius: var(--radius-sm);\n  color: var(--color-error-400);\n  font-size: var(--text-xs);\n}\n\n.loading-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: var(--space-3);\n  padding: var(--space-4);\n  color: var(--text-tertiary);\n}\n\n.loading-state p {\n  margin: 0;\n  font-size: var(--text-sm);\n}\n\n/* ============================================\n   Active Mission Banner\n   ============================================ */\n.active-mission-banner {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  padding: var(--space-2) var(--space-3);\n  background: rgba(0, 240, 255, 0.06);\n  border: 1px solid rgba(0, 240, 255, 0.25);\n  border-radius: var(--radius-md);\n  animation: bannerAppear 0.4s ease-out;\n}\n\n.mission-banner-indicator {\n  width: 3px;\n  height: 24px;\n  background: var(--cf-cyan, #00f0ff);\n  border-radius: 2px;\n  flex-shrink: 0;\n  animation: indicatorPulse 2s ease-in-out infinite;\n}\n\n.mission-banner-icon {\n  color: var(--cf-cyan, #00f0ff);\n  flex-shrink: 0;\n}\n\n.mission-banner-content {\n  display: flex;\n  flex-direction: column;\n  gap: 1px;\n  flex: 1;\n  min-width: 0;\n}\n\n.mission-banner-label {\n  font-family: var(--font-cyber-data, 'Space Mono', monospace);\n  font-size: 9px;\n  font-weight: 700;\n  color: var(--cf-cyan, #00f0ff);\n  text-transform: uppercase;\n  letter-spacing: 0.12em;\n  line-height: 1;\n}\n\n.mission-banner-title {\n  font-size: var(--text-sm);\n  font-weight: var(--font-semibold);\n  color: var(--text-primary);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  line-height: 1.3;\n}\n\n.mission-banner-progress {\n  font-family: var(--font-cyber-data, 'Space Mono', monospace);\n  font-size: var(--text-sm);\n  font-weight: 700;\n  color: var(--cf-cyan, #00f0ff);\n  flex-shrink: 0;\n}\n\n/* ============================================\n   Picked card: persistent cyan glow + pulse\n   ============================================ */\n.card--picked {\n  border-color: var(--cf-cyan, rgba(0, 240, 255, 0.8)) !important;\n  box-shadow:\n    0 0 8px rgba(0, 240, 255, 0.4),\n    0 0 20px rgba(0, 240, 255, 0.15) !important;\n  animation: pickedGlow 2.5s ease-in-out infinite;\n}\n\n/* Other cards: dimmed when one is picked */\n.card--other {\n  opacity: 0.5;\n  transition: opacity 0.3s ease;\n}\n\n.card--other:hover {\n  opacity: 0.8;\n}\n\n@keyframes pickedGlow {\n  0%, 100% {\n    box-shadow:\n      0 0 8px rgba(0, 240, 255, 0.4),\n      0 0 20px rgba(0, 240, 255, 0.15);\n  }\n  50% {\n    box-shadow:\n      0 0 12px rgba(0, 240, 255, 0.6),\n      0 0 28px rgba(0, 240, 255, 0.25);\n  }\n}\n\n@keyframes bannerAppear {\n  0% { opacity: 0; transform: translateY(-4px); }\n  100% { opacity: 1; transform: translateY(0); }\n}\n\n@keyframes indicatorPulse {\n  0%, 100% { opacity: 1; }\n  50% { opacity: 0.5; }\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .card--picked {\n    animation: none;\n  }\n  .active-mission-banner {\n    animation: none;\n  }\n  .mission-banner-indicator {\n    animation: none;\n  }\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/GamificationHUD.vue","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'props' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":30,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":12}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<script setup lang=\"ts\">\n/**\n * GamificationHUD - RPG-styled header HUD\n * Replaces inline gamification widgets with a unified, cyberflow-themed display.\n *\n * Adapts to intensity level:\n * - minimal: \"Lv.N\" text only (no container, no decoration)\n * - moderate: Corner-cut container with level + XP bar + streak + challenge pips\n * - intense: Same + always-on glow + XP shine animation + narrative micro-text\n *\n * Skill sources: cyberflow-design-system (container, glow, typography),\n * game-ui-components (XP gradient, streak flame), gamification-intensity-system (rendering tiers)\n */\nimport { computed } from 'vue'\nimport { useGamificationStore } from '@/stores/gamification'\nimport { useChallengesStore } from '@/stores/challenges'\nimport { useAuthStore } from '@/stores/auth'\nimport { useSettingsStore } from '@/stores/settings'\nimport { useUIStore } from '@/stores/ui'\nimport { useCyberflowTheme } from '@/composables/useCyberflowTheme'\nimport { useXpAnimations } from '@/composables/useXpAnimations'\nimport { getLevelNarrative } from '@/composables/useAriaTooltipNarrative'\nimport { GamificationTooltipWrapper, LevelBadge, ChallengePips } from '@/components/gamification'\nimport LevelTooltipContent from '@/components/gamification/tooltips/LevelTooltipContent.vue'\nimport XpTooltipContent from '@/components/gamification/tooltips/XpTooltipContent.vue'\nimport StreakTooltipContent from '@/components/gamification/tooltips/StreakTooltipContent.vue'\nimport ChallengeTooltipContent from '@/components/gamification/tooltips/ChallengeTooltipContent.vue'\nimport { Flame, ChevronDown, Target } from 'lucide-vue-next'\n\nconst props = defineProps<{\n  panelOpen: boolean\n}>()\n\nconst emit = defineEmits<{\n  togglePanel: []\n}>()\n\nconst gamificationStore = useGamificationStore()\nconst challengesStore = useChallengesStore()\nconst authStore = useAuthStore()\nconst settingsStore = useSettingsStore()\nconst uiStore = useUIStore()\n\nconst { showAtIntensity } = useCyberflowTheme()\nconst isMinimal = computed(() => !showAtIntensity('moderate'))\nconst isIntense = computed(() => showAtIntensity('intense'))\n\nconst { latestLevelEvent } = useXpAnimations()\n\n// Gamification data\nconst level = computed(() => gamificationStore.currentLevel)\nconst levelInfo = computed(() => gamificationStore.levelInfo)\nconst progressPercent = computed(() => levelInfo.value.progressPercent)\nconst xpText = computed(() => `${levelInfo.value.currentXp}/${levelInfo.value.xpForNextLevel}`)\nconst streakInfo = computed(() => gamificationStore.streakInfo)\nconst streak = computed(() => streakInfo.value.currentStreak)\nconst isActiveToday = computed(() => streakInfo.value.isActiveToday)\nconst hasChallenges = computed(() => challengesStore.hasActiveChallenges)\n\n// Active mission for HUD display — prefer picked challenge, fallback to first active\nconst activeMission = computed(() =>\n  challengesStore.pickedChallenge ?? challengesStore.activeDailies[0] ?? null\n)\nconst missionLabel = computed(() => {\n  const c = activeMission.value\n  if (!c) return null\n  const title = c.title.length > 15 ? c.title.slice(0, 14) + '…' : c.title\n  return `${title} ${c.objectiveCurrent}/${c.objectiveTarget}`\n})\n\n// Narrative (intense only)\nconst narrative = computed(() =>\n  getLevelNarrative(level.value, progressPercent.value)\n)\n\nfunction goToSignIn() {\n  uiStore.openAuthModal('login')\n}\n</script>\n\n<template>\n  <!-- Not authenticated: CTA -->\n  <div v-if=\"!authStore.isAuthenticated\" class=\"hud-connect\" @click=\"goToSignIn\">\n    <span class=\"hud-connect-label\">CONNECT TO THE GRID</span>\n  </div>\n\n  <!-- Authenticated: RPG HUD -->\n  <div\n    v-else-if=\"settingsStore.gamificationEnabled\"\n    class=\"gamification-hud\"\n    :class=\"[\n      { 'hud--minimal': isMinimal },\n      { 'hud--moderate': !isMinimal && !isIntense },\n      { 'hud--intense': isIntense },\n      { 'hud--active': panelOpen }\n    ]\"\n    role=\"group\"\n    tabindex=\"0\"\n    :aria-label=\"`Level ${level} netrunner. ${progressPercent}% to next level.`\"\n    @click=\"emit('togglePanel')\"\n    @keydown.enter=\"emit('togglePanel')\"\n  >\n    <!-- Minimal: text only (per intensity-system §4) -->\n    <span v-if=\"isMinimal\" class=\"hud-level-text\">Lv.{{ level }}</span>\n\n    <!-- Moderate+: full HUD bar -->\n    <template v-else>\n      <!-- Level section -->\n      <GamificationTooltipWrapper :panel-open=\"panelOpen\">\n        <div class=\"hud-section hud-level\">\n          <LevelBadge size=\"sm\" :level-event=\"latestLevelEvent\" />\n          <span class=\"hud-stat-label\">LV</span>\n          <span class=\"hud-stat-value\">{{ level }}</span>\n        </div>\n        <template #tooltip>\n          <LevelTooltipContent />\n        </template>\n      </GamificationTooltipWrapper>\n\n      <div class=\"hud-divider\" />\n\n      <!-- XP section -->\n      <GamificationTooltipWrapper :panel-open=\"panelOpen\">\n        <div class=\"hud-section hud-xp\">\n          <span class=\"hud-stat-label\">XP</span>\n          <div class=\"hud-xp-track\">\n            <div class=\"hud-xp-fill\" :style=\"{ width: progressPercent + '%' }\" />\n            <div v-if=\"isIntense\" class=\"hud-xp-shine\" :style=\"{ width: progressPercent + '%' }\" />\n          </div>\n          <span class=\"hud-stat-value hud-xp-text\">{{ isIntense ? xpText : progressPercent + '%' }}</span>\n        </div>\n        <template #tooltip>\n          <XpTooltipContent />\n        </template>\n      </GamificationTooltipWrapper>\n\n      <div class=\"hud-divider\" />\n\n      <!-- Streak section -->\n      <GamificationTooltipWrapper :panel-open=\"panelOpen\">\n        <div class=\"hud-section hud-streak\">\n          <Flame :size=\"14\" class=\"hud-flame\" :class=\"{ 'hud-flame--active': isActiveToday }\" />\n          <span class=\"hud-stat-value\">{{ streak }}d</span>\n        </div>\n        <template #tooltip>\n          <StreakTooltipContent />\n        </template>\n      </GamificationTooltipWrapper>\n\n      <!-- Mission indicator / Challenge pips -->\n      <GamificationTooltipWrapper v-if=\"hasChallenges\" :panel-open=\"panelOpen\">\n        <div v-if=\"activeMission\" class=\"hud-section hud-mission\">\n          <Target :size=\"12\" class=\"hud-mission-icon\" />\n          <span class=\"hud-mission-label\">{{ missionLabel }}</span>\n        </div>\n        <div v-else class=\"hud-section hud-challenges\">\n          <ChallengePips />\n        </div>\n        <template #tooltip>\n          <ChallengeTooltipContent />\n        </template>\n      </GamificationTooltipWrapper>\n\n      <!-- Expand chevron -->\n      <ChevronDown :size=\"12\" class=\"hud-chevron\" :class=\"{ 'hud-chevron--open': panelOpen }\" />\n    </template>\n\n    <!-- Intense: narrative micro-text row -->\n    <div v-if=\"isIntense && !panelOpen\" class=\"hud-narrative\">\n      \"{{ narrative }}\"\n    </div>\n  </div>\n</template>\n\n<style scoped>\n/* ============================================\n   HUD Container — uses corner-cut-sm from\n   cyberflow-design-system §6 (8px diagonal cuts)\n   ============================================ */\n.gamification-hud {\n  position: relative;\n  z-index: 2;\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  padding: var(--space-1-5, 6px) var(--space-3);\n  cursor: pointer;\n  user-select: none;\n  flex-wrap: wrap;\n}\n\n/* Pseudo-element for background + border + shape.\n   clip-path kills backdrop-filter, so we clip only the pseudo\n   and keep blur on the main element. */\n.gamification-hud::before {\n  content: '';\n  position: absolute;\n  inset: 0;\n  z-index: -1;\n  background: rgba(18, 18, 26, 0.85);\n  backdrop-filter: blur(12px);\n  -webkit-backdrop-filter: blur(12px);\n  border: 1px solid var(--cf-cyan-20, rgba(0, 240, 255, 0.2));\n  /* corner-cut-sm from cyberflow-design-system §6 */\n  clip-path: polygon(\n    8px 0, 100% 0,\n    100% calc(100% - 8px),\n    calc(100% - 8px) 100%,\n    0 100%, 0 8px\n  );\n  transition: border-color 0.2s ease, box-shadow 0.2s ease;\n}\n\n/* Moderate hover: neon-cyan--subtle from cyberflow-design-system §2 */\n.gamification-hud:hover::before {\n  border-color: var(--cf-cyan-50, rgba(0, 240, 255, 0.5));\n  box-shadow:\n    0 0 5px rgba(0, 240, 255, 0.5),\n    0 0 10px rgba(0, 240, 255, 0.2);\n}\n\n/* Active (panel open) */\n.gamification-hud.hud--active::before {\n  border-color: var(--cf-cyan, #00f0ff);\n  box-shadow:\n    0 0 5px rgba(0, 240, 255, 0.5),\n    0 0 10px rgba(0, 240, 255, 0.2);\n}\n\n/* Intense: always-on glow from cyberflow-design-system §2 */\n.gamification-hud.hud--intense::before {\n  border-color: var(--cf-cyan, #00f0ff);\n  box-shadow:\n    0 0 5px rgba(0, 240, 255, 0.5),\n    0 0 10px rgba(0, 240, 255, 0.2);\n}\n\n.gamification-hud.hud--intense:hover::before {\n  box-shadow:\n    0 0 5px #00f0ff,\n    0 0 10px #00f0ff,\n    0 0 20px #00f0ff,\n    0 0 40px #00f0ff;\n}\n\n/* ============================================\n   Minimal: per intensity-system §4\n   \"Just text, no decoration, monospace font\"\n   ============================================ */\n.hud--minimal {\n  padding: var(--space-1) var(--space-2);\n}\n\n.hud--minimal::before {\n  display: none;\n}\n\n.hud-level-text {\n  font-family: var(--font-cyber-data, 'Space Mono', monospace);\n  font-size: var(--text-sm);\n  font-weight: 700;\n  color: rgba(0, 240, 255, 0.7);\n  letter-spacing: 0.02em;\n}\n\n/* ============================================\n   Typography — from cyberflow-design-system §7\n   Space Mono for data, uppercase labels\n   ============================================ */\n.hud-stat-label {\n  font-family: var(--font-cyber-data, 'Space Mono', monospace);\n  font-size: 11px;\n  font-weight: 400;\n  color: var(--cf-cyan, #00f0ff);\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n  line-height: 1;\n}\n\n.hud-stat-value {\n  font-family: var(--font-cyber-data, 'Space Mono', monospace);\n  font-size: var(--text-sm);\n  font-weight: 700;\n  color: rgba(0, 240, 255, 0.9);\n  letter-spacing: 0.02em;\n  line-height: 1;\n}\n\n/* ============================================\n   HUD Sections & Dividers\n   ============================================ */\n.hud-section {\n  display: flex;\n  align-items: center;\n  gap: var(--space-1);\n}\n\n.hud-divider {\n  width: 1px;\n  height: 16px;\n  background: var(--cf-cyan-20, rgba(0, 240, 255, 0.2));\n  flex-shrink: 0;\n}\n\n/* ============================================\n   XP Bar — gradient from game-ui-components §2\n   Uses --xp-bar-gradient token\n   ============================================ */\n.hud-xp-track {\n  position: relative;\n  width: 80px;\n  height: 4px;\n  background: rgba(0, 0, 0, 0.5);\n  border-radius: 2px;\n  overflow: hidden;\n}\n\n.hud-xp-fill {\n  position: absolute;\n  inset: 0;\n  width: 0;\n  background: var(--xp-bar-gradient, linear-gradient(90deg, rgba(0, 240, 255, 0.9), rgba(255, 0, 153, 0.9)));\n  border-radius: 2px;\n  transition: width 0.6s ease-out;\n}\n\n/* Intense: shine sweep from game-ui-components §2 */\n.hud-xp-shine {\n  position: absolute;\n  inset: 0;\n  background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.3) 50%, transparent 100%);\n  background-size: 200% 100%;\n  animation: xp-shine 3s ease-in-out infinite;\n}\n\n.hud-xp-text {\n  white-space: nowrap;\n}\n\n/* ============================================\n   Streak — flame color from game-ui-components\n   Uses --streak-flame-color token\n   ============================================ */\n.hud-flame {\n  color: var(--text-muted, rgba(255, 255, 255, 0.4));\n  transition: color 0.2s ease;\n}\n\n.hud-flame--active {\n  color: var(--streak-flame-color, rgb(255, 107, 53));\n  filter: drop-shadow(0 0 4px rgba(255, 107, 53, 0.6));\n}\n\n/* ============================================\n   Mission indicator (active daily challenge)\n   ============================================ */\n.hud-mission-icon {\n  color: var(--cf-cyan, #00f0ff);\n  flex-shrink: 0;\n}\n\n.hud-mission-label {\n  font-family: var(--font-cyber-data, 'Space Mono', monospace);\n  font-size: 11px;\n  font-weight: 400;\n  color: var(--cf-cyan-50, rgba(0, 240, 255, 0.5));\n  white-space: nowrap;\n  letter-spacing: 0.02em;\n}\n\n/* ============================================\n   Chevron expand indicator\n   ============================================ */\n.hud-chevron {\n  color: var(--cf-cyan-50, rgba(0, 240, 255, 0.5));\n  transition: transform 0.2s ease, color 0.2s ease;\n  flex-shrink: 0;\n}\n\n.hud-chevron--open {\n  transform: rotate(180deg);\n  color: var(--cf-cyan, #00f0ff);\n}\n\n/* ============================================\n   Narrative micro-text (intense only)\n   Uses getLevelNarrative() from useAriaTooltipNarrative\n   ============================================ */\n.hud-narrative {\n  width: 100%;\n  font-family: var(--font-cyber-data, 'Space Mono', monospace);\n  font-size: 10px;\n  font-style: italic;\n  color: var(--cf-cyan-50, rgba(0, 240, 255, 0.5));\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 300px;\n  padding-top: 2px;\n  line-height: 1.2;\n}\n\n/* ============================================\n   Auth CTA\n   ============================================ */\n.hud-connect {\n  position: relative;\n  display: flex;\n  align-items: center;\n  padding: var(--space-1) var(--space-3);\n  cursor: pointer;\n}\n\n.hud-connect::before {\n  content: '';\n  position: absolute;\n  inset: 0;\n  z-index: -1;\n  background: rgba(26, 26, 37, 0.85);\n  backdrop-filter: blur(12px);\n  -webkit-backdrop-filter: blur(12px);\n  border: 1px solid var(--cf-cyan-20, rgba(0, 240, 255, 0.2));\n  clip-path: polygon(\n    8px 0, 100% 0,\n    100% calc(100% - 8px),\n    calc(100% - 8px) 100%,\n    0 100%, 0 8px\n  );\n  transition: border-color 0.2s ease, box-shadow 0.2s ease;\n}\n\n.hud-connect:hover::before {\n  border-color: var(--cf-cyan-50, rgba(0, 240, 255, 0.5));\n  box-shadow:\n    0 0 5px rgba(0, 240, 255, 0.3),\n    0 0 10px rgba(0, 240, 255, 0.1);\n}\n\n.hud-connect-label {\n  font-family: var(--font-cyber-data, 'Space Mono', monospace);\n  font-size: 11px;\n  color: var(--cf-cyan-50, rgba(0, 240, 255, 0.5));\n  text-transform: uppercase;\n  letter-spacing: 0.1em;\n}\n\n/* ============================================\n   Animations (with reduced-motion from\n   cyberflow-design-system §10)\n   ============================================ */\n@keyframes xp-shine {\n  0% { background-position: 200% 0; }\n  100% { background-position: -200% 0; }\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .gamification-hud,\n  .hud-connect {\n    transition: none;\n  }\n  .hud-xp-shine {\n    animation: none;\n    display: none;\n  }\n  .hud-xp-fill {\n    transition: none;\n  }\n  .hud-chevron {\n    transition: none;\n  }\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/GamificationPanel.vue","messages":[{"ruleId":"vue/prefer-true-attribute-shorthand","severity":2,"message":"Boolean prop with 'true' value should be written in shorthand form.","line":86,"column":22,"nodeType":"VAttribute","messageId":"expectShort","endLine":86,"endColumn":42,"suggestions":[{"messageId":"rewriteIntoShort","fix":{"range":[2681,2701],"text":"show-freezes"},"desc":"Rewrite this prop into shorthand form."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<script setup lang=\"ts\">\n/**\n * Gamification Panel Component\n * FEATURE-1118: Main stats overview panel showing XP, level, streak, and recent achievements\n */\nimport { computed, ref } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useGamificationStore } from '@/stores/gamification'\nimport XpBar from './XpBar.vue'\nimport LevelBadge from './LevelBadge.vue'\nimport StreakCounter from './StreakCounter.vue'\nimport AchievementBadge from './AchievementBadge.vue'\nimport DailyChallengesPanel from './DailyChallengesPanel.vue'\nimport { Trophy, ShoppingBag, ChevronRight, Sparkles, HelpCircle, ChevronDown } from 'lucide-vue-next'\n\nconst emit = defineEmits<{\n  openAchievements: []\n  openShop: []\n  close: []\n}>()\nconst showHelp = ref(false)\nconst router = useRouter()\n\nfunction goToCyberflow() {\n  router.push('/cyberflow')\n}\n\nconst gamificationStore = useGamificationStore()\n\nconst levelInfo = computed(() => gamificationStore.levelInfo)\nconst totalXp = computed(() => gamificationStore.totalXp)\nconst availableXp = computed(() => gamificationStore.availableXp)\n\n// Get 4 most recent earned achievements\nconst recentAchievements = computed(() => {\n  return [...gamificationStore.earnedAchievements]\n    .sort((a, b) => {\n      const aDate = a.earnedAt?.getTime() || 0\n      const bDate = b.earnedAt?.getTime() || 0\n      return bDate - aDate\n    })\n    .slice(0, 4)\n})\n\nconst earnedCount = computed(() => gamificationStore.unlockedAchievementsCount)\nconst totalCount = computed(() => gamificationStore.achievements.length)\n</script>\n\n<template>\n  <div class=\"gamification-panel\">\n    <!-- Cyberflow Command Center Link -->\n    <button class=\"cyberflow-link\" @click=\"goToCyberflow\">\n      <span class=\"cyberflow-link-label\">CYBERFLOW COMMAND CENTER</span>\n      <ChevronRight :size=\"16\" class=\"cyberflow-link-arrow\" />\n    </button>\n\n    <!-- Header with Level -->\n    <div class=\"panel-header\">\n      <div class=\"header-main\">\n        <LevelBadge size=\"lg\" />\n        <div class=\"header-info\">\n          <span class=\"header-title\">Level {{ levelInfo.level }}</span>\n          <span class=\"header-xp\">{{ totalXp.toLocaleString() }} Total XP</span>\n        </div>\n      </div>\n\n      <div class=\"header-actions\">\n        <button\n          class=\"action-btn action-btn--shop\"\n          title=\"Open Shop\"\n          @click=\"$emit('openShop')\"\n        >\n          <ShoppingBag :size=\"18\" />\n          <span class=\"action-xp\">{{ availableXp.toLocaleString() }} XP</span>\n        </button>\n      </div>\n    </div>\n\n    <!-- XP Progress -->\n    <div class=\"panel-section\">\n      <XpBar animated />\n    </div>\n\n    <!-- Streak -->\n    <div class=\"panel-section\">\n      <StreakCounter :show-freezes=\"true\" />\n    </div>\n\n    <!-- Daily Challenges (FEATURE-1132) -->\n    <div class=\"panel-section\">\n      <DailyChallengesPanel compact @pick-challenge=\"emit('close')\" />\n    </div>\n\n    <!-- Recent Achievements -->\n    <div class=\"panel-section\">\n      <div class=\"section-header\">\n        <div class=\"section-title\">\n          <Trophy\n            :size=\"16\"\n            class=\"section-icon\"\n          />\n          <span>Achievements</span>\n          <span class=\"achievement-count\">{{ earnedCount }}/{{ totalCount }}</span>\n        </div>\n        <button\n          class=\"see-all-btn\"\n          @click=\"$emit('openAchievements')\"\n        >\n          <span>See All</span>\n          <ChevronRight :size=\"14\" />\n        </button>\n      </div>\n\n      <div\n        v-if=\"recentAchievements.length > 0\"\n        class=\"achievements-grid\"\n      >\n        <AchievementBadge\n          v-for=\"achievement in recentAchievements\"\n          :key=\"achievement.id\"\n          :achievement=\"achievement\"\n          size=\"sm\"\n        />\n      </div>\n\n      <div\n        v-else\n        class=\"achievements-empty\"\n      >\n        <Sparkles\n          :size=\"24\"\n          class=\"empty-icon\"\n        />\n        <span>Complete tasks to earn achievements!</span>\n      </div>\n    </div>\n\n    <!-- How It Works Section -->\n    <div class=\"panel-section help-section\">\n      <button\n        class=\"help-toggle\"\n        @click=\"showHelp = !showHelp\"\n      >\n        <HelpCircle :size=\"16\" />\n        <span>How to Earn XP</span>\n        <ChevronDown\n          :size=\"14\"\n          class=\"help-chevron\"\n          :class=\"{ 'rotated': showHelp }\"\n        />\n      </button>\n\n      <div v-if=\"showHelp\" class=\"help-content\">\n        <div class=\"help-category\">\n          <span class=\"help-category-title\">🎯 Tasks</span>\n          <ul class=\"help-list\">\n            <li><span class=\"xp-badge\">+10 XP</span> Complete any task</li>\n            <li><span class=\"xp-badge bonus\">+50%</span> High priority tasks</li>\n            <li><span class=\"xp-badge bonus\">+25%</span> Medium priority tasks</li>\n            <li><span class=\"xp-badge penalty\">-10%</span> Overdue tasks</li>\n          </ul>\n        </div>\n\n        <div class=\"help-category\">\n          <span class=\"help-category-title\">🍅 Pomodoros</span>\n          <ul class=\"help-list\">\n            <li><span class=\"xp-badge\">+25 XP</span> Complete a Pomodoro</li>\n            <li><span class=\"xp-badge bonus\">+10%</span> Each consecutive session (max +50%)</li>\n          </ul>\n        </div>\n\n        <div class=\"help-category\">\n          <span class=\"help-category-title\">🔥 Streaks</span>\n          <ul class=\"help-list\">\n            <li><span class=\"xp-badge\">+50 XP</span> 7-day streak</li>\n            <li><span class=\"xp-badge\">+150 XP</span> 30-day streak</li>\n            <li><span class=\"xp-badge\">+300 XP</span> 100-day streak</li>\n            <li><span class=\"xp-badge\">+500 XP</span> 365-day streak</li>\n          </ul>\n        </div>\n\n        <div class=\"help-category\">\n          <span class=\"help-category-title\">🏆 Achievements</span>\n          <ul class=\"help-list\">\n            <li><span class=\"xp-badge bronze\">+50 XP</span> Bronze tier</li>\n            <li><span class=\"xp-badge silver\">+150 XP</span> Silver tier</li>\n            <li><span class=\"xp-badge gold\">+300 XP</span> Gold tier</li>\n            <li><span class=\"xp-badge platinum\">+500 XP</span> Platinum tier</li>\n          </ul>\n        </div>\n\n        <p class=\"help-tip\">\n          💡 Spend XP in the <strong>Shop</strong> to unlock themes and cosmetics!\n        </p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.gamification-panel {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-4);\n  padding: var(--space-4);\n  background: var(--gamification-panel-bg);\n  border: 1px solid var(--gamification-panel-border);\n  border-radius: var(--radius-lg);\n}\n\n/* Cyberflow Command Center Link */\n.cyberflow-link {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  padding: var(--space-2) var(--space-3);\n  background: rgba(var(--neon-cyan), 0.08);\n  border: 1px solid rgba(var(--neon-cyan), 0.25);\n  border-radius: var(--radius-md);\n  color: rgba(var(--neon-cyan), 0.9);\n  font-family: var(--font-cyber-data, 'JetBrains Mono', monospace);\n  font-size: var(--text-xs);\n  font-weight: var(--font-semibold);\n  letter-spacing: 0.1em;\n  cursor: pointer;\n  transition: all var(--duration-normal) var(--spring-smooth);\n}\n\n.cyberflow-link:hover {\n  background: rgba(var(--neon-cyan), 0.15);\n  border-color: rgba(var(--neon-cyan), 0.5);\n  box-shadow: 0 0 12px rgba(var(--neon-cyan), 0.2);\n  color: rgba(var(--neon-cyan), 1);\n}\n\n.cyberflow-link-arrow {\n  opacity: 0.6;\n  transition: all var(--duration-normal) var(--spring-smooth);\n}\n\n.cyberflow-link:hover .cyberflow-link-arrow {\n  opacity: 1;\n  transform: translateX(2px);\n}\n\n.panel-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  gap: var(--space-4);\n}\n\n.header-main {\n  display: flex;\n  align-items: center;\n  gap: var(--space-3);\n}\n\n.header-info {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-0_5);\n}\n\n.header-title {\n  font-size: var(--text-xl);\n  font-weight: var(--font-bold);\n  color: var(--gamification-text-primary);\n  text-shadow: 0 0 12px rgba(var(--neon-cyan), 0.3);\n}\n\n.header-xp {\n  font-size: var(--text-sm);\n  color: var(--gamification-text-secondary);\n}\n\n.header-actions {\n  display: flex;\n  gap: var(--space-2);\n}\n\n.action-btn {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  padding: var(--space-2) var(--space-3);\n  background: rgba(var(--color-slate-700), 0.5);\n  border: 1px solid rgba(var(--color-slate-600), 0.5);\n  border-radius: var(--radius-md);\n  color: var(--gamification-text-primary);\n  font-size: var(--text-sm);\n  font-weight: var(--font-medium);\n  cursor: pointer;\n  transition: all var(--duration-normal) var(--spring-smooth);\n}\n\n.action-btn:hover {\n  background: rgba(var(--color-slate-600), 0.5);\n  border-color: rgba(var(--neon-cyan), 0.3);\n}\n\n.action-btn--shop:hover {\n  box-shadow: 0 0 12px rgba(var(--neon-cyan), 0.2);\n}\n\n.action-xp {\n  color: rgba(var(--neon-cyan), 0.9);\n}\n\n.panel-section {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-2);\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.section-title {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  font-size: var(--text-sm);\n  font-weight: var(--font-medium);\n  color: var(--gamification-text-secondary);\n}\n\n.section-icon {\n  color: rgba(var(--tier-gold), 0.8);\n}\n\n.achievement-count {\n  padding: var(--space-0_5) var(--space-1_5);\n  background: rgba(var(--color-slate-700), 0.5);\n  border-radius: var(--radius-sm);\n  font-size: var(--text-xs);\n}\n\n.see-all-btn {\n  display: flex;\n  align-items: center;\n  gap: var(--space-1);\n  padding: var(--space-1) var(--space-2);\n  background: transparent;\n  border: none;\n  border-radius: var(--radius-sm);\n  color: rgba(var(--neon-cyan), 0.8);\n  font-size: var(--text-sm);\n  cursor: pointer;\n  transition: all var(--duration-normal) var(--spring-smooth);\n}\n\n.see-all-btn:hover {\n  background: rgba(var(--neon-cyan), 0.1);\n  color: rgba(var(--neon-cyan), 1);\n}\n\n.achievements-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: var(--space-2);\n}\n\n.achievements-empty {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: var(--space-2);\n  padding: var(--space-4);\n  color: var(--gamification-text-secondary);\n  font-size: var(--text-sm);\n  text-align: center;\n}\n\n.empty-icon {\n  color: rgba(var(--neon-cyan), 0.4);\n}\n\n/* Help Section */\n.help-section {\n  border-top: 1px solid rgba(var(--color-slate-600), 0.3);\n  padding-top: var(--space-3);\n  margin-top: var(--space-2);\n}\n\n.help-toggle {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  width: 100%;\n  padding: var(--space-2);\n  background: transparent;\n  border: none;\n  border-radius: var(--radius-md);\n  color: var(--gamification-text-secondary);\n  font-size: var(--text-sm);\n  font-weight: var(--font-medium);\n  cursor: pointer;\n  transition: all var(--duration-normal) var(--spring-smooth);\n}\n\n.help-toggle:hover {\n  background: rgba(var(--color-slate-700), 0.3);\n  color: var(--gamification-text-primary);\n}\n\n.help-chevron {\n  margin-left: auto;\n  transition: transform var(--duration-normal) var(--spring-smooth);\n}\n\n.help-chevron.rotated {\n  transform: rotate(180deg);\n}\n\n.help-content {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-3);\n  padding: var(--space-3);\n  background: rgba(var(--color-slate-800), 0.4);\n  border-radius: var(--radius-md);\n  animation: slideDown var(--duration-normal) var(--ease-out);\n}\n\n@keyframes slideDown {\n  from {\n    opacity: 0;\n    transform: translateY(-8px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.help-category {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-1);\n}\n\n.help-category-title {\n  font-size: var(--text-sm);\n  font-weight: var(--font-semibold);\n  color: var(--gamification-text-primary);\n}\n\n.help-list {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-1);\n}\n\n.help-list li {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  font-size: var(--text-xs);\n  color: var(--gamification-text-secondary);\n}\n\n.xp-badge {\n  display: inline-flex;\n  align-items: center;\n  padding: var(--space-0_5) var(--space-1_5);\n  background: rgba(var(--neon-cyan), 0.15);\n  border: 1px solid rgba(var(--neon-cyan), 0.3);\n  border-radius: var(--radius-sm);\n  color: rgba(var(--neon-cyan), 0.9);\n  font-size: var(--text-xs);\n  font-weight: var(--font-semibold);\n  min-width: var(--space-12);\n  justify-content: center;\n}\n\n.xp-badge.bonus {\n  background: rgba(var(--neon-lime), 0.15);\n  border-color: rgba(var(--neon-lime), 0.3);\n  color: rgba(var(--neon-lime), 0.9);\n}\n\n.xp-badge.penalty {\n  background: rgba(255, 100, 100, 0.15);\n  border-color: rgba(255, 100, 100, 0.3);\n  color: rgba(255, 100, 100, 0.9);\n}\n\n.xp-badge.bronze {\n  background: rgba(var(--tier-bronze), 0.15);\n  border-color: rgba(var(--tier-bronze), 0.3);\n  color: rgb(var(--tier-bronze));\n}\n\n.xp-badge.silver {\n  background: rgba(var(--tier-silver), 0.15);\n  border-color: rgba(var(--tier-silver), 0.3);\n  color: rgb(var(--tier-silver));\n}\n\n.xp-badge.gold {\n  background: rgba(var(--tier-gold), 0.15);\n  border-color: rgba(var(--tier-gold), 0.3);\n  color: rgb(var(--tier-gold));\n}\n\n.xp-badge.platinum {\n  background: rgba(var(--tier-platinum), 0.15);\n  border-color: rgba(var(--tier-platinum), 0.3);\n  color: rgb(var(--tier-platinum));\n}\n\n.help-tip {\n  margin: 0;\n  padding: var(--space-2);\n  background: rgba(var(--neon-magenta), 0.1);\n  border-radius: var(--radius-sm);\n  font-size: var(--text-xs);\n  color: var(--gamification-text-secondary);\n}\n\n.help-tip strong {\n  color: rgba(var(--neon-magenta), 0.9);\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/GamificationToasts.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/GamificationTooltipWrapper.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/LevelBadge.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/ShopModal.vue","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'props' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":11,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'emit' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":15,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":11},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":25,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[736,739],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[736,739],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":90,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":90,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2632,2635],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2632,2635],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<script setup lang=\"ts\">\n/**\n * Shop Modal Component\n * FEATURE-1118: Purchase themes and cosmetics with XP\n */\nimport { computed, ref } from 'vue'\nimport { useGamificationStore } from '@/stores/gamification'\nimport type { ShopCategory, ShopItemWithOwnership } from '@/types/gamification'\nimport { X, ShoppingBag, Check, Lock, Palette, Award, Sparkles, Volume2 } from 'lucide-vue-next'\n\nconst props = defineProps<{\n  open: boolean\n}>()\n\nconst emit = defineEmits<{\n  close: []\n}>()\n\nconst gamificationStore = useGamificationStore()\n\nconst selectedCategory = ref<ShopCategory | 'all'>('all')\nconst previewingItem = ref<string | null>(null)\nconst purchasing = ref(false)\n\nconst categories: { id: ShopCategory | 'all'; label: string; icon: any }[] = [\n  { id: 'all', label: 'All', icon: ShoppingBag },\n  { id: 'theme', label: 'Themes', icon: Palette },\n  { id: 'badge_style', label: 'Badges', icon: Award },\n  { id: 'animation', label: 'Animations', icon: Sparkles },\n  { id: 'sound', label: 'Sounds', icon: Volume2 }\n]\n\nconst availableXp = computed(() => gamificationStore.availableXp)\nconst currentLevel = computed(() => gamificationStore.currentLevel)\nconst equippedTheme = computed(() => gamificationStore.equippedTheme)\n\nconst filteredItems = computed(() => {\n  const items = gamificationStore.shopItemsWithOwnership\n\n  if (selectedCategory.value === 'all') {\n    return items\n  }\n\n  return items.filter(item => item.category === selectedCategory.value)\n})\n\nfunction canAfford(item: ShopItemWithOwnership): boolean {\n  return availableXp.value >= item.priceXp\n}\n\nfunction canPurchase(item: ShopItemWithOwnership): boolean {\n  return !item.isOwned && canAfford(item) && currentLevel.value >= item.requiredLevel\n}\n\nfunction previewTheme(item: ShopItemWithOwnership) {\n  if (item.category !== 'theme') return\n\n  previewingItem.value = item.id\n  gamificationStore.applyTheme(item.id)\n}\n\nfunction cancelPreview() {\n  if (previewingItem.value) {\n    previewingItem.value = null\n    gamificationStore.applyTheme(equippedTheme.value)\n  }\n}\n\nasync function purchaseItem(item: ShopItemWithOwnership) {\n  if (!canPurchase(item)) return\n\n  purchasing.value = true\n  try {\n    const result = await gamificationStore.purchaseItem(item.id)\n    if (result.success && item.category === 'theme') {\n      // Auto-equip purchased theme\n      await gamificationStore.equipTheme(item.id)\n    }\n  } finally {\n    purchasing.value = false\n    previewingItem.value = null\n  }\n}\n\nasync function equipTheme(itemId: string) {\n  await gamificationStore.equipTheme(itemId)\n}\n\nfunction getCategoryIcon(category: ShopCategory) {\n  const map: Record<ShopCategory, any> = {\n    theme: Palette,\n    badge_style: Award,\n    animation: Sparkles,\n    sound: Volume2\n  }\n  return map[category] || ShoppingBag\n}\n</script>\n\n<template>\n  <Teleport to=\"body\">\n    <Transition name=\"modal\">\n      <div\n        v-if=\"open\"\n        class=\"modal-overlay\"\n        @click.self=\"cancelPreview(); $emit('close')\"\n      >\n        <div class=\"modal-container\">\n          <div class=\"modal-header\">\n            <div class=\"header-title\">\n              <ShoppingBag\n                :size=\"24\"\n                class=\"header-icon\"\n              />\n              <h2>Shop</h2>\n            </div>\n            <div class=\"header-balance\">\n              <span class=\"balance-label\">Available:</span>\n              <span class=\"balance-amount\">{{ availableXp.toLocaleString() }} XP</span>\n            </div>\n            <button\n              class=\"close-btn\"\n              @click=\"cancelPreview(); $emit('close')\"\n            >\n              <X :size=\"20\" />\n            </button>\n          </div>\n\n          <div class=\"category-tabs\">\n            <button\n              v-for=\"cat in categories\"\n              :key=\"cat.id\"\n              class=\"category-tab\"\n              :class=\"{ active: selectedCategory === cat.id }\"\n              @click=\"selectedCategory = cat.id\"\n            >\n              <component\n                :is=\"cat.icon\"\n                :size=\"16\"\n              />\n              <span>{{ cat.label }}</span>\n            </button>\n          </div>\n\n          <div class=\"shop-items\">\n            <div\n              v-for=\"item in filteredItems\"\n              :key=\"item.id\"\n              class=\"shop-item\"\n              :class=\"{\n                'shop-item--owned': item.isOwned,\n                'shop-item--equipped': item.isOwned && item.category === 'theme' && equippedTheme === item.id,\n                'shop-item--previewing': previewingItem === item.id,\n                'shop-item--locked': currentLevel < item.requiredLevel\n              }\"\n              @mouseenter=\"item.category === 'theme' && !item.isOwned ? previewTheme(item) : null\"\n              @mouseleave=\"cancelPreview\"\n            >\n              <div class=\"item-icon\">\n                <component\n                  :is=\"getCategoryIcon(item.category)\"\n                  :size=\"24\"\n                />\n              </div>\n\n              <div class=\"item-info\">\n                <span class=\"item-name\">{{ item.name }}</span>\n                <span class=\"item-description\">{{ item.description }}</span>\n\n                <div\n                  v-if=\"currentLevel < item.requiredLevel\"\n                  class=\"item-lock\"\n                >\n                  <Lock :size=\"12\" />\n                  <span>Requires Level {{ item.requiredLevel }}</span>\n                </div>\n              </div>\n\n              <div class=\"item-action\">\n                <template v-if=\"item.isOwned\">\n                  <button\n                    v-if=\"item.category === 'theme' && equippedTheme !== item.id\"\n                    class=\"equip-btn\"\n                    @click=\"equipTheme(item.id)\"\n                  >\n                    Equip\n                  </button>\n                  <span\n                    v-else\n                    class=\"owned-badge\"\n                  >\n                    <Check :size=\"14\" />\n                    {{ item.category === 'theme' && equippedTheme === item.id ? 'Equipped' : 'Owned' }}\n                  </span>\n                </template>\n                <template v-else>\n                  <button\n                    class=\"buy-btn\"\n                    :class=\"{ 'buy-btn--disabled': !canPurchase(item) }\"\n                    :disabled=\"!canPurchase(item) || purchasing\"\n                    @click=\"purchaseItem(item)\"\n                  >\n                    <span class=\"price\">{{ item.priceXp.toLocaleString() }} XP</span>\n                  </button>\n                </template>\n              </div>\n            </div>\n\n            <div\n              v-if=\"filteredItems.length === 0\"\n              class=\"empty-state\"\n            >\n              <ShoppingBag :size=\"32\" />\n              <span>No items in this category</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </Transition>\n  </Teleport>\n</template>\n\n<style scoped>\n.modal-overlay {\n  position: fixed;\n  inset: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--overlay-bg);\n  backdrop-filter: blur(var(--blur-xs));\n  z-index: var(--z-modal);\n}\n\n.modal-container {\n  display: flex;\n  flex-direction: column;\n  width: 90%;\n  max-width: 600px;\n  max-height: 80vh;\n  background: var(--gamification-panel-bg);\n  border: 1px solid var(--gamification-panel-border);\n  border-radius: var(--radius-xl);\n  overflow: hidden;\n}\n\n.modal-header {\n  display: flex;\n  align-items: center;\n  gap: var(--space-4);\n  padding: var(--space-4) var(--space-5);\n  border-bottom: 1px solid var(--purple-border-medium);\n}\n\n.header-title {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n}\n\n.header-icon {\n  color: rgba(var(--neon-cyan), 0.9);\n}\n\n.header-title h2 {\n  font-size: var(--text-xl);\n  font-weight: var(--font-bold);\n  color: var(--gamification-text-primary);\n  margin: 0;\n}\n\n.header-balance {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  margin-left: auto;\n  padding: var(--space-2) var(--space-3);\n  background: rgba(var(--neon-cyan), 0.1);\n  border-radius: var(--radius-md);\n}\n\n.balance-label {\n  font-size: var(--text-sm);\n  color: var(--gamification-text-secondary);\n}\n\n.balance-amount {\n  font-size: var(--text-base);\n  font-weight: var(--font-bold);\n  color: rgba(var(--neon-cyan), 1);\n}\n\n.close-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: var(--space-2);\n  background: transparent;\n  border: none;\n  border-radius: var(--radius-md);\n  color: var(--gamification-text-secondary);\n  cursor: pointer;\n  transition: all var(--duration-normal) var(--spring-smooth);\n}\n\n.close-btn:hover {\n  background: var(--purple-bg-subtle);\n  color: var(--gamification-text-primary);\n}\n\n.category-tabs {\n  display: flex;\n  gap: var(--space-2);\n  padding: var(--space-3) var(--space-5);\n  overflow-x: auto;\n  border-bottom: 1px solid var(--border-medium);\n}\n\n.category-tab {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  padding: var(--space-2) var(--space-3);\n  background: transparent;\n  border: 1px solid var(--purple-border-medium);\n  border-radius: var(--radius-md);\n  color: var(--gamification-text-secondary);\n  font-size: var(--text-sm);\n  white-space: nowrap;\n  cursor: pointer;\n  transition: all var(--duration-normal) var(--spring-smooth);\n}\n\n.category-tab:hover {\n  background: var(--purple-bg-subtle);\n  border-color: var(--purple-border-strong);\n}\n\n.category-tab.active {\n  background: rgba(var(--neon-cyan), 0.15);\n  border-color: rgba(var(--neon-cyan), 0.4);\n  color: rgba(var(--neon-cyan), 1);\n}\n\n.shop-items {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-2);\n  padding: var(--space-4) var(--space-5);\n  overflow-y: auto;\n  flex: 1;\n}\n\n.shop-item {\n  display: flex;\n  align-items: center;\n  gap: var(--space-3);\n  padding: var(--space-3);\n  background: var(--gamification-card-bg);\n  border: 1px solid var(--purple-border-medium);\n  border-radius: var(--radius-md);\n  transition: all var(--duration-normal) var(--spring-smooth);\n}\n\n.shop-item:hover {\n  border-color: var(--purple-border-medium);\n}\n\n.shop-item--owned {\n  border-color: var(--border-medium);\n  background: rgba(var(--neon-cyan), 0.05);\n}\n\n.shop-item--equipped {\n  border-color: rgba(var(--neon-cyan), 0.5);\n  box-shadow: 0 0 var(--space-3) rgba(var(--neon-cyan), 0.2);\n}\n\n.shop-item--previewing {\n  border-color: rgba(var(--neon-magenta), 0.5);\n  box-shadow: 0 0 var(--space-3) rgba(var(--neon-magenta), 0.2);\n}\n\n.shop-item--locked {\n  opacity: 0.6;\n}\n\n.item-icon {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: var(--space-12);\n  height: var(--space-12);\n  background: var(--purple-bg-subtle);\n  border-radius: var(--radius-md);\n  color: rgba(var(--neon-cyan), 0.8);\n}\n\n.item-info {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-1);\n  flex: 1;\n  min-width: 0;\n}\n\n.item-name {\n  font-size: var(--text-base);\n  font-weight: var(--font-medium);\n  color: var(--gamification-text-primary);\n}\n\n.item-description {\n  font-size: var(--text-sm);\n  color: var(--gamification-text-secondary);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.item-lock {\n  display: flex;\n  align-items: center;\n  gap: var(--space-1);\n  font-size: var(--text-xs);\n  color: var(--tier-rare);\n}\n\n.item-action {\n  display: flex;\n  align-items: center;\n}\n\n.buy-btn {\n  padding: var(--space-2) var(--space-3);\n  background: rgba(var(--neon-cyan), 0.15);\n  border: 1px solid rgba(var(--neon-cyan), 0.4);\n  border-radius: var(--radius-md);\n  color: rgba(var(--neon-cyan), 1);\n  font-size: var(--text-sm);\n  font-weight: var(--font-medium);\n  cursor: pointer;\n  transition: all var(--duration-normal) var(--spring-smooth);\n}\n\n.buy-btn:hover:not(:disabled) {\n  background: rgba(var(--neon-cyan), 0.25);\n  box-shadow: 0 0 var(--space-3) rgba(var(--neon-cyan), 0.3);\n}\n\n.buy-btn--disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.equip-btn {\n  padding: var(--space-2) var(--space-3);\n  background: rgba(var(--neon-magenta), 0.15);\n  border: 1px solid rgba(var(--neon-magenta), 0.4);\n  border-radius: var(--radius-md);\n  color: rgba(var(--neon-magenta), 1);\n  font-size: var(--text-sm);\n  font-weight: var(--font-medium);\n  cursor: pointer;\n  transition: all var(--duration-normal) var(--spring-smooth);\n}\n\n.equip-btn:hover {\n  background: rgba(var(--neon-magenta), 0.25);\n  box-shadow: 0 0 var(--space-3) rgba(var(--neon-magenta), 0.3);\n}\n\n.owned-badge {\n  display: flex;\n  align-items: center;\n  gap: var(--space-1);\n  padding: var(--space-2) var(--space-3);\n  background: rgba(var(--neon-cyan), 0.1);\n  border-radius: var(--radius-md);\n  font-size: var(--text-sm);\n  color: rgba(var(--neon-cyan), 0.8);\n}\n\n.empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: var(--space-3);\n  padding: var(--space-8);\n  color: var(--gamification-text-secondary);\n  text-align: center;\n}\n\n/* Modal transitions */\n.modal-enter-active,\n.modal-leave-active {\n  transition: opacity var(--duration-normal) var(--ease-out);\n}\n\n.modal-enter-active .modal-container,\n.modal-leave-active .modal-container {\n  transition: transform var(--duration-normal) var(--spring-smooth);\n}\n\n.modal-enter-from,\n.modal-leave-to {\n  opacity: 0;\n}\n\n.modal-enter-from .modal-container,\n.modal-leave-to .modal-container {\n  transform: scale(0.95) translateY(var(--space-2_5));\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/StreakCounter.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/XpBar.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/cyber/CorruptionMeter.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/cyber/CyberAchievements.vue","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Lock' is defined but never used. Allowed unused vars must match /^_/u.","line":17,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":45,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Lock"},"fix":{"range":[763,769],"text":""},"desc":"Remove unused variable \"Lock\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":34,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1101,1104],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1101,1104],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":45,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1682,1685],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1682,1685],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<script setup lang=\"ts\">\n/**\n * CyberAchievements - Visual Novel Achievement Gallery\n * FEATURE-1118 Cyberflow RPG Hub: Bottom-left panel\n *\n * Icon-dominant grid with large 48px icons, tier glows, minimal text.\n * Visual novel aesthetic: show, don't tell.\n */\nimport { computed } from 'vue'\nimport { useGamificationStore } from '@/stores/gamification'\nimport { useCyberflowTheme } from '@/composables/useCyberflowTheme'\nimport type { AchievementWithProgress, AchievementTier, AchievementCategory } from '@/types/gamification'\nimport {\n  Rocket, Target, Award, Crown, Flame, Clock, Hourglass, Layers,\n  Calendar, Trophy, Star, RefreshCw, Shield, Timer, Brain,\n  Zap, Infinity, Activity, Layout, Columns, Smartphone, Palette,\n  Moon, Sunrise, CheckCircle, Database, Lock, ChevronRight\n} from 'lucide-vue-next'\n\nconst props = withDefaults(defineProps<{\n  showAll?: boolean\n}>(), {\n  showAll: false\n})\n\nconst emit = defineEmits<{\n  openAchievements: []\n}>()\n\nconst gamificationStore = useGamificationStore()\nconst { cyberflowClasses } = useCyberflowTheme()\n\n// Icon mapping\nconst iconMap: Record<string, any> = {\n  rocket: Rocket, target: Target, award: Award, crown: Crown, flame: Flame,\n  clock: Clock, hourglass: Hourglass, layers: Layers, fire: Flame,\n  calendar: Calendar, trophy: Trophy, star: Star, 'refresh-cw': RefreshCw,\n  shield: Shield, timer: Timer, brain: Brain, zap: Zap, infinity: Infinity,\n  activity: Activity, layout: Layout, columns: Columns, smartphone: Smartphone,\n  palette: Palette, moon: Moon, sunrise: Sunrise, 'check-circle': CheckCircle,\n  database: Database\n}\n\n// Category icon shapes (simple SVG fallback)\nconst categoryIcons: Record<AchievementCategory, any> = {\n  productivity: Rocket,\n  consistency: Flame,\n  mastery: Crown,\n  exploration: Layers,\n  secret: Shield\n}\n\nfunction getIconComponent(achievement: AchievementWithProgress) {\n  return iconMap[achievement.icon] || categoryIcons[achievement.category] || Award\n}\n\n// Get 6 achievements: earned first (most recent), then in-progress\nconst displayAchievements = computed((): AchievementWithProgress[] => {\n  const all = gamificationStore.achievementsWithProgress\n\n  const earned = all\n    .filter(a => a.isEarned)\n    .sort((a, b) => (b.earnedAt?.getTime() || 0) - (a.earnedAt?.getTime() || 0))\n\n  const inProgress = all\n    .filter(a => !a.isEarned && !a.isSecret && a.progress > 0)\n    .sort((a, b) => {\n      const aP = a.conditionValue > 0 ? a.progress / a.conditionValue : 0\n      const bP = b.conditionValue > 0 ? b.progress / b.conditionValue : 0\n      return bP - aP\n    })\n\n  const locked = all\n    .filter(a => !a.isEarned && !a.isSecret && a.progress === 0)\n    .slice(0, 6)\n\n  const combined = [...earned, ...inProgress, ...locked]\n  return props.showAll ? combined : combined.slice(0, 6)\n})\n\nconst earnedCount = computed(() => gamificationStore.unlockedAchievementsCount)\nconst totalCount = computed(() => gamificationStore.achievements.length)\nconst hasAchievements = computed(() => gamificationStore.achievements.length > 0)\n\n// Tier color mapping (for icon glow)\nconst tierColorMap: Record<AchievementTier, string> = {\n  bronze: 'rgba(205, 127, 50, 1)',\n  silver: 'rgba(192, 192, 192, 1)',\n  gold: 'rgba(255, 215, 0, 1)',\n  platinum: 'rgba(229, 228, 226, 1)'\n}\n\nfunction getTierColor(tier: AchievementTier): string {\n  return tierColorMap[tier]\n}\n\n// Tier glow for icon (drop-shadow filter)\nfunction getTierGlow(tier: AchievementTier): string {\n  const color = tierColorMap[tier]\n  return `drop-shadow(0 0 8px ${color}) drop-shadow(0 0 16px ${color})`\n}\n\nfunction getProgressPercent(achievement: AchievementWithProgress): number {\n  if (achievement.isEarned) return 100\n  if (achievement.conditionValue <= 0) return 0\n  return Math.min(100, Math.round((achievement.progress / achievement.conditionValue) * 100))\n}\n</script>\n\n<template>\n  <div\n    class=\"cyber-achievements\"\n    :class=\"cyberflowClasses\"\n    data-augmented-ui=\"tl-clip br-clip border\"\n  >\n    <!-- Panel Header -->\n    <div class=\"ca-header\">\n      <Trophy :size=\"16\" class=\"ca-header-icon\" />\n      <span class=\"ca-header-text\">ACHIEVEMENTS</span>\n      <span class=\"ca-header-count\">{{ earnedCount }}/{{ totalCount }}</span>\n    </div>\n\n    <!-- Achievement Grid: 4 cols full, 3 cols compact -->\n    <div\n      v-if=\"hasAchievements && displayAchievements.length > 0\"\n      class=\"ca-grid\"\n      :class=\"{ 'ca-grid--full': showAll }\"\n    >\n      <div\n        v-for=\"achievement in displayAchievements\"\n        :key=\"achievement.id\"\n        class=\"ca-item\"\n        :class=\"{\n          'ca-item--earned': achievement.isEarned,\n          'ca-item--locked': !achievement.isEarned && (achievement.isSecret || achievement.progress === 0)\n        }\"\n        :title=\"achievement.isSecret && !achievement.isEarned ? '???' : achievement.name\"\n      >\n        <!-- Large Icon with Tier Glow -->\n        <div class=\"ca-icon-wrap\">\n          <component\n            :is=\"achievement.isSecret && !achievement.isEarned ? Lock : getIconComponent(achievement)\"\n            :size=\"48\"\n            class=\"ca-icon\"\n            :class=\"{ 'ca-icon--locked': !achievement.isEarned && (achievement.isSecret || achievement.progress === 0) }\"\n            :style=\"{\n              color: achievement.isEarned ? getTierColor(achievement.tier) : undefined,\n              filter: achievement.isEarned ? getTierGlow(achievement.tier) : undefined\n            }\"\n          />\n\n          <!-- Earned Badge Overlay -->\n          <div v-if=\"achievement.isEarned\" class=\"ca-earned-badge\">\n            <CheckCircle :size=\"14\" />\n          </div>\n        </div>\n\n        <!-- Name (1 line max) -->\n        <span class=\"ca-name\">\n          {{ achievement.isSecret && !achievement.isEarned ? '???' : achievement.name }}\n        </span>\n\n        <!-- Progress Bar (in-progress only) -->\n        <div\n          v-if=\"!achievement.isEarned && !achievement.isSecret && achievement.progress > 0\"\n          class=\"ca-progress\"\n        >\n          <div\n            class=\"ca-progress-fill\"\n            :style=\"{ width: `${getProgressPercent(achievement)}%` }\"\n          />\n        </div>\n      </div>\n    </div>\n\n    <!-- Empty State -->\n    <div v-else class=\"ca-empty\">\n      <Trophy :size=\"32\" class=\"ca-empty-icon\" />\n      <span class=\"ca-empty-text\">NO ACHIEVEMENTS</span>\n      <span class=\"ca-empty-sub\">Complete tasks and challenges to earn achievements</span>\n    </div>\n\n    <!-- View All Button -->\n    <button\n      v-if=\"!showAll && hasAchievements\"\n      class=\"ca-view-all\"\n      @click=\"emit('openAchievements')\"\n    >\n      <span>VIEW ALL</span>\n      <ChevronRight :size=\"14\" />\n    </button>\n  </div>\n</template>\n\n<style scoped>\n.cyber-achievements {\n  --aug-border-all: 1px;\n  --aug-border-bg: var(--cf-cyan-50, rgba(0, 240, 255, 0.5));\n  --aug-tl1: 16px;\n  --aug-br1: 16px;\n  background: var(--cf-dark-2);\n  padding: var(--space-3);\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-3);\n  height: 100%;\n}\n\n/* Header */\n.ca-header {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n}\n\n.ca-header-icon {\n  color: var(--cf-gold);\n  filter: drop-shadow(0 0 6px var(--cf-gold));\n}\n\n.ca-header-text {\n  font-family: var(--font-cyber-title);\n  font-size: var(--text-sm);\n  font-weight: 700;\n  color: var(--cf-cyan);\n  letter-spacing: 0.1em;\n  flex: 1;\n}\n\n.ca-header-count {\n  font-family: var(--font-cyber-data);\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n  padding: var(--space-0_5) var(--space-2);\n  background: rgba(var(--color-slate-50), 0.05);\n  border-radius: var(--radius-sm);\n}\n\n/* Achievement Grid: 3 columns compact, 4 columns full */\n.ca-grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: var(--space-2);\n  flex: 1;\n  align-content: start;\n}\n\n.ca-grid--full {\n  grid-template-columns: repeat(4, 1fr);\n}\n\n/* Individual Achievement Item */\n.ca-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-start;\n  gap: var(--space-2);\n  padding: var(--space-3);\n  background: var(--cf-dark-3);\n  border: 1px solid var(--border-subtle);\n  border-radius: var(--radius-sm);\n  transition: transform 0.2s ease, border-color 0.2s ease;\n  cursor: pointer;\n  min-height: 120px;\n}\n\n.ca-item:hover {\n  border-color: rgba(var(--color-slate-50), 0.15);\n  transform: translateY(calc(-1 * var(--space-0_5)));\n}\n\n/* Locked state: reduced opacity */\n.ca-item--locked {\n  opacity: 0.4;\n  cursor: default;\n}\n\n.ca-item--locked:hover {\n  opacity: 0.5;\n  transform: translateY(calc(-0.5 * var(--space-0_5)));\n}\n\n/* Icon Wrapper */\n.ca-icon-wrap {\n  position: relative;\n  width: calc(var(--space-8) * 2);\n  height: calc(var(--space-8) * 2);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n/* Icon (48px) */\n.ca-icon {\n  color: var(--text-secondary);\n  transition: color 0.3s ease, filter 0.3s ease;\n}\n\n.ca-icon--locked {\n  color: rgba(var(--color-slate-50), 0.2);\n}\n\n/* Earned Badge Overlay */\n.ca-earned-badge {\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: var(--space-5);\n  height: var(--space-5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--cf-cyan);\n  border-radius: var(--radius-full);\n  color: var(--cf-dark-1);\n  box-shadow: 0 0 var(--space-2) var(--cf-cyan);\n}\n\n/* Achievement Name */\n.ca-name {\n  font-family: var(--font-cyber-data);\n  font-size: var(--text-xs);\n  color: var(--text-primary);\n  text-align: center;\n  line-height: 1.3;\n  max-width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  word-break: break-word;\n}\n\n.ca-item--locked .ca-name {\n  color: var(--text-muted);\n}\n\n/* Progress Bar */\n.ca-progress {\n  width: 100%;\n  height: calc(var(--space-0_5) * 1.5);\n  background: rgba(var(--color-slate-50), 0.1);\n  border-radius: var(--radius-xs);\n  overflow: hidden;\n  margin-top: auto;\n}\n\n.ca-progress-fill {\n  height: 100%;\n  background: var(--cf-cyan);\n  border-radius: var(--radius-xs);\n  transition: width 0.4s ease;\n  box-shadow: 0 0 var(--space-1) var(--cf-cyan);\n}\n\n/* Empty State */\n.ca-empty {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: var(--space-2);\n}\n\n.ca-empty-icon {\n  color: var(--text-muted);\n  opacity: 0.3;\n}\n\n.ca-empty-text {\n  font-family: var(--font-cyber-data);\n  font-size: var(--text-sm);\n  color: var(--text-muted);\n  letter-spacing: 0.05em;\n}\n\n.ca-empty-sub {\n  font-family: var(--font-cyber-ui);\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n  opacity: 0.6;\n  text-align: center;\n}\n\n/* View All Button */\n.ca-view-all {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: var(--space-2);\n  padding: var(--space-2) var(--space-3);\n  background: rgba(0, 240, 255, 0.05);\n  border: 1px solid rgba(0, 240, 255, 0.3);\n  border-radius: var(--radius-sm);\n  color: var(--cf-cyan);\n  font-family: var(--font-cyber-title);\n  font-size: var(--text-xs);\n  font-weight: 600;\n  letter-spacing: 0.1em;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.ca-view-all:hover {\n  background: rgba(0, 240, 255, 0.1);\n  border-color: var(--cf-cyan);\n  box-shadow: 0 0 var(--space-3) rgba(0, 240, 255, 0.3);\n}\n\n/* Responsive */\n@media (max-width: 768px) {\n  .ca-grid,\n  .ca-grid--full {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n\n/* Reduced Motion */\n@media (prefers-reduced-motion: reduce) {\n  .ca-item {\n    transition: none;\n  }\n\n  .ca-icon {\n    transition: none;\n  }\n\n  .ca-progress-fill {\n    transition: none;\n  }\n\n  .ca-view-all {\n    transition: none;\n  }\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/cyber/CyberBossFight.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/cyber/CyberCharacterDrawer.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/cyber/CyberCharacterProfile.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/cyber/CyberDashboardHub.vue","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ariaVariant' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":267,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":267,"endColumn":18}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<template>\n  <div class=\"cyber-dashboard-hub\">\n    <div class=\"cdh-grid\">\n      <!-- Card 1: CHARACTER -->\n      <CyberSummaryCard\n        title=\"CHARACTER\"\n        accent-color=\"var(--cf-cyan)\"\n        clickable\n        @click=\"emit('openCharacter')\"\n      >\n        <div class=\"cdh-character\">\n          <img\n            :src=\"avatarUrl\"\n            alt=\"Character Avatar\"\n            class=\"cdh-character-avatar\"\n          >\n          <div class=\"cdh-character-info\">\n            <div class=\"cdh-character-level\">\n              LEVEL {{ currentLevel }}\n            </div>\n            <div class=\"cdh-character-xp-bar\">\n              <div\n                class=\"cdh-character-xp-fill\"\n                :style=\"{ width: `${levelInfo.progressPercent}%` }\"\n              />\n            </div>\n            <div class=\"cdh-character-xp-text\">\n              {{ levelInfo.currentXp }} / {{ levelInfo.xpForNextLevel }} XP\n            </div>\n            <div class=\"cdh-character-streak\">\n              <span class=\"cdh-streak-icon\">🔥</span>\n              {{ streakInfo.currentStreak }} day streak\n            </div>\n            <div class=\"cdh-character-class\">\n              NETRUNNER\n            </div>\n          </div>\n        </div>\n      </CyberSummaryCard>\n\n      <!-- Card 2: MISSIONS -->\n      <CyberSummaryCard\n        title=\"DAILY BRIEFING\"\n        accent-color=\"var(--cf-cyan)\"\n        clickable\n        @click=\"emit('navigate', 'missions')\"\n      >\n        <div class=\"cdh-missions\">\n          <div class=\"cdh-missions-completion\">\n            {{ completedTodayCount }}/3 CLEARED\n          </div>\n          <div class=\"cdh-missions-progress-bar\">\n            <div\n              class=\"cdh-missions-progress-fill\"\n              :style=\"{ width: `${missionCompletionPercent}%` }\"\n            />\n          </div>\n          <div class=\"cdh-missions-expiry\">\n            {{ missionsStatus }}\n          </div>\n        </div>\n      </CyberSummaryCard>\n\n      <!-- Card 3: BOSS THREAT -->\n      <CyberSummaryCard\n        title=\"BOSS THREAT\"\n        accent-color=\"var(--cf-magenta)\"\n        clickable\n        @click=\"emit('navigate', 'boss')\"\n      >\n        <div class=\"cdh-boss\">\n          <template v-if=\"activeBoss\">\n            <div class=\"cdh-boss-name\">\n              {{ activeBoss.title }}\n            </div>\n            <div class=\"cdh-boss-hp-bar\">\n              <div\n                class=\"cdh-boss-hp-fill\"\n                :class=\"bossHpColorClass\"\n                :style=\"{ width: `${bossHpPercent}%` }\"\n              />\n            </div>\n            <div class=\"cdh-boss-hp-text\">\n              {{ bossHpPercent }}% HP\n            </div>\n            <div class=\"cdh-boss-phase\">\n              {{ activeBoss.difficulty.toUpperCase() }}\n            </div>\n            <div class=\"cdh-boss-time\">\n              {{ bossTimeLeft }}\n            </div>\n          </template>\n          <template v-else>\n            <div class=\"cdh-boss-empty-title\">\n              NO ACTIVE THREAT\n            </div>\n            <div class=\"cdh-boss-empty-subtitle\">\n              SYSTEMS NOMINAL\n            </div>\n          </template>\n        </div>\n      </CyberSummaryCard>\n\n      <!-- Card 4: UPGRADES -->\n      <CyberSummaryCard\n        title=\"UPGRADES\"\n        accent-color=\"var(--cf-gold)\"\n        clickable\n        @click=\"emit('navigate', 'upgrades')\"\n      >\n        <div class=\"cdh-upgrades\">\n          <div class=\"cdh-upgrades-achievements\">\n            {{ unlockedAchievementsCount }}/{{ totalAchievementsCount }} trophies\n          </div>\n          <div class=\"cdh-upgrades-credits\">\n            {{ availableXp }} XP\n          </div>\n          <div class=\"cdh-upgrades-featured\">\n            {{ featuredItemText }}\n          </div>\n        </div>\n      </CyberSummaryCard>\n    </div>\n\n    <!-- System Status Footer (Compact Single Line) -->\n    <div class=\"cdh-system-status\">\n      <div class=\"cdh-aria-message\">\n        <span class=\"cdh-aria-label\">ARIA:</span>\n        <span class=\"cdh-aria-text\">{{ ariaGreeting }}</span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from 'vue'\nimport { storeToRefs } from 'pinia'\nimport { useGamificationStore } from '@/stores/gamification'\nimport { useChallengesStore } from '@/stores/challenges'\nimport { useAuthStore } from '@/stores/auth'\nimport CyberSummaryCard from './CyberSummaryCard.vue'\nimport { EXTERNAL_URLS } from '@/config/urls'\n\nconst emit = defineEmits<{\n  navigate: [section: 'missions' | 'boss' | 'upgrades' | 'achievements']\n  openCharacter: []\n}>()\n\nconst gamificationStore = useGamificationStore()\nconst challengesStore = useChallengesStore()\nconst authStore = useAuthStore()\n\nconst {\n  currentLevel,\n  levelInfo,\n  streakInfo,\n  availableXp,\n  achievements,\n  earnedAchievements,\n  shopItemsWithOwnership\n} = storeToRefs(gamificationStore)\n\nconst { activeDailies, activeBoss, completedTodayCount: storeCompletedToday } = storeToRefs(challengesStore)\n\n// Avatar URL from email seed\nconst avatarUrl = computed(() => {\n  const email = authStore.user?.email || 'default'\n  return `${EXTERNAL_URLS.DICEBEAR_API}?seed=${encodeURIComponent(email)}`\n})\n\n// Missions card data — use the store's computed directly\nconst completedTodayCount = storeCompletedToday\n\nconst missionCompletionPercent = computed(() => {\n  // Daily target is always 3\n  return Math.min(100, (completedTodayCount.value / 3) * 100)\n})\n\nconst missionsStatus = computed(() => {\n  const incomplete = activeDailies.value.filter(d => d.status === 'active')\n\n  if (completedTodayCount.value === 3) {\n    return 'ALL CLEAR'\n  }\n\n  if (incomplete.length === 0) {\n    return 'NO ACTIVE MISSIONS'\n  }\n\n  // Find earliest expiry\n  const earliestExpiry = incomplete.reduce((earliest, mission) => {\n    if (!mission.expiresAt) return earliest\n    const expiryTime = new Date(mission.expiresAt).getTime()\n    return !earliest || expiryTime < earliest ? expiryTime : earliest\n  }, 0 as number)\n\n  if (!earliestExpiry) return 'In progress'\n\n  const now = Date.now()\n  const timeLeft = earliestExpiry - now\n  const hours = Math.floor(timeLeft / (1000 * 60 * 60))\n  const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60))\n\n  return `Next expires: ${hours}h ${minutes}m`\n})\n\n// Boss card data\nconst bossHpPercent = computed(() => {\n  if (!activeBoss.value) return 0\n  const total = activeBoss.value.objectiveTarget\n  const current = total - activeBoss.value.objectiveCurrent\n  return total > 0 ? Math.round((current / total) * 100) : 0\n})\n\nconst bossHpColorClass = computed(() => {\n  const percent = bossHpPercent.value\n  if (percent > 50) return 'hp-high'\n  if (percent > 25) return 'hp-medium'\n  return 'hp-low'\n})\n\nconst bossTimeLeft = computed(() => {\n  if (!activeBoss.value?.expiresAt) return ''\n\n  const now = Date.now()\n  const expiry = new Date(activeBoss.value.expiresAt).getTime()\n  const timeLeft = expiry - now\n\n  const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24))\n  const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))\n\n  return `${days}d ${hours}h left`\n})\n\n// Upgrades card data\nconst unlockedAchievementsCount = computed(() => earnedAchievements.value.length)\nconst totalAchievementsCount = computed(() => achievements.value.length)\n\nconst featuredItemText = computed(() => {\n  const unowned = shopItemsWithOwnership.value.filter(item => !item.isOwned)\n  if (unowned.length === 0) return 'All items owned'\n\n  const featured = unowned[0]\n  return `${featured.name} - ${featured.priceXp} XP`\n})\n\n// ARIA greeting (same logic as CyberMissionBriefing)\nconst ariaGreeting = computed(() => {\n  const completedCount = completedTodayCount.value\n  const hasActiveBoss = !!activeBoss.value\n\n  if (completedCount === 3 && !hasActiveBoss) {\n    return 'All systems optimal. Standing by for new directives.'\n  }\n\n  if (hasActiveBoss) {\n    return `Boss threat detected. Mission completion: ${completedCount}/3.`\n  }\n\n  if (completedCount === 0) {\n    return 'Daily briefing ready. Mission protocol active.'\n  }\n\n  return `${completedCount} mission${completedCount > 1 ? 's' : ''} cleared. Proceed with remaining objectives.`\n})\n\nconst ariaVariant = computed<'info' | 'warning' | 'success' | 'danger'>(() => {\n  if (activeBoss.value && bossHpPercent.value < 30) return 'warning'\n  if (completedTodayCount.value === 3) return 'success'\n  return 'info'\n})\n</script>\n\n<style scoped>\n.cyber-dashboard-hub {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-3);\n}\n\n/* Grid Layout */\n.cdh-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: var(--space-3);\n}\n\n/* CHARACTER Card */\n.cdh-character {\n  display: flex;\n  gap: var(--space-2);\n  align-items: center;\n}\n\n.cdh-character-avatar {\n  width: var(--space-12);\n  height: var(--space-12);\n  border-radius: var(--radius-md);\n  border: 2px solid var(--cf-cyan);\n  flex-shrink: 0;\n}\n\n.cdh-character-info {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-1);\n}\n\n.cdh-character-level {\n  font-family: var(--font-cyber-title);\n  font-size: var(--text-lg);\n  color: var(--cf-cyan);\n  font-weight: 700;\n  line-height: 1;\n}\n\n.cdh-character-xp-bar {\n  height: var(--space-1_5);\n  background: var(--cf-dark-2);\n  border-radius: var(--radius-full);\n  overflow: hidden;\n  position: relative;\n}\n\n.cdh-character-xp-fill {\n  height: 100%;\n  background: linear-gradient(90deg, var(--cf-cyan), var(--cf-magenta));\n  transition: width 0.3s ease;\n}\n\n.cdh-character-xp-text {\n  font-size: var(--text-2xs);\n  color: var(--text-muted);\n  font-family: var(--font-cyber-data);\n}\n\n.cdh-character-streak {\n  font-size: var(--text-xs);\n  color: var(--text-secondary);\n  font-family: var(--font-cyber-ui);\n  display: flex;\n  align-items: center;\n  gap: var(--space-1);\n}\n\n.cdh-streak-icon {\n  font-size: var(--text-sm);\n  color: var(--cf-orange);\n}\n\n.cdh-character-class {\n  font-size: var(--text-2xs);\n  color: var(--cf-magenta);\n  font-family: var(--font-cyber-title);\n  font-weight: 700;\n  padding: var(--space-0_5) var(--space-2);\n  background: var(--cf-dark-2);\n  border: 1px solid var(--cf-magenta);\n  border-radius: var(--radius-sm);\n  width: fit-content;\n}\n\n/* MISSIONS Card */\n.cdh-missions {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-2);\n}\n\n.cdh-missions-completion {\n  font-family: var(--font-cyber-title);\n  font-size: var(--text-lg);\n  color: var(--cf-cyan);\n  font-weight: 700;\n}\n\n.cdh-missions-progress-bar {\n  height: var(--space-2);\n  background: var(--cf-dark-2);\n  border-radius: var(--radius-full);\n  overflow: hidden;\n  position: relative;\n}\n\n.cdh-missions-progress-fill {\n  height: 100%;\n  background: var(--cf-cyan);\n  transition: width 0.3s ease;\n}\n\n.cdh-missions-expiry {\n  font-size: var(--text-xs);\n  color: var(--text-secondary);\n  font-family: var(--font-cyber-data);\n}\n\n/* BOSS Card */\n.cdh-boss {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-2);\n}\n\n.cdh-boss-name {\n  font-family: var(--font-cyber-title);\n  font-size: var(--text-xs);\n  color: var(--cf-magenta);\n  font-weight: 700;\n  text-transform: uppercase;\n}\n\n.cdh-boss-hp-bar {\n  height: var(--space-2);\n  background: var(--cf-dark-2);\n  border-radius: var(--radius-full);\n  overflow: hidden;\n  position: relative;\n}\n\n.cdh-boss-hp-fill {\n  height: 100%;\n  transition: width 0.3s ease;\n}\n\n.cdh-boss-hp-fill.hp-high {\n  background: var(--color-success);\n}\n\n.cdh-boss-hp-fill.hp-medium {\n  background: var(--cf-orange);\n}\n\n.cdh-boss-hp-fill.hp-low {\n  background: var(--color-danger);\n}\n\n.cdh-boss-hp-text {\n  font-size: var(--text-xs);\n  color: var(--text-secondary);\n  font-family: var(--font-cyber-data);\n}\n\n.cdh-boss-phase {\n  font-size: var(--text-xs);\n  color: var(--text-secondary);\n  font-family: var(--font-cyber-ui);\n}\n\n.cdh-boss-time {\n  font-size: var(--text-xs);\n  color: var(--cf-magenta);\n  font-family: var(--font-cyber-data);\n  font-weight: 600;\n}\n\n.cdh-boss-empty-title {\n  font-family: var(--font-cyber-title);\n  font-size: var(--text-base);\n  color: var(--text-muted);\n  font-weight: 700;\n}\n\n.cdh-boss-empty-subtitle {\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n  font-family: var(--font-cyber-data);\n}\n\n/* UPGRADES Card */\n.cdh-upgrades {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-2);\n}\n\n.cdh-upgrades-achievements {\n  font-size: var(--text-xs);\n  color: var(--text-secondary);\n  font-family: var(--font-cyber-data);\n}\n\n.cdh-upgrades-credits {\n  font-family: var(--font-cyber-title);\n  font-size: var(--text-lg);\n  color: var(--cf-lime);\n  font-weight: 700;\n}\n\n.cdh-upgrades-featured {\n  font-size: var(--text-xs);\n  color: var(--text-secondary);\n  font-family: var(--font-cyber-ui);\n}\n\n/* System Status Footer (Compact Single Line) */\n.cdh-system-status {\n  padding: var(--space-3) var(--space-4);\n  background: var(--cf-dark-3);\n  border-top: 1px solid var(--border-subtle);\n  border-radius: var(--radius-md);\n}\n\n.cdh-aria-message {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n}\n\n.cdh-aria-label {\n  font-family: var(--font-cyber-title);\n  font-size: var(--text-xs);\n  color: var(--cf-cyan);\n  font-weight: 700;\n}\n\n.cdh-aria-text {\n  font-family: var(--font-cyber-data);\n  font-size: var(--text-xs);\n  color: var(--text-secondary);\n}\n\n/* Responsive: stack grid on mobile */\n@media (max-width: 768px) {\n  .cdh-grid {\n    grid-template-columns: 1fr;\n  }\n\n  .cdh-character-avatar {\n    width: var(--space-10);\n    height: var(--space-10);\n  }\n\n  .cdh-aria-message {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: var(--space-1);\n  }\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/cyber/CyberMissionBriefing.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/cyber/CyberMissionCard.vue","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'current' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":98,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":98,"endColumn":16}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<script setup lang=\"ts\">\n/**\n * CyberMissionCard Component\n * FEATURE-1132: Interactive, game-quality mission card\n *\n * Visual novel-styled with clear icons showing what to do in the app.\n * Clickable to activate (make it your focus mission).\n */\nimport { computed, ref, onMounted, onUnmounted } from 'vue'\nimport type { Challenge } from '@/types/challenges'\nimport {\n  CheckSquare,\n  Timer,\n  AlertTriangle,\n  Clock,\n  Flame,\n  Folder,\n  Sunrise,\n  Layers,\n  Zap,\n} from 'lucide-vue-next'\n\nconst props = defineProps<{\n  challenge: Challenge\n  isActive?: boolean\n}>()\n\nconst emit = defineEmits<{\n  activate: []\n}>()\n\n// Reactive time remaining (updates every 60s)\nconst now = ref(new Date())\nlet timer: ReturnType<typeof setInterval> | null = null\n\nonMounted(() => {\n  timer = setInterval(() => { now.value = new Date() }, 60_000)\n})\n\nonUnmounted(() => {\n  if (timer) clearInterval(timer)\n})\n\n// Progress\nconst progressPercent = computed(() =>\n  Math.min(100, Math.round((props.challenge.objectiveCurrent / props.challenge.objectiveTarget) * 100))\n)\n\n// Time remaining\nconst timeRemaining = computed(() => {\n  const ms = props.challenge.expiresAt.getTime() - now.value.getTime()\n  const hours = Math.floor(ms / (1000 * 60 * 60))\n  if (hours > 24) {\n    const days = Math.floor(hours / 24)\n    return `${days}d left`\n  }\n  return `${hours}h left`\n})\n\n// Difficulty color mapping\nconst difficultyColor = computed(() => {\n  switch (props.challenge.difficulty) {\n    case 'easy': return 'var(--cf-lime)'\n    case 'normal': return 'var(--cf-cyan)'\n    case 'hard': return 'var(--cf-orange)'\n    case 'boss': return 'var(--cf-magenta)'\n    default: return 'var(--cf-cyan)'\n  }\n})\n\nconst difficultyColorDim = computed(() => {\n  switch (props.challenge.difficulty) {\n    case 'easy': return 'var(--cf-lime-20)'\n    case 'normal': return 'var(--cf-cyan-20)'\n    case 'hard': return 'var(--cf-orange-20)'\n    case 'boss': return 'var(--cf-magenta-20)'\n    default: return 'var(--cf-cyan-20)'\n  }\n})\n\n// Objective icon mapping (CLEAR VISUAL LANGUAGE)\nconst objectiveIcon = computed(() => {\n  switch (props.challenge.objectiveType) {\n    case 'complete_tasks': return CheckSquare\n    case 'complete_pomodoros': return Timer\n    case 'clear_overdue': return AlertTriangle\n    case 'focus_time_minutes': return Clock\n    case 'complete_high_priority': return Flame\n    case 'complete_project_tasks': return Folder\n    case 'complete_before_hour': return Sunrise\n    case 'complete_variety': return Layers\n    default: return CheckSquare\n  }\n})\n\n// Objective text (CLEAR ACTION VERBS)\nconst objectiveText = computed(() => {\n  const current = props.challenge.objectiveCurrent\n  const target = props.challenge.objectiveTarget\n  const ctx = props.challenge.objectiveContext\n\n  switch (props.challenge.objectiveType) {\n    case 'complete_tasks':\n      return `Complete ${target} task${target > 1 ? 's' : ''}`\n    case 'complete_pomodoros':\n      return `Do ${target} pomodoro${target > 1 ? 's' : ''}`\n    case 'clear_overdue':\n      return `Clear ${target} overdue task${target > 1 ? 's' : ''}`\n    case 'focus_time_minutes':\n      return `Focus ${target} minutes`\n    case 'complete_high_priority':\n      return `Clear ${target} urgent task${target > 1 ? 's' : ''}`\n    case 'complete_project_tasks':\n      return `${target} task${target > 1 ? 's' : ''} in ${ctx?.projectName || 'project'}`\n    case 'complete_before_hour':\n      return `${target} task${target > 1 ? 's' : ''} before ${ctx?.hour}:00`\n    case 'complete_variety':\n      return `Tasks across ${target} projects`\n    default:\n      return props.challenge.description\n  }\n})\n\n// Status\nconst isCompleted = computed(() => props.challenge.status === 'completed')\nconst isFailed = computed(() => props.challenge.status === 'failed' || props.challenge.status === 'expired')\n\nfunction handleClick() {\n  if (!isCompleted.value && !isFailed.value) {\n    emit('activate')\n  }\n}\n</script>\n\n<template>\n  <div\n    class=\"mission-card\"\n    :class=\"{\n      'mission-card--active': isActive,\n      'mission-card--completed': isCompleted,\n      'mission-card--failed': isFailed,\n    }\"\n    :style=\"{\n      '--mission-accent': difficultyColor,\n      '--mission-accent-dim': difficultyColorDim,\n    }\"\n    @click=\"handleClick\"\n  >\n    <!-- Left: Objective Icon (BIG, CLEAR) -->\n    <div class=\"mission-card__icon-box\">\n      <component\n        :is=\"objectiveIcon\"\n        class=\"mission-card__icon\"\n        :size=\"40\"\n      />\n    </div>\n\n    <!-- Center: Objective + Progress -->\n    <div class=\"mission-card__content\">\n      <h3 class=\"mission-card__objective\">\n        {{ objectiveText }}\n      </h3>\n\n      <!-- Progress bar -->\n      <div class=\"mission-card__progress-row\">\n        <div class=\"mission-card__progress-track\">\n          <div\n            class=\"mission-card__progress-fill\"\n            :style=\"{ width: `${progressPercent}%` }\"\n          />\n        </div>\n        <span class=\"mission-card__progress-text\">{{ challenge.objectiveCurrent }}/{{ challenge.objectiveTarget }}</span>\n      </div>\n\n      <!-- Difficulty + Time -->\n      <div class=\"mission-card__meta\">\n        <span class=\"mission-card__difficulty\">{{ challenge.difficulty.toUpperCase() }}</span>\n        <span class=\"mission-card__time\">{{ timeRemaining }}</span>\n      </div>\n    </div>\n\n    <!-- Right: XP Badge + Activate Button -->\n    <div class=\"mission-card__right\">\n      <!-- XP Badge -->\n      <div class=\"mission-card__xp-badge\">\n        <Zap :size=\"14\" />\n        <span>+{{ challenge.rewardXp }}</span>\n      </div>\n\n      <!-- Activate Button (only visible when not active) -->\n      <button\n        v-if=\"!isActive && !isCompleted && !isFailed\"\n        class=\"mission-card__activate-btn\"\n        @click.stop=\"handleClick\"\n      >\n        ACTIVATE\n      </button>\n\n      <!-- Active indicator -->\n      <div v-if=\"isActive && !isCompleted && !isFailed\" class=\"mission-card__active-indicator\">\n        ACTIVE\n      </div>\n\n      <!-- Completed/Failed badge -->\n      <div v-if=\"isCompleted\" class=\"mission-card__status-badge mission-card__status-badge--completed\">\n        ✓ DONE\n      </div>\n      <div v-if=\"isFailed\" class=\"mission-card__status-badge mission-card__status-badge--failed\">\n        FAILED\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.mission-card {\n  display: flex;\n  align-items: center;\n  gap: var(--space-3);\n  background: var(--cf-dark-3);\n  border: 2px solid var(--mission-accent-dim);\n  border-radius: var(--radius-md);\n  padding: var(--space-3);\n  min-height: 90px;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n\n/* Glow overlay on hover */\n.mission-card::before {\n  content: '';\n  position: absolute;\n  inset: 0;\n  background: radial-gradient(circle at 50% 50%, var(--mission-accent-dim), transparent 70%);\n  opacity: 0;\n  transition: opacity 0.3s ease;\n  pointer-events: none;\n}\n\n.mission-card:hover::before {\n  opacity: 0.2;\n}\n\n/* Active state */\n.mission-card--active {\n  border-color: var(--mission-accent);\n  transform: scale(1.02);\n  box-shadow: 0 0 var(--space-6) var(--mission-accent-dim), 0 var(--space-1) var(--space-3) rgba(var(--color-slate-900), 0.3);\n}\n\n.mission-card--active::before {\n  opacity: 0.25;\n}\n\n/* Inactive siblings when one is active */\n.mission-card:not(.mission-card--active) {\n  opacity: 0.6;\n}\n\n.mission-card--active:hover {\n  transform: scale(1.03);\n  box-shadow: 0 0 var(--space-8) var(--mission-accent-dim), 0 var(--space-1_5) var(--space-4) rgba(var(--color-slate-900), 0.4);\n}\n\n/* Completed state */\n.mission-card--completed {\n  border-color: var(--cf-lime);\n  opacity: 0.7;\n  cursor: default;\n}\n\n.mission-card--completed:hover::before {\n  opacity: 0;\n}\n\n/* Failed state */\n.mission-card--failed {\n  border-color: var(--cf-magenta);\n  opacity: 0.5;\n  cursor: default;\n}\n\n.mission-card--failed:hover::before {\n  opacity: 0;\n}\n\n/* Icon Box */\n.mission-card__icon-box {\n  flex-shrink: 0;\n  width: calc(var(--space-6) + var(--space-3));\n  height: calc(var(--space-6) + var(--space-3));\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--mission-accent-dim);\n  border: 2px solid var(--mission-accent);\n  border-radius: var(--radius-md);\n  box-shadow: 0 0 var(--space-4) var(--mission-accent-dim);\n  transition: all 0.3s ease;\n}\n\n.mission-card--active .mission-card__icon-box {\n  box-shadow: 0 0 var(--space-6) var(--mission-accent);\n}\n\n.mission-card__icon {\n  color: var(--mission-accent);\n  filter: drop-shadow(0 0 var(--space-1_5) var(--mission-accent));\n}\n\n/* Content */\n.mission-card__content {\n  flex: 1;\n  min-width: 0;\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-1);\n}\n\n.mission-card__objective {\n  margin: 0;\n  font-family: var(--font-cyber-title);\n  font-size: var(--text-base);\n  font-weight: 700;\n  color: var(--text-primary);\n  letter-spacing: 0.01em;\n  line-height: 1.3;\n}\n\n/* Progress Row */\n.mission-card__progress-row {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n}\n\n.mission-card__progress-track {\n  flex: 1;\n  height: var(--space-1_5);\n  background: var(--cf-dark-2);\n  border-radius: calc(var(--space-0_5) * 1.5);\n  overflow: hidden;\n  border: 1px solid var(--border-subtle);\n}\n\n.mission-card__progress-fill {\n  height: 100%;\n  background: linear-gradient(90deg, var(--mission-accent), var(--cf-cyan));\n  border-radius: calc(var(--space-0_5) * 1.5);\n  transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 0 var(--space-2) var(--mission-accent);\n}\n\n.mission-card--active .mission-card__progress-fill {\n  box-shadow: 0 0 var(--space-3) var(--mission-accent);\n}\n\n.mission-card__progress-text {\n  font-family: var(--font-cyber-data);\n  font-size: var(--text-sm);\n  font-weight: 700;\n  color: var(--text-secondary);\n  min-width: var(--space-10);\n  text-align: right;\n}\n\n/* Meta row */\n.mission-card__meta {\n  display: flex;\n  align-items: center;\n  gap: var(--space-3);\n  font-family: var(--font-cyber-data);\n  font-size: var(--text-xs);\n  letter-spacing: 0.06em;\n}\n\n.mission-card__difficulty {\n  font-weight: 700;\n  color: var(--mission-accent);\n  opacity: 0.9;\n}\n\n.mission-card__time {\n  font-weight: 600;\n  color: var(--text-muted);\n}\n\n/* Right section */\n.mission-card__right {\n  flex-shrink: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  gap: var(--space-2);\n}\n\n/* XP Badge */\n.mission-card__xp-badge {\n  display: flex;\n  align-items: center;\n  gap: var(--space-1);\n  padding: var(--space-1) var(--space-2);\n  background: var(--cf-dark-2);\n  border: 1px solid var(--cf-gold);\n  border-radius: var(--radius-sm);\n  font-family: var(--font-cyber-data);\n  font-size: var(--text-sm);\n  font-weight: 700;\n  color: var(--cf-gold);\n  box-shadow: 0 0 var(--space-2_5) rgba(255, 193, 7, 0.2);\n}\n\n.mission-card__xp-badge svg {\n  color: var(--cf-gold);\n}\n\n/* Activate Button */\n.mission-card__activate-btn {\n  padding: var(--space-1) var(--space-3);\n  background: var(--cf-dark-2);\n  border: 1px solid var(--mission-accent);\n  border-radius: var(--radius-sm);\n  color: var(--mission-accent);\n  font-family: var(--font-cyber-data);\n  font-size: var(--text-xs);\n  font-weight: 700;\n  letter-spacing: 0.08em;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.mission-card__activate-btn:hover {\n  background: var(--mission-accent-dim);\n  border-color: var(--mission-accent);\n  box-shadow: 0 0 var(--space-3) var(--mission-accent-dim);\n  transform: translateY(calc(-0.5 * var(--space-0_5)));\n}\n\n/* Active indicator */\n.mission-card__active-indicator {\n  padding: var(--space-1) var(--space-3);\n  background: var(--mission-accent);\n  border: 1px solid var(--mission-accent);\n  border-radius: var(--radius-sm);\n  color: var(--cf-dark-1);\n  font-family: var(--font-cyber-data);\n  font-size: var(--text-xs);\n  font-weight: 700;\n  letter-spacing: 0.08em;\n  box-shadow: 0 0 var(--space-4) var(--mission-accent);\n  animation: pulse-glow 2s ease-in-out infinite;\n}\n\n@keyframes pulse-glow {\n  0%, 100% {\n    box-shadow: 0 0 var(--space-4) var(--mission-accent);\n  }\n  50% {\n    box-shadow: 0 0 var(--space-6) var(--mission-accent);\n  }\n}\n\n/* Status badges */\n.mission-card__status-badge {\n  padding: var(--space-1) var(--space-2);\n  border-radius: var(--radius-sm);\n  font-family: var(--font-cyber-data);\n  font-size: var(--text-xs);\n  font-weight: 700;\n  letter-spacing: 0.08em;\n}\n\n.mission-card__status-badge--completed {\n  background: var(--cf-lime);\n  color: var(--cf-dark-1);\n  border: 1px solid var(--cf-lime);\n  box-shadow: 0 0 var(--space-3) var(--cf-lime-20);\n}\n\n.mission-card__status-badge--failed {\n  background: var(--cf-magenta);\n  color: var(--cf-dark-1);\n  border: 1px solid var(--cf-magenta);\n  box-shadow: 0 0 var(--space-3) var(--cf-magenta-20);\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .mission-card,\n  .mission-card::before,\n  .mission-card__progress-fill,\n  .mission-card__activate-btn,\n  .mission-card__icon-box {\n    transition: none;\n  }\n\n  .mission-card__active-indicator {\n    animation: none;\n  }\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/cyber/CyberSectionNav.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/cyber/CyberShop.vue","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":64,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2162,2165],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2162,2165],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<script setup lang=\"ts\">\n/**\n * CyberShop - Visual Novel Shop Catalog\n * FEATURE-1118 Cyberflow RPG Hub: Bottom-right panel\n *\n * Icon-dominant item cards with big category icons, rarity glow borders,\n * compact layout. Visual novel aesthetic: show, don't tell.\n */\nimport { computed, ref } from 'vue'\nimport { useGamificationStore } from '@/stores/gamification'\nimport { useCyberflowTheme } from '@/composables/useCyberflowTheme'\nimport type { ShopItemWithOwnership, ShopCategory } from '@/types/gamification'\nimport { ChevronRight, ShoppingBag, Check, Lock, Palette, Hexagon, Sparkles, Radio } from 'lucide-vue-next'\n\nconst props = withDefaults(defineProps<{\n  showAll?: boolean\n}>(), {\n  showAll: false\n})\n\nconst emit = defineEmits<{\n  openShop: []\n}>()\n\nconst gamificationStore = useGamificationStore()\nconst { cyberflowClasses } = useCyberflowTheme()\n\n// Purchase state tracking\nconst purchasingId = ref<string | null>(null)\n\n// XP balance\nconst availableXp = computed(() => gamificationStore.availableXp)\nconst currentLevel = computed(() => gamificationStore.currentLevel)\n\n// Get 3 featured items (available, not owned, sorted by price)\nconst featuredItems = computed((): ShopItemWithOwnership[] => {\n  const all = gamificationStore.shopItemsWithOwnership\n\n  // Prioritize: available + affordable + not owned, then available + not owned\n  const available = all\n    .filter(item => item.isAvailable)\n    .sort((a, b) => {\n      // Owned items last\n      if (a.isOwned !== b.isOwned) return a.isOwned ? 1 : -1\n      // Then by price ascending\n      return a.priceXp - b.priceXp\n    })\n\n  return props.showAll ? available : available.slice(0, 3)\n})\n\nconst hasItems = computed(() => gamificationStore.shopItems.length > 0)\n\n// Rarity color mapping based on price tiers\nfunction getItemRarity(item: ShopItemWithOwnership): 'common' | 'uncommon' | 'rare' | 'epic' | 'legendary' {\n  if (item.priceXp >= 2000) return 'legendary'\n  if (item.priceXp >= 1000) return 'epic'\n  if (item.priceXp >= 500) return 'rare'\n  if (item.priceXp >= 200) return 'uncommon'\n  return 'common'\n}\n\n// Category icon components (Lucide icons)\nconst categoryIcons: Record<ShopCategory, any> = {\n  theme: Palette,\n  badge_style: Hexagon,\n  animation: Sparkles,\n  sound: Radio\n}\n\nfunction getCategoryIcon(category: ShopCategory) {\n  return categoryIcons[category] || Palette\n}\n\nfunction canAfford(item: ShopItemWithOwnership): boolean {\n  return availableXp.value >= item.priceXp\n}\n\nfunction meetsLevel(item: ShopItemWithOwnership): boolean {\n  return currentLevel.value >= item.requiredLevel\n}\n\nasync function handlePurchase(item: ShopItemWithOwnership) {\n  if (item.isOwned || !canAfford(item) || !meetsLevel(item) || purchasingId.value) return\n\n  purchasingId.value = item.id\n  try {\n    await gamificationStore.purchaseItem(item.id)\n  } finally {\n    purchasingId.value = null\n  }\n}\n</script>\n\n<template>\n  <div\n    class=\"cyber-shop\"\n    :class=\"cyberflowClasses\"\n    data-augmented-ui=\"tl-clip br-clip border\"\n  >\n    <!-- Panel Header with XP Balance -->\n    <div class=\"cs-header\">\n      <ShoppingBag :size=\"16\" class=\"cs-header-icon\" />\n      <span class=\"cs-header-text\">SHOP</span>\n      <div class=\"cs-credits\">\n        <span class=\"cs-credits-value\">{{ availableXp.toLocaleString() }}</span>\n        <span class=\"cs-credits-label\">XP</span>\n      </div>\n    </div>\n\n    <!-- Featured Items -->\n    <div\n      v-if=\"hasItems && featuredItems.length > 0\"\n      class=\"cs-items\"\n    >\n      <div\n        v-for=\"item in featuredItems\"\n        :key=\"item.id\"\n        class=\"cs-item\"\n        :class=\"[\n          `cs-item--${getItemRarity(item)}`,\n          {\n            'cs-item--owned': item.isOwned,\n            'cs-item--locked': !meetsLevel(item)\n          }\n        ]\"\n      >\n        <!-- Large Category Icon -->\n        <div class=\"cs-icon-wrap\">\n          <component\n            :is=\"getCategoryIcon(item.category)\"\n            :size=\"40\"\n            class=\"cs-icon\"\n          />\n\n          <!-- Owned Badge Overlay -->\n          <div v-if=\"item.isOwned\" class=\"cs-owned-badge\">\n            <Check :size=\"14\" />\n          </div>\n        </div>\n\n        <!-- Item Info -->\n        <div class=\"cs-info\">\n          <span class=\"cs-name\">{{ item.name }}</span>\n          <span class=\"cs-desc\">{{ item.description }}</span>\n        </div>\n\n        <!-- Price / Status -->\n        <div class=\"cs-footer\">\n          <template v-if=\"item.isOwned\">\n            <div class=\"cs-status cs-status--owned\">\n              <Check :size=\"12\" />\n            </div>\n          </template>\n          <template v-else-if=\"!meetsLevel(item)\">\n            <div class=\"cs-status cs-status--locked\">\n              <Lock :size=\"12\" />\n              <span>LVL {{ item.requiredLevel }}</span>\n            </div>\n          </template>\n          <template v-else>\n            <div class=\"cs-price\" :class=\"{ 'cs-price--cant-afford': !canAfford(item) }\">\n              <span class=\"cs-price-value\">{{ item.priceXp.toLocaleString() }}</span>\n              <span class=\"cs-price-label\">XP</span>\n            </div>\n            <button\n              class=\"cs-buy\"\n              :disabled=\"!canAfford(item) || purchasingId === item.id\"\n              @click=\"handlePurchase(item)\"\n            >\n              {{ purchasingId === item.id ? '...' : 'BUY' }}\n            </button>\n          </template>\n        </div>\n      </div>\n    </div>\n\n    <!-- Empty State -->\n    <div v-else class=\"cs-empty\">\n      <ShoppingBag :size=\"32\" class=\"cs-empty-icon\" />\n      <span class=\"cs-empty-text\">SHOP OFFLINE</span>\n      <span class=\"cs-empty-sub\">Connect to sync to browse available items</span>\n    </div>\n\n    <!-- Browse Shop Button -->\n    <button\n      v-if=\"!showAll && hasItems\"\n      class=\"cs-browse\"\n      @click=\"emit('openShop')\"\n    >\n      <span>BROWSE SHOP</span>\n      <ChevronRight :size=\"14\" />\n    </button>\n  </div>\n</template>\n\n<style scoped>\n.cyber-shop {\n  --aug-border-all: 1px;\n  --aug-border-bg: var(--cf-magenta-50, rgba(255, 0, 153, 0.5));\n  --aug-tl1: 16px;\n  --aug-br1: 16px;\n  background: var(--cf-dark-2);\n  padding: var(--space-3);\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-3);\n  height: 100%;\n}\n\n/* Header */\n.cs-header {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n}\n\n.cs-header-icon {\n  color: var(--cf-magenta);\n  filter: drop-shadow(0 0 6px var(--cf-magenta));\n}\n\n.cs-header-text {\n  font-family: var(--font-cyber-title);\n  font-size: var(--text-sm);\n  font-weight: 700;\n  color: var(--cf-cyan);\n  letter-spacing: 0.1em;\n  flex: 1;\n}\n\n.cs-credits {\n  display: flex;\n  align-items: baseline;\n  gap: var(--space-1);\n  padding: var(--space-1) var(--space-2_5);\n  background: rgba(57, 255, 20, 0.05);\n  border-radius: var(--radius-sm);\n  border: var(--space-0_5) solid rgba(57, 255, 20, 0.2);\n}\n\n.cs-credits-value {\n  font-family: var(--font-cyber-data);\n  font-size: var(--text-sm);\n  font-weight: 700;\n  color: var(--cf-lime);\n  text-shadow: 0 0 var(--space-2) var(--cf-lime);\n}\n\n.cs-credits-label {\n  font-family: var(--font-cyber-data);\n  font-size: var(--text-xs);\n  color: rgba(57, 255, 20, 0.5);\n}\n\n/* Items Container */\n.cs-items {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-2);\n  flex: 1;\n  overflow-y: auto;\n}\n\n/* Individual Item Card (~60px tall) */\n.cs-item {\n  background: var(--cf-dark-3);\n  padding: var(--space-2);\n  display: flex;\n  align-items: center;\n  gap: var(--space-3);\n  border-radius: var(--radius-lg);\n  border: var(--space-0_5) solid var(--border-subtle);\n  transition: all 0.2s ease;\n  min-height: var(--space-15);\n}\n\n.cs-item:hover {\n  transform: translateY(calc(-1 * var(--space-0_5)));\n  border-color: rgba(255, 255, 255, 0.15);\n}\n\n/* Rarity border glow */\n.cs-item--common {\n  border-color: rgba(255, 255, 255, 0.15);\n}\n\n.cs-item--uncommon {\n  border-color: var(--cf-lime);\n  box-shadow: 0 0 var(--space-2) rgba(57, 255, 20, 0.2);\n}\n\n.cs-item--rare {\n  border-color: rgba(0, 150, 255, 1);\n  box-shadow: 0 0 var(--space-3) rgba(0, 150, 255, 0.3);\n}\n\n.cs-item--epic {\n  border-color: rgba(147, 51, 234, 1);\n  box-shadow: 0 0 var(--space-3) rgba(147, 51, 234, 0.4);\n}\n\n.cs-item--legendary {\n  border-color: var(--cf-gold);\n  box-shadow: 0 0 var(--space-4) rgba(255, 215, 0, 0.4);\n}\n\n/* Owned state */\n.cs-item--owned {\n  border-color: var(--cf-cyan);\n  opacity: 0.7;\n}\n\n/* Locked state */\n.cs-item--locked {\n  opacity: 0.5;\n}\n\n/* Icon Wrapper */\n.cs-icon-wrap {\n  position: relative;\n  width: var(--space-12);\n  height: var(--space-12);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  background: rgba(255, 255, 255, 0.03);\n  border-radius: var(--radius-sm);\n}\n\n/* Icon (40px) */\n.cs-icon {\n  color: var(--text-secondary);\n}\n\n.cs-item--uncommon .cs-icon { color: var(--cf-lime); }\n.cs-item--rare .cs-icon { color: rgba(0, 150, 255, 1); }\n.cs-item--epic .cs-icon { color: rgba(147, 51, 234, 1); }\n.cs-item--legendary .cs-icon { color: var(--cf-gold); }\n\n/* Owned Badge Overlay */\n.cs-owned-badge {\n  position: absolute;\n  top: calc(-1 * var(--space-1));\n  right: calc(-1 * var(--space-1));\n  width: var(--space-5);\n  height: var(--space-5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--cf-cyan);\n  border-radius: var(--radius-full);\n  color: var(--cf-dark-1);\n  box-shadow: 0 0 var(--space-2) var(--cf-cyan);\n}\n\n/* Item Info */\n.cs-info {\n  flex: 1;\n  min-width: 0;\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-0_5);\n}\n\n.cs-name {\n  font-family: var(--font-cyber-data);\n  font-size: var(--text-sm);\n  font-weight: 600;\n  color: var(--text-primary);\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.cs-desc {\n  font-family: var(--font-cyber-ui);\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n/* Footer: Price + Buy */\n.cs-footer {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  flex-shrink: 0;\n}\n\n/* Price Badge */\n.cs-price {\n  display: flex;\n  align-items: baseline;\n  gap: var(--space-0_75);\n  padding: var(--space-1) var(--space-2);\n  background: rgba(57, 255, 20, 0.1);\n  border-radius: var(--radius-sm);\n  border: var(--space-0_5) solid rgba(57, 255, 20, 0.3);\n}\n\n.cs-price-value {\n  font-family: var(--font-cyber-data);\n  font-size: var(--text-sm);\n  font-weight: 700;\n  color: var(--cf-lime);\n}\n\n.cs-price-label {\n  font-family: var(--font-cyber-data);\n  font-size: var(--text-xs);\n  color: rgba(57, 255, 20, 0.6);\n}\n\n.cs-price--cant-afford {\n  background: rgba(255, 0, 153, 0.1);\n  border-color: rgba(255, 0, 153, 0.3);\n}\n\n.cs-price--cant-afford .cs-price-value {\n  color: var(--cf-magenta);\n}\n\n.cs-price--cant-afford .cs-price-label {\n  color: rgba(255, 0, 153, 0.6);\n}\n\n/* Buy Button */\n.cs-buy {\n  padding: var(--space-1_5) var(--space-3);\n  background: rgba(0, 240, 255, 0.1);\n  border: var(--space-0_5) solid rgba(0, 240, 255, 0.4);\n  border-radius: var(--radius-sm);\n  color: var(--cf-cyan);\n  font-family: var(--font-cyber-title);\n  font-size: var(--text-xs);\n  font-weight: 700;\n  letter-spacing: 0.1em;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.cs-buy:hover:not(:disabled) {\n  background: rgba(0, 240, 255, 0.2);\n  border-color: var(--cf-cyan);\n  box-shadow: 0 0 var(--space-3) rgba(0, 240, 255, 0.3);\n}\n\n.cs-buy:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n\n/* Status badges (owned / locked) */\n.cs-status {\n  display: flex;\n  align-items: center;\n  gap: var(--space-1);\n  font-family: var(--font-cyber-data);\n  font-size: var(--text-xs);\n  font-weight: 600;\n}\n\n.cs-status--owned {\n  color: var(--cf-cyan);\n}\n\n.cs-status--locked {\n  color: var(--cf-orange);\n}\n\n/* Empty State */\n.cs-empty {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: var(--space-2);\n}\n\n.cs-empty-icon {\n  color: var(--text-muted);\n  opacity: 0.3;\n}\n\n.cs-empty-text {\n  font-family: var(--font-cyber-data);\n  font-size: var(--text-sm);\n  color: var(--text-muted);\n  letter-spacing: 0.05em;\n}\n\n.cs-empty-sub {\n  font-family: var(--font-cyber-ui);\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n  opacity: 0.6;\n  text-align: center;\n}\n\n/* Browse Shop Button */\n.cs-browse {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: var(--space-2);\n  padding: var(--space-2) var(--space-3);\n  background: rgba(255, 0, 153, 0.05);\n  border: var(--space-0_5) solid rgba(255, 0, 153, 0.3);\n  border-radius: var(--radius-sm);\n  color: var(--cf-magenta);\n  font-family: var(--font-cyber-title);\n  font-size: var(--text-xs);\n  font-weight: 600;\n  letter-spacing: 0.1em;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.cs-browse:hover {\n  background: rgba(255, 0, 153, 0.1);\n  border-color: var(--cf-magenta);\n  box-shadow: 0 0 var(--space-3) rgba(255, 0, 153, 0.3);\n}\n\n/* Responsive */\n@media (max-width: 768px) {\n  .cs-item {\n    flex-wrap: wrap;\n  }\n\n  .cs-footer {\n    width: 100%;\n    justify-content: flex-end;\n  }\n}\n\n/* Reduced Motion */\n@media (prefers-reduced-motion: reduce) {\n  .cs-item {\n    transition: none;\n  }\n\n  .cs-buy {\n    transition: none;\n  }\n\n  .cs-browse {\n    transition: none;\n  }\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/cyber/CyberSkillTree.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/cyber/CyberSummaryCard.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/cyber/StatsRadar.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/tooltips/ChallengeTooltipContent.vue","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'dailies' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":12,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":14}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<script setup lang=\"ts\">\n/**\n * ChallengeTooltipContent - Rich tooltip for ChallengePips\n * TASK-1287: Shows daily challenge list, boss status, and narrative\n */\nimport { computed } from 'vue'\nimport { useChallengesStore } from '@/stores/challenges'\nimport { getChallengeNarrative } from '@/composables/useAriaTooltipNarrative'\n\nconst challengesStore = useChallengesStore()\n\nconst dailies = computed(() => challengesStore.activeDailies)\nconst boss = computed(() => challengesStore.activeBoss)\nconst completedToday = computed(() => challengesStore.completedTodayCount)\n\n// All challenges for display (active + completed today)\nconst displayChallenges = computed(() => {\n  return challengesStore.activeChallenges.filter(\n    c => c.challengeType === 'daily'\n  )\n})\n\nconst totalDailies = computed(() => displayChallenges.value.length)\n\nconst narrative = computed(() =>\n  getChallengeNarrative(\n    completedToday.value,\n    totalDailies.value,\n    boss.value != null\n  )\n)\n\nfunction progressText(current: number, target: number): string {\n  return `${current}/${target}`\n}\n\nfunction bossHpPercent(b: typeof boss.value): number {\n  if (!b) return 0\n  return Math.round((b.objectiveCurrent / b.objectiveTarget) * 100)\n}\n</script>\n\n<template>\n  <div class=\"challenge-tooltip\">\n    <div class=\"tooltip-title\">\n      DAILY MISSIONS: {{ completedToday }}/{{ totalDailies }} Complete\n    </div>\n\n    <div v-if=\"displayChallenges.length > 0\" class=\"challenge-list\">\n      <div\n        v-for=\"challenge in displayChallenges\"\n        :key=\"challenge.id\"\n        class=\"challenge-entry\"\n        :class=\"{ 'challenge-entry--done': challenge.status === 'completed' }\"\n      >\n        <span class=\"challenge-marker\">\n          {{ challenge.status === 'completed' ? '&#10003;' : '&#9679;' }}\n        </span>\n        <span class=\"challenge-name\">{{ challenge.title }}</span>\n        <span v-if=\"challenge.status !== 'completed'\" class=\"challenge-progress\">\n          ({{ progressText(challenge.objectiveCurrent, challenge.objectiveTarget) }})\n        </span>\n      </div>\n    </div>\n\n    <div v-if=\"boss\" class=\"boss-section\">\n      <div class=\"boss-header\">\n        <span class=\"boss-label\">BOSS: {{ boss.title.toUpperCase() }}</span>\n        <span class=\"boss-hp\">[HP: {{ 100 - bossHpPercent(boss) }}%]</span>\n      </div>\n    </div>\n\n    <div class=\"tooltip-narrative\">\n      \"{{ narrative }}\"\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.challenge-tooltip {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-2);\n  min-width: 220px;\n}\n\n.tooltip-title {\n  font-weight: var(--font-bold);\n  color: rgba(var(--neon-cyan), 1);\n  font-size: var(--text-sm);\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n}\n\n.challenge-list {\n  display: flex;\n  flex-direction: column;\n  gap: 3px;\n}\n\n.challenge-entry {\n  display: flex;\n  align-items: center;\n  gap: var(--space-1);\n  font-size: var(--text-xs);\n  color: var(--text-secondary);\n}\n\n.challenge-entry--done {\n  color: var(--cf-lime, #a3e635);\n}\n\n.challenge-marker {\n  font-size: 10px;\n  min-width: 12px;\n}\n\n.challenge-entry--done .challenge-marker {\n  color: var(--cf-lime, #a3e635);\n}\n\n.challenge-name {\n  flex: 1;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.challenge-progress {\n  color: var(--text-muted);\n  white-space: nowrap;\n}\n\n.boss-section {\n  padding-top: var(--space-1);\n  border-top: 1px solid rgba(255, 255, 255, 0.06);\n}\n\n.boss-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: var(--text-xs);\n}\n\n.boss-label {\n  color: var(--cf-magenta, #ff00ff);\n  font-weight: var(--font-bold);\n  letter-spacing: 0.03em;\n}\n\n.boss-hp {\n  color: var(--cf-magenta, #ff00ff);\n  font-weight: var(--font-semibold);\n}\n\n.tooltip-narrative {\n  font-size: var(--text-xs);\n  color: rgba(var(--neon-cyan), 0.6);\n  font-style: italic;\n  padding-top: var(--space-1);\n  border-top: 1px solid rgba(255, 255, 255, 0.06);\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/tooltips/LevelTooltipContent.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/tooltips/StreakTooltipContent.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/gamification/tooltips/XpTooltipContent.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/inbox/CalendarInboxPanel.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/inbox/UnifiedInboxPanel.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/inbox/calendar/CalendarInboxHeader.vue","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":162,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":162,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5105,5108],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5105,5108],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":171,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":171,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5375,5378],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5375,5378],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<template>\n  <div class=\"inbox-header\">\n    <button\n      class=\"collapse-btn\"\n      :title=\"isCollapsed ? 'Expand Inbox' : 'Collapse Inbox'\"\n      @click=\"$emit('update:isCollapsed', !isCollapsed)\"\n    >\n      <ChevronLeft v-if=\"!isCollapsed\" :size=\"16\" />\n      <ChevronRight v-else :size=\"16\" />\n    </button>\n    <h3 v-if=\"!isCollapsed\" class=\"inbox-title\">\n      Inbox\n    </h3>\n\n    <!-- Expanded state count -->\n    <NBadge v-if=\"!isCollapsed\" :value=\"inboxCount\" type=\"info\" />\n\n    <!-- Quick Today Filter -->\n    <button\n      v-if=\"!isCollapsed\"\n      class=\"today-quick-filter\"\n      :class=\"{ active: showTodayOnly }\"\n      :title=\"`Show tasks due today (${todayCount})`\"\n      @click=\"$emit('update:showTodayOnly', !showTodayOnly)\"\n    >\n      <CalendarDays :size=\"14\" />\n      <span>Today</span>\n      <span v-if=\"todayCount > 0\" class=\"count-badge\">{{ todayCount }}</span>\n    </button>\n\n    <!-- TASK-1075: Search Toggle Button -->\n    <button\n      v-if=\"!isCollapsed\"\n      class=\"search-toggle-btn\"\n      :class=\"{ active: isSearchExpanded || searchQuery }\"\n      title=\"Search tasks\"\n      @click=\"toggleSearch\"\n    >\n      <Search :size=\"14\" />\n    </button>\n  </div>\n\n  <!-- TASK-1075: Search Input Row -->\n  <Transition name=\"slide-down\">\n    <div v-if=\"!isCollapsed && isSearchExpanded\" class=\"search-input-row\">\n      <div class=\"search-input-wrapper\">\n        <Search :size=\"14\" class=\"search-icon\" />\n        <input\n          ref=\"searchInputRef\"\n          type=\"text\"\n          class=\"search-input\"\n          :value=\"searchQuery\"\n          placeholder=\"Search tasks...\"\n          @input=\"handleSearchInput\"\n          @keydown.escape=\"toggleSearch\"\n        >\n        <button\n          v-if=\"searchQuery\"\n          class=\"clear-search-btn\"\n          title=\"Clear search\"\n          @click=\"clearSearch\"\n        >\n          <X :size=\"12\" />\n        </button>\n      </div>\n    </div>\n  </Transition>\n\n  <!-- Collapsed state task count indicators -->\n  <div v-if=\"isCollapsed\" class=\"collapsed-badges-container\">\n    <BaseBadge\n      v-if=\"!hasActiveFilters\"\n      variant=\"count\"\n      size=\"sm\"\n      rounded\n    >\n      {{ baseCount }}\n    </BaseBadge>\n    <div v-else class=\"dual-badges\">\n      <BaseBadge\n        variant=\"count\"\n        size=\"sm\"\n        rounded\n        class=\"total-count\"\n      >\n        {{ baseCount }}\n      </BaseBadge>\n      <BaseBadge\n        variant=\"info\"\n        size=\"sm\"\n        rounded\n        class=\"filtered-count\"\n      >\n        {{ inboxCount }}\n      </BaseBadge>\n    </div>\n  </div>\n\n  <!-- Canvas Group Filter -->\n  <div v-if=\"!isCollapsed && canvasGroupOptions.length > 1\" class=\"canvas-group-filter\">\n    <CustomSelect\n      :model-value=\"Array.from(selectedCanvasGroups)[0] || ''\"\n      :options=\"canvasGroupOptions\"\n      placeholder=\"Show from: All Tasks\"\n      @update:model-value=\"$emit('update:selectedCanvasGroups', new Set($event ? [String($event)] : []))\"\n    />\n  </div>\n\n  <!-- Additional Filters -->\n  <div v-if=\"!isCollapsed\" class=\"advanced-filters-section\">\n    <button\n      class=\"toggle-filters-btn\"\n      :class=\"{ active: showAdvancedFilters }\"\n      @click=\"$emit('update:showAdvancedFilters', !showAdvancedFilters)\"\n    >\n      <Filter :size=\"14\" />\n      <span>{{ showAdvancedFilters ? 'Hide filters' : 'More filters' }}</span>\n      <ChevronDown :size=\"14\" class=\"toggle-icon\" :class=\"{ rotated: showAdvancedFilters }\" />\n    </button>\n\n    <Transition name=\"slide-down\">\n      <InboxFilters\n        v-if=\"showAdvancedFilters\"\n        :unscheduled-only=\"unscheduledOnly\"\n        :selected-priorities=\"selectedPriorities\"\n        :selected-projects=\"selectedProjects\"\n        :selected-durations=\"selectedDurations\"\n        :hide-done-tasks=\"hideDoneTasks\"\n        :sort-by=\"sortBy\"\n        :tasks=\"baseTasks\"\n        :projects=\"rootProjects\"\n        @update:unscheduled-only=\"$emit('update:unscheduledOnly', $event)\"\n        @update:selected-priorities=\"$emit('update:selectedPriorities', $event)\"\n        @update:selected-projects=\"$emit('update:selectedProjects', $event)\"\n        @update:selected-durations=\"$emit('update:selectedDurations', $event)\"\n        @update:hide-done-tasks=\"$emit('toggleHideDoneTasks')\"\n        @update:sort-by=\"$emit('update:sortBy', $event)\"\n        @clear-all=\"$emit('clearAllFilters')\"\n      />\n    </Transition>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, nextTick } from 'vue'\nimport { ChevronLeft, ChevronRight, CalendarDays, Filter, ChevronDown, Search, X } from 'lucide-vue-next'\nimport { NBadge } from 'naive-ui'\nimport BaseBadge from '@/components/base/BaseBadge.vue'\nimport CustomSelect from '@/components/common/CustomSelect.vue'\nimport InboxFilters from '@/components/canvas/InboxFilters.vue'\nimport { type Task } from '@/stores/tasks'\nimport { type DurationCategory } from '@/utils/durationCategories'\nimport type { SortByType } from '@/composables/inbox/useUnifiedInboxState'\n\ndefineProps<{\n  isCollapsed: boolean\n  inboxCount: number\n  showTodayOnly: boolean\n  todayCount: number\n  hasActiveFilters: boolean\n  baseCount: number\n  canvasGroupOptions: any[]\n  selectedCanvasGroups: Set<string>\n  showAdvancedFilters: boolean\n  unscheduledOnly: boolean\n  selectedPriorities: Set<string>\n  selectedProjects: Set<string>\n  selectedDurations: Set<DurationCategory>\n  hideDoneTasks: boolean\n  baseTasks: Task[]\n  rootProjects: any[]\n  searchQuery: string // TASK-1075\n  sortBy?: SortByType // TASK-1303\n}>()\n\nconst emit = defineEmits<{\n  (e: 'update:isCollapsed', value: boolean): void\n  (e: 'update:showTodayOnly', value: boolean): void\n  (e: 'update:selectedCanvasGroups', value: Set<string>): void\n  (e: 'update:showAdvancedFilters', value: boolean): void\n  (e: 'update:unscheduledOnly', value: boolean): void\n  (e: 'update:selectedPriorities', value: Set<string>): void\n  (e: 'update:selectedProjects', value: Set<string>): void\n  (e: 'update:selectedDurations', value: Set<DurationCategory>): void\n  (e: 'update:searchQuery', value: string): void // TASK-1075\n  (e: 'update:sortBy', value: SortByType): void // TASK-1303\n  (e: 'toggleHideDoneTasks'): void\n  (e: 'clearAllFilters'): void\n}>()\n// TASK-1075: Search state\nconst isSearchExpanded = ref(false)\nconst searchInputRef = ref<HTMLInputElement | null>(null)\n\nconst toggleSearch = async () => {\n  isSearchExpanded.value = !isSearchExpanded.value\n  if (isSearchExpanded.value) {\n    await nextTick()\n    searchInputRef.value?.focus()\n  } else {\n    emit('update:searchQuery', '')\n  }\n}\n\nconst handleSearchInput = (event: Event) => {\n  const target = event.target as HTMLInputElement\n  emit('update:searchQuery', target.value)\n}\n\nconst clearSearch = () => {\n  emit('update:searchQuery', '')\n  searchInputRef.value?.focus()\n}\n\n</script>\n\n<style scoped>\n.inbox-header {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  padding-bottom: var(--space-3);\n  border-bottom: 1px solid var(--border-subtle);\n  min-width: 0;\n}\n\n.collapse-btn {\n  background: transparent;\n  border: 1px solid var(--border-medium);\n  color: var(--text-muted);\n  padding: var(--space-1);\n  cursor: pointer;\n  border-radius: var(--radius-md);\n  transition: all var(--duration-normal) var(--spring-smooth);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.collapse-btn:hover {\n  background: var(--state-hover-bg);\n  color: var(--text-primary);\n}\n\n.inbox-title {\n  font-size: var(--text-base);\n  font-weight: var(--font-semibold);\n  color: var(--text-primary);\n  margin: 0;\n  flex: 1;\n  min-width: 0;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.today-quick-filter {\n  display: flex;\n  align-items: center;\n  gap: var(--space-1);\n  padding: var(--space-1) var(--space-2);\n  background: var(--glass-bg-light);\n  backdrop-filter: blur(8px);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-full);\n  color: var(--text-secondary);\n  font-size: var(--text-xs);\n  font-weight: var(--font-medium);\n  cursor: pointer;\n  transition: all var(--duration-fast) var(--spring-smooth);\n  white-space: nowrap;\n  flex-shrink: 0;\n}\n\n.today-quick-filter:hover {\n  background: var(--glass-bg-medium);\n  border-color: var(--glass-border-hover);\n  color: var(--text-primary);\n}\n\n.today-quick-filter.active {\n  background: var(--brand-bg-subtle);\n  border-color: var(--brand-border-subtle);\n  color: var(--brand-primary);\n}\n\n.today-quick-filter .count-badge {\n  background: var(--brand-primary);\n  color: white;\n  font-size: var(--text-xs);\n  padding: 0 var(--space-1);\n  border-radius: var(--radius-full);\n  min-width: 16px;\n  text-align: center;\n}\n\n.collapsed-badges-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: var(--space-1);\n  margin-top: var(--space-2);\n}\n\n.dual-badges {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: var(--space-1);\n}\n\n.toggle-filters-btn {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  background: none;\n  border: none;\n  color: var(--text-secondary);\n  font-size: var(--text-xs);\n  cursor: pointer;\n  padding: var(--space-1) 0;\n  width: 100%;\n}\n\n.toggle-filters-btn:hover {\n  color: var(--text-primary);\n}\n\n.toggle-icon {\n  transition: transform var(--duration-normal);\n  margin-left: auto;\n}\n\n.toggle-icon.rotated {\n  transform: rotate(180deg);\n}\n\n/* TASK-1075: Search Styles */\n.search-toggle-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 28px;\n  height: 28px;\n  padding: var(--space-1);\n  border-radius: var(--radius-md);\n  border: 1px solid var(--border-subtle);\n  background: transparent;\n  color: var(--text-tertiary);\n  cursor: pointer;\n  transition: all var(--duration-normal) var(--ease-out);\n  flex-shrink: 0;\n}\n\n.search-toggle-btn:hover {\n  background: var(--surface-hover);\n  color: var(--text-secondary);\n  border-color: var(--border-hover);\n}\n\n.search-toggle-btn.active {\n  background: var(--brand-primary-subtle);\n  color: var(--brand-primary);\n  border-color: var(--brand-primary-dim);\n}\n\n.search-input-row {\n  padding: var(--space-2) 0;\n  border-bottom: 1px solid var(--border-light);\n}\n\n.search-input-wrapper {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  padding: var(--space-1_5) var(--space-2);\n  background: var(--surface-1);\n  border: 1px solid var(--border-color);\n  border-radius: var(--radius-md);\n  transition: all var(--duration-normal) var(--ease-out);\n}\n\n.search-input-wrapper:focus-within {\n  border-color: var(--brand-primary);\n  background: var(--surface-2);\n  box-shadow: 0 0 0 2px var(--brand-primary-subtle);\n}\n\n.search-icon {\n  color: var(--text-tertiary);\n  flex-shrink: 0;\n}\n\n.search-input {\n  flex: 1;\n  border: none;\n  background: transparent;\n  color: var(--text-primary);\n  font-size: var(--text-sm);\n  outline: none;\n  min-width: 0;\n}\n\n.search-input::placeholder {\n  color: var(--text-muted);\n}\n\n.clear-search-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 18px;\n  height: 18px;\n  padding: 0;\n  border: none;\n  border-radius: var(--radius-sm);\n  background: var(--surface-hover);\n  color: var(--text-secondary);\n  cursor: pointer;\n  transition: all var(--duration-fast) var(--ease-out);\n  flex-shrink: 0;\n}\n\n.clear-search-btn:hover {\n  background: var(--surface-active);\n  color: var(--text-primary);\n}\n\n/* Slide-down animation */\n.slide-down-enter-active,\n.slide-down-leave-active {\n  transition: all var(--duration-normal) var(--ease-out);\n  overflow: hidden;\n}\n\n.slide-down-enter-from,\n.slide-down-leave-to {\n  opacity: 0;\n  max-height: 0;\n  padding-top: 0;\n  padding-bottom: 0;\n}\n\n.slide-down-enter-to,\n.slide-down-leave-from {\n  opacity: 1;\n  max-height: 60px;\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/inbox/calendar/CalendarInboxInput.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/inbox/calendar/CalendarInboxList.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/inbox/calendar/CalendarTaskCard.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/inbox/unified/UnifiedInboxHeader.vue","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":196,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":196,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6499,6502],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6499,6502],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<template>\n  <div class=\"inbox-header\" :class=\"{ 'is-collapsed': isCollapsed }\">\n    <button \n      class=\"collapse-btn\" \n      :class=\"{ 'is-collapsed': isCollapsed }\" \n      :title=\"isCollapsed ? 'Expand Inbox' : 'Collapse Inbox'\" \n      @click=\"$emit('toggleCollapse')\"\n    >\n      <template v-if=\"context === 'canvas'\">\n        <ChevronRight v-if=\"!isCollapsed\" :size=\"16\" />\n        <ChevronLeft v-else :size=\"14\" />\n      </template>\n      <template v-else>\n        <ChevronLeft v-if=\"!isCollapsed\" :size=\"16\" />\n        <ChevronRight v-else :size=\"14\" />\n      </template>\n    </button>\n    <h3 v-if=\"!isCollapsed\" class=\"inbox-title\">\n      Inbox\n    </h3>\n\n    <!-- Count Badge -->\n    <NBadge v-if=\"!isCollapsed\" :value=\"taskCount\" type=\"info\" />\n\n    <!-- Done Tasks Filter - Shows ONLY done tasks when active -->\n    <button\n      v-if=\"!isCollapsed\"\n      key=\"done-toggle\"\n      class=\"done-toggle-btn\"\n      :class=\"{ active: !hideDoneTasks }\"\n      :title=\"hideDoneTasks ? `Show only done tasks (${doneTaskCount})` : 'Show active tasks'\"\n      @click=\"$emit('update:hide-done-tasks', !hideDoneTasks)\"\n    >\n      <CheckCircle2 :size=\"14\" />\n      <span class=\"done-count\">{{ doneTaskCount }}</span>\n    </button>\n\n    <!-- Time Filter Dropdown -->\n    <NDropdown\n      v-if=\"!isCollapsed\"\n      :options=\"timeFilterOptions\"\n      trigger=\"click\"\n      @select=\"handleTimeFilterSelect\"\n    >\n      <button class=\"time-filter-dropdown\" :class=\"{ active: activeTimeFilter !== 'all' }\">\n        <CalendarDays :size=\"14\" />\n        <span>{{ timeFilterLabel }}</span>\n        <ChevronDown :size=\"12\" />\n      </button>\n    </NDropdown>\n\n    <!-- TASK-1246: Group Filter Dropdown -->\n    <NPopover\n      v-if=\"!isCollapsed && showGroupChips\"\n      trigger=\"click\"\n      placement=\"bottom-start\"\n      :show-arrow=\"false\"\n      raw\n    >\n      <template #trigger>\n        <button\n          class=\"icon-filter-btn\"\n          :class=\"{ active: selectedCanvasGroups.size > 0 }\"\n          :title=\"groupFilterLabel\"\n        >\n          <Layers :size=\"14\" />\n          <span v-if=\"selectedCanvasGroups.size > 0\" class=\"filter-active-dot\" />\n        </button>\n      </template>\n      <div class=\"group-filter-chips\">\n        <button\n          v-for=\"group in groupOptions\"\n          :key=\"group.value\"\n          class=\"group-chip\"\n          :class=\"{ active: isChipActive(group) }\"\n          :style=\"getChipStyle(group)\"\n          :title=\"group.value === '' ? 'Show all tasks' : `Filter by ${group.label} (Ctrl+click for multi-select)`\"\n          @click=\"handleChipClick($event, group)\"\n        >\n          <span v-if=\"group.color\" class=\"chip-dot\" :style=\"{ backgroundColor: group.color }\" />\n          <span class=\"chip-label\">{{ group.label }}</span>\n          <span v-if=\"group.count !== undefined\" class=\"chip-count\">{{ group.count }}</span>\n        </button>\n      </div>\n    </NPopover>\n\n    <!-- TASK-1075: Search Toggle Button -->\n    <button\n      v-if=\"!isCollapsed\"\n      class=\"search-toggle-btn\"\n      :class=\"{ active: isSearchExpanded || searchQuery }\"\n      title=\"Search tasks\"\n      @click=\"toggleSearch\"\n    >\n      <Search :size=\"14\" />\n    </button>\n  </div>\n\n  <!-- TASK-1075: Search Input Row -->\n  <Transition name=\"slide-down\">\n    <div v-if=\"!isCollapsed && isSearchExpanded\" class=\"search-input-row\">\n      <div class=\"search-input-wrapper\">\n        <Search :size=\"14\" class=\"search-icon\" />\n        <input\n          ref=\"searchInputRef\"\n          type=\"text\"\n          class=\"search-input\"\n          :value=\"searchQuery\"\n          placeholder=\"Search tasks...\"\n          @input=\"handleSearchInput\"\n          @keydown.escape=\"toggleSearch\"\n        >\n        <button\n          v-if=\"searchQuery\"\n          class=\"clear-search-btn\"\n          title=\"Clear search\"\n          @click=\"clearSearch\"\n        >\n          <X :size=\"12\" />\n        </button>\n      </div>\n    </div>\n  </Transition>\n\n  <!-- Advanced Filters Toggle -->\n  <div v-if=\"!isCollapsed\" class=\"advanced-filters-section\">\n    <button\n      class=\"toggle-filters-btn\"\n      :class=\"{ active: showAdvancedFilters }\"\n      @click=\"$emit('toggleAdvancedFilters')\"\n    >\n      <Filter :size=\"14\" />\n      <span>{{ showAdvancedFilters ? 'Hide filters & sort' : 'Filters & Sort' }}</span>\n      <ChevronDown :size=\"14\" class=\"toggle-icon\" :class=\"{ rotated: showAdvancedFilters }\" />\n    </button>\n\n    <Transition name=\"slide-down\">\n      <InboxFilters\n        v-if=\"showAdvancedFilters\"\n        :context=\"context\"\n        :unscheduled-only=\"unscheduledOnly\"\n        :selected-priorities=\"selectedPriorities\"\n        :selected-projects=\"selectedProjects\"\n        :selected-durations=\"selectedDurations\"\n        :hide-done-tasks=\"hideDoneTasks\"\n        :sort-by=\"sortBy\"\n        :tasks=\"baseTasks\"\n        :projects=\"rootProjects\"\n        @update:unscheduled-only=\"$emit('update:unscheduled-only', $event)\"\n        @update:selected-priorities=\"$emit('update:selected-priorities', $event)\"\n        @update:selected-projects=\"$emit('update:selected-projects', $event)\"\n        @update:selected-durations=\"$emit('update:selected-durations', $event)\"\n        @update:hide-done-tasks=\"$emit('update:hide-done-tasks', $event)\"\n        @update:sort-by=\"$emit('update:sortBy', $event)\"\n        @clear-all=\"$emit('clearAll')\"\n      />\n    </Transition>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref, nextTick } from 'vue'\nimport { ChevronLeft, ChevronRight, CalendarDays, Filter, ChevronDown, CheckCircle2, Search, X, Layers } from 'lucide-vue-next'\nimport { NBadge, NDropdown, NPopover } from 'naive-ui'\nimport InboxFilters from '@/components/canvas/InboxFilters.vue'\nimport type { Task } from '@/types/tasks'\nimport type { DurationCategory } from '@/utils/durationCategories'\nimport type { TimeFilterType, SortByType } from '@/composables/inbox/useUnifiedInboxState'\n\ninterface GroupOption {\n  label: string\n  value: string\n  color?: string\n  count?: number\n}\n\nconst props = defineProps<{\n  isCollapsed: boolean\n  taskCount: number\n  activeTimeFilter: TimeFilterType\n  todayCount: number\n  next3DaysCount: number\n  weekCount: number\n  monthCount: number\n  showGroupChips: boolean\n  groupOptions: GroupOption[]\n  selectedCanvasGroups: Set<string>\n  showAdvancedFilters: boolean\n  unscheduledOnly: boolean\n  selectedPriorities: Set<string>\n  selectedProjects: Set<string>\n  selectedDurations: Set<DurationCategory>\n  hideDoneTasks: boolean\n  doneTaskCount: number\n  baseTasks: Task[]\n  rootProjects: any[]\n  context: string\n  sortBy: SortByType // TASK-1073\n  searchQuery: string // TASK-1075\n}>()\n\nconst emit = defineEmits<{\n  (e: 'toggleCollapse'): void\n  (e: 'update:activeTimeFilter', value: TimeFilterType): void\n  (e: 'toggleAdvancedFilters'): void\n  (e: 'update:selected-canvas-groups', groups: Set<string>): void\n  (e: 'update:unscheduled-only', value: boolean): void\n  (e: 'update:selected-priorities', value: Set<string>): void\n  (e: 'update:selected-projects', value: Set<string>): void\n  (e: 'update:selected-durations', value: Set<DurationCategory>): void\n  (e: 'update:hide-done-tasks', value: boolean): void\n  (e: 'update:sortBy', value: SortByType): void // TASK-1073\n  (e: 'update:searchQuery', value: string): void // TASK-1075\n  (e: 'clearAll'): void\n}>()\n// TASK-1075: Search state\nconst isSearchExpanded = ref(false)\nconst searchInputRef = ref<HTMLInputElement | null>(null)\n\nconst toggleSearch = async () => {\n  isSearchExpanded.value = !isSearchExpanded.value\n  if (isSearchExpanded.value) {\n    await nextTick()\n    searchInputRef.value?.focus()\n  } else {\n    emit('update:searchQuery', '')\n  }\n}\n\nconst handleSearchInput = (event: Event) => {\n  const target = event.target as HTMLInputElement\n  emit('update:searchQuery', target.value)\n}\n\nconst clearSearch = () => {\n  emit('update:searchQuery', '')\n  searchInputRef.value?.focus()\n}\n\n// TASK-1246: Group Filter Label\nconst groupFilterLabel = computed(() => {\n  if (props.selectedCanvasGroups.size === 0) return 'Groups'\n  if (props.selectedCanvasGroups.size === 1) {\n    const activeId = Array.from(props.selectedCanvasGroups)[0]\n    const group = props.groupOptions.find(g => g.value === activeId)\n    return group?.label || 'Groups'\n  }\n  return `${props.selectedCanvasGroups.size} Groups`\n})\n\n// Chip Logic\nconst isChipActive = (group: GroupOption) => {\n  return group.value === ''\n    ? props.selectedCanvasGroups.size === 0\n    : props.selectedCanvasGroups.has(group.value)\n}\n\nconst getChipStyle = (group: GroupOption) => {\n  if (!isChipActive(group) || !group.color) return {}\n  return {\n    '--chip-color': group.color,\n    backgroundColor: `${group.color}20`,\n    borderColor: group.color,\n    color: group.color\n  }\n}\n\nconst handleChipClick = (event: MouseEvent, group: GroupOption) => {\n  const currentSelection = new Set(props.selectedCanvasGroups)\n\n  // 1. \"All\" Chip\n  if (group.value === '') {\n    emit('update:selected-canvas-groups', new Set())\n    return\n  }\n\n  // 2. Multi-select (Ctrl/Cmd)\n  if (event.ctrlKey || event.metaKey) {\n    if (currentSelection.has(group.value)) {\n      currentSelection.delete(group.value)\n    } else {\n      currentSelection.add(group.value)\n    }\n    emit('update:selected-canvas-groups', currentSelection)\n    return\n  }\n\n  // 3. Single Select (Toggle)\n  if (currentSelection.size === 1 && currentSelection.has(group.value)) {\n    // Deselect if already active -> Go to \"All\"\n    emit('update:selected-canvas-groups', new Set())\n  } else {\n    emit('update:selected-canvas-groups', new Set([group.value]))\n  }\n}\n\n// Time Filter Dropdown Options\nconst timeFilterOptions = computed(() => [\n  { label: 'All', key: 'all' },\n  { label: `Today (${props.todayCount})`, key: 'today' },\n  { label: `Next 3 Days (${props.next3DaysCount})`, key: 'next3days' },\n  { label: `This Week (${props.weekCount})`, key: 'week' },\n  { label: `This Month (${props.monthCount})`, key: 'month' }\n])\n\nconst timeFilterLabel = computed(() => {\n  const labels: Record<TimeFilterType, string> = {\n    all: 'All',\n    today: 'Today',\n    next3days: '3 Days',\n    week: 'Week',\n    month: 'Month'\n  }\n  return labels[props.activeTimeFilter]\n})\n\nconst handleTimeFilterSelect = (key: string) => {\n  emit('update:activeTimeFilter', key as TimeFilterType)\n}\n</script>\n\n<style scoped>\n/* Inheriting styles from UnifiedInboxPanel to keep consistency */\n.inbox-header {\n  display: flex;\n  align-items: center;\n  padding: var(--space-2) var(--space-3);\n  border-bottom: 1px solid var(--glass-border);\n  background: transparent;\n  gap: var(--space-2);\n  height: 44px;\n  flex-shrink: 0;\n  /* BUG-1078: Fill parent width; flex children use flex-shrink: 0 to prevent squishing */\n  width: 100%;\n}\n\n/* BUG-1078: Prevent NBadge from shrinking */\n.inbox-header :deep(.n-badge) {\n  flex-shrink: 0;\n}\n\n.inbox-header.is-collapsed {\n  padding: var(--space-1);\n  justify-content: center;\n  height: auto;\n  min-height: 32px;\n  border-bottom: none;\n  width: 100%; /* BUG-1079: Take full width of collapsed container */\n}\n\n.inbox-title {\n  margin: 0;\n  font-size: var(--text-base);\n  font-weight: var(--font-semibold);\n  color: var(--text-primary);\n  flex: 0 0 auto; /* BUG-1078: Don't grow, don't shrink, use natural width */\n}\n\n.collapse-btn {\n  background: none;\n  border: 1px solid var(--border-subtle);\n  cursor: pointer;\n  color: var(--text-secondary);\n  padding: var(--space-1);\n  border-radius: var(--radius-sm);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 28px;\n  height: 28px;\n  flex-shrink: 0;\n}\n\n.collapse-btn.is-collapsed {\n  width: 24px;\n  height: 24px;\n  padding: var(--space-0_5);\n}\n\n.collapse-btn:hover {\n  background: var(--surface-hover);\n  color: var(--text-primary);\n}\n\n.time-filter-dropdown {\n  display: flex;\n  align-items: center;\n  gap: var(--space-1_5);\n  padding: var(--space-1) var(--space-2);\n  border-radius: var(--radius-md);\n  border: 1px solid transparent;\n  background: transparent;\n  color: var(--text-secondary);\n  font-size: var(--text-xs);\n  cursor: pointer;\n  transition: all var(--duration-normal) var(--ease-out);\n  white-space: nowrap;\n  flex-shrink: 0;\n}\n\n.time-filter-dropdown:hover {\n  background: var(--surface-hover);\n  color: var(--text-primary);\n}\n\n.time-filter-dropdown.active {\n  background: var(--brand-primary-subtle);\n  color: var(--brand-primary);\n  border-color: var(--brand-primary-dim);\n  font-weight: var(--font-medium);\n}\n\n/* Icon-only filter button (Groups) */\n.icon-filter-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  width: 28px;\n  height: 28px;\n  padding: var(--space-1);\n  border-radius: var(--radius-md);\n  border: 1px solid transparent;\n  background: transparent;\n  color: var(--text-secondary);\n  cursor: pointer;\n  transition: all var(--duration-normal) var(--ease-out);\n  flex-shrink: 0;\n}\n\n.icon-filter-btn:hover {\n  background: var(--surface-hover);\n  color: var(--text-primary);\n}\n\n.icon-filter-btn.active {\n  background: var(--brand-primary-subtle);\n  color: var(--brand-primary);\n  border-color: var(--brand-primary-dim);\n}\n\n.filter-active-dot {\n  position: absolute;\n  top: 3px;\n  right: 3px;\n  width: 6px;\n  height: 6px;\n  border-radius: var(--radius-full);\n  background: var(--brand-primary);\n}\n\n/* TASK-1246: Filter Chips (now inside popover) */\n.group-filter-chips {\n  padding: var(--space-2);\n  display: flex;\n  flex-wrap: wrap;\n  gap: var(--space-2);\n  background: var(--surface-elevated);\n  border-radius: var(--radius-md);\n  border: 1px solid var(--border-subtle);\n  max-width: 400px;\n  max-height: 300px;\n  overflow-y: auto;\n  box-shadow: var(--shadow-lg);\n}\n\n.group-chip {\n  display: flex;\n  align-items: center;\n  gap: var(--space-1_5);\n  padding: var(--space-0_5) var(--space-2);\n  border-radius: var(--radius-lg);\n  border: 1px solid var(--border-color);\n  background: var(--surface-1);\n  color: var(--text-secondary);\n  font-size: var(--text-xs);\n  cursor: pointer;\n  transition: all var(--duration-normal) var(--ease-out);\n}\n\n.group-chip:hover {\n  background: var(--surface-hover);\n  border-color: var(--border-hover);\n}\n\n.group-chip.active {\n  background: var(--brand-primary-subtle);\n  color: var(--brand-primary);\n  border-color: var(--brand-primary);\n}\n\n.chip-dot {\n  width: 6px;\n  height: 6px;\n  border-radius: 50%;\n}\n\n.chip-count {\n  opacity: 0.6;\n  font-size: var(--text-xs);\n  padding-left: var(--space-1);\n  border-left: 1px solid currentColor;\n  margin-left: var(--space-1);\n}\n\n/* Advanced Filters Toggle */\n.advanced-filters-section {\n  border-bottom: 1px solid var(--border-light);\n  background: var(--surface-ground);\n}\n\n.toggle-filters-btn {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: var(--space-2);\n  padding: var(--space-2);\n  border: none;\n  background: transparent;\n  color: var(--text-muted);\n  font-size: var(--text-xs);\n  cursor: pointer;\n  transition: all var(--duration-normal);\n}\n\n.toggle-filters-btn:hover {\n  color: var(--text-primary);\n  background: var(--surface-hover);\n}\n\n.toggle-filters-btn.active {\n  color: var(--brand-primary);\n  background: var(--brand-primary-subtle);\n}\n\n.toggle-icon {\n  transition: transform var(--duration-normal) var(--ease-out);\n}\n\n.toggle-icon.rotated {\n  transform: rotate(180deg);\n}\n\n/* Done Tasks Toggle Button */\n/* Inactive state - subtle/muted (showing active tasks, hideDoneTasks=true) */\n.done-toggle-btn {\n  display: flex;\n  align-items: center;\n  gap: var(--space-1);\n  padding: var(--space-1) var(--space-2);\n  border-radius: var(--radius-md);\n  border: 1px solid var(--border-subtle);\n  background: transparent;\n  color: var(--text-tertiary);\n  font-size: var(--text-xs);\n  cursor: pointer;\n  transition: all var(--duration-normal) var(--ease-out);\n  flex-shrink: 0;\n  min-width: 28px;\n  min-height: 28px;\n}\n\n.done-toggle-btn:hover {\n  background: var(--surface-hover);\n  color: var(--text-secondary);\n  border: 1px solid var(--border-hover);\n}\n\n/* Active state - green to indicate filtering for completed tasks */\n.done-toggle-btn.active {\n  border: 1px solid #22c55e;\n  background: rgba(34, 197, 94, 0.15);\n  color: #22c55e;\n}\n\n.done-toggle-btn.active:hover {\n  background: rgba(34, 197, 94, 0.25);\n}\n\n.done-count {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 16px;\n  height: 16px;\n  padding: 0 var(--space-1);\n  border-radius: var(--radius-full);\n  background: var(--surface-elevated);\n  color: var(--text-secondary);\n  font-size: var(--text-xs);\n  font-weight: 600;\n}\n\n.done-toggle-btn.active .done-count {\n  background: #22c55e;\n  color: white;\n}\n\n/* TASK-1075: Search Styles */\n.search-toggle-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 28px;\n  height: 28px;\n  padding: var(--space-1);\n  border-radius: var(--radius-md);\n  border: 1px solid var(--border-subtle);\n  background: transparent;\n  color: var(--text-tertiary);\n  cursor: pointer;\n  transition: all var(--duration-normal) var(--ease-out);\n  flex-shrink: 0;\n}\n\n.search-toggle-btn:hover {\n  background: var(--surface-hover);\n  color: var(--text-secondary);\n  border-color: var(--border-hover);\n}\n\n.search-toggle-btn.active {\n  background: var(--brand-primary-subtle);\n  color: var(--brand-primary);\n  border-color: var(--brand-primary-dim);\n}\n\n.search-input-row {\n  padding: var(--space-2) var(--space-3);\n  border-bottom: 1px solid var(--border-light);\n  background: var(--surface-ground);\n}\n\n.search-input-wrapper {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  padding: var(--space-1_5) var(--space-2);\n  background: var(--surface-1);\n  border: 1px solid var(--border-color);\n  border-radius: var(--radius-md);\n  transition: all var(--duration-normal) var(--ease-out);\n}\n\n.search-input-wrapper:focus-within {\n  border-color: var(--brand-primary);\n  background: var(--surface-2);\n  box-shadow: 0 0 0 2px var(--brand-primary-subtle);\n}\n\n.search-icon {\n  color: var(--text-tertiary);\n  flex-shrink: 0;\n}\n\n.search-input {\n  flex: 1;\n  border: none;\n  background: transparent;\n  color: var(--text-primary);\n  font-size: var(--text-sm);\n  outline: none;\n  min-width: 0;\n}\n\n.search-input::placeholder {\n  color: var(--text-muted);\n}\n\n.clear-search-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 18px;\n  height: 18px;\n  padding: 0;\n  border: none;\n  border-radius: var(--radius-sm);\n  background: var(--surface-hover);\n  color: var(--text-secondary);\n  cursor: pointer;\n  transition: all var(--duration-fast) var(--ease-out);\n  flex-shrink: 0;\n}\n\n.clear-search-btn:hover {\n  background: var(--surface-active);\n  color: var(--text-primary);\n}\n\n/* Slide-down animation */\n.slide-down-enter-active,\n.slide-down-leave-active {\n  transition: all var(--duration-normal) var(--ease-out);\n  overflow: hidden;\n}\n\n.slide-down-enter-from,\n.slide-down-leave-to {\n  opacity: 0;\n  max-height: 0;\n  padding-top: 0;\n  padding-bottom: 0;\n}\n\n.slide-down-enter-to,\n.slide-down-leave-from {\n  opacity: 1;\n  max-height: 60px;\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/inbox/unified/UnifiedInboxInput.vue","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'watch' is defined but never used. Allowed unused vars must match /^_/u.","line":99,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":99,"endColumn":30,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"watch"},"fix":{"range":[3039,3046],"text":""},"desc":"Remove unused variable \"watch\"."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<template>\n  <div class=\"quick-add\">\n    <div class=\"quick-add-row\">\n      <input\n        v-model=\"newTaskTitle\"\n        :dir=\"quickAddDirection\"\n        :placeholder=\"isListening ? 'Listening...' : (isProcessingVoice ? 'Processing...' : 'Quick add task (Enter)...')\"\n        class=\"quick-add-input\"\n        :class=\"[{ 'voice-active': isListening || isProcessingVoice }]\"\n        @keydown.enter=\"handleAddTask\"\n      >\n\n      <!-- Mic button (TASK-1024) -->\n      <button\n        v-if=\"isVoiceSupported\"\n        class=\"mic-btn\"\n        :class=\"[{ recording: isListening, processing: isProcessingVoice }]\"\n        :title=\"isListening ? 'Stop recording' : (isProcessingVoice ? 'Processing...' : 'Voice input')\"\n        :disabled=\"isProcessingVoice\"\n        @click=\"toggleVoiceInput\"\n      >\n        <Loader2 v-if=\"isProcessingVoice\" :size=\"18\" class=\"spin\" />\n        <Mic v-else-if=\"!isListening\" :size=\"18\" />\n        <MicOff v-else :size=\"18\" />\n      </button>\n    </div>\n\n    <!-- Voice feedback (when recording) -->\n    <div v-if=\"isListening || isProcessingVoice\" class=\"voice-feedback\">\n      <div class=\"voice-waveform\">\n        <span class=\"wave-bar\" />\n        <span class=\"wave-bar\" />\n        <span class=\"wave-bar\" />\n        <span class=\"wave-bar\" />\n        <span class=\"wave-bar\" />\n      </div>\n      <span class=\"voice-status\">\n        {{ isProcessingVoice ? 'Processing audio...' : (displayTranscript || 'Speak now...') }}\n      </span>\n      <button class=\"voice-cancel\" @click=\"cancelVoice\">\n        <X :size=\"14\" />\n      </button>\n    </div>\n\n    <!-- Voice error message -->\n    <div v-if=\"voiceError && !isListening && !isProcessingVoice\" class=\"voice-error\">\n      {{ voiceError }}\n    </div>\n\n    <!-- Voice Task Confirmation (TASK-1028) with Re-record support (TASK-1110) -->\n    <VoiceTaskConfirmation\n      :is-open=\"showVoiceConfirmation\"\n      :parsed-task=\"parsedVoiceTask\"\n      :is-recording=\"isListening\"\n      :is-processing=\"isProcessingVoice\"\n      :can-re-record=\"isVoiceSupported\"\n      @confirm=\"handleVoiceTaskConfirm\"\n      @cancel=\"handleVoiceTaskCancel\"\n      @re-record=\"handleVoiceReRecord\"\n    />\n  </div>\n\n  <!-- Brain Dump Mode -->\n  <div v-if=\"showBrainDump\" class=\"brain-dump-section\">\n    <NButton\n      secondary\n      block\n      size=\"small\"\n      class=\"brain-dump-toggle\"\n      @click=\"brainDumpMode = !brainDumpMode\"\n    >\n      {{ brainDumpMode ? 'Quick Add Mode' : 'Brain Dump Mode' }}\n    </NButton>\n\n    <div v-if=\"brainDumpMode\" class=\"brain-dump-container\">\n      <textarea\n        v-model=\"brainDumpText\"\n        placeholder=\"Paste or type tasks (one per line):\nWrite proposal !!!\nReview code 2h\nCall client\"\n        :dir=\"textDirection\"\n        class=\"brain-dump-textarea\"\n        rows=\"5\"\n      />\n      <NButton\n        type=\"primary\"\n        block\n        :disabled=\"parsedTaskCount === 0\"\n        @click=\"processBrainDump\"\n      >\n        Add {{ parsedTaskCount }} Tasks\n      </NButton>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, watch } from 'vue'\nimport { NButton } from 'naive-ui'\nimport { Mic, MicOff, X, Loader2 } from 'lucide-vue-next'\nimport { useBrainDump } from '@/composables/useBrainDump'\nimport { useWhisperSpeech } from '@/composables/useWhisperSpeech'\nimport { useVoiceTaskParser, type ParsedVoiceTask } from '@/composables/useVoiceTaskParser'\nimport VoiceTaskConfirmation from '@/mobile/components/VoiceTaskConfirmation.vue'\n\ndefineProps<{\n  showBrainDump: boolean\n}>()\n\nconst emit = defineEmits<{\n  (e: 'addTask', title: string, options?: { priority?: string; dueDate?: Date }): void\n}>()\n\nconst newTaskTitle = ref('')\nconst { parseTranscript } = useVoiceTaskParser()\n\n// Voice confirmation state (TASK-1028)\nconst parsedVoiceTask = ref<ParsedVoiceTask | null>(null)\nconst showVoiceConfirmation = ref(false)\n\n// TASK-1322: Whisper-only voice input (browser speech recognition removed)\nconst {\n  isRecording: isWhisperRecording,\n  isProcessing: isWhisperProcessing,\n  isSupported: isWhisperSupported,\n  hasApiKey: hasWhisperApiKey,\n  transcript: whisperTranscript,\n  error: whisperError,\n  start: startWhisper,\n  stop: stopWhisper,\n  cancel: cancelWhisper\n} = useWhisperSpeech({\n  onResult: (result) => {\n    console.log('[Whisper] Result:', result)\n    if (result.transcript.trim()) {\n      // Auto-detect language from Whisper response\n      const lang = result.language === 'he' ? 'he-IL' : 'en-US'\n      const parsed = parseTranscript(result.transcript.trim(), lang)\n      parsedVoiceTask.value = parsed\n      showVoiceConfirmation.value = true\n    }\n  },\n  onError: (err) => {\n    console.warn('[Whisper] Error:', err)\n  }\n})\n\n// Voice state\nconst isListening = computed(() => isWhisperRecording.value)\nconst isProcessingVoice = computed(() => isWhisperProcessing.value)\nconst isVoiceSupported = computed(() => isWhisperSupported.value && hasWhisperApiKey.value)\nconst displayTranscript = computed(() => whisperTranscript.value)\nconst voiceError = computed(() => whisperError.value)\n\n// Toggle voice recording\nconst toggleVoiceInput = async () => {\n  if (isListening.value) {\n    stopWhisper()\n  } else {\n    parsedVoiceTask.value = null\n    showVoiceConfirmation.value = false\n    await startWhisper()\n  }\n}\n\n// Cancel voice recording\nconst cancelVoice = () => {\n  cancelWhisper()\n  resetVoiceState()\n}\n\n// Voice task confirmation handlers (TASK-1028)\nconst handleVoiceTaskConfirm = (task: { title: string; priority: 'high' | 'medium' | 'low' | null; dueDate: Date | null }) => {\n  emit('addTask', task.title, {\n    ...(task.priority && { priority: task.priority }),\n    ...(task.dueDate && { dueDate: task.dueDate })\n  })\n  resetVoiceState()\n}\n\nconst handleVoiceTaskCancel = () => {\n  resetVoiceState()\n}\n\n// TASK-1110: Handle re-record request from confirmation modal\nconst handleVoiceReRecord = async () => {\n  // If already recording, stop it\n  if (isListening.value) {\n    stopWhisper()\n    return\n  }\n\n  // Start new recording (keep modal open, will update parsedVoiceTask on result)\n  await startWhisper()\n}\n\nconst resetVoiceState = () => {\n  parsedVoiceTask.value = null\n  showVoiceConfirmation.value = false\n}\n\nconst {\n  brainDumpMode,\n  brainDumpText,\n  textDirection,\n  parsedTaskCount,\n  processBrainDump\n} = useBrainDump()\n\nconst quickAddDirection = computed(() => {\n  if (!newTaskTitle.value.trim()) return 'ltr'\n  const firstChar = newTaskTitle.value.trim()[0]\n  const rtlRegex = /[\\u0590-\\u05FF\\u0600-\\u06FF\\u0750-\\u077F\\u08A0-\\u08FF\\uFB50-\\uFDFF\\uFE70-\\uFEFF]/\n  return rtlRegex.test(firstChar) ? 'rtl' : 'ltr'\n})\n\nconst handleAddTask = () => {\n  if (!newTaskTitle.value.trim()) return\n  emit('addTask', newTaskTitle.value)\n  newTaskTitle.value = ''\n}\n</script>\n\n<style scoped>\n.quick-add {\n  padding: var(--space-3) var(--space-4);\n  border-bottom: 1px solid var(--glass-border);\n  background: transparent;\n}\n\n.quick-add-row {\n  display: flex;\n  gap: var(--space-2);\n  align-items: center;\n}\n\n.quick-add-input {\n  flex: 1;\n  padding: var(--space-2) var(--space-3);\n  border-radius: var(--radius-md);\n  border: 1px solid var(--glass-border);\n  background: var(--glass-bg-soft);\n  color: var(--text-primary);\n  font-size: var(--text-sm);\n  transition: all var(--duration-normal);\n}\n\n.quick-add-input:focus {\n  outline: none;\n  border-color: var(--brand-primary);\n  box-shadow: 0 0 0 2px var(--brand-primary-subtle);\n}\n\n.quick-add-input.voice-active {\n  border-color: var(--danger-text, #ef4444);\n  box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.2);\n}\n\n/* Mic Button (TASK-1024) */\n.mic-btn {\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  border: none;\n  background: var(--glass-bg-soft);\n  color: var(--text-secondary);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  flex-shrink: 0;\n  transition: all 0.2s ease;\n}\n\n.mic-btn:hover:not(:disabled) {\n  background: var(--glass-bg);\n  color: var(--text-primary);\n}\n\n.mic-btn:active:not(:disabled) {\n  transform: scale(0.95);\n}\n\n.mic-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.mic-btn.recording {\n  background: var(--danger-text, #ef4444);\n  color: white;\n  animation: pulse-recording 1.5s ease-in-out infinite;\n}\n\n.mic-btn.processing {\n  background: var(--brand-primary, #3b82f6);\n  color: white;\n}\n\n.spin {\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n\n@keyframes pulse-recording {\n  0%, 100% {\n    box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4);\n  }\n  50% {\n    box-shadow: 0 0 0 8px rgba(239, 68, 68, 0);\n  }\n}\n\n/* Voice feedback panel */\n.voice-feedback {\n  display: flex;\n  align-items: center;\n  gap: var(--space-3);\n  padding: var(--space-2) var(--space-3);\n  margin-top: var(--space-2);\n  background: var(--glass-bg-soft);\n  border-radius: var(--radius-md);\n  border: 1px solid var(--glass-border);\n}\n\n.voice-waveform {\n  display: flex;\n  align-items: center;\n  gap: 2px;\n  height: 20px;\n}\n\n.wave-bar {\n  width: 3px;\n  height: 6px;\n  background: var(--danger-text, #ef4444);\n  border-radius: 2px;\n  animation: wave 0.8s ease-in-out infinite;\n}\n\n.wave-bar:nth-child(1) { animation-delay: 0s; }\n.wave-bar:nth-child(2) { animation-delay: 0.1s; }\n.wave-bar:nth-child(3) { animation-delay: 0.3s; }\n.wave-bar:nth-child(4) { animation-delay: 0.3s; }\n.wave-bar:nth-child(5) { animation-delay: 0.4s; }\n\n@keyframes wave {\n  0%, 100% { height: 6px; }\n  50% { height: 16px; }\n}\n\n.voice-status {\n  flex: 1;\n  font-size: var(--text-sm);\n  color: var(--text-secondary);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.voice-cancel {\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  border: none;\n  background: transparent;\n  color: var(--text-tertiary);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  flex-shrink: 0;\n}\n\n.voice-cancel:hover {\n  background: var(--glass-bg);\n  color: var(--danger-text, #ef4444);\n}\n\n/* Voice error message */\n.voice-error {\n  margin-top: var(--space-2);\n  padding: var(--space-2) var(--space-3);\n  background: rgba(239, 68, 68, 0.1);\n  border-radius: var(--radius-sm);\n  font-size: var(--text-xs);\n  color: var(--danger-text, #ef4444);\n}\n\n.brain-dump-section {\n  padding: var(--space-3) var(--space-4);\n  border-bottom: 1px solid var(--glass-border);\n  background: transparent;\n}\n\n.brain-dump-container {\n  margin-top: var(--space-3);\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-2);\n}\n\n.brain-dump-textarea {\n  width: 100%;\n  padding: var(--space-2);\n  border-radius: var(--radius-md);\n  border: 1px solid var(--glass-border);\n  background: var(--glass-bg-soft);\n  color: var(--text-primary);\n  font-size: var(--text-sm);\n  resize: vertical;\n  min-height: 100px;\n}\n\n.brain-dump-textarea:focus {\n  outline: none;\n  border-color: var(--brand-primary);\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/inbox/unified/UnifiedInboxList.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/inbox/unified/UnifiedInboxTaskCard.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/kanban/KanbanColumn.vue","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":174,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":174,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5123,5126],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5123,5126],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":181,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":181,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5365,5368],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5365,5368],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":184,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":184,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5521,5524],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5521,5524],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<template>\n  <div class=\"kanban-column\" :class=\"wipStatusClass\">\n    <div class=\"column-header\">\n      <div class=\"header-left\">\n        <span\n          v-if=\"priorityColor\"\n          class=\"column-priority-dot\"\n          :style=\"{ background: priorityColor }\"\n        />\n        <span class=\"column-title\">{{ title }}</span>\n        <span class=\"task-count\">{{ taskCount }}</span>\n      </div>\n      <button class=\"add-task-btn\" @click=\"$emit('addTask', status)\">\n        <Plus :size=\"12\" />\n      </button>\n    </div>\n\n    <div class=\"tasks-container\">\n      <draggable\n        v-model=\"localTasks\"\n        :group=\"dragGroup\"\n        item-key=\"id\"\n        class=\"drag-area\"\n        :animation=\"200\"\n        ghost-class=\"ghost-card\"\n        chosen-class=\"chosen-card\"\n        drag-class=\"drag-card\"\n        force-fallback\n        fallback-class=\"sortable-fallback\"\n        :fallback-tolerance=\"3\"\n        :scroll-sensitivity=\"100\"\n        :scroll-speed=\"20\"\n        bubble-scroll\n        :delay=\"100\"\n        delay-on-touch-only\n        :touch-start-threshold=\"5\"\n        :disabled=\"false\"\n        easing=\"cubic-bezier(0.25, 0.46, 0.45, 0.94)\"\n        tag=\"div\"\n        @start=\"onDragStart\"\n        @end=\"onDragEnd\"\n        @change=\"handleDragChange\"\n      >\n        <template #item=\"{ element: task }\">\n          <TaskCard\n            :key=\"task.id\"\n            :task=\"task\"\n            class=\"task-item\"\n            @select=\"$emit('selectTask', $event)\"\n            @start-timer=\"$emit('startTimer', $event)\"\n            @edit=\"$emit('editTask', $event)\"\n            @delete=\"$emit('deleteTask', $event)\"\n            @context-menu=\"(event, task) => $emit('contextMenu', event, task)\"\n          />\n        </template>\n\n        <template #footer>\n          <div v-if=\"tasks.length === 0\" class=\"empty-column\">\n            <span class=\"empty-message\">No {{ title.toLowerCase() }} tasks</span>\n            <button class=\"add-first-task\" @click=\"$emit('addTask', status)\">\n              <Plus :size=\"16\" />\n              Add {{ title.toLowerCase() }} task\n            </button>\n          </div>\n        </template>\n      </draggable>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, watch, nextTick } from 'vue'\nimport draggable from 'vuedraggable'\nimport TaskCard from './TaskCard.vue'\nimport { useTaskStore, type Task } from '@/stores/tasks'\nimport { Plus } from 'lucide-vue-next'\n\nimport './KanbanColumn.css'\n\ninterface Props {\n  title: string\n  status: Task['status']\n  tasks: Task[]\n  wipLimit?: number\n  columnType?: 'status' | 'priority' | 'date'\n  swimlaneId?: string\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  wipLimit: 10,\n  columnType: 'status',\n  swimlaneId: 'default'\n})\n\ndefineEmits<{\n  addTask: [status: Task['status']]\n  selectTask: [taskId: string]\n  startTimer: [taskId: string]\n  editTask: [taskId: string]\n  deleteTask: [taskId: string]\n  contextMenu: [event: MouseEvent, task: Task]\n}>()\n\n// BUG-1193: Track drag state to prevent reactive overwrites during drag\nconst isDragActive = ref(false)\n\nconst localTasks = ref([...props.tasks])\nwatch(() => props.tasks, (newTasks) => {\n  // BUG-1193: Don't overwrite localTasks during active drag operation\n  // vuedraggable manages the array during drag - reactive updates cause desync\n  // where the wrong task element gets associated with the drag ghost\n  if (!isDragActive.value) {\n    localTasks.value = [...newTasks]\n  }\n})\n\n// BUG-1193: Scope drag group per swimlane to prevent cross-project drag confusion\n// Without this, all columns across all swimlanes share group=\"tasks\" and\n// vuedraggable can move tasks between unrelated projects\nconst dragGroup = computed(() => ({\n  name: `tasks-${props.swimlaneId}`,\n  pull: true,\n  put: true\n}))\n\nconst onDragStart = () => {\n  isDragActive.value = true\n}\n\nconst onDragEnd = () => {\n  isDragActive.value = false\n  // Sync localTasks with store state after drag completes\n  nextTick(() => {\n    localTasks.value = [...props.tasks]\n  })\n}\n\nconst taskCount = computed(() => props.tasks.length)\n\n// Priority column color indicator\nconst priorityColor = computed(() => {\n  const priorityColors: Record<string, string> = {\n    'high': 'var(--color-priority-high, #ef4444)',\n    'medium': 'var(--color-priority-medium, #f59e0b)',\n    'low': 'var(--color-priority-low, #3b82f6)',\n    'no_priority': 'rgba(255, 255, 255, 0.2)'\n  }\n  return priorityColors[props.status] || null\n})\n\nconst wipStatusClass = computed(() => {\n  if (!props.wipLimit) return ''\n  const count = taskCount.value\n  const limit = props.wipLimit\n  if (count >= limit) return 'wip-exceeded'\n  if (count >= Math.floor(limit * 0.8)) return 'wip-warning'\n  return ''\n})\n\nconst taskStore = useTaskStore()\n\n/**\n * Recalculate order values for all tasks in localTasks based on their current array position.\n * Uses simple integer indexing (0, 1, 2, ...) and persists via updateTask.\n */\nconst persistOrderForColumn = () => {\n  localTasks.value.forEach((task, index) => {\n    if (task.order !== index) {\n      taskStore.updateTask(task.id, { order: index })\n    }\n  })\n}\n\nconst handleDragChange = async (event: any) => {\n  if (event.added) {\n    try {\n      const taskId = event.added.element.id\n\n      if (props.columnType === 'priority') {\n        // Priority columns: update task priority\n        taskStore.moveTaskToPriority(taskId, props.status as any)\n      } else if (props.columnType === 'date') {\n        // Date columns: update task due date\n        taskStore.moveTaskToDate(taskId, props.status as any)\n      } else {\n        // Status columns (default): update task status\n        await taskStore.moveTaskWithUndo(taskId, props.status)\n      }\n\n      // Persist order for all tasks in this column after cross-column move\n      persistOrderForColumn()\n    } catch (error) {\n      console.error('Failed to move task:', error)\n      window.dispatchEvent(new CustomEvent('flowstate:error', {\n        detail: { message: 'Failed to move task. Please try again.' }\n      }))\n    }\n  }\n\n  if (event.moved) {\n    // Within-column reorder: persist new order values\n    persistOrderForColumn()\n  }\n}\n</script>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/kanban/KanbanSwimlane.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/kanban/TaskCard.vue","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":124,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":124,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3694,3697],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3694,3697],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<template>\n  <article\n    ref=\"cardRef\"\n    class=\"task-card\"\n    :class=\"[\n      { 'collapsed': progressiveDisclosureEnabled && !isExpanded },\n      { 'completed': task.status === 'done' },\n      { 'focused': isFocused },\n      { 'selected': isSelected },\n      { 'timer-active': isTimerActive },\n      { 'is-flashing': isFlashing },\n      density ? `task-card--${density}` : ''\n    ]\"\n    :tabindex=\"disabled ? -1 : 0\"\n    role=\"button\"\n    :aria-label=\"taskAriaLabel\"\n    :aria-describedby=\"`task-meta-${task.id}`\"\n    :aria-pressed=\"isPressed\"\n    :aria-expanded=\"progressiveDisclosureEnabled ? isExpanded : undefined\"\n    :aria-disabled=\"disabled\"\n    data-draggable=\"true\"\n    :data-status=\"task.status\"\n    :data-priority=\"task.priority || 'none'\"\n    @click=\"handleCardClick\"\n    @keydown=\"handleKeydown\"\n    @contextmenu.prevent=\"handleRightClick\"\n    @focus=\"handleFocus\"\n    @blur=\"handleBlur\"\n  >\n    <!-- Status icon and title row -->\n    <div class=\"card-header\" :dir=\"isRtl ? 'rtl' : undefined\">\n      <!-- Priority Dot -->\n      <TaskCardStatus\n        :priority=\"task.priority\"\n        :status=\"task.status\"\n        @cycle=\"cycleStatus\"\n      />\n\n      <!-- Title and metadata in flex layout -->\n      <div class=\"title-section\">\n        <h3\n          :id=\"`task-title-${task.id}`\"\n          class=\"task-title\"\n          :class=\"[titleAlignmentClasses, { 'completed-title': task.status === 'done' }]\"\n          :dir=\"isRtl ? 'rtl' : 'ltr'\"\n        >\n          {{ truncateUrlsInText(task.title) }}\n        </h3>\n\n        <!-- Metadata Badges -->\n        <TaskCardBadges\n          v-if=\"!progressiveDisclosureEnabled || isExpanded\"\n          v-bind=\"{\n            task,\n            density,\n            formattedDueDate,\n            formattedDuration,\n            completedSubtasks,\n            hasDependencies,\n            durationBadgeClass,\n            projectVisual\n          }\"\n        />\n      </div>\n\n      <!-- Action Buttons -->\n      <TaskCardActions\n        @focus-mode=\"enterFocusMode\"\n        @start-timer=\"$emit('startTimer', task.id)\"\n        @edit=\"$emit('edit', task.id)\"\n      />\n    </div>\n\n    <!-- Progressive Disclosure Content (only when expanded) -->\n    <Transition name=\"expand\">\n      <div v-show=\"!progressiveDisclosureEnabled || isExpanded\" class=\"card-details\">\n        <!-- No additional details needed currently -->\n      </div>\n    </Transition>\n  </article>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref, onMounted, onUnmounted } from 'vue'\nimport { useRouter } from 'vue-router'\nimport type { Task } from '@/stores/tasks'\nimport { useTaskCardState } from '@/composables/tasks/card/useTaskCardState'\nimport { useTaskCardActions } from '@/composables/tasks/card/useTaskCardActions'\nimport { useTimerStore } from '@/stores/timer'\nimport { truncateUrlsInText } from '@/utils/urlTruncate'\n\n// Sub-components\nimport TaskCardStatus from './card/TaskCardStatus.vue'\nimport TaskCardBadges from './card/TaskCardBadges.vue'\nimport TaskCardActions from './card/TaskCardActions.vue'\n\nimport './TaskCard.css'\n\ninterface Props {\n  task: Task\n  density?: 'ultrathin' | 'compact' | 'comfortable' | 'spacious'\n  disabled?: boolean\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  density: 'comfortable',\n  disabled: false\n})\n\nconst emit = defineEmits<{\n  select: [taskId: string]\n  startTimer: [taskId: string]\n  edit: [taskId: string]\n  delete: [taskId: string]\n  contextMenu: [event: MouseEvent, task: Task]\n  focus: [event: FocusEvent]\n  blur: [event: FocusEvent]\n}>()\n\n// --- Logic ---\nconst router = useRouter()\nconst timerStore = useTimerStore()\nconst state = useTaskCardState(props)\nconst actions = useTaskCardActions(props, emit as any, state)\n\n// Timer active state\nconst isTimerActive = computed(() => {\n  return timerStore.isTimerActive && timerStore.currentTaskId === props.task.id\n})\n\nconst {\n  isExpanded, isFocused, isPressed, cardRef,\n  isSelected, hasDependencies, completedSubtasks,\n  formattedDueDate, formattedDuration, durationBadgeClass,\n  titleAlignmentClasses, isRtl, projectVisual, taskAriaLabel,\n  progressiveDisclosureEnabled\n} = state\n\nconst {\n  handleCardClick, handleKeydown, handleFocus,\n  handleBlur, handleRightClick, cycleStatus\n} = actions\n\n// Focus mode navigation\nconst enterFocusMode = () => {\n  router.push(`/focus/${props.task.id}`)\n}\n\n// TASK-1074: Flash animation when date is set via context menu\nconst isFlashing = ref(false)\nconst handleTaskFlash = (event: Event) => {\n  const customEvent = event as CustomEvent<{ taskId: string }>\n  if (customEvent.detail.taskId === props.task?.id) {\n    isFlashing.value = true\n    setTimeout(() => { isFlashing.value = false }, 600)\n  }\n}\nonMounted(() => {\n  window.addEventListener('task-action-flash', handleTaskFlash)\n})\nonUnmounted(() => {\n  window.removeEventListener('task-action-flash', handleTaskFlash)\n})\n</script>\n\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/kanban/card/TaskCardActions.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/kanban/card/TaskCardBadges.vue","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":56,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":56,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1523,1526],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1523,1526],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<template>\n  <div\n    class=\"task-card-badges\"\n    role=\"group\"\n    aria-label=\"Task metadata\"\n  >\n    <!-- Due Date -->\n    <span\n      v-if=\"task.dueDate\"\n      class=\"meta-badge\"\n      :class=\"dueDateClass\"\n      :title=\"`Due: ${formattedDueDate}`\"\n    >\n      {{ formattedDueDate }}\n    </span>\n\n    <!-- Dot separator -->\n    <span v-if=\"task.dueDate && task.subtasks?.length\" class=\"badge-separator\">·</span>\n\n    <!-- Subtasks -->\n    <span\n      v-if=\"task.subtasks?.length\"\n      class=\"meta-badge\"\n      :title=\"`Subtasks: ${completedSubtasks}/${task.subtasks.length}`\"\n    >\n      {{ completedSubtasks }}/{{ task.subtasks.length }}\n    </span>\n\n    <!-- Dot separator for pomodoros -->\n    <span v-if=\"(task.dueDate || task.subtasks?.length) && task.completedPomodoros > 0\" class=\"badge-separator\">·</span>\n\n    <!-- Pomodoros (if any) -->\n    <span\n      v-if=\"task.completedPomodoros > 0\"\n      class=\"meta-badge pomodoro-badge\"\n      :title=\"`Pomodoro sessions: ${task.completedPomodoros}`\"\n    >\n      {{ task.completedPomodoros }}\n    </span>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from 'vue'\nimport type { Task } from '@/stores/tasks'\nimport { reactiveToday, ensureDateTimer } from '@/composables/useReactiveDate'\n\nconst props = defineProps<{\n  task: Task\n  density?: 'ultrathin' | 'compact' | 'comfortable' | 'spacious'\n  formattedDueDate: string\n  formattedDuration: string\n  completedSubtasks: number\n  hasDependencies?: boolean\n  durationBadgeClass: string\n  projectVisual: any\n}>()\n\n// BUG-1191: Ensure date timer is running for reactive overdue detection\nensureDateTimer()\n\n// BUG-1191: Highlight overdue or today's tasks (reactive to date changes)\nconst dueDateClass = computed(() => {\n  if (!props.task.dueDate) return ''\n  // BUG-1191: Reactive dependency - ensures re-evaluation at midnight\n  const _todayTrigger = reactiveToday.value\n  const today = new Date()\n  today.setHours(0, 0, 0, 0)\n  const due = new Date(props.task.dueDate)\n  due.setHours(0, 0, 0, 0)\n\n  if (due < today) return 'due-overdue'\n  if (due.getTime() === today.getTime()) return 'due-today'\n  return ''\n})\n</script>\n\n<style scoped>\n.task-card-badges {\n  display: flex;\n  flex-wrap: wrap;\n  gap: var(--space-1);\n  align-items: center;\n  justify-content: flex-start;\n  min-height: 18px;\n  margin-top: var(--space-1);\n}\n\n/* Base Badge - Clean, minimal text style */\n.meta-badge {\n  display: inline-flex;\n  align-items: center;\n  font-size: var(--text-meta);\n  font-weight: 400;\n  color: var(--text-tertiary);\n  white-space: nowrap;\n}\n\n/* Dot separator between badges */\n.badge-separator {\n  color: var(--text-subtle);\n  font-size: var(--text-meta);\n  margin: 0 var(--space-1);\n  user-select: none;\n}\n\n/* Due date highlighting */\n.due-today {\n  color: var(--color-work, #22c55e);\n  font-weight: 500;\n}\n\n.due-overdue {\n  color: var(--color-priority-high, #ef4444);\n  font-weight: 500;\n}\n\n/* Pomodoro badge - subtle tomato indicator */\n.pomodoro-badge {\n  color: rgba(239, 68, 68, 0.6);\n}\n\n.pomodoro-badge::before {\n  content: '';\n  display: inline-block;\n  width: 6px;\n  height: 6px;\n  border-radius: 50%;\n  background: currentColor;\n  margin-inline-end: 4px;\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/kanban/card/TaskCardStatus.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/layout/CategorySelector.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/layout/CommandPalette.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/layout/KeyboardShortcutsPanel.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/layout/SearchModal.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/layout/SettingsModal.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/layout/SidebarSmartItem.vue","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":90,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":90,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2348,2351],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2348,2351],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":156,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":156,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4170,4173],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4170,4173],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":157,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":157,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4193,4196],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4193,4196],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<template>\n  <div\n    class=\"sidebar-smart-item\"\n    :class=\"[\n      `color-${color}`,\n      {\n        'is-active': active,\n        'is-compact': compact,\n        'is-drag-target': isDragTarget,\n        'is-drag-valid': isDragValid,\n        'is-drag-invalid': isDragTarget && !isDragValid && isDragging,\n        'is-empty': count === 0\n      }\n    ]\"\n    @click=\"$emit('click', $event)\"\n    @dragenter=\"handleDragEnter\"\n    @dragover=\"handleDragOver\"\n    @dragleave=\"handleDragLeave\"\n    @drop=\"handleDrop\"\n  >\n    <!-- Icon slot -->\n    <div v-if=\"$slots.icon\" class=\"item-icon\">\n      <slot name=\"icon\" />\n    </div>\n\n    <!-- Label -->\n    <span class=\"item-label\">\n      <slot />\n    </span>\n\n    <!-- Count badge -->\n    <BaseBadge\n      v-if=\"count !== undefined\"\n      variant=\"count\"\n      size=\"sm\"\n      rounded\n      class=\"item-badge\"\n    >\n      {{ count }}\n    </BaseBadge>\n\n    <!-- Drop target indicator -->\n    <div v-if=\"isDragTarget && isDragValid\" class=\"drop-indicator\">\n      <component :is=\"dropIcon\" :size=\"14\" />\n      <span>{{ dropLabel }}</span>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed } from 'vue'\nimport { Calendar, Clock } from 'lucide-vue-next'\nimport BaseBadge from '@/components/base/BaseBadge.vue'\nimport { useDragAndDrop } from '@/composables/useDragAndDrop'\nimport { useTaskStore } from '@/stores/tasks'\n\ninterface Props {\n  active?: boolean\n  count?: number\n  compact?: boolean\n  color?: 'azure' | 'azure-dark' | 'blue' | 'orange' | 'teal' | 'green' | 'purple' | 'gray'\n  dropType?: 'date' | 'duration' | 'none'\n  dropValue?: string | number\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  active: false,\n  count: undefined,\n  compact: false,\n  color: 'teal',\n  dropType: 'none',\n  dropValue: undefined\n})\n\nconst _emit = defineEmits<{\n  click: [event: MouseEvent]\n}>()\n\nconst { isDragging, dragData, isValidDrop, setDropTarget, startDrag: _startDrag, endDrag: _endDrag } = useDragAndDrop()\nconst taskStore = useTaskStore()\n\nconst isDragTarget = ref(false)\n\nconst isDragValid = computed(() => {\n  if (!dragData.value) return false\n\n  // Only accept task drops\n  if (dragData.value.type === 'task' && dragData.value.taskId) {\n    const targetType = props.dropType === 'date' ? 'date-target' : 'duration-target'\n    return isValidDrop(dragData.value, targetType as any)\n  }\n\n  return false\n})\n\nconst dropIcon = computed(() => props.dropType === 'date' ? Calendar : Clock)\n\nconst dropLabel = computed(() => {\n  if (props.dropType === 'date') {\n    switch (props.dropValue) {\n      case 'today': return 'Set for Today'\n      case 'tomorrow': return 'Set for Tomorrow'\n      case 'weekend': return 'Set for Weekend'\n      case 'nodate': return 'Clear Date'\n      default: return 'Schedule'\n    }\n  } else if (props.dropType === 'duration') {\n    switch (props.dropValue) {\n      case 15: return 'Set 15 min'\n      case 30: return 'Set 30 min'\n      case 60: return 'Set 1 hour'\n      case 120: return 'Set 2 hours'\n      case -1: return 'Clear Estimate'\n      default: return 'Set Duration'\n    }\n  }\n  return 'Drop here'\n})\n\nconst handleDragEnter = (event: DragEvent) => {\n  event.preventDefault()\n  isDragTarget.value = true\n  const dropId = props.dropType === 'date' ? props.dropValue : `duration-${props.dropValue}`\n  setDropTarget(dropId as string)\n}\n\nconst handleDragOver = (event: DragEvent) => {\n  event.preventDefault()\n  if (isDragValid.value) {\n    event.dataTransfer!.dropEffect = 'move'\n  } else {\n    event.dataTransfer!.dropEffect = 'none'\n  }\n}\n\nconst handleDragLeave = (event: DragEvent) => {\n  event.preventDefault()\n  const rect = (event.currentTarget as HTMLElement).getBoundingClientRect()\n  const x = event.clientX\n  const y = event.clientY\n\n  if (x < rect.left || x > rect.right || y < rect.top || y > rect.bottom) {\n    isDragTarget.value = false\n    setDropTarget(null)\n  }\n}\n\nconst handleDrop = async (event: DragEvent) => {\n  event.preventDefault()\n  event.stopPropagation()\n\n  isDragTarget.value = false\n  setDropTarget(null)\n\n  if (dragData.value && isDragValid.value && dragData.value.type === 'task' && dragData.value.taskId) {\n    const store = taskStore as any\n    const updates: any = {}\n\n    if (props.dropType === 'date') {\n      updates.dueDate = calculateTargetDate()\n    } else if (props.dropType === 'duration') {\n      updates.estimatedDuration = props.dropValue === -1 ? null : props.dropValue\n    }\n\n    if (store.updateTaskWithUndo) {\n      await store.updateTaskWithUndo(dragData.value.taskId, updates)\n    } else {\n      await taskStore.updateTask(dragData.value.taskId, updates) // BUG-1051: AWAIT to ensure persistence\n    }\n  }\n}\n\nconst calculateTargetDate = (): string => {\n  const today = new Date()\n  today.setHours(0, 0, 0, 0)\n\n  switch (props.dropValue) {\n    case 'today':\n      return today.toISOString().split('T')[0]\n    case 'tomorrow': {\n      const tomorrow = new Date(today)\n      tomorrow.setDate(tomorrow.getDate() + 1)\n      return tomorrow.toISOString().split('T')[0]\n    }\n    case 'weekend': {\n      const saturday = new Date(today)\n      const daysUntilSaturday = (6 - today.getDay() + 7) % 7 || 7\n      saturday.setDate(today.getDate() + daysUntilSaturday)\n      return saturday.toISOString().split('T')[0]\n    }\n    case 'nodate':\n    default:\n      return ''\n  }\n}\n</script>\n\n<style scoped>\n.sidebar-smart-item {\n  display: flex;\n  align-items: center;\n  gap: var(--space-3);\n  padding: var(--space-3) var(--space-4);\n  border-radius: var(--radius-lg);\n  cursor: pointer;\n  transition: all var(--duration-normal) var(--spring-smooth);\n  position: relative;\n  min-height: 40px;\n  user-select: none;\n  border: 1px solid transparent;\n}\n\n.sidebar-smart-item.is-compact {\n  padding: var(--space-1_5) var(--space-2);\n  gap: var(--space-2);\n  min-height: 32px;\n  border-radius: var(--radius-md);\n}\n\n.sidebar-smart-item:hover {\n  background: var(--surface-hover);\n}\n\n/* ADHD-friendly: Dim zero-count items to reduce visual noise */\n.sidebar-smart-item.is-empty {\n  opacity: 0.5;\n}\n\n.sidebar-smart-item.is-empty:hover {\n  opacity: 0.8;\n}\n\n/* Active Glassmorphism States */\n.sidebar-smart-item.is-active {\n  backdrop-filter: var(--state-active-glass);\n  -webkit-backdrop-filter: var(--state-active-glass);\n  color: var(--state-active-text);\n  font-weight: var(--font-semibold);\n}\n\n/* Color Mapping for Active State */\n.sidebar-smart-item.color-azure.is-active {\n  background: var(--filter-today-bg);\n  border-color: var(--filter-today-border);\n  box-shadow: var(--filter-today-glow);\n}\n\n.sidebar-smart-item.color-azure-dark.is-active {\n  background: var(--filter-week-bg);\n  border-color: var(--filter-week-border);\n  box-shadow: var(--filter-week-glow);\n}\n\n.sidebar-smart-item.color-blue.is-active {\n  background: var(--filter-tasks-bg);\n  border-color: var(--filter-tasks-border);\n  box-shadow: var(--filter-tasks-glow);\n}\n\n.sidebar-smart-item.color-orange.is-active {\n  background: var(--filter-uncategorized-bg);\n  border-color: var(--filter-uncategorized-border);\n  box-shadow: var(--filter-uncategorized-glow);\n}\n\n.sidebar-smart-item.color-teal.is-active {\n  background: var(--state-active-bg);\n  border-color: var(--state-active-border);\n  box-shadow: var(--state-hover-glow);\n}\n\n/* Duration Specific Colors (New Unified System) */\n.sidebar-smart-item.color-green.is-active {\n  background: var(--success-bg-subtle);\n  border-color: var(--success-border-medium);\n  box-shadow: var(--success-glow);\n}\n\n.sidebar-smart-item.color-purple.is-active {\n  background: var(--purple-bg-subtle);\n  border-color: var(--purple-border-medium);\n  box-shadow: var(--purple-shadow-medium);\n}\n\n.sidebar-smart-item.color-gray.is-active {\n  background: var(--glass-bg-heavy);\n  border-color: var(--glass-border-hover);\n  box-shadow: var(--shadow-sm);\n}\n\n.item-icon {\n  color: var(--text-muted);\n  display: flex;\n  align-items: center;\n  flex-shrink: 0;\n  transition: color var(--duration-normal) var(--spring-smooth);\n}\n\n.is-active .item-icon {\n  color: var(--text-primary);\n}\n\n.sidebar-smart-item:hover .item-icon {\n  color: var(--text-secondary);\n}\n\n.item-label {\n  color: var(--text-secondary);\n  font-size: var(--text-sm);\n  font-weight: var(--font-medium);\n  flex: 1;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  transition: color var(--duration-fast);\n}\n\n.is-compact .item-label {\n  font-size: var(--text-xs);\n}\n\n.is-active .item-label {\n  color: var(--text-primary);\n}\n\n.sidebar-smart-item:hover .item-label {\n  color: var(--text-primary);\n}\n\n/* Drag states */\n.sidebar-smart-item.is-drag-target.is-drag-valid {\n  background: color-mix(in srgb, var(--brand-primary) 15%, transparent) !important;\n  border-color: var(--brand-primary) !important;\n  box-shadow: 0 0 0 2px color-mix(in srgb, var(--brand-primary) 20%, transparent) !important;\n  animation: pulseValid 1.5s ease-in-out infinite;\n}\n\n.sidebar-smart-item.is-drag-target.is-drag-invalid {\n  background: var(--color-danger-bg-light) !important;\n  border-color: rgba(255, 107, 107, 0.3) !important;\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n/* Drop indicator */\n.drop-indicator {\n  position: absolute;\n  left: 100%;\n  top: 50%;\n  transform: translateY(-50%);\n  margin-left: var(--space-3);\n  padding: var(--space-2) var(--space-3);\n  background: linear-gradient(\n    135deg,\n    color-mix(in srgb, var(--brand-primary) 95%, transparent) 0%,\n    color-mix(in srgb, var(--brand-primary) 85%, transparent) 100%\n  );\n  backdrop-filter: blur(12px);\n  -webkit-backdrop-filter: blur(12px);\n  border: 1px solid var(--brand-primary);\n  border-radius: var(--radius-md);\n  color: #0a0a0a;\n  font-size: var(--text-xs);\n  font-weight: var(--font-medium);\n  white-space: nowrap;\n  pointer-events: none;\n  box-shadow:\n    0 4px 12px color-mix(in srgb, var(--brand-primary) 30%, transparent),\n    0 0 0 2px color-mix(in srgb, var(--brand-primary) 20%, transparent);\n  z-index: 1000;\n  animation: slideInIndicator 0.2s var(--spring-smooth);\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n}\n\n@keyframes pulseValid {\n  0%, 100% {\n    box-shadow: 0 0 0 2px color-mix(in srgb, var(--brand-primary) 20%, transparent) !important;\n  }\n  50% {\n    box-shadow: 0 0 0 4px color-mix(in srgb, var(--brand-primary) 30%, transparent) !important;\n  }\n}\n\n@keyframes slideInIndicator {\n  from {\n    opacity: 0;\n    transform: translateY(-50%) translateX(-8px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(-50%) translateX(0);\n  }\n}\n\n:global(body.dragging-active) .sidebar-smart-item:not(.is-drag-target) {\n  opacity: 0.7;\n  transition: opacity var(--duration-fast);\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/layout/ViewControls.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/notifications/NotificationPreferences.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/projects/ProjectDropZone.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/projects/ProjectFilterDropdown.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/projects/ProjectModal.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/projects/ProjectTreeItem.vue","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":78,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2690,2693],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2690,2693],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<template>\n  <div\n    :id=\"`project-${project.id}`\"\n    class=\"project-tree-item\"\n    :class=\"{ 'is-selected': isSelected }\"\n    :style=\"{ '--nesting-depth': nestingDepth }\"\n    role=\"treeitem\"\n    :aria-expanded=\"hasChildren ? isExpanded : undefined\"\n    :aria-level=\"level\"\n    :aria-selected=\"taskStore.activeProjectId === project.id || isSelected\"\n    :aria-label=\"project.name\"\n    tabindex=\"-1\"\n  >\n    <!-- The project itself -->\n    <BaseNavItem\n      :active=\"taskStore.activeProjectId === project.id\"\n      :selected=\"isSelected\"\n      :project-id=\"project.id\"\n      :has-children=\"hasChildren\"\n      :expanded=\"isExpanded\"\n      :color-dot=\"Array.isArray(project.color) ? project.color[0] : project.color\"\n      :color-type=\"project.colorType\"\n      :emoji=\"project.emoji\"\n      :count=\"getProjectTaskCount(project.id)\"\n      :nested=\"nested\"\n      :style=\"{ '--nesting-indent': `${nestingDepth * 14}px` }\"\n      :aria-expanded=\"hasChildren ? isExpanded : undefined\"\n      :aria-level=\"level\"\n      :tabindex=\"taskStore.activeProjectId === project.id ? 0 : -1\"\n      @click=\"handleProjectClick\"\n      @toggle-expand=\"toggleExpand\"\n      @contextmenu.prevent=\"$emit('contextmenu', $event, project)\"\n      @project-drop=\"$emit('projectDrop', $event)\"\n    >\n      {{ project.name }}\n    </BaseNavItem>\n\n    <!-- Recursively render children if expanded -->\n    <Transition\n      name=\"nested-projects\"\n      tag=\"div\"\n      class=\"nested-children-transition\"\n    >\n      <div\n        v-if=\"hasChildren && isExpanded\"\n        class=\"nested-children\"\n        role=\"group\"\n        :style=\"{ '--nesting-indent': `${(nestingDepth + 1) * 14}px` }\"\n      >\n        <ProjectTreeItem\n          v-for=\"child in children\"\n          :key=\"child.id\"\n          :project=\"child\"\n          :expanded-projects=\"expandedProjects\"\n          :selected-project-ids=\"selectedProjectIds\"\n          nested\n          :nesting-depth=\"nestingDepth + 1\"\n          :level=\"level + 1\"\n          @click=\"(event, project) => $emit('click', event, project)\"\n          @toggle-expand=\"(projectId) => $emit('toggleExpand', projectId)\"\n          @contextmenu=\"(event, project) => $emit('contextmenu', event, project)\"\n          @project-drop=\"(data) => $emit('projectDrop', data)\"\n        />\n      </div>\n    </Transition>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from 'vue'\nimport { useTaskStore, type Project } from '@/stores/tasks'\nimport BaseNavItem from '@/components/base/BaseNavItem.vue'\n\ninterface Props {\n  project: Project\n  expandedProjects: string[]\n  // Allow Set, Array, or Object (for cross-tab sync compatibility)\n  selectedProjectIds?: Set<string> | string[] | Record<string, any>\n  nested?: boolean\n  nestingDepth?: number\n  level?: number\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  nested: false,\n  nestingDepth: 0,\n  level: 1,\n  selectedProjectIds: () => new Set()\n})\n\nconst emit = defineEmits<{\n  click: [event: MouseEvent, project: Project]\n  toggleExpand: [projectId: string]\n  contextmenu: [event: MouseEvent, project: Project]\n  projectDrop: [data: unknown]\n}>()\n\nconst taskStore = useTaskStore()\n\n// Safely convert selectedProjectIds to Set (handles cross-tab sync serialization)\n// PiniaSharedState serializes Sets as plain objects, so we need to handle that\nconst selectedIds = computed<Set<string>>(() => {\n  const raw = props.selectedProjectIds\n  if (raw instanceof Set) return raw\n  if (Array.isArray(raw)) return new Set(raw)\n  if (raw && typeof raw === 'object') {\n    // Object from JSON serialization - use keys or values\n    return new Set(Object.keys(raw))\n  }\n  return new Set()\n})\n\n// Check if this project is selected\nconst isSelected = computed(() => {\n  return selectedIds.value.has(props.project.id)\n})\n\n// Check if this project has children\nconst hasChildren = computed(() => {\n  return taskStore.projects.some(p => p.parentId === props.project.id)\n})\n\n// Check if this project is expanded\nconst isExpanded = computed(() => {\n  return Array.isArray(props.expandedProjects) && props.expandedProjects.includes(props.project.id)\n})\n\n// Get children of this project\nconst children = computed(() => {\n  return taskStore.projects.filter(p => p.parentId === props.project.id)\n})\n\n// Toggle expansion\nconst toggleExpand = () => {\n  emit('toggleExpand', props.project.id)\n}\n\n// Handle project click - pass event and project to parent for selection handling\nconst handleProjectClick = (event: MouseEvent) => {\n  emit('click', event, props.project)\n}\n\n// Recursively count tasks in this project and all descendants\n// TASK-243: Uses raw tasks to show accurate counts regardless of active smart view filter\nconst getProjectTaskCount = (projectId: string): number => {\n  // Get all child projects (same logic as filteredTasks) with cycle detection\n  const getChildProjectIds = (pid: string, visited = new Set<string>()): string[] => {\n    if (visited.has(pid)) return []\n    visited.add(pid)\n\n    const ids = [pid]\n    const children = taskStore.projects.filter(p => p.parentId === pid)\n    children.forEach(child => {\n      ids.push(...getChildProjectIds(child.id, visited))\n    })\n    return ids\n  }\n\n  // Get all child project IDs for this project tree\n  const allChildProjectIds = getChildProjectIds(projectId)\n\n  // Count tasks using raw tasks (bypasses smart view filters for accurate counts)\n  const projectTasks = taskStore.rawTasks.filter(task => {\n    // Only count tasks that belong to this project tree\n    if (!allChildProjectIds.includes(task.projectId)) return false\n\n    // Exclude soft-deleted tasks\n    if (task._soft_deleted) return false\n\n    // Respect hideDoneTasks setting for consistency with sidebar counts\n    if (taskStore.hideDoneTasks && task.status === 'done') return false\n\n    return true\n  })\n\n  return projectTasks.length\n}\n</script>\n\n<style scoped>\n.project-tree-item {\n  display: flex;\n  flex-direction: column;\n}\n\n.project-tree-item.is-selected :deep(.nav-item) {\n  background: var(--brand-primary-alpha-15, rgba(78, 205, 196, 0.15));\n  border-color: var(--brand-primary-alpha-30, rgba(78, 205, 196, 0.3));\n}\n\n.nested-children {\n  /* Dynamic indentation based on nesting level */\n  padding-left: calc(var(--nesting-indent, 20px) + var(--space-2));\n  margin-top: var(--space-1);\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-1);\n  position: relative;\n}\n\n/* Visual connection lines removed for cleaner Todoist-style appearance */\n\n/* Smooth expand/collapse animations for nested children */\n.nested-children {\n  overflow: hidden;\n  transition:\n    max-height 0.3s cubic-bezier(0.4, 0, 0.2, 1),\n    opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1),\n    transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n/* Animation states handled by Vue's Transition component will override these */\n\n/* Vue Transition for nested projects expand/collapse */\n.nested-projects-enter-active,\n.nested-projects-leave-active {\n  transition: all var(--duration-slow) cubic-bezier(0.4, 0, 0.2, 1);\n  overflow: hidden;\n}\n\n.nested-projects-enter-from {\n  opacity: 0;\n  max-height: 0;\n  transform: scaleY(0) translateY(-8px);\n}\n\n.nested-projects-leave-to {\n  opacity: 0;\n  max-height: 0;\n  transform: scaleY(0) translateY(-8px);\n}\n\n.nested-projects-enter-to,\n.nested-projects-leave-from {\n  opacity: 1;\n  max-height: 500px; /* Sufficient height for typical nested projects */\n  transform: scaleY(1) translateY(0);\n}\n\n/* Container for the transition to ensure proper layout */\n.nested-children-transition {\n  display: contents;\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/quicksort/QuickCaptureTab.vue","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isProcessingVoice' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":238,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":238,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isVoiceSupported' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":257,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":257,"endColumn":23}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<template>\n  <div class=\"quick-capture-tab\">\n    <!-- Task Input Form -->\n    <div class=\"capture-form\">\n      <!-- Title Input -->\n      <div class=\"input-group title-group\">\n        <div class=\"title-input-row\">\n          <input\n            ref=\"titleInputRef\"\n            v-model=\"newTask.title\"\n            type=\"text\"\n            class=\"capture-input title-input\"\n            :class=\"{ 'voice-active': isListening }\"\n            :placeholder=\"isListening ? 'Listening...' : 'What needs to be done?'\"\n            maxlength=\"200\"\n            @keydown=\"handleTitleKeydown\"\n          >\n          <!-- Mic button (TASK-1024) - ALWAYS SHOW FOR DEBUG -->\n          <button\n            class=\"mic-btn\"\n            :class=\"[{ recording: isListening }]\"\n            :title=\"isListening ? 'Stop recording' : 'Voice input'\"\n            @click=\"toggleVoiceInput\"\n          >\n            <Mic v-if=\"!isListening\" :size=\"18\" />\n            <MicOff v-else :size=\"18\" />\n          </button>\n        </div>\n        <!-- Voice feedback (when recording) -->\n        <div v-if=\"isListening\" class=\"voice-feedback\">\n          <div class=\"voice-waveform\">\n            <span class=\"wave-bar\" />\n            <span class=\"wave-bar\" />\n            <span class=\"wave-bar\" />\n            <span class=\"wave-bar\" />\n            <span class=\"wave-bar\" />\n          </div>\n          <span class=\"voice-status\">{{ displayTranscript || 'Speak now...' }}</span>\n          <button class=\"voice-cancel\" @click=\"cancelVoice\">\n            <X :size=\"14\" />\n          </button>\n        </div>\n        <!-- Voice error message -->\n        <div v-if=\"voiceError && !isListening\" class=\"voice-error\">\n          {{ voiceError }}\n        </div>\n      </div>\n\n      <!-- Description Input -->\n      <div class=\"input-group description-group\">\n        <textarea\n          v-model=\"newTask.description\"\n          class=\"capture-input description-input\"\n          placeholder=\"Description (optional, supports markdown)...\"\n          rows=\"3\"\n          maxlength=\"2000\"\n          @keydown=\"handleDescriptionKeydown\"\n        />\n      </div>\n\n      <!-- Priority & Due Date Row -->\n      <div class=\"metadata-row\">\n        <!-- Priority -->\n        <div class=\"metadata-group\">\n          <label class=\"metadata-label\">Priority:</label>\n          <div class=\"priority-buttons\">\n            <button\n              class=\"priority-btn\"\n              :class=\"{ active: newTask.priority === undefined }\"\n              @click=\"newTask.priority = undefined\"\n            >\n              None\n            </button>\n            <button\n              class=\"priority-btn low\"\n              :class=\"{ active: newTask.priority === 'low' }\"\n              @click=\"newTask.priority = 'low'\"\n            >\n              Low\n            </button>\n            <button\n              class=\"priority-btn medium\"\n              :class=\"{ active: newTask.priority === 'medium' }\"\n              @click=\"newTask.priority = 'medium'\"\n            >\n              Med\n            </button>\n            <button\n              class=\"priority-btn high\"\n              :class=\"{ active: newTask.priority === 'high' }\"\n              @click=\"newTask.priority = 'high'\"\n            >\n              High\n            </button>\n          </div>\n        </div>\n\n        <!-- Due Date -->\n        <div class=\"metadata-group\">\n          <label class=\"metadata-label\">Due:</label>\n          <div class=\"date-shortcuts\">\n            <button\n              class=\"date-btn\"\n              :class=\"{ active: isDueDateToday }\"\n              @click=\"setDueDate('today')\"\n            >\n              Today\n            </button>\n            <button\n              class=\"date-btn\"\n              :class=\"{ active: isDueDateTomorrow }\"\n              @click=\"setDueDate('tomorrow')\"\n            >\n              Tomorrow\n            </button>\n            <button\n              class=\"date-btn\"\n              :class=\"{ active: isDueDateWeekend }\"\n              @click=\"setDueDate('weekend')\"\n            >\n              Weekend\n            </button>\n            <button\n              v-if=\"newTask.dueDate\"\n              class=\"date-btn clear\"\n              @click=\"newTask.dueDate = undefined\"\n            >\n              <X :size=\"14\" />\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <!-- Add Task Button -->\n      <div class=\"action-row\">\n        <button\n          class=\"add-task-btn\"\n          :disabled=\"!canAddTask\"\n          @click=\"handleAddTask\"\n        >\n          <Plus :size=\"18\" />\n          <span>Add Task</span>\n          <kbd>Enter</kbd>\n        </button>\n      </div>\n    </div>\n\n    <!-- Pending Tasks List -->\n    <div class=\"pending-section\">\n      <div class=\"pending-header\">\n        <h3 class=\"pending-title\">\n          <Inbox :size=\"18\" />\n          Pending Tasks\n          <span v-if=\"quickCapture.pendingTasks.value.length > 0\" class=\"pending-count\">\n            ({{ quickCapture.pendingTasks.value.length }})\n          </span>\n        </h3>\n        <button\n          v-if=\"quickCapture.pendingTasks.value.length > 0\"\n          class=\"sort-all-btn\"\n          @click=\"handleSortAll\"\n        >\n          <Zap :size=\"16\" />\n          <span>Sort All</span>\n          <kbd>Tab</kbd>\n        </button>\n      </div>\n\n      <!-- Task List -->\n      <div v-if=\"quickCapture.pendingTasks.value.length > 0\" class=\"pending-list\">\n        <TransitionGroup name=\"task-list\" tag=\"div\" class=\"task-list-container\">\n          <div\n            v-for=\"task in quickCapture.pendingTasks.value\"\n            :key=\"task.id\"\n            class=\"pending-task-card\"\n          >\n            <div class=\"task-content\">\n              <span class=\"task-title\">{{ task.title }}</span>\n              <div v-if=\"task.description || task.priority || task.dueDate\" class=\"task-meta\">\n                <span v-if=\"task.priority\" class=\"meta-badge\" :class=\"`priority-${task.priority}`\">\n                  <Flag :size=\"12\" />\n                  {{ task.priority }}\n                </span>\n                <span v-if=\"task.dueDate\" class=\"meta-badge due-date\">\n                  <Calendar :size=\"12\" />\n                  {{ formatDueDate(task.dueDate) }}\n                </span>\n              </div>\n              <p v-if=\"task.description\" class=\"task-description-preview\">\n                {{ truncateDescription(task.description) }}\n              </p>\n            </div>\n            <button\n              class=\"remove-btn\"\n              title=\"Remove task\"\n              @click=\"quickCapture.removeTask(task.id)\"\n            >\n              <X :size=\"16\" />\n            </button>\n          </div>\n        </TransitionGroup>\n      </div>\n\n      <!-- Empty State -->\n      <div v-else class=\"empty-state\">\n        <div class=\"empty-icon\">\n          <Inbox :size=\"48\" />\n        </div>\n        <p class=\"empty-text\">\n          No tasks captured yet\n        </p>\n        <p class=\"empty-hint\">\n          Type a task title above and press Enter to add\n        </p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, nextTick, onMounted, reactive } from 'vue'\nimport { X, Plus, Inbox, Flag, Calendar, Zap, Mic, MicOff } from 'lucide-vue-next'\nimport { useWhisperSpeech } from '@/composables/useWhisperSpeech'\nimport { useQuickCapture, type PendingTask } from '@/composables/useQuickCapture'\n\nconst emit = defineEmits<{\n  switchToSort: []\n}>()\n\nconst quickCapture = useQuickCapture()\n\n// Template refs\nconst titleInputRef = ref<HTMLInputElement>()\n\n// TASK-1322: Whisper-only voice input (browser speech recognition removed)\nconst {\n  isRecording: isListening,\n  isProcessing: isProcessingVoice,\n  isSupported: isWhisperSupported,\n  hasApiKey: hasWhisperApiKey,\n  transcript: whisperTranscript,\n  error: voiceError,\n  start: startVoice,\n  stop: stopVoice,\n  cancel: cancelVoice\n} = useWhisperSpeech({\n  onResult: (result) => {\n    if (result.transcript.trim()) {\n      newTask.title = result.transcript.trim()\n    }\n  },\n  onError: (err) => {\n    console.warn('[Voice QuickCapture] Error:', err)\n  }\n})\n\nconst isVoiceSupported = computed(() => isWhisperSupported.value && hasWhisperApiKey.value)\nconst displayTranscript = computed(() => whisperTranscript.value)\n\n// Toggle voice recording\nconst toggleVoiceInput = async () => {\n  if (isListening.value) {\n    stopVoice()\n  } else {\n    newTask.title = ''\n    await startVoice()\n  }\n}\n\n// Form state\nconst newTask = reactive<Omit<PendingTask, 'id'>>({\n  title: '',\n  description: undefined,\n  priority: undefined,\n  dueDate: undefined\n})\n\n// Computed\nconst canAddTask = computed(() => newTask.title.trim().length > 0)\n\nconst isDueDateToday = computed(() => {\n  if (!newTask.dueDate) return false\n  const today = new Date()\n  today.setHours(0, 0, 0, 0)\n  const dueDate = new Date(newTask.dueDate)\n  dueDate.setHours(0, 0, 0, 0)\n  return today.getTime() === dueDate.getTime()\n})\n\nconst isDueDateTomorrow = computed(() => {\n  if (!newTask.dueDate) return false\n  const tomorrow = new Date()\n  tomorrow.setDate(tomorrow.getDate() + 1)\n  tomorrow.setHours(0, 0, 0, 0)\n  const dueDate = new Date(newTask.dueDate)\n  dueDate.setHours(0, 0, 0, 0)\n  return tomorrow.getTime() === dueDate.getTime()\n})\n\nconst isDueDateWeekend = computed(() => {\n  if (!newTask.dueDate) return false\n  const today = new Date()\n  const dayOfWeek = today.getDay()\n  const daysUntilSaturday = dayOfWeek === 6 ? 7 : (6 - dayOfWeek + 7) % 7\n  const saturday = new Date()\n  saturday.setDate(today.getDate() + daysUntilSaturday)\n  saturday.setHours(0, 0, 0, 0)\n  const dueDate = new Date(newTask.dueDate)\n  dueDate.setHours(0, 0, 0, 0)\n  return saturday.getTime() === dueDate.getTime()\n})\n\n// Actions\nfunction handleAddTask() {\n  if (!canAddTask.value) return\n\n  quickCapture.addTask({\n    title: newTask.title,\n    description: newTask.description?.trim() || undefined,\n    priority: newTask.priority,\n    dueDate: newTask.dueDate\n  })\n\n  // Reset form but keep priority/dueDate for convenience\n  newTask.title = ''\n  newTask.description = undefined\n\n  // Re-focus title input\n  nextTick(() => {\n    titleInputRef.value?.focus()\n  })\n}\n\nfunction handleSortAll() {\n  if (quickCapture.pendingTasks.value.length > 0) {\n    quickCapture.startSorting()\n    emit('switchToSort')\n  }\n}\n\nfunction handleTitleKeydown(event: KeyboardEvent) {\n  if (event.key === 'Enter' && !event.shiftKey) {\n    event.preventDefault()\n    if (canAddTask.value) {\n      handleAddTask()\n    }\n  } else if (event.key === 'Tab' && quickCapture.pendingTasks.value.length > 0) {\n    event.preventDefault()\n    handleSortAll()\n  }\n}\n\nfunction handleDescriptionKeydown(event: KeyboardEvent) {\n  // Shift+Enter to add task from description\n  if (event.key === 'Enter' && event.shiftKey) {\n    event.preventDefault()\n    if (canAddTask.value) {\n      handleAddTask()\n    }\n  } else if (event.key === 'Tab' && quickCapture.pendingTasks.value.length > 0 && !event.shiftKey) {\n    event.preventDefault()\n    handleSortAll()\n  }\n}\n\nfunction setDueDate(preset: 'today' | 'tomorrow' | 'weekend') {\n  const date = new Date()\n  date.setHours(0, 0, 0, 0)\n\n  switch (preset) {\n    case 'today':\n      // Already set to today\n      break\n    case 'tomorrow':\n      date.setDate(date.getDate() + 1)\n      break\n    case 'weekend': {\n      const dayOfWeek = date.getDay()\n      const daysUntilSaturday = dayOfWeek === 6 ? 7 : (6 - dayOfWeek + 7) % 7\n      date.setDate(date.getDate() + daysUntilSaturday)\n      break\n    }\n  }\n\n  newTask.dueDate = date.toISOString()\n}\n\nfunction formatDueDate(dateStr: string): string {\n  const date = new Date(dateStr)\n  if (isNaN(date.getTime())) return ''\n\n  const today = new Date()\n  today.setHours(0, 0, 0, 0)\n  date.setHours(0, 0, 0, 0)\n\n  const diffDays = Math.round((date.getTime() - today.getTime()) / (1000 * 60 * 60 * 24))\n\n  if (diffDays === 0) return 'Today'\n  if (diffDays === 1) return 'Tomorrow'\n  if (diffDays === -1) return 'Yesterday'\n\n  return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })\n}\n\nfunction truncateDescription(desc: string): string {\n  const maxLength = 80\n  if (desc.length <= maxLength) return desc\n  return desc.substring(0, maxLength).trim() + '...'\n}\n\n// Focus title input on mount\nonMounted(() => {\n  nextTick(() => {\n    titleInputRef.value?.focus()\n  })\n})\n\n// Expose focus method for parent\ndefineExpose({\n  focus: () => titleInputRef.value?.focus()\n})\n</script>\n\n<style scoped>\n.quick-capture-tab {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-6);\n  height: 100%;\n}\n\n/* Capture Form */\n.capture-form {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-4);\n  padding: var(--space-5);\n  background: var(--glass-bg-light);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-xl);\n}\n\n.input-group {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-1);\n}\n\n.title-input-row {\n  display: flex;\n  gap: var(--space-2);\n  align-items: center;\n}\n\n.capture-input {\n  width: 100%;\n  background: var(--glass-bg-soft);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-lg);\n  color: var(--text-primary);\n  font-size: var(--text-base);\n  transition: all var(--duration-normal);\n}\n\n.capture-input:focus {\n  outline: none;\n  border-color: var(--brand-primary);\n  box-shadow: 0 0 0 3px var(--brand-primary-alpha-20);\n}\n\n.capture-input::placeholder {\n  color: var(--text-muted);\n}\n\n.title-input {\n  flex: 1;\n  padding: var(--space-3) var(--space-4);\n  font-weight: var(--font-medium);\n}\n\n.title-input.voice-active {\n  border-color: var(--danger-text, #ef4444);\n  box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.2);\n}\n\n/* Mic Button (TASK-1024) */\n.mic-btn {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  border: none;\n  background: var(--glass-bg-soft);\n  color: var(--text-secondary);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  flex-shrink: 0;\n  transition: all 0.2s ease;\n}\n\n.mic-btn:hover {\n  background: var(--glass-bg-medium);\n  color: var(--text-primary);\n}\n\n.mic-btn:active {\n  transform: scale(0.95);\n}\n\n.mic-btn.recording {\n  background: var(--danger-text, #ef4444);\n  color: white;\n  animation: pulse-recording 1.5s ease-in-out infinite;\n}\n\n@keyframes pulse-recording {\n  0%, 100% {\n    box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4);\n  }\n  50% {\n    box-shadow: 0 0 0 8px rgba(239, 68, 68, 0);\n  }\n}\n\n/* Voice feedback panel */\n.voice-feedback {\n  display: flex;\n  align-items: center;\n  gap: var(--space-3);\n  padding: var(--space-2) var(--space-3);\n  margin-top: var(--space-2);\n  background: var(--glass-bg-soft);\n  border-radius: var(--radius-md);\n  border: 1px solid var(--glass-border);\n}\n\n.voice-waveform {\n  display: flex;\n  align-items: center;\n  gap: 2px;\n  height: 20px;\n}\n\n.wave-bar {\n  width: 3px;\n  height: 6px;\n  background: var(--danger-text, #ef4444);\n  border-radius: 2px;\n  animation: wave 0.8s ease-in-out infinite;\n}\n\n.wave-bar:nth-child(1) { animation-delay: 0s; }\n.wave-bar:nth-child(2) { animation-delay: 0.1s; }\n.wave-bar:nth-child(3) { animation-delay: 0.2s; }\n.wave-bar:nth-child(4) { animation-delay: 0.3s; }\n.wave-bar:nth-child(5) { animation-delay: 0.4s; }\n\n@keyframes wave {\n  0%, 100% { height: 6px; }\n  50% { height: 16px; }\n}\n\n.voice-status {\n  flex: 1;\n  font-size: var(--text-sm);\n  color: var(--text-secondary);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.voice-cancel {\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  border: none;\n  background: transparent;\n  color: var(--text-tertiary);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  flex-shrink: 0;\n}\n\n.voice-cancel:hover {\n  background: var(--glass-bg);\n  color: var(--danger-text, #ef4444);\n}\n\n/* Voice error message */\n.voice-error {\n  margin-top: var(--space-2);\n  padding: var(--space-2) var(--space-3);\n  background: rgba(239, 68, 68, 0.1);\n  border-radius: var(--radius-sm);\n  font-size: var(--text-xs);\n  color: var(--danger-text, #ef4444);\n}\n\n.description-input {\n  padding: var(--space-3) var(--space-4);\n  font-size: var(--text-sm);\n  resize: vertical;\n  min-height: 80px;\n  max-height: 200px;\n  line-height: var(--leading-relaxed);\n}\n\n/* Metadata Row */\n.metadata-row {\n  display: flex;\n  gap: var(--space-6);\n  flex-wrap: wrap;\n}\n\n.metadata-group {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-2);\n}\n\n.metadata-label {\n  font-size: var(--text-xs);\n  font-weight: var(--font-semibold);\n  color: var(--text-secondary);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.priority-buttons,\n.date-shortcuts {\n  display: flex;\n  gap: var(--space-1);\n}\n\n.priority-btn,\n.date-btn {\n  padding: var(--space-1_5) var(--space-3);\n  background: var(--glass-bg-soft);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-md);\n  color: var(--text-secondary);\n  font-size: var(--text-xs);\n  font-weight: var(--font-medium);\n  cursor: pointer;\n  transition: all var(--duration-normal);\n}\n\n.priority-btn:hover,\n.date-btn:hover {\n  background: var(--glass-bg-medium);\n  color: var(--text-primary);\n}\n\n.priority-btn.active {\n  background: transparent;\n  border-color: var(--brand-primary);\n  color: var(--brand-primary);\n  font-weight: var(--font-semibold);\n}\n\n.priority-btn.low.active {\n  background: transparent;\n  border-color: var(--success);\n  color: var(--success);\n}\n\n.priority-btn.medium.active {\n  background: transparent;\n  border-color: var(--warning);\n  color: var(--warning);\n}\n\n.priority-btn.high.active {\n  background: transparent;\n  border-color: var(--danger);\n  color: var(--danger);\n}\n\n.date-btn.active {\n  background: transparent;\n  border-color: var(--brand-primary);\n  color: var(--brand-primary);\n}\n\n.date-btn.clear {\n  padding: var(--space-1_5);\n  color: var(--danger);\n  border-color: var(--danger-muted);\n}\n\n.date-btn.clear:hover {\n  background: var(--danger-bg);\n  border-color: var(--danger);\n}\n\n/* Action Row */\n.action-row {\n  display: flex;\n  justify-content: flex-end;\n  padding-top: var(--space-2);\n}\n\n.add-task-btn {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  padding: var(--space-2_5) var(--space-5);\n  background: transparent;\n  border: 1px solid var(--brand-primary);\n  border-radius: var(--radius-lg);\n  color: var(--brand-primary);\n  font-size: var(--text-sm);\n  font-weight: var(--font-semibold);\n  cursor: pointer;\n  transition: all var(--duration-normal);\n}\n\n.add-task-btn:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px var(--brand-primary-alpha-20);\n}\n\n.add-task-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.add-task-btn kbd {\n  padding: var(--space-0_5) var(--space-1_5);\n  background: var(--glass-bg-heavy);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-sm);\n  font-size: var(--text-xs);\n  font-family: var(--font-mono);\n}\n\n/* Pending Section */\n.pending-section {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  min-height: 0;\n}\n\n.pending-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: var(--space-3) 0;\n  border-bottom: 1px solid var(--border-subtle);\n  margin-bottom: var(--space-4);\n}\n\n.pending-title {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  font-size: var(--text-sm);\n  font-weight: var(--font-semibold);\n  color: var(--text-secondary);\n  margin: 0;\n}\n\n.pending-count {\n  color: var(--brand-primary);\n}\n\n.sort-all-btn {\n  display: flex;\n  align-items: center;\n  gap: var(--space-1_5);\n  padding: var(--space-2) var(--space-4);\n  background: var(--glass-bg-medium);\n  border: 1px solid var(--brand-primary);\n  border-radius: var(--radius-md);\n  color: var(--brand-primary);\n  font-size: var(--text-sm);\n  font-weight: var(--font-medium);\n  cursor: pointer;\n  transition: all var(--duration-normal);\n}\n\n.sort-all-btn:hover {\n  background: rgba(78, 205, 196, 0.08);\n  color: var(--brand-hover);\n  border-color: var(--brand-hover);\n  transform: translateY(-1px);\n}\n\n.sort-all-btn kbd {\n  padding: var(--space-0_5) var(--space-1);\n  background: var(--overlay-light);\n  border-radius: var(--radius-sm);\n  font-size: var(--text-xs);\n  font-family: var(--font-mono);\n}\n\n/* Pending List */\n.pending-list {\n  flex: 1;\n  overflow-y: auto;\n}\n\n.task-list-container {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-2);\n}\n\n.pending-task-card {\n  display: flex;\n  align-items: flex-start;\n  gap: var(--space-3);\n  padding: var(--space-3) var(--space-4);\n  background: var(--glass-bg-soft);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-lg);\n  transition: all var(--duration-normal);\n}\n\n.pending-task-card:hover {\n  background: var(--glass-bg-light);\n  border-color: var(--glass-border-hover);\n}\n\n.task-content {\n  flex: 1;\n  min-width: 0;\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-1);\n}\n\n.task-title {\n  font-size: var(--text-sm);\n  font-weight: var(--font-medium);\n  color: var(--text-primary);\n  word-wrap: break-word;\n}\n\n.task-meta {\n  display: flex;\n  flex-wrap: wrap;\n  gap: var(--space-2);\n}\n\n.meta-badge {\n  display: inline-flex;\n  align-items: center;\n  gap: var(--space-1);\n  padding: var(--space-0_5) var(--space-2);\n  background: var(--glass-bg-medium);\n  border-radius: var(--radius-sm);\n  font-size: var(--text-xs);\n  color: var(--text-secondary);\n  text-transform: capitalize;\n}\n\n.meta-badge.priority-low {\n  color: var(--success);\n  background: rgba(16, 185, 129, 0.1);\n}\n\n.meta-badge.priority-medium {\n  color: var(--warning);\n  background: rgba(245, 158, 11, 0.1);\n}\n\n.meta-badge.priority-high {\n  color: var(--danger);\n  background: rgba(239, 68, 68, 0.1);\n}\n\n.meta-badge.due-date {\n  color: var(--info);\n  background: rgba(59, 130, 246, 0.1);\n}\n\n.task-description-preview {\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n  margin: 0;\n  line-height: var(--leading-relaxed);\n}\n\n.remove-btn {\n  flex-shrink: 0;\n  padding: var(--space-1_5);\n  background: transparent;\n  border: 1px solid transparent;\n  border-radius: var(--radius-sm);\n  color: var(--text-muted);\n  cursor: pointer;\n  transition: all var(--duration-normal);\n}\n\n.remove-btn:hover {\n  background: var(--danger-bg);\n  border-color: var(--danger);\n  color: var(--danger);\n}\n\n/* Empty State */\n.empty-state {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: var(--space-3);\n  padding: var(--space-12);\n  text-align: center;\n}\n\n.empty-icon {\n  color: var(--text-muted);\n  opacity: 0.5;\n}\n\n.empty-text {\n  font-size: var(--text-base);\n  font-weight: var(--font-medium);\n  color: var(--text-secondary);\n  margin: 0;\n}\n\n.empty-hint {\n  font-size: var(--text-sm);\n  color: var(--text-muted);\n  margin: 0;\n}\n\n/* Task List Transitions */\n.task-list-enter-active,\n.task-list-leave-active {\n  transition: all var(--duration-normal) var(--spring-smooth);\n}\n\n.task-list-enter-from {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n\n.task-list-leave-to {\n  opacity: 0;\n  transform: translateX(-20px);\n}\n\n/* Responsive */\n@media (max-width: 640px) {\n  .metadata-row {\n    flex-direction: column;\n    gap: var(--space-4);\n  }\n\n  .priority-buttons,\n  .date-shortcuts {\n    flex-wrap: wrap;\n  }\n\n  .action-row {\n    justify-content: stretch;\n  }\n\n  .add-task-btn {\n    width: 100%;\n    justify-content: center;\n  }\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/settings/LanguageSettings.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/settings/SettingsDurationPicker.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/settings/SettingsOptionPicker.vue","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[237,240],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[237,240],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<script setup lang=\"ts\">\ninterface Option {\n  value: string | number\n  label: string\n}\n\ndefineProps<{\n  label: string\n  description?: string\n  options: Option[]\n  value: string | number\n}>()\n\nconst emit = defineEmits<{\n  update: [value: any]\n}>()\n</script>\n\n<template>\n  <div class=\"setting-group\">\n    <div class=\"setting-header\">\n      <label class=\"setting-label\">{{ label }}</label>\n      <p v-if=\"description\" class=\"setting-description\">\n        {{ description }}\n      </p>\n    </div>\n    \n    <div class=\"option-picker\">\n      <button\n        v-for=\"option in options\"\n        :key=\"option.value\"\n        class=\"option-btn\"\n        :class=\"{ active: value === option.value }\"\n        @click=\"emit('update', option.value)\"\n      >\n        {{ option.label }}\n      </button>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.setting-group {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-3);\n}\n\n.setting-header {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-1);\n}\n\n.setting-label {\n  font-size: var(--text-sm);\n  font-weight: var(--font-medium);\n  color: var(--text-secondary);\n}\n\n.setting-description {\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n  line-height: 1.4;\n}\n\n.option-picker {\n  display: flex;\n  gap: var(--space-2);\n  flex-wrap: wrap;\n}\n\n.option-btn {\n  background: var(--glass-bg-soft);\n  border: 1px solid var(--glass-border);\n  color: var(--text-secondary);\n  padding: var(--space-2) var(--space-4);\n  border-radius: var(--radius-md);\n  cursor: pointer;\n  font-size: var(--text-sm);\n  font-weight: var(--font-medium);\n  transition: all var(--duration-normal) var(--spring-smooth);\n  flex: 1;\n  min-width: 100px;\n  text-align: center;\n}\n\n.option-btn:hover {\n  background: var(--glass-bg-medium);\n  border-color: var(--glass-border-medium);\n  color: var(--text-primary);\n  transform: translateY(-1px);\n}\n\n.option-btn.active {\n  background: var(--state-active-bg);\n  border-color: var(--state-active-border);\n  color: var(--text-primary);\n  box-shadow: var(--shadow-sm);\n}\n\n@media (max-width: 480px) {\n  .option-btn {\n    flex: 1 0 100%;\n  }\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/settings/SettingsSection.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/settings/SettingsToggle.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/settings/tabs/AISettingsTab.vue","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'aiChatStore' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":13,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":18},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":231,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":231,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7490,7493],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7490,7493],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"vue/singleline-html-element-content-newline","severity":1,"message":"Expected 1 line break after opening tag (`<option>`), but no line breaks found.","line":269,"column":30,"nodeType":"HTMLTagClose","messageId":"unexpectedAfterClosingBracket","endLine":269,"endColumn":30,"fix":{"range":[8690,8690],"text":"\n"}},{"ruleId":"vue/singleline-html-element-content-newline","severity":1,"message":"Expected 1 line break before closing tag (`</option>`), but no line breaks found.","line":269,"column":37,"nodeType":"HTMLEndTagOpen","messageId":"unexpectedBeforeOpeningBracket","endLine":269,"endColumn":37,"fix":{"range":[8697,8697],"text":"\n"}},{"ruleId":"vue/attributes-order","severity":1,"message":"Attribute \"title\" should go before \"@click\".","line":283,"column":11,"nodeType":"VAttribute","messageId":"expectedOrder","endLine":283,"endColumn":39,"fix":{"range":[9037,9106],"text":"title=\"Refresh local models\"\n          @click=\"refreshOllamaModels()\""}}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":3,"source":"<script setup lang=\"ts\">\nimport { ref, computed, onMounted } from 'vue'\nimport { Bot, DollarSign, MessageSquare, Zap, Trash2, Tag, RefreshCw } from 'lucide-vue-next'\nimport { useAIUsageTracking, type UsagePeriod, type UsageSummary } from '@/composables/useAIUsageTracking'\nimport { useAIChat } from '@/composables/useAIChat'\nimport { useAIChatStore } from '@/stores/aiChat'\nimport { useWorkProfile } from '@/composables/useWorkProfile'\nimport { useSettingsStore } from '@/stores/settings'\nimport SettingsSection from '../SettingsSection.vue'\nimport SettingsToggle from '../SettingsToggle.vue'\n\nconst { usageSummary, weekUsage, monthUsage, hasUsageData, pricingCatalog, clearUsageData } = useAIUsageTracking()\nconst aiChatStore = useAIChatStore()\nconst settingsStore = useSettingsStore()\nconst { profile, loadProfile, savePreferences, computeCapacityMetrics, resetLearnedData } = useWorkProfile()\n\n// ── Default Provider/Model ──\nconst {\n  selectedProvider,\n  selectedModel,\n  availableOllamaModels,\n  setProvider,\n  setModel,\n  refreshOllamaModels,\n} = useAIChat()\n\ntype ProviderOption = 'auto' | 'ollama' | 'groq' | 'openrouter'\n\nconst providerOptions: { key: ProviderOption; label: string; desc: string }[] = [\n  { key: 'auto', label: 'Auto', desc: 'Prefers local, falls back to cloud' },\n  { key: 'ollama', label: 'Local (Ollama)', desc: 'Free, private, runs on your machine' },\n  { key: 'groq', label: 'Groq', desc: 'Fast cloud inference' },\n  { key: 'openrouter', label: 'OpenRouter', desc: 'Premium models (Claude, GPT-4, Kimi)' },\n]\n\nconst groqModels = [\n  { id: 'llama-3.3-70b-versatile', label: 'Llama 3.3 70B' },\n  { id: 'llama-3.1-8b-instant', label: 'Llama 3.1 8B Instant' },\n  { id: 'mixtral-8x7b-32768', label: 'Mixtral 8x7B' },\n  { id: 'gemma2-9b-it', label: 'Gemma 2 9B' },\n]\n\nconst openrouterModels = [\n  { id: 'anthropic/claude-3.5-sonnet', label: 'Claude 3.5 Sonnet' },\n  { id: 'anthropic/claude-opus-4-6', label: 'Claude Opus 4.6' },\n  { id: 'openai/gpt-4o', label: 'GPT-4o' },\n  { id: 'moonshotai/kimi-k2-instruct-0905', label: 'Kimi K2' },\n  { id: 'meta-llama/llama-3.3-70b-instruct', label: 'Llama 3.3 70B' },\n  { id: 'mistralai/mistral-large', label: 'Mistral Large' },\n  { id: 'google/gemini-2.0-flash', label: 'Gemini 2.0 Flash' },\n]\n\nconst currentModelOptions = computed(() => {\n  switch (selectedProvider.value) {\n    case 'ollama':\n      return availableOllamaModels.value.map(m => ({ id: m, label: m }))\n    case 'groq':\n      return groqModels\n    case 'openrouter':\n      return openrouterModels\n    default:\n      return []\n  }\n})\n\nfunction onProviderChange(provider: ProviderOption) {\n  setProvider(provider)\n}\n\nfunction onModelChange(event: Event) {\n  const value = (event.target as HTMLSelectElement).value\n  setModel(value || null)\n}\n\n/** Currently selected time period */\nconst selectedPeriod = ref<UsagePeriod>('all')\n\nconst periods: { id: UsagePeriod; label: string }[] = [\n  { id: 'week', label: 'This Week' },\n  { id: 'month', label: 'This Month' },\n  { id: 'all', label: 'All Time' }\n]\n\n/** Get the usage data for the selected period */\nconst currentUsage = computed<UsageSummary>(() => {\n  switch (selectedPeriod.value) {\n    case 'week': return weekUsage.value\n    case 'month': return monthUsage.value\n    default: return usageSummary.value\n  }\n})\n\n/** Format large numbers with commas */\nfunction formatNumber(num: number): string {\n  return num.toLocaleString('en-US')\n}\n\n/** Format cost as USD currency */\nfunction formatCost(cost: number): string {\n  if (cost === 0) return 'Free'\n  if (cost < 0.01) return `$${cost.toFixed(6)}`\n  return `$${cost.toFixed(4)}`\n}\n\n/** Format pricing rate (per 1M tokens) */\nfunction formatRate(rate: number): string {\n  if (rate === 0) return 'Free'\n  return `$${rate.toFixed(2)}`\n}\n\n/** Format context window size */\nfunction formatContext(tokens: number): string {\n  if (tokens >= 1_000_000) return `${(tokens / 1_000_000).toFixed(0)}M`\n  return `${(tokens / 1_000).toFixed(0)}K`\n}\n\n/** Get color indicator for provider */\nfunction getProviderColor(provider: string): string {\n  switch (provider) {\n    case 'ollama': return 'var(--color-success)'\n    case 'groq': return 'var(--color-info)'\n    case 'openrouter': return 'var(--color-warning)'\n    default: return 'var(--text-muted)'\n  }\n}\n\n/** Clear all usage data */\nfunction handleClearUsageData() {\n  if (!confirm('This will clear all AI usage tracking data. Continue?')) return\n  clearUsageData()\n}\n\n/** Summary stats for the selected period */\nconst summaryStats = computed(() => [\n  { label: 'Total Tokens', value: formatNumber(currentUsage.value.totalTokens), icon: Zap },\n  { label: 'Requests', value: formatNumber(currentUsage.value.totalRequests), icon: MessageSquare },\n  { label: 'Est. Cost', value: formatCost(currentUsage.value.totalCostUSD), icon: DollarSign }\n])\n\n// ── Weekly Plan Settings ──\nconst isSaving = ref(false)\nconst isRecalculating = ref(false)\nconst isResetting = ref(false)\nconst saveMessage = ref('')\nconst isClearingMemories = ref(false)\n\nconst form = ref({\n  workDays: ['monday', 'tuesday', 'wednesday', 'thursday', 'friday'] as string[],\n  daysOff: [] as string[],\n  heavyMeetingDays: [] as string[],\n  maxTasksPerDay: 6,\n  preferredWorkStyle: 'balanced' as 'frontload' | 'balanced' | 'backload',\n})\n\nconst dayOptions = [\n  { key: 'monday', label: 'Mon' },\n  { key: 'tuesday', label: 'Tue' },\n  { key: 'wednesday', label: 'Wed' },\n  { key: 'thursday', label: 'Thu' },\n  { key: 'friday', label: 'Fri' },\n  { key: 'saturday', label: 'Sat' },\n  { key: 'sunday', label: 'Sun' },\n]\n\nconst workStyleOptions = [\n  { key: 'frontload' as const, label: 'Front-load', desc: 'Heavy Mon-Tue, lighter Thu-Fri' },\n  { key: 'balanced' as const, label: 'Balanced', desc: 'Even distribution across days' },\n  { key: 'backload' as const, label: 'Back-load', desc: 'Lighter Mon-Tue, heavier Thu-Fri' },\n]\n\nonMounted(async () => {\n  const p = await loadProfile()\n  if (p) {\n    form.value.workDays = [...p.workDays]\n    form.value.daysOff = [...p.daysOff]\n    form.value.heavyMeetingDays = [...p.heavyMeetingDays]\n    form.value.maxTasksPerDay = p.maxTasksPerDay\n    form.value.preferredWorkStyle = p.preferredWorkStyle\n  }\n})\n\nfunction toggleDay(list: string[], key: string) {\n  const idx = list.indexOf(key)\n  if (idx === -1) list.push(key)\n  else list.splice(idx, 1)\n}\n\nasync function onSave() {\n  isSaving.value = true\n  saveMessage.value = ''\n  try {\n    await savePreferences({\n      workDays: [...form.value.workDays],\n      daysOff: [...form.value.daysOff],\n      heavyMeetingDays: [...form.value.heavyMeetingDays],\n      maxTasksPerDay: form.value.maxTasksPerDay,\n      preferredWorkStyle: form.value.preferredWorkStyle,\n    })\n    saveMessage.value = 'Preferences saved!'\n    setTimeout(() => { saveMessage.value = '' }, 3000)\n  } catch {\n    saveMessage.value = 'Failed to save'\n  } finally {\n    isSaving.value = false\n  }\n}\n\nasync function onRecalculate() {\n  isRecalculating.value = true\n  try {\n    await computeCapacityMetrics()\n  } finally {\n    isRecalculating.value = false\n  }\n}\n\nasync function onReset() {\n  if (!confirm('Reset all learned patterns? This cannot be undone.')) return\n  isResetting.value = true\n  try {\n    await resetLearnedData()\n  } finally {\n    isResetting.value = false\n  }\n}\n\nasync function onClearMemories() {\n  if (!confirm('Clear all memory observations? The AI will need to re-learn patterns.')) return\n  isClearingMemories.value = true\n  try {\n    await savePreferences({ memoryGraph: [] } as any)\n  } finally {\n    isClearingMemories.value = false\n  }\n}\n</script>\n\n<template>\n  <div class=\"ai-settings-tab\">\n    <!-- Default Provider & Model -->\n    <SettingsSection title=\"Default Provider & Model\">\n      <p class=\"section-desc\">\n        Choose which AI provider and model to use by default. This applies to all new chat sessions.\n      </p>\n\n      <!-- Provider selector -->\n      <div class=\"provider-chips\">\n        <button\n          v-for=\"opt in providerOptions\"\n          :key=\"opt.key\"\n          class=\"provider-chip\"\n          :class=\"{ active: selectedProvider === opt.key }\"\n          @click=\"onProviderChange(opt.key)\"\n        >\n          <span class=\"provider-chip-label\">{{ opt.label }}</span>\n          <span class=\"provider-chip-desc\">{{ opt.desc }}</span>\n        </button>\n      </div>\n\n      <!-- Model selector (when not auto) -->\n      <div v-if=\"selectedProvider !== 'auto'\" class=\"model-selector\">\n        <label class=\"model-selector-label\">Model</label>\n        <div class=\"model-select-wrapper\">\n          <select\n            class=\"model-select\"\n            :value=\"selectedModel || ''\"\n            @change=\"onModelChange\"\n          >\n            <option value=\"\">Default</option>\n            <option\n              v-for=\"m in currentModelOptions\"\n              :key=\"m.id\"\n              :value=\"m.id\"\n            >\n              {{ m.label }}\n            </option>\n          </select>\n        </div>\n        <button\n          v-if=\"selectedProvider === 'ollama'\"\n          class=\"refresh-models-btn\"\n          @click=\"refreshOllamaModels()\"\n          title=\"Refresh local models\"\n        >\n          <RefreshCw :size=\"14\" />\n        </button>\n      </div>\n    </SettingsSection>\n\n    <!-- Your Usage (top) -->\n    <SettingsSection title=\"Your Usage\">\n      <!-- Period selector -->\n      <div class=\"period-selector\">\n        <button\n          v-for=\"period in periods\"\n          :key=\"period.id\"\n          class=\"period-btn\"\n          :class=\"{ active: selectedPeriod === period.id }\"\n          @click=\"selectedPeriod = period.id\"\n        >\n          {{ period.label }}\n        </button>\n      </div>\n\n      <div v-if=\"hasUsageData\" class=\"usage-content\">\n        <!-- Summary cards -->\n        <div class=\"summary-cards\">\n          <div\n            v-for=\"stat in summaryStats\"\n            :key=\"stat.label\"\n            class=\"summary-card\"\n          >\n            <div class=\"summary-icon\">\n              <component :is=\"stat.icon\" :size=\"18\" />\n            </div>\n            <div class=\"summary-info\">\n              <span class=\"summary-label\">{{ stat.label }}</span>\n              <span class=\"summary-value\">{{ stat.value }}</span>\n            </div>\n          </div>\n        </div>\n\n        <!-- Provider breakdown -->\n        <div v-if=\"currentUsage.providers.length > 0\" class=\"provider-list\">\n          <div\n            v-for=\"provider in currentUsage.providers\"\n            :key=\"provider.provider\"\n            class=\"provider-row\"\n          >\n            <div class=\"provider-header\">\n              <div\n                class=\"provider-indicator\"\n                :style=\"{ backgroundColor: getProviderColor(provider.provider) }\"\n              />\n              <span class=\"provider-name\">{{ provider.displayName }}</span>\n              <span class=\"provider-cost\">{{ formatCost(provider.estimatedCostUSD) }}</span>\n            </div>\n            <div class=\"provider-stats\">\n              <div class=\"provider-stat\">\n                <span class=\"stat-label\">Tokens</span>\n                <span class=\"stat-value\">{{ formatNumber(provider.totalTokens) }}</span>\n              </div>\n              <div class=\"provider-stat\">\n                <span class=\"stat-label\">Requests</span>\n                <span class=\"stat-value\">{{ formatNumber(provider.totalRequests) }}</span>\n              </div>\n            </div>\n\n            <!-- Model breakdown within provider -->\n            <div v-if=\"provider.models.length > 1\" class=\"model-breakdown\">\n              <div\n                v-for=\"model in provider.models\"\n                :key=\"model.model\"\n                class=\"model-row\"\n              >\n                <span class=\"model-name\">{{ model.model }}</span>\n                <span class=\"model-tokens\">{{ formatNumber(model.tokens) }} tok</span>\n              </div>\n            </div>\n          </div>\n        </div>\n        <p v-else class=\"no-period-data\">\n          No usage in {{ currentUsage.periodLabel.toLowerCase() }}.\n        </p>\n\n        <!-- Clear button -->\n        <button class=\"clear-btn\" @click=\"handleClearUsageData\">\n          <Trash2 :size=\"14\" />\n          <span>Clear Usage Data</span>\n        </button>\n      </div>\n\n      <div v-else class=\"no-usage\">\n        <Bot :size=\"28\" />\n        <p>No usage data yet. Start chatting with AI to track spending.</p>\n      </div>\n    </SettingsSection>\n\n    <!-- Model Pricing Reference (always visible) -->\n    <SettingsSection title=\"Model Pricing\">\n      <p class=\"section-desc\">\n        Rates per 1M tokens. Ollama runs locally (free). Cloud providers charge per token.\n      </p>\n      <div class=\"pricing-groups\">\n        <div\n          v-for=\"group in pricingCatalog\"\n          :key=\"group.provider\"\n          class=\"pricing-group\"\n        >\n          <div class=\"pricing-group-header\">\n            <div\n              class=\"provider-indicator\"\n              :style=\"{ backgroundColor: getProviderColor(group.provider) }\"\n            />\n            <span class=\"pricing-group-name\">{{ group.displayName }}</span>\n          </div>\n\n          <table class=\"pricing-table\">\n            <thead>\n              <tr>\n                <th class=\"th-model\">\n                  Model\n                </th>\n                <th class=\"th-rate\">\n                  Input\n                </th>\n                <th class=\"th-rate\">\n                  Output\n                </th>\n                <th class=\"th-ctx\">\n                  Context\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr\n                v-for=\"model in group.models\"\n                :key=\"model.model\"\n                :class=\"{ 'is-default': model.isDefault }\"\n              >\n                <td class=\"td-model\">\n                  {{ model.displayName }}\n                  <Tag v-if=\"model.isDefault\" :size=\"10\" class=\"default-tag\" />\n                </td>\n                <td class=\"td-rate\">\n                  {{ formatRate(model.inputPer1M) }}\n                </td>\n                <td class=\"td-rate\">\n                  {{ formatRate(model.outputPer1M) }}\n                </td>\n                <td class=\"td-ctx\">\n                  {{ formatContext(model.contextWindow) }}\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </SettingsSection>\n\n    <!-- Weekly Plan Settings (merged from WeeklyPlanSettingsTab) -->\n    <SettingsSection title=\"AI Learning\">\n      <SettingsToggle\n        label=\"Enable AI work profile learning\"\n        :value=\"settingsStore.aiLearningEnabled\"\n        @update=\"(v: boolean) => settingsStore.updateSetting('aiLearningEnabled', v)\"\n      />\n      <p class=\"learning-hint\">\n        When enabled, FlowState tracks your work patterns to make weekly plans smarter over time.\n      </p>\n    </SettingsSection>\n\n    <SettingsSection title=\"Planning Preferences\">\n      <div class=\"wp-setting-row\">\n        <label class=\"wp-setting-label\">Work days</label>\n        <div class=\"day-chips\">\n          <button\n            v-for=\"d in dayOptions\"\n            :key=\"d.key\"\n            class=\"day-chip\"\n            :class=\"{ active: form.workDays.includes(d.key) }\"\n            @click=\"toggleDay(form.workDays, d.key)\"\n          >\n            {{ d.label }}\n          </button>\n        </div>\n      </div>\n\n      <div class=\"wp-setting-row\">\n        <label class=\"wp-setting-label\">Days off</label>\n        <div class=\"day-chips\">\n          <button\n            v-for=\"d in dayOptions\"\n            :key=\"d.key\"\n            class=\"day-chip off\"\n            :class=\"{ active: form.daysOff.includes(d.key) }\"\n            @click=\"toggleDay(form.daysOff, d.key)\"\n          >\n            {{ d.label }}\n          </button>\n        </div>\n      </div>\n\n      <div class=\"wp-setting-row\">\n        <label class=\"wp-setting-label\">Heavy meeting days</label>\n        <div class=\"day-chips\">\n          <button\n            v-for=\"d in dayOptions\"\n            :key=\"d.key\"\n            class=\"day-chip meeting\"\n            :class=\"{ active: form.heavyMeetingDays.includes(d.key) }\"\n            @click=\"toggleDay(form.heavyMeetingDays, d.key)\"\n          >\n            {{ d.label }}\n          </button>\n        </div>\n      </div>\n\n      <div class=\"wp-setting-row\">\n        <label class=\"wp-setting-label\">Max tasks per day</label>\n        <div class=\"number-chips\">\n          <button\n            v-for=\"n in [3, 5, 6, 8, 10]\"\n            :key=\"n\"\n            class=\"number-chip\"\n            :class=\"{ active: form.maxTasksPerDay === n }\"\n            @click=\"form.maxTasksPerDay = n\"\n          >\n            {{ n }}\n          </button>\n        </div>\n      </div>\n\n      <div class=\"wp-setting-row\">\n        <label class=\"wp-setting-label\">Work style</label>\n        <div class=\"style-chips\">\n          <button\n            v-for=\"ws in workStyleOptions\"\n            :key=\"ws.key\"\n            class=\"style-chip\"\n            :class=\"{ active: form.preferredWorkStyle === ws.key }\"\n            @click=\"form.preferredWorkStyle = ws.key\"\n          >\n            <span class=\"style-label\">{{ ws.label }}</span>\n            <span class=\"style-desc\">{{ ws.desc }}</span>\n          </button>\n        </div>\n      </div>\n\n      <div class=\"save-row\">\n        <button class=\"save-btn\" :disabled=\"isSaving\" @click=\"onSave\">\n          {{ isSaving ? 'Saving...' : 'Save Preferences' }}\n        </button>\n        <span v-if=\"saveMessage\" class=\"save-message\">{{ saveMessage }}</span>\n      </div>\n    </SettingsSection>\n\n    <SettingsSection title=\"Learned Patterns\">\n      <div class=\"metrics-grid\">\n        <div class=\"metric-card\">\n          <div class=\"metric-value\">\n            {{ profile?.avgWorkMinutesPerDay ? Math.round(profile.avgWorkMinutesPerDay) + ' min' : '—' }}\n          </div>\n          <div class=\"metric-label\">\n            Avg work/day\n          </div>\n        </div>\n        <div class=\"metric-card\">\n          <div class=\"metric-value\">\n            {{ profile?.avgTasksCompletedPerDay ? profile.avgTasksCompletedPerDay.toFixed(1) : '—' }}\n          </div>\n          <div class=\"metric-label\">\n            Avg tasks/day\n          </div>\n        </div>\n        <div class=\"metric-card\">\n          <div class=\"metric-value\">\n            {{ profile?.avgPlanAccuracy ? profile.avgPlanAccuracy.toFixed(0) + '%' : '—' }}\n          </div>\n          <div class=\"metric-label\">\n            Plan accuracy\n          </div>\n        </div>\n        <div class=\"metric-card\">\n          <div class=\"metric-value\">\n            {{ profile?.peakProductivityDays?.length ? profile.peakProductivityDays.map(d => d.charAt(0).toUpperCase() + d.slice(1, 3)).join(', ') : '—' }}\n          </div>\n          <div class=\"metric-label\">\n            Peak days\n          </div>\n        </div>\n      </div>\n\n      <div class=\"wp-action-row\">\n        <button class=\"wp-action-btn\" :disabled=\"isRecalculating\" @click=\"onRecalculate\">\n          <RefreshCw :size=\"14\" :class=\"{ spinning: isRecalculating }\" />\n          {{ isRecalculating ? 'Recalculating...' : 'Recalculate' }}\n        </button>\n        <button class=\"wp-action-btn danger\" :disabled=\"isResetting\" @click=\"onReset\">\n          <Trash2 :size=\"14\" />\n          {{ isResetting ? 'Resetting...' : 'Reset Profile' }}\n        </button>\n      </div>\n    </SettingsSection>\n\n    <SettingsSection title=\"Memory Observations\">\n      <p class=\"obs-hint\">\n        {{ profile?.memoryGraph?.length || 0 }} observations from your work patterns\n      </p>\n\n      <div v-if=\"profile?.memoryGraph?.length\" class=\"obs-list\">\n        <div\n          v-for=\"(obs, idx) in profile.memoryGraph\"\n          :key=\"idx\"\n          class=\"obs-card\"\n        >\n          <div class=\"obs-header\">\n            <span class=\"obs-entity\">{{ obs.entity }}</span>\n            <span class=\"obs-relation\">{{ obs.relation }}</span>\n          </div>\n          <div class=\"obs-value\">\n            {{ obs.value }}\n          </div>\n          <div class=\"obs-meta\">\n            <div class=\"confidence-bar\">\n              <div class=\"confidence-fill\" :style=\"{ width: (obs.confidence * 100) + '%' }\" />\n            </div>\n            <span class=\"obs-confidence\">{{ (obs.confidence * 100).toFixed(0) }}%</span>\n            <span class=\"obs-source\">{{ obs.source }}</span>\n          </div>\n        </div>\n      </div>\n      <p v-else class=\"obs-empty\">\n        No observations yet. They'll appear as FlowState learns your patterns.\n      </p>\n\n      <div v-if=\"profile?.memoryGraph?.length\" class=\"wp-action-row\">\n        <button class=\"wp-action-btn danger\" :disabled=\"isClearingMemories\" @click=\"onClearMemories\">\n          <Trash2 :size=\"14\" />\n          {{ isClearingMemories ? 'Clearing...' : 'Clear Memories' }}\n        </button>\n      </div>\n    </SettingsSection>\n  </div>\n</template>\n\n<style scoped>\n.ai-settings-tab {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-6);\n}\n\n.section-desc {\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n  margin: 0 0 var(--space-3) 0;\n}\n\n/* ── Provider & Model Selector ── */\n.provider-chips {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: var(--space-2);\n  margin-bottom: var(--space-3);\n}\n\n.provider-chip {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  gap: var(--space-0_5);\n  padding: var(--space-2_5) var(--space-3);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-lg);\n  background: var(--glass-bg-soft);\n  backdrop-filter: blur(8px);\n  color: var(--text-secondary);\n  cursor: pointer;\n  transition: all var(--duration-fast);\n  text-align: left;\n}\n\n.provider-chip:hover {\n  border-color: var(--glass-border-hover);\n  color: var(--text-primary);\n}\n\n.provider-chip.active {\n  background: rgba(78, 205, 196, 0.1);\n  border-color: var(--brand-primary);\n  color: var(--brand-primary);\n}\n\n.provider-chip-label {\n  font-size: var(--text-sm);\n  font-weight: var(--font-semibold);\n}\n\n.provider-chip-desc {\n  font-size: var(--text-xs);\n  opacity: 0.7;\n}\n\n.model-selector {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n}\n\n.model-selector-label {\n  font-size: var(--text-sm);\n  font-weight: var(--font-medium);\n  color: var(--text-secondary);\n  white-space: nowrap;\n}\n\n.model-select-wrapper {\n  flex: 1;\n}\n\n.model-select {\n  width: 100%;\n  padding: var(--space-2) var(--space-3);\n  font-size: var(--text-sm);\n  background: var(--glass-bg-soft);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-md);\n  color: var(--text-primary);\n  cursor: pointer;\n  backdrop-filter: blur(8px);\n  appearance: auto;\n}\n\n.model-select:focus {\n  outline: none;\n  border-color: var(--brand-primary);\n}\n\n.refresh-models-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  background: var(--glass-bg-soft);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-md);\n  color: var(--text-muted);\n  cursor: pointer;\n  transition: all var(--duration-fast);\n  flex-shrink: 0;\n}\n\n.refresh-models-btn:hover {\n  border-color: var(--brand-primary);\n  color: var(--brand-primary);\n}\n\n/* ── Pricing Reference ── */\n.pricing-groups {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-4);\n}\n\n.pricing-group {\n  background: var(--glass-bg-soft);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-xl);\n  backdrop-filter: blur(8px);\n  overflow: hidden;\n}\n\n.pricing-group-header {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  padding: var(--space-3) var(--space-4);\n  border-bottom: 1px solid var(--glass-border);\n}\n\n.pricing-group-name {\n  font-size: var(--text-sm);\n  font-weight: var(--font-semibold);\n  color: var(--text-primary);\n}\n\n.pricing-table {\n  width: 100%;\n  border-collapse: collapse;\n  font-size: var(--text-xs);\n}\n\n.pricing-table th {\n  text-align: left;\n  padding: var(--space-2) var(--space-3);\n  color: var(--text-muted);\n  font-weight: var(--font-medium);\n  border-bottom: 1px solid var(--glass-border);\n}\n\n.th-rate, .th-ctx {\n  text-align: right;\n}\n\n.pricing-table td {\n  padding: var(--space-2) var(--space-3);\n  color: var(--text-secondary);\n  border-bottom: 1px solid var(--glass-border);\n}\n\n.pricing-table tr:last-child td {\n  border-bottom: none;\n}\n\n.pricing-table tr.is-default td {\n  color: var(--text-primary);\n  font-weight: var(--font-medium);\n}\n\n.td-model {\n  display: flex;\n  align-items: center;\n  gap: var(--space-1);\n}\n\n.td-rate, .td-ctx {\n  text-align: right;\n  font-family: var(--font-mono, monospace);\n}\n\n.default-tag {\n  color: var(--brand-primary);\n  flex-shrink: 0;\n}\n\n/* ── Period Selector ── */\n.period-selector {\n  display: flex;\n  gap: var(--space-1);\n  background: var(--glass-bg-soft);\n  border-radius: var(--radius-lg);\n  padding: var(--space-1);\n  border: 1px solid var(--glass-border);\n}\n\n.period-btn {\n  flex: 1;\n  padding: var(--space-1_5) var(--space-2);\n  background: transparent;\n  border: 1px solid transparent;\n  border-radius: var(--radius-md);\n  color: var(--text-muted);\n  font-size: var(--text-xs);\n  font-weight: var(--font-medium);\n  cursor: pointer;\n  transition: all var(--duration-fast);\n}\n\n.period-btn:hover {\n  color: var(--text-secondary);\n  background: var(--glass-bg-medium);\n}\n\n.period-btn.active {\n  background: var(--state-active-bg);\n  border-color: var(--state-active-border);\n  color: var(--text-primary);\n}\n\n/* ── Usage Content ── */\n.usage-content {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-4);\n}\n\n.summary-cards {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: var(--space-2);\n}\n\n.summary-card {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  padding: var(--space-3);\n  background: var(--glass-bg-soft);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-lg);\n  backdrop-filter: blur(8px);\n}\n\n.summary-icon {\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--glass-bg-medium);\n  border-radius: var(--radius-md);\n  color: var(--brand-primary);\n  flex-shrink: 0;\n}\n\n.summary-info {\n  display: flex;\n  flex-direction: column;\n  min-width: 0;\n}\n\n.summary-label {\n  font-size: 10px;\n  color: var(--text-muted);\n  font-weight: var(--font-medium);\n}\n\n.summary-value {\n  font-size: var(--text-sm);\n  font-weight: var(--font-bold);\n  color: var(--text-primary);\n}\n\n/* ── Provider List ── */\n.provider-list {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-2);\n}\n\n.provider-row {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-2);\n  padding: var(--space-3);\n  background: var(--glass-bg-soft);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-lg);\n  backdrop-filter: blur(8px);\n}\n\n.provider-header {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n}\n\n.provider-indicator {\n  width: 10px;\n  height: 10px;\n  border-radius: var(--radius-full);\n  flex-shrink: 0;\n}\n\n.provider-name {\n  font-size: var(--text-xs);\n  font-weight: var(--font-semibold);\n  color: var(--text-primary);\n  flex: 1;\n}\n\n.provider-cost {\n  font-size: var(--text-xs);\n  font-weight: var(--font-bold);\n  color: var(--brand-primary);\n  font-family: var(--font-mono, monospace);\n}\n\n.provider-stats {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: var(--space-2);\n}\n\n.provider-stat {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n\n.stat-label {\n  font-size: 10px;\n  color: var(--text-muted);\n  font-weight: var(--font-medium);\n}\n\n.stat-value {\n  font-size: var(--text-xs);\n  font-weight: var(--font-semibold);\n  color: var(--text-primary);\n}\n\n/* ── Model Breakdown ── */\n.model-breakdown {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-1);\n  padding-top: var(--space-2);\n  border-top: 1px solid var(--glass-border);\n}\n\n.model-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: var(--space-1) var(--space-2);\n  background: var(--glass-bg-medium);\n  border-radius: var(--radius-sm);\n}\n\n.model-name {\n  font-size: 10px;\n  color: var(--text-secondary);\n  font-family: var(--font-mono, monospace);\n}\n\n.model-tokens {\n  font-size: 10px;\n  color: var(--text-muted);\n  font-family: var(--font-mono, monospace);\n}\n\n.no-period-data {\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n  text-align: center;\n  padding: var(--space-4);\n  margin: 0;\n}\n\n/* ── No Usage State ── */\n.no-usage {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: var(--space-2);\n  padding: var(--space-6);\n  color: var(--text-muted);\n  text-align: center;\n}\n\n.no-usage p {\n  margin: 0;\n  font-size: var(--text-xs);\n}\n\n/* ── Clear Button ── */\n.clear-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: var(--space-2);\n  padding: var(--space-2) var(--space-3);\n  background: var(--glass-bg-soft);\n  border: 1px solid var(--color-danger);\n  border-radius: var(--radius-md);\n  color: var(--color-danger);\n  font-size: var(--text-xs);\n  font-weight: var(--font-medium);\n  cursor: pointer;\n  transition: all var(--duration-fast);\n  backdrop-filter: blur(8px);\n  align-self: flex-start;\n}\n\n.clear-btn:hover {\n  background: var(--danger-bg-subtle);\n}\n\n/* ── Weekly Plan Settings ── */\n.wp-setting-row {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-2);\n  padding: var(--space-2) 0;\n}\n\n.wp-setting-label {\n  font-size: var(--text-sm);\n  font-weight: var(--font-medium);\n  color: var(--text-secondary);\n}\n\n.day-chips,\n.number-chips {\n  display: flex;\n  gap: var(--space-1_5);\n  flex-wrap: wrap;\n}\n\n.day-chip,\n.number-chip {\n  padding: var(--space-1_5) var(--space-3);\n  font-size: var(--text-xs);\n  font-weight: var(--font-medium);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-sm);\n  background: var(--glass-bg-soft);\n  backdrop-filter: blur(8px);\n  color: var(--text-secondary);\n  cursor: pointer;\n  transition: all var(--duration-fast);\n}\n\n.day-chip:hover,\n.number-chip:hover {\n  border-color: var(--glass-border-hover);\n  color: var(--text-primary);\n}\n\n.day-chip.active {\n  background: rgba(78, 205, 196, 0.12);\n  border-color: var(--brand-primary);\n  color: var(--brand-primary);\n}\n\n.day-chip.off.active {\n  background: rgba(239, 68, 68, 0.12);\n  border-color: var(--color-danger);\n  color: var(--color-danger);\n}\n\n.day-chip.meeting.active {\n  background: rgba(245, 158, 11, 0.12);\n  border-color: var(--color-warning);\n  color: var(--color-warning);\n}\n\n.number-chip {\n  width: 40px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.number-chip.active {\n  background: rgba(78, 205, 196, 0.12);\n  border-color: var(--brand-primary);\n  color: var(--brand-primary);\n}\n\n.style-chips {\n  display: flex;\n  gap: var(--space-2);\n}\n\n.style-chip {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: var(--space-0_5);\n  padding: var(--space-2) var(--space-3);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-sm);\n  background: var(--glass-bg-soft);\n  backdrop-filter: blur(8px);\n  color: var(--text-secondary);\n  cursor: pointer;\n  transition: all var(--duration-fast);\n}\n\n.style-chip:hover {\n  border-color: var(--glass-border-hover);\n  color: var(--text-primary);\n}\n\n.style-chip.active {\n  background: rgba(78, 205, 196, 0.12);\n  border-color: var(--brand-primary);\n  color: var(--brand-primary);\n}\n\n.style-label {\n  font-size: var(--text-sm);\n  font-weight: var(--font-semibold);\n}\n\n.style-desc {\n  font-size: var(--text-xs);\n  opacity: 0.7;\n}\n\n.save-row {\n  display: flex;\n  align-items: center;\n  gap: var(--space-3);\n  padding-top: var(--space-3);\n}\n\n.save-btn {\n  padding: var(--space-2) var(--space-4);\n  font-size: var(--text-sm);\n  font-weight: var(--font-semibold);\n  background: var(--glass-bg-soft);\n  border: 1px solid var(--brand-primary);\n  border-radius: var(--radius-lg);\n  color: var(--brand-primary);\n  cursor: pointer;\n  backdrop-filter: blur(8px);\n  transition: all var(--duration-fast);\n}\n\n.save-btn:hover:not(:disabled) {\n  background: rgba(78, 205, 196, 0.08);\n}\n\n.save-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.save-message {\n  font-size: var(--text-sm);\n  color: var(--brand-primary);\n}\n\n.metrics-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: var(--space-3);\n}\n\n.metric-card {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: var(--space-1);\n  padding: var(--space-3);\n  background: var(--glass-bg-soft);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-md);\n}\n\n.metric-value {\n  font-size: var(--text-lg);\n  font-weight: var(--font-bold);\n  color: var(--text-primary);\n}\n\n.metric-label {\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n}\n\n.wp-action-row {\n  display: flex;\n  gap: var(--space-3);\n  padding-top: var(--space-2);\n}\n\n.wp-action-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: var(--space-1_5);\n  padding: var(--space-1_5) var(--space-3);\n  font-size: var(--text-xs);\n  font-weight: var(--font-medium);\n  background: var(--glass-bg-soft);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-sm);\n  color: var(--text-secondary);\n  cursor: pointer;\n  transition: all var(--duration-fast);\n}\n\n.wp-action-btn:hover:not(:disabled) {\n  border-color: var(--glass-border-hover);\n  color: var(--text-primary);\n}\n\n.wp-action-btn.danger:hover:not(:disabled) {\n  border-color: var(--color-danger);\n  color: var(--color-danger);\n}\n\n.wp-action-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.spinning {\n  animation: wp-spin 1s linear infinite;\n}\n\n@keyframes wp-spin {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n\n.learning-hint {\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n  margin: 0;\n  line-height: var(--leading-relaxed);\n}\n\n.obs-hint {\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n  margin: 0 0 var(--space-3) 0;\n}\n\n.obs-list {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-2);\n}\n\n.obs-card {\n  padding: var(--space-2) var(--space-3);\n  background: var(--glass-bg-soft);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-sm);\n}\n\n.obs-header {\n  display: flex;\n  gap: var(--space-2);\n  align-items: center;\n  margin-bottom: var(--space-1);\n}\n\n.obs-entity {\n  font-size: var(--text-xs);\n  font-weight: var(--font-semibold);\n  color: var(--brand-primary);\n  background: rgba(78, 205, 196, 0.08);\n  padding: var(--space-0_5) var(--space-1_5);\n  border-radius: var(--radius-xs);\n}\n\n.obs-relation {\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n}\n\n.obs-value {\n  font-size: var(--text-sm);\n  color: var(--text-primary);\n  margin-bottom: var(--space-1_5);\n}\n\n.obs-meta {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n}\n\n.confidence-bar {\n  flex: 1;\n  max-width: 80px;\n  height: 4px;\n  background: var(--glass-bg);\n  border-radius: 2px;\n  overflow: hidden;\n}\n\n.confidence-fill {\n  height: 100%;\n  background: var(--brand-primary);\n  border-radius: 2px;\n  transition: width var(--duration-normal);\n}\n\n.obs-confidence {\n  font-size: var(--text-xs);\n  font-weight: var(--font-medium);\n  color: var(--text-secondary);\n  min-width: 32px;\n}\n\n.obs-source {\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n}\n\n.obs-empty {\n  font-size: var(--text-sm);\n  color: var(--text-muted);\n  font-style: italic;\n  margin: 0;\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/settings/tabs/AboutSettingsTab.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/settings/tabs/AccountSettingsTab.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/settings/tabs/AppearanceSettingsTab.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/settings/tabs/IntegrationsSettingsTab.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/settings/tabs/NotificationsSettingsTab.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/settings/tabs/StorageSettingsTab.vue","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":41,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1033,1036],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1033,1036],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":42,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1071,1074],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1071,1074],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":45,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1179,1182],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1179,1182],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'confirmGoldenRestore' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":93,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":93,"endColumn":27}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<script setup lang=\"ts\">\nimport { ref, onMounted, computed } from 'vue'\nimport {\n  Database,\n  Download,\n  Upload,\n  ShieldCheck,\n  AlertTriangle,\n  RotateCcw,\n  Clock,\n  History,\n  CloudLightning,\n  RefreshCw,\n  Cloud,\n  HardDrive\n} from 'lucide-vue-next'\nimport useBackupSystem from '@/composables/useBackupSystem'\nimport SettingsSection from '../SettingsSection.vue'\nimport SettingsToggle from '../SettingsToggle.vue'\nimport SettingsOptionPicker from '../SettingsOptionPicker.vue'\nimport { isTauri, getTauriMode, setTauriMode } from '@/composables/useTauriStartup'\nimport { useTaskStore } from '@/stores/tasks'\nimport { clearAll as clearAllOperations } from '@/services/offline/writeQueueDB'\n\nconst {\n  config,\n  backupHistory,\n  createBackup,\n  downloadBackup,\n  restoreFromFile,\n  restoreFromGoldenBackup,\n  restoreFromGoldenBackupByIndex,\n  getGoldenBackupValidation,\n  getGoldenBackups,\n  fetchShadowBackup,\n  restoreFromShadow,\n  restoreBackup\n} = useBackupSystem()\n\nconst isRestoring = ref(false)\nconst validationInfo = ref<any>(null)\nconst shadowSnapshot = ref<any>(null)\nconst showValidation = ref(false)\nconst isScanningShadow = ref(false)\nconst goldenRotation = ref<any[]>([])\n\n// Tauri mode state (only shown in Tauri desktop app)\nconst showTauriMode = computed(() => isTauri())\nconst currentTauriMode = ref<'cloud' | 'local'>(getTauriMode())\n\nconst backupIntervals = [\n  { value: 60000, label: '1 min' },\n  { value: 300000, label: '5 min' },\n  { value: 900000, label: '15 min' },\n  { value: 3600000, label: '1 hour' }\n]\n\nconst historySizes = [\n  { value: 5, label: '5' },\n  { value: 10, label: '10' },\n  { value: 25, label: '25' },\n  { value: 50, label: '50' }\n]\n\nconst handleModeChange = (mode: 'cloud' | 'local') => {\n  currentTauriMode.value = mode\n  setTauriMode(mode)\n\n  // Warn user they need to restart the app\n  alert(`Mode changed to ${mode === 'cloud' ? 'Cloud' : 'Local'}. Please restart the app for changes to take effect.`)\n}\n\nconst handleCreateBackup = async () => {\n  await createBackup('manual')\n}\n\nconst handleDownloadLatest = async () => {\n  await downloadBackup()\n}\n\nconst handleFileUpload = async (event: Event) => {\n  const file = (event.target as HTMLInputElement).files?.[0]\n  if (file) {\n    const success = await restoreFromFile(file)\n    if (success) {\n      alert('Backup restored successfully!')\n    }\n  }\n}\n\n\n\nconst confirmGoldenRestore = async () => {\n  isRestoring.value = true\n  const success = await restoreFromGoldenBackup(true) // skip validation since we just did it\n  isRestoring.value = false\n  if (success) {\n    alert('Golden backup restored!')\n    showValidation.value = false\n  }\n}\n\nconst checkShadowHub = async () => {\n  isScanningShadow.value = true\n  shadowSnapshot.value = await fetchShadowBackup()\n  isScanningShadow.value = false\n}\n\nconst handleShadowRestore = async () => {\n  if (!shadowSnapshot.value) return\n  if (!confirm('This will overwrite all local data with the latest cloud snapshot. Continue?')) return\n  \n  isRestoring.value = true\n  const success = await restoreFromShadow(shadowSnapshot.value)\n  isRestoring.value = false\n  if (success) {\n    alert('Restored from Shadow Hub successfully!')\n  }\n}\n\nconst handleGoldenRestore = async (index: number) => {\n  isRestoring.value = true\n  const success = await restoreFromGoldenBackupByIndex(index, true)\n  isRestoring.value = false\n  if (success) {\n    alert(`Golden backup #${index + 1} restored!`)\n  }\n}\n\n// TASK-1183: Data cleanup handlers\nconst taskStore = useTaskStore()\nconst isCleaningUp = ref(false)\nconst isClearingSyncQueue = ref(false)\nconst cleanupResult = ref<{ success: boolean; message: string } | null>(null)\n\nconst handleCleanupTasks = async () => {\n  isCleaningUp.value = true\n  cleanupResult.value = null\n  try {\n    const fixed = await taskStore.cleanupCorruptedTasks()\n    cleanupResult.value = {\n      success: true,\n      message: fixed > 0 ? `Fixed ${fixed} corrupted task(s)` : 'No corrupted tasks found'\n    }\n  } catch (e) {\n    cleanupResult.value = {\n      success: false,\n      message: `Error: ${e instanceof Error ? e.message : 'Unknown error'}`\n    }\n  } finally {\n    isCleaningUp.value = false\n  }\n}\n\nconst handleClearSyncQueue = async () => {\n  if (!confirm('This will clear all pending sync operations. Continue?')) return\n\n  isClearingSyncQueue.value = true\n  cleanupResult.value = null\n  try {\n    await clearAllOperations()\n    cleanupResult.value = {\n      success: true,\n      message: 'Sync queue cleared successfully'\n    }\n  } catch (e) {\n    cleanupResult.value = {\n      success: false,\n      message: `Error: ${e instanceof Error ? e.message : 'Unknown error'}`\n    }\n  } finally {\n    isClearingSyncQueue.value = false\n  }\n}\n\nonMounted(async () => {\n    // Initial checks\n    validationInfo.value = await getGoldenBackupValidation()\n    goldenRotation.value = getGoldenBackups()\n    checkShadowHub()\n})\n</script>\n\n<template>\n  <div class=\"storage-settings-tab\">\n    <!-- Tauri Desktop Mode Selector (only shown in desktop app) -->\n    <SettingsSection v-if=\"showTauriMode\" title=\"💻 Desktop Connection Mode\">\n      <div class=\"mode-selector-panel\">\n        <p class=\"mode-description\">\n          Choose how your desktop app connects to your data\n        </p>\n\n        <div class=\"mode-options\">\n          <button\n            class=\"mode-option\"\n            :class=\"{ active: currentTauriMode === 'cloud' }\"\n            @click=\"handleModeChange('cloud')\"\n          >\n            <div class=\"mode-option-icon\">\n              <Cloud :size=\"24\" />\n            </div>\n            <div class=\"mode-option-content\">\n              <h4 class=\"mode-option-title\">\n                Cloud Mode\n                <span v-if=\"currentTauriMode === 'cloud'\" class=\"mode-badge\">Active</span>\n              </h4>\n              <p class=\"mode-option-desc\">\n                Connect to in-theflow.com (VPS)\n              </p>\n              <ul class=\"mode-option-features\">\n                <li>✓ Sync across devices</li>\n                <li>✓ No local setup required</li>\n                <li>✓ Automatic backups</li>\n              </ul>\n            </div>\n          </button>\n\n          <button\n            class=\"mode-option\"\n            :class=\"{ active: currentTauriMode === 'local' }\"\n            @click=\"handleModeChange('local')\"\n          >\n            <div class=\"mode-option-icon\">\n              <HardDrive :size=\"24\" />\n            </div>\n            <div class=\"mode-option-content\">\n              <h4 class=\"mode-option-title\">\n                Local Mode\n                <span v-if=\"currentTauriMode === 'local'\" class=\"mode-badge\">Active</span>\n              </h4>\n              <p class=\"mode-option-desc\">\n                Run your own database (Docker)\n              </p>\n              <ul class=\"mode-option-features\">\n                <li>✓ Full data control</li>\n                <li>✓ Works offline</li>\n                <li>⚠️ Requires Docker setup</li>\n              </ul>\n            </div>\n          </button>\n        </div>\n\n        <p class=\"mode-help-text\">\n          <AlertTriangle :size=\"14\" />\n          Changing modes requires an app restart. Your data will not be lost.\n        </p>\n      </div>\n    </SettingsSection>\n\n    <SettingsSection title=\"🛡️ Backup Strategy\">\n      <SettingsToggle\n        label=\"Auto-Backup Enabled\"\n        description=\"Automatically save your data locally every few minutes.\"\n        :value=\"config.enabled\"\n        @update=\"val => config.enabled = val\"\n      />\n      \n      <SettingsOptionPicker\n        label=\"Backup Interval\"\n        description=\"How often to perform automatic snapshots.\"\n        :options=\"backupIntervals\"\n        :value=\"config.autoSaveInterval\"\n        @update=\"val => config.autoSaveInterval = val\"\n      />\n\n      <SettingsOptionPicker\n        label=\"History Retention\"\n        description=\"Maximum number of historical snapshots to keep.\"\n        :options=\"historySizes\"\n        :value=\"config.maxHistorySize\"\n        @update=\"val => config.maxHistorySize = val\"\n      />\n\n      <SettingsToggle\n        label=\"Filter Test Data\"\n        description=\"Exclude mock/test tasks from backups.\"\n        :value=\"config.filterMockTasks\"\n        @update=\"val => config.filterMockTasks = val\"\n      />\n    </SettingsSection>\n\n    <SettingsSection title=\"💾 Manual Actions\">\n      <div class=\"action-grid\">\n        <button class=\"action-card\" @click=\"handleCreateBackup\">\n          <Database :size=\"20\" />\n          <div class=\"action-info\">\n            <span class=\"action-title\">Snapshot Now</span>\n            <span class=\"action-desc\">Save current state to local history</span>\n          </div>\n        </button>\n\n        <button class=\"action-card\" @click=\"handleDownloadLatest\">\n          <Download :size=\"20\" />\n          <div class=\"action-info\">\n            <span class=\"action-title\">Download Backup</span>\n            <span class=\"action-desc\">Save latest backup as a .json file</span>\n          </div>\n        </button>\n\n        <label class=\"action-card upload-card\">\n          <Upload :size=\"20\" />\n          <div class=\"action-info\">\n            <span class=\"action-title\">Import File</span>\n            <span class=\"action-desc\">Restore from a previously saved file</span>\n          </div>\n          <input\n            type=\"file\"\n            hidden\n            accept=\".json\"\n            @change=\"handleFileUpload\"\n          >\n        </label>\n      </div>\n    </SettingsSection>\n\n    <SettingsSection title=\"☁️ Shadow Hub (Always-On Sync)\">\n      <div class=\"shadow-panel\" :class=\"{ 'is-loading': isScanningShadow }\">\n        <div class=\"shadow-header\">\n          <div class=\"hub-icon\">\n            <CloudLightning :size=\"24\" />\n          </div>\n          <div class=\"shadow-meta\">\n            <span class=\"shadow-title\">System 3: Mirror Daemon</span>\n            <span v-if=\"shadowSnapshot\" class=\"shadow-active\">Connected • Monitoring Database</span>\n            <span v-else class=\"shadow-idle\">Connecting to local daemon...</span>\n          </div>\n          <button class=\"refresh-btn\" :disabled=\"isScanningShadow\" @click=\"checkShadowHub\">\n            <RefreshCw :size=\"14\" :class=\"{ 'spinning': isScanningShadow }\" />\n          </button>\n        </div>\n\n        <div v-if=\"shadowSnapshot\" class=\"shadow-stats\">\n          <div class=\"shadow-stat\">\n            <span class=\"stat-label\">Last Sync</span>\n            <span class=\"stat-value\">{{ new Date(shadowSnapshot.meta.timestamp).toLocaleTimeString() }}</span>\n          </div>\n          <div class=\"shadow-stat\">\n            <span class=\"stat-label\">Tasks</span>\n            <span class=\"stat-value\">{{ shadowSnapshot.meta.counts.tasks }}</span>\n          </div>\n        </div>\n\n        <div v-if=\"shadowSnapshot\" class=\"shadow-actions\">\n          <button class=\"shadow-restore-btn\" :disabled=\"isRestoring\" @click=\"handleShadowRestore\">\n            <RotateCcw :size=\"16\" />\n            <span>{{ isRestoring ? 'Restoring...' : 'Restore Latest Cloud Snapshot' }}</span>\n          </button>\n          <p class=\"shadow-help\">\n            Best for: Recovering from sync errors or data loss on other devices.\n          </p>\n        </div>\n      </div>\n    </SettingsSection>\n\n    <SettingsSection title=\"🌟 Disaster Recovery (Golden Backup Rotation)\">\n      <div v-if=\"goldenRotation.length > 0\" class=\"golden-panel\">\n        <div class=\"golden-header\">\n          <ShieldCheck class=\"icon-success\" :size=\"32\" />\n          <div class=\"golden-meta\">\n            <span class=\"golden-title\">Peak Task Snapshots</span>\n            <span class=\"golden-status\">{{ goldenRotation.length }} recovery point{{ goldenRotation.length > 1 ? 's' : '' }} available</span>\n          </div>\n        </div>\n\n        <div v-if=\"validationInfo?.ageWarning\" class=\"warning-box\">\n          <AlertTriangle :size=\"16\" />\n          <span>{{ validationInfo.ageWarning }}</span>\n        </div>\n\n        <!-- TASK-332: Show all golden backups in rotation -->\n        <div class=\"golden-rotation-list\">\n          <div\n            v-for=\"(backup, index) in goldenRotation\"\n            :key=\"backup.id\"\n            class=\"golden-rotation-item\"\n            :class=\"{ 'is-primary': index === 0 }\"\n          >\n            <div class=\"rotation-rank\">\n              <span class=\"rank-badge\">{{ index === 0 ? '🥇' : index === 1 ? '🥈' : '🥉' }}</span>\n            </div>\n            <div class=\"rotation-info\">\n              <span class=\"rotation-tasks\">{{ backup.metadata?.taskCount || 0 }} tasks</span>\n              <span class=\"rotation-date\">{{ new Date(backup.timestamp).toLocaleDateString() }}</span>\n            </div>\n            <button\n              class=\"rotation-restore-btn\"\n              :disabled=\"isRestoring\"\n              @click=\"handleGoldenRestore(index)\"\n            >\n              <RotateCcw :size=\"14\" />\n              <span>Restore</span>\n            </button>\n          </div>\n        </div>\n\n        <div v-if=\"validationInfo?.warnings?.length > 0\" class=\"detailed-warnings\">\n          <p class=\"warning-title\">\n            Smart Filtering (for top peak):\n          </p>\n          <ul>\n            <li v-for=\"(warn, i) in validationInfo.warnings\" :key=\"i\">\n              {{ warn }}\n            </li>\n          </ul>\n        </div>\n\n        <p class=\"golden-help\">\n          Golden backups capture your highest task counts. The system keeps up to 3 peaks for flexible recovery.\n        </p>\n      </div>\n      <div v-else class=\"no-golden\">\n        <History :size=\"32\" />\n        <p>No Golden Backup found yet. Keep working to create one!</p>\n      </div>\n    </SettingsSection>\n\n    <SettingsSection title=\"🕒 Local History\">\n      <div class=\"history-list\">\n        <div v-for=\"item in backupHistory\" :key=\"item.id\" class=\"history-item\">\n          <div class=\"item-icon\">\n            <Clock :size=\"14\" />\n          </div>\n          <div class=\"item-details\">\n            <span class=\"item-time\">{{ new Date(item.timestamp).toLocaleString() }}</span>\n            <span class=\"item-meta\">{{ item.metadata?.taskCount }} tasks • {{ item.type }}</span>\n          </div>\n          <button class=\"item-restore\" @click=\"restoreBackup(item)\">\n            Restore\n          </button>\n        </div>\n      </div>\n    </SettingsSection>\n\n    <!-- TASK-1183: Data Cleanup Section -->\n    <SettingsSection title=\"🧹 Data Cleanup\">\n      <div class=\"cleanup-section\">\n        <p class=\"cleanup-description\">\n          Fix corrupted data that may cause sync errors. Run this if you see sync errors about invalid UUIDs.\n        </p>\n        <div class=\"cleanup-actions\">\n          <button class=\"cleanup-btn\" :disabled=\"isCleaningUp\" @click=\"handleCleanupTasks\">\n            <RefreshCw :size=\"16\" :class=\"{ spinning: isCleaningUp }\" />\n            {{ isCleaningUp ? 'Cleaning...' : 'Fix Corrupted Tasks' }}\n          </button>\n          <button class=\"cleanup-btn secondary\" :disabled=\"isClearingSyncQueue\" @click=\"handleClearSyncQueue\">\n            <RotateCcw :size=\"16\" />\n            {{ isClearingSyncQueue ? 'Clearing...' : 'Clear Sync Queue' }}\n          </button>\n        </div>\n        <p v-if=\"cleanupResult\" class=\"cleanup-result\" :class=\"{ success: cleanupResult.success }\">\n          {{ cleanupResult.message }}\n        </p>\n      </div>\n    </SettingsSection>\n  </div>\n</template>\n\n<style scoped>\n.storage-settings-tab {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-4);\n}\n\n/* Tauri Mode Selector */\n.mode-selector-panel {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-4);\n}\n\n.mode-description {\n  font-size: var(--text-sm);\n  color: var(--text-secondary);\n  margin: 0;\n}\n\n.mode-options {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: var(--space-3);\n}\n\n.mode-option {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-3);\n  padding: var(--space-4);\n  background: var(--glass-bg-soft);\n  border: 2px solid var(--glass-border);\n  border-radius: var(--radius-xl);\n  cursor: pointer;\n  transition: all var(--duration-normal);\n  text-align: left;\n}\n\n.mode-option:hover {\n  border-color: var(--glass-border-strong);\n  background: var(--glass-bg-medium);\n  transform: translateY(-1px);\n}\n\n.mode-option.active {\n  border-color: var(--color-success);\n  background: rgba(var(--color-success-rgb, 16, 185, 129), 0.1);\n}\n\n.mode-option-icon {\n  width: 48px;\n  height: 48px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--glass-bg-medium);\n  border-radius: var(--radius-lg);\n  color: var(--text-primary);\n}\n\n.mode-option.active .mode-option-icon {\n  background: var(--color-success);\n  color: white;\n}\n\n.mode-option-content {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-2);\n}\n\n.mode-option-title {\n  font-size: var(--text-base);\n  font-weight: var(--font-semibold);\n  color: var(--text-primary);\n  margin: 0;\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n}\n\n.mode-badge {\n  font-size: var(--text-xs);\n  font-weight: var(--font-medium);\n  color: var(--color-success);\n  background: rgba(var(--color-success-rgb, 16, 185, 129), 0.2);\n  padding: 2px 8px;\n  border-radius: var(--radius-full);\n}\n\n.mode-option-desc {\n  font-size: var(--text-sm);\n  color: var(--text-secondary);\n  margin: 0;\n}\n\n.mode-option-features {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-1);\n}\n\n.mode-option-features li {\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n}\n\n.mode-help-text {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  font-size: var(--text-xs);\n  color: var(--color-warning);\n  background: rgba(var(--color-warning-rgb, 245, 158, 11), 0.1);\n  padding: var(--space-2) var(--space-3);\n  border-radius: var(--radius-lg);\n  margin: 0;\n}\n\n.action-grid {\n  display: grid;\n  grid-template-columns: 1fr;\n  gap: var(--space-2);\n}\n\n.action-card {\n  display: flex;\n  align-items: center;\n  gap: var(--space-4);\n  padding: var(--space-4);\n  background: var(--glass-bg-soft);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-xl);\n  color: var(--text-primary);\n  cursor: pointer;\n  transition: all var(--duration-normal);\n  text-align: left;\n  width: 100%;\n}\n\n.shadow-panel {\n  background: linear-gradient(135deg, rgba(var(--color-primary-rgb), 0.05) 0%, rgba(var(--color-primary-rgb), 0.1) 100%);\n  border: 1px solid var(--glass-border-strong);\n  border-radius: var(--radius-2xl);\n  padding: var(--space-4);\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-4);\n  transition: all var(--duration-slow) var(--ease-out);\n}\n\n.shadow-panel.is-loading {\n  opacity: 0.7;\n}\n\n.shadow-header {\n  display: flex;\n  align-items: center;\n  gap: var(--space-4);\n}\n\n.hub-icon {\n  width: 48px;\n  height: 48px;\n  background: var(--state-active-bg);\n  border-radius: var(--radius-xl);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: var(--color-primary);\n}\n\n.shadow-meta {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n.shadow-title {\n  font-size: var(--text-sm);\n  font-weight: var(--font-bold);\n  color: var(--text-primary);\n}\n\n.shadow-active {\n  font-size: var(--text-xs);\n  color: var(--color-success);\n}\n\n.shadow-idle {\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n}\n\n.refresh-btn {\n  background: var(--glass-bg-soft);\n  border: 1px solid var(--glass-border);\n  color: var(--text-muted);\n  padding: var(--space-2);\n  border-radius: var(--radius-md);\n  cursor: pointer;\n}\n\n.shadow-stats {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: var(--space-3);\n}\n\n.shadow-stat {\n  background: var(--glass-bg-soft);\n  padding: var(--space-3);\n  border-radius: var(--radius-xl);\n  display: flex;\n  flex-direction: column;\n}\n\n.shadow-actions {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-2);\n}\n\n.shadow-restore-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: var(--space-2);\n  background: var(--state-active-bg);\n  color: var(--text-primary);\n  border: 1px solid var(--state-active-border);\n  padding: var(--space-3);\n  border-radius: var(--radius-xl);\n  font-weight: var(--font-bold);\n  cursor: pointer;\n  transition: all var(--duration-normal);\n}\n\n.shadow-restore-btn:hover:not(:disabled) {\n  background: var(--state-active-border);\n  transform: translateY(-1px);\n}\n\n.shadow-help {\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n  text-align: center;\n}\n\n.spinning {\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n\n.action-card:hover {\n  background: var(--glass-bg-medium);\n  border-color: var(--glass-border-strong);\n  transform: translateY(-2px);\n}\n\n.action-info {\n  display: flex;\n  flex-direction: column;\n}\n\n.action-title {\n  font-size: var(--text-sm);\n  font-weight: var(--font-semibold);\n}\n\n.action-desc {\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n}\n\n.upload-card {\n  margin-bottom: 0;\n}\n\n.golden-panel {\n  background: linear-gradient(135deg, rgba(var(--primary-rgb), 0.05) 0%, rgba(var(--primary-rgb), 0.1) 100%);\n  border: 1px solid var(--state-active-border);\n  border-radius: var(--radius-2xl);\n  padding: var(--space-5);\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-4);\n}\n\n.golden-header {\n  display: flex;\n  align-items: center;\n  gap: var(--space-4);\n}\n\n.icon-success {\n  color: var(--color-success);\n}\n\n.golden-meta {\n  display: flex;\n  flex-direction: column;\n}\n\n.golden-title {\n  font-size: var(--text-sm);\n  font-weight: var(--font-bold);\n  color: var(--text-primary);\n}\n\n.golden-status {\n  font-size: var(--text-xs);\n  color: var(--color-success);\n}\n\n.warning-box {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  background: rgba(var(--color-warning-rgb), 0.1);\n  padding: var(--space-2) var(--space-3);\n  border-radius: var(--radius-lg);\n  color: var(--color-warning);\n  font-size: var(--text-xs);\n}\n\n.stats-preview {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: var(--space-3);\n}\n\n.stat-item {\n  background: var(--glass-bg-soft);\n  padding: var(--space-3);\n  border-radius: var(--radius-xl);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.stat-label {\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n}\n\n.stat-value {\n  font-size: var(--text-lg);\n  font-weight: var(--font-bold);\n  color: var(--text-primary);\n}\n\n.stat-sub {\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n}\n\n.detailed-warnings {\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n  background: var(--glass-bg-soft);\n  padding: var(--space-3);\n  border-radius: var(--radius-lg);\n}\n\n.warning-title {\n  font-weight: var(--font-bold);\n  margin-bottom: var(--space-1);\n}\n\n.detailed-warnings ul {\n  padding-left: var(--space-4);\n  margin: 0;\n}\n\n/* TASK-332: Golden backup rotation styles */\n.golden-rotation-list {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-2);\n}\n\n.golden-rotation-item {\n  display: flex;\n  align-items: center;\n  gap: var(--space-3);\n  padding: var(--space-3);\n  background: var(--glass-bg-soft);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-xl);\n  transition: all var(--duration-normal);\n}\n\n.golden-rotation-item.is-primary {\n  background: linear-gradient(135deg, rgba(var(--color-success-rgb), 0.1) 0%, rgba(var(--color-success-rgb), 0.05) 100%);\n  border-color: var(--color-success);\n}\n\n.rotation-rank {\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.rank-badge {\n  font-size: var(--text-lg);\n}\n\n.rotation-info {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n.rotation-tasks {\n  font-size: var(--text-sm);\n  font-weight: var(--font-bold);\n  color: var(--text-primary);\n}\n\n.rotation-date {\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n}\n\n.rotation-restore-btn {\n  display: flex;\n  align-items: center;\n  gap: var(--space-1);\n  padding: var(--space-2) var(--space-3);\n  background: var(--glass-bg-medium);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-lg);\n  color: var(--text-secondary);\n  font-size: var(--text-xs);\n  font-weight: var(--font-medium);\n  cursor: pointer;\n  transition: all var(--duration-normal);\n}\n\n.rotation-restore-btn:hover:not(:disabled) {\n  background: var(--state-active-bg);\n  border-color: var(--state-active-border);\n  color: var(--text-primary);\n}\n\n.rotation-restore-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.golden-help {\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n  text-align: center;\n  margin-top: var(--space-2);\n}\n\n.restore-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: var(--space-2);\n  background: var(--text-primary);\n  color: var(--bg-primary);\n  border: none;\n  padding: var(--space-3);\n  border-radius: var(--radius-xl);\n  font-weight: var(--font-bold);\n  cursor: pointer;\n  transition: all var(--duration-normal);\n}\n\n.restore-btn:hover:not(:disabled) {\n  transform: translateY(-2px);\n  filter: brightness(1.1);\n}\n\n.restore-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.history-list {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-2);\n}\n\n.history-item {\n  display: flex;\n  align-items: center;\n  gap: var(--space-3);\n  padding: var(--space-2) var(--space-3);\n  background: var(--glass-bg-soft);\n  border-radius: var(--radius-lg);\n  border: 1px solid var(--glass-border);\n}\n\n.item-icon {\n  color: var(--text-muted);\n}\n\n.item-details {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n.item-time {\n  font-size: var(--text-xs);\n  font-weight: var(--font-medium);\n  color: var(--text-primary);\n}\n\n.item-meta {\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n}\n\n.item-restore {\n  background: var(--glass-bg-medium);\n  border: 1px solid var(--glass-border);\n  color: var(--text-secondary);\n  padding: var(--space-1) var(--space-3);\n  border-radius: var(--radius-md);\n  font-size: var(--text-xs);\n  cursor: pointer;\n  transition: all var(--duration-normal);\n}\n\n.item-restore:hover {\n  background: var(--glass-border);\n  color: var(--text-primary);\n}\n\n.no-golden {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: var(--space-3);\n  padding: var(--space-8);\n  color: var(--text-muted);\n  text-align: center;\n}\n\n.loader {\n  width: 18px;\n  height: 18px;\n  border: 2px solid currentColor;\n  border-bottom-color: transparent;\n  border-radius: 50%;\n  animation: rotation 1s linear infinite;\n}\n\n@keyframes rotation {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n/* TASK-1183: Data Cleanup Section */\n.cleanup-section {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-3);\n}\n\n.cleanup-description {\n  font-size: var(--text-sm);\n  color: var(--text-secondary);\n  margin: 0;\n}\n\n.cleanup-actions {\n  display: flex;\n  gap: var(--space-3);\n  flex-wrap: wrap;\n}\n\n.cleanup-btn {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  padding: var(--space-2_5) var(--space-4);\n  background: var(--color-warning);\n  color: white;\n  border: none;\n  border-radius: var(--radius-md);\n  font-weight: var(--font-medium);\n  cursor: pointer;\n  transition: all var(--duration-fast);\n}\n\n.cleanup-btn:hover:not(:disabled) {\n  background: var(--color-warning-hover, #d97706);\n  transform: translateY(-1px);\n}\n\n.cleanup-btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.cleanup-btn.secondary {\n  background: var(--glass-bg-medium);\n  color: var(--text-secondary);\n  border: 1px solid var(--glass-border);\n}\n\n.cleanup-btn.secondary:hover:not(:disabled) {\n  background: var(--glass-bg-strong);\n  border-color: var(--glass-border-strong);\n}\n\n.cleanup-result {\n  font-size: var(--text-sm);\n  padding: var(--space-2) var(--space-3);\n  border-radius: var(--radius-md);\n  background: var(--danger-bg-subtle);\n  color: var(--color-danger);\n}\n\n.cleanup-result.success {\n  background: var(--success-bg-subtle, rgba(16, 185, 129, 0.1));\n  color: var(--color-success, #10b981);\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/settings/tabs/TimerSettingsTab.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/settings/tabs/WeeklyPlanSettingsTab.vue","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'computed' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":23,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"computed"},"fix":{"range":[37,47],"text":""},"desc":"Remove unused variable \"computed\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'addMemoryObservation' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":10,"column":90,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":110},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'err' is defined but never used. Allowed unused caught errors must match /^_/u.","line":73,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":73,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":104,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":104,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3226,3229],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3226,3229],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<script setup lang=\"ts\">\nimport { ref, computed, onMounted } from 'vue'\nimport { useWorkProfile } from '@/composables/useWorkProfile'\nimport { useSettingsStore } from '@/stores/settings'\nimport SettingsSection from '../SettingsSection.vue'\nimport SettingsToggle from '../SettingsToggle.vue'\nimport { RefreshCw, Trash2 } from 'lucide-vue-next'\n\nconst settingsStore = useSettingsStore()\nconst { profile, loadProfile, savePreferences, computeCapacityMetrics, resetLearnedData, addMemoryObservation } = useWorkProfile()\n\nconst isSaving = ref(false)\nconst isRecalculating = ref(false)\nconst isResetting = ref(false)\nconst saveMessage = ref('')\nconst isClearingMemories = ref(false)\n\n// Local editable form state\nconst form = ref({\n  workDays: ['monday', 'tuesday', 'wednesday', 'thursday', 'friday'] as string[],\n  daysOff: [] as string[],\n  heavyMeetingDays: [] as string[],\n  maxTasksPerDay: 6,\n  preferredWorkStyle: 'balanced' as 'frontload' | 'balanced' | 'backload',\n})\n\nconst dayOptions = [\n  { key: 'monday', label: 'Mon' },\n  { key: 'tuesday', label: 'Tue' },\n  { key: 'wednesday', label: 'Wed' },\n  { key: 'thursday', label: 'Thu' },\n  { key: 'friday', label: 'Fri' },\n  { key: 'saturday', label: 'Sat' },\n  { key: 'sunday', label: 'Sun' },\n]\n\nconst workStyleOptions = [\n  { key: 'frontload' as const, label: 'Front-load', desc: 'Heavy Mon-Tue, lighter Thu-Fri' },\n  { key: 'balanced' as const, label: 'Balanced', desc: 'Even distribution across days' },\n  { key: 'backload' as const, label: 'Back-load', desc: 'Lighter Mon-Tue, heavier Thu-Fri' },\n]\n\nonMounted(async () => {\n  const p = await loadProfile()\n  if (p) {\n    form.value.workDays = [...p.workDays]\n    form.value.daysOff = [...p.daysOff]\n    form.value.heavyMeetingDays = [...p.heavyMeetingDays]\n    form.value.maxTasksPerDay = p.maxTasksPerDay\n    form.value.preferredWorkStyle = p.preferredWorkStyle\n  }\n})\n\nfunction toggleDay(list: string[], key: string) {\n  const idx = list.indexOf(key)\n  if (idx === -1) list.push(key)\n  else list.splice(idx, 1)\n}\n\nasync function onSave() {\n  isSaving.value = true\n  saveMessage.value = ''\n  try {\n    await savePreferences({\n      workDays: [...form.value.workDays],\n      daysOff: [...form.value.daysOff],\n      heavyMeetingDays: [...form.value.heavyMeetingDays],\n      maxTasksPerDay: form.value.maxTasksPerDay,\n      preferredWorkStyle: form.value.preferredWorkStyle,\n    })\n    saveMessage.value = 'Preferences saved!'\n    setTimeout(() => { saveMessage.value = '' }, 3000)\n  } catch (err) {\n    saveMessage.value = 'Failed to save'\n  } finally {\n    isSaving.value = false\n  }\n}\n\nasync function onRecalculate() {\n  isRecalculating.value = true\n  try {\n    await computeCapacityMetrics()\n  } finally {\n    isRecalculating.value = false\n  }\n}\n\nasync function onReset() {\n  if (!confirm('Reset all learned patterns? This cannot be undone.')) return\n  isResetting.value = true\n  try {\n    await resetLearnedData()\n  } finally {\n    isResetting.value = false\n  }\n}\n\nasync function onClearMemories() {\n  if (!confirm('Clear all memory observations? The AI will need to re-learn patterns.')) return\n  isClearingMemories.value = true\n  try {\n    // Save empty memoryGraph\n    await savePreferences({ memoryGraph: [] } as any)\n  } finally {\n    isClearingMemories.value = false\n  }\n}\n</script>\n\n<template>\n  <div class=\"weekly-plan-settings-tab\">\n    <SettingsSection title=\"AI Learning\">\n      <SettingsToggle\n        label=\"Enable AI work profile learning\"\n        :value=\"settingsStore.aiLearningEnabled\"\n        @update=\"(v: boolean) => settingsStore.updateSetting('aiLearningEnabled', v)\"\n      />\n      <p class=\"learning-hint\">\n        When enabled, FlowState tracks your work patterns to make weekly plans smarter over time.\n      </p>\n    </SettingsSection>\n\n    <SettingsSection title=\"Planning Preferences\">\n      <div class=\"setting-row\">\n        <label class=\"setting-label\">Work days</label>\n        <div class=\"day-chips\">\n          <button\n            v-for=\"d in dayOptions\"\n            :key=\"d.key\"\n            class=\"day-chip\"\n            :class=\"{ active: form.workDays.includes(d.key) }\"\n            @click=\"toggleDay(form.workDays, d.key)\"\n          >\n            {{ d.label }}\n          </button>\n        </div>\n      </div>\n\n      <div class=\"setting-row\">\n        <label class=\"setting-label\">Days off</label>\n        <div class=\"day-chips\">\n          <button\n            v-for=\"d in dayOptions\"\n            :key=\"d.key\"\n            class=\"day-chip off\"\n            :class=\"{ active: form.daysOff.includes(d.key) }\"\n            @click=\"toggleDay(form.daysOff, d.key)\"\n          >\n            {{ d.label }}\n          </button>\n        </div>\n      </div>\n\n      <div class=\"setting-row\">\n        <label class=\"setting-label\">Heavy meeting days</label>\n        <div class=\"day-chips\">\n          <button\n            v-for=\"d in dayOptions\"\n            :key=\"d.key\"\n            class=\"day-chip meeting\"\n            :class=\"{ active: form.heavyMeetingDays.includes(d.key) }\"\n            @click=\"toggleDay(form.heavyMeetingDays, d.key)\"\n          >\n            {{ d.label }}\n          </button>\n        </div>\n      </div>\n\n      <div class=\"setting-row\">\n        <label class=\"setting-label\">Max tasks per day</label>\n        <div class=\"number-chips\">\n          <button\n            v-for=\"n in [3, 5, 6, 8, 10]\"\n            :key=\"n\"\n            class=\"number-chip\"\n            :class=\"{ active: form.maxTasksPerDay === n }\"\n            @click=\"form.maxTasksPerDay = n\"\n          >\n            {{ n }}\n          </button>\n        </div>\n      </div>\n\n      <div class=\"setting-row\">\n        <label class=\"setting-label\">Work style</label>\n        <div class=\"style-chips\">\n          <button\n            v-for=\"ws in workStyleOptions\"\n            :key=\"ws.key\"\n            class=\"style-chip\"\n            :class=\"{ active: form.preferredWorkStyle === ws.key }\"\n            @click=\"form.preferredWorkStyle = ws.key\"\n          >\n            <span class=\"style-label\">{{ ws.label }}</span>\n            <span class=\"style-desc\">{{ ws.desc }}</span>\n          </button>\n        </div>\n      </div>\n\n      <div class=\"save-row\">\n        <button class=\"save-btn\" :disabled=\"isSaving\" @click=\"onSave\">\n          {{ isSaving ? 'Saving...' : 'Save Preferences' }}\n        </button>\n        <span v-if=\"saveMessage\" class=\"save-message\">{{ saveMessage }}</span>\n      </div>\n    </SettingsSection>\n\n    <SettingsSection title=\"Learned Patterns\">\n      <div class=\"metrics-grid\">\n        <div class=\"metric-card\">\n          <div class=\"metric-value\">\n            {{ profile?.avgWorkMinutesPerDay ? Math.round(profile.avgWorkMinutesPerDay) + ' min' : '—' }}\n          </div>\n          <div class=\"metric-label\">\n            Avg work/day\n          </div>\n        </div>\n        <div class=\"metric-card\">\n          <div class=\"metric-value\">\n            {{ profile?.avgTasksCompletedPerDay ? profile.avgTasksCompletedPerDay.toFixed(1) : '—' }}\n          </div>\n          <div class=\"metric-label\">\n            Avg tasks/day\n          </div>\n        </div>\n        <div class=\"metric-card\">\n          <div class=\"metric-value\">\n            {{ profile?.avgPlanAccuracy ? profile.avgPlanAccuracy.toFixed(0) + '%' : '—' }}\n          </div>\n          <div class=\"metric-label\">\n            Plan accuracy\n          </div>\n        </div>\n        <div class=\"metric-card\">\n          <div class=\"metric-value\">\n            {{ profile?.peakProductivityDays?.length ? profile.peakProductivityDays.map(d => d.charAt(0).toUpperCase() + d.slice(1, 3)).join(', ') : '—' }}\n          </div>\n          <div class=\"metric-label\">\n            Peak days\n          </div>\n        </div>\n      </div>\n\n      <div class=\"action-row\">\n        <button class=\"action-btn\" :disabled=\"isRecalculating\" @click=\"onRecalculate\">\n          <RefreshCw :size=\"14\" :class=\"{ spinning: isRecalculating }\" />\n          {{ isRecalculating ? 'Recalculating...' : 'Recalculate' }}\n        </button>\n        <button class=\"action-btn danger\" :disabled=\"isResetting\" @click=\"onReset\">\n          <Trash2 :size=\"14\" />\n          {{ isResetting ? 'Resetting...' : 'Reset Profile' }}\n        </button>\n      </div>\n    </SettingsSection>\n\n    <SettingsSection title=\"Memory Observations\">\n      <p class=\"obs-hint\">\n        {{ profile?.memoryGraph?.length || 0 }} observations from your work patterns\n      </p>\n\n      <div v-if=\"profile?.memoryGraph?.length\" class=\"obs-list\">\n        <div\n          v-for=\"(obs, idx) in profile.memoryGraph\"\n          :key=\"idx\"\n          class=\"obs-card\"\n        >\n          <div class=\"obs-header\">\n            <span class=\"obs-entity\">{{ obs.entity }}</span>\n            <span class=\"obs-relation\">{{ obs.relation }}</span>\n          </div>\n          <div class=\"obs-value\">\n            {{ obs.value }}\n          </div>\n          <div class=\"obs-meta\">\n            <div class=\"confidence-bar\">\n              <div class=\"confidence-fill\" :style=\"{ width: (obs.confidence * 100) + '%' }\" />\n            </div>\n            <span class=\"obs-confidence\">{{ (obs.confidence * 100).toFixed(0) }}%</span>\n            <span class=\"obs-source\">{{ obs.source }}</span>\n          </div>\n        </div>\n      </div>\n      <p v-else class=\"obs-empty\">\n        No observations yet. They'll appear as FlowState learns your patterns.\n      </p>\n\n      <div v-if=\"profile?.memoryGraph?.length\" class=\"action-row\">\n        <button class=\"action-btn danger\" :disabled=\"isClearingMemories\" @click=\"onClearMemories\">\n          <Trash2 :size=\"14\" />\n          {{ isClearingMemories ? 'Clearing...' : 'Clear Memories' }}\n        </button>\n      </div>\n    </SettingsSection>\n  </div>\n</template>\n\n<style scoped>\n.weekly-plan-settings-tab {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-6);\n}\n\n.setting-row {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-2);\n  padding: var(--space-2) 0;\n}\n\n.setting-label {\n  font-size: var(--text-sm);\n  font-weight: var(--font-medium);\n  color: var(--text-secondary);\n}\n\n.day-chips,\n.number-chips {\n  display: flex;\n  gap: var(--space-1_5);\n  flex-wrap: wrap;\n}\n\n.day-chip,\n.number-chip {\n  padding: var(--space-1_5) var(--space-3);\n  font-size: var(--text-xs);\n  font-weight: var(--font-medium);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-sm);\n  background: var(--glass-bg-soft);\n  backdrop-filter: blur(8px);\n  color: var(--text-secondary);\n  cursor: pointer;\n  transition: all var(--duration-fast);\n}\n\n.day-chip:hover,\n.number-chip:hover {\n  border-color: var(--glass-border-hover);\n  color: var(--text-primary);\n}\n\n.day-chip.active {\n  background: rgba(78, 205, 196, 0.12);\n  border-color: var(--brand-primary);\n  color: var(--brand-primary);\n}\n\n.day-chip.off.active {\n  background: rgba(239, 68, 68, 0.12);\n  border-color: var(--color-danger);\n  color: var(--color-danger);\n}\n\n.day-chip.meeting.active {\n  background: rgba(245, 158, 11, 0.12);\n  border-color: var(--color-warning);\n  color: var(--color-warning);\n}\n\n.number-chip {\n  width: 40px;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.number-chip.active {\n  background: rgba(78, 205, 196, 0.12);\n  border-color: var(--brand-primary);\n  color: var(--brand-primary);\n}\n\n.style-chips {\n  display: flex;\n  gap: var(--space-2);\n}\n\n.style-chip {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: var(--space-0_5);\n  padding: var(--space-2) var(--space-3);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-sm);\n  background: var(--glass-bg-soft);\n  backdrop-filter: blur(8px);\n  color: var(--text-secondary);\n  cursor: pointer;\n  transition: all var(--duration-fast);\n}\n\n.style-chip:hover {\n  border-color: var(--glass-border-hover);\n  color: var(--text-primary);\n}\n\n.style-chip.active {\n  background: rgba(78, 205, 196, 0.12);\n  border-color: var(--brand-primary);\n  color: var(--brand-primary);\n}\n\n.style-label {\n  font-size: var(--text-sm);\n  font-weight: var(--font-semibold);\n}\n\n.style-desc {\n  font-size: var(--text-xs);\n  opacity: 0.7;\n}\n\n.save-row {\n  display: flex;\n  align-items: center;\n  gap: var(--space-3);\n  padding-top: var(--space-3);\n}\n\n.save-btn {\n  padding: var(--space-2) var(--space-4);\n  font-size: var(--text-sm);\n  font-weight: var(--font-semibold);\n  background: var(--glass-bg-soft);\n  border: 1px solid var(--brand-primary);\n  border-radius: var(--radius-lg);\n  color: var(--brand-primary);\n  cursor: pointer;\n  backdrop-filter: blur(8px);\n  transition: all var(--duration-fast);\n}\n\n.save-btn:hover:not(:disabled) {\n  background: rgba(78, 205, 196, 0.08);\n}\n\n.save-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.save-message {\n  font-size: var(--text-sm);\n  color: var(--brand-primary);\n}\n\n.metrics-grid {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: var(--space-3);\n}\n\n.metric-card {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: var(--space-1);\n  padding: var(--space-3);\n  background: var(--glass-bg-soft);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-md);\n}\n\n.metric-value {\n  font-size: var(--text-lg);\n  font-weight: var(--font-bold);\n  color: var(--text-primary);\n}\n\n.metric-label {\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n}\n\n.action-row {\n  display: flex;\n  gap: var(--space-3);\n  padding-top: var(--space-2);\n}\n\n.action-btn {\n  display: inline-flex;\n  align-items: center;\n  gap: var(--space-1_5);\n  padding: var(--space-1_5) var(--space-3);\n  font-size: var(--text-xs);\n  font-weight: var(--font-medium);\n  background: var(--glass-bg-soft);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-sm);\n  color: var(--text-secondary);\n  cursor: pointer;\n  transition: all var(--duration-fast);\n}\n\n.action-btn:hover:not(:disabled) {\n  border-color: var(--glass-border-hover);\n  color: var(--text-primary);\n}\n\n.action-btn.danger:hover:not(:disabled) {\n  border-color: var(--color-danger);\n  color: var(--color-danger);\n}\n\n.action-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.spinning {\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n\n.learning-hint {\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n  margin: 0;\n  line-height: var(--leading-relaxed);\n}\n\n.obs-hint {\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n  margin: 0 0 var(--space-3) 0;\n}\n\n.obs-list {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-2);\n}\n\n.obs-card {\n  padding: var(--space-2) var(--space-3);\n  background: var(--glass-bg-soft);\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-sm);\n}\n\n.obs-header {\n  display: flex;\n  gap: var(--space-2);\n  align-items: center;\n  margin-bottom: var(--space-1);\n}\n\n.obs-entity {\n  font-size: var(--text-xs);\n  font-weight: var(--font-semibold);\n  color: var(--brand-primary);\n  background: rgba(78, 205, 196, 0.08);\n  padding: var(--space-0_5) var(--space-1_5);\n  border-radius: var(--radius-xs);\n}\n\n.obs-relation {\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n}\n\n.obs-value {\n  font-size: var(--text-sm);\n  color: var(--text-primary);\n  margin-bottom: var(--space-1_5);\n}\n\n.obs-meta {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n}\n\n.confidence-bar {\n  flex: 1;\n  max-width: 80px;\n  height: 4px;\n  background: var(--glass-bg);\n  border-radius: 2px;\n  overflow: hidden;\n}\n\n.confidence-fill {\n  height: 100%;\n  background: var(--brand-primary);\n  border-radius: 2px;\n  transition: width var(--duration-normal);\n}\n\n.obs-confidence {\n  font-size: var(--text-xs);\n  font-weight: var(--font-medium);\n  color: var(--text-secondary);\n  min-width: 32px;\n}\n\n.obs-source {\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n}\n\n.obs-empty {\n  font-size: var(--text-sm);\n  color: var(--text-muted);\n  font-style: italic;\n  margin: 0;\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/settings/tabs/WorkflowSettingsTab.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/startup/TauriModeSelector.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/startup/TauriStartupScreen.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/sync/SyncErrorPopover.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/sync/SyncStatusIndicator.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/sync/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/BatchEditModal.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/DoneToggle.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/DragHandle.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/HierarchicalTaskRow.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/HierarchicalTaskRowContent.vue","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":138,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":138,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4539,4542],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4539,4542],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":139,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":139,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4560,4563],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4560,4563],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<template>\n  <div\n    class=\"task-row\"\n    :class=\"{\n      'task-row--selected': selected,\n      'task-row--has-children': hasSubtasks,\n      'task-row--dragging': isDragging,\n      'task-row--drop-target': isDropTarget,\n      'task-row--mobile': isMobile,\n      'task-row--hovered': isHovered,\n      'task-row--focused': isFocused,\n      'task-row--completed': task.status === 'done',\n      'task-row--overdue': isOverdue,\n      'task-row--high-priority': task.priority === 'high',\n      'task-row--timer-active': isTimerActive\n    }\"\n    :data-status=\"task.status\"\n    :style=\"{\n      paddingLeft: `${indentLevel * 20 + 40}px`,\n      '--indent-level': indentLevel\n    }\"\n    draggable=\"true\"\n    @dragstart=\"$emit('dragstart', $event)\"\n    @dragend=\"$emit('dragend', $event)\"\n    @dragover.prevent=\"$emit('dragover', $event)\"\n    @drop.prevent=\"$emit('drop', $event)\"\n    @dragleave=\"$emit('dragleave', $event)\"\n    @click=\"$emit('rowClick', $event)\"\n    @contextmenu.prevent=\"$emit('contextMenu', $event)\"\n    @focusin=\"$emit('focusin', $event)\"\n    @focusout=\"$emit('focusout', $event)\"\n    @mouseenter=\"$emit('mouseenter', $event)\"\n    @mouseleave=\"$emit('mouseleave', $event)\"\n    @keydown=\"$emit('keydown', $event)\"\n    @touchstart=\"$emit('touchstart', $event)\"\n    @touchend=\"$emit('touchend', $event)\"\n  >\n    <!-- Done Toggle (Checkbox column) -->\n    <div class=\"task-row__done-toggle\" @click.stop>\n      <DoneToggle\n        :completed=\"task.status === 'done'\"\n        size=\"sm\"\n        variant=\"simple\"\n        :title=\"`Mark ${task.title} as ${task.status === 'done' ? 'incomplete' : 'complete'}`\"\n        :aria-label=\"`Toggle completion for ${task.title}`\"\n        @toggle=\"$emit('toggleComplete')\"\n      />\n    </div>\n\n    <!-- Title Cell -->\n    <TaskRowTitle\n      :title=\"task.title\"\n      :is-completed=\"task.status === 'done'\"\n      :is-hovered=\"isHovered\"\n      :is-selected=\"selected\"\n      :title-alignment-classes=\"titleAlignmentClasses\"\n      :has-subtasks=\"hasSubtasks\"\n      :completed-subtask-count=\"completedSubtaskCount\"\n      :total-subtasks=\"totalSubtasks\"\n      :is-all-subtasks-completed=\"isAllSubtasksCompleted\"\n    />\n\n    <!-- Project Indicator -->\n    <TaskRowProject\n      :visual=\"projectVisual\"\n      :project-display-name=\"projectDisplayName\"\n      :current-project-id=\"task.projectId\"\n      @update:project-id=\"(val) => $emit('updateProjectId', val)\"\n    />\n\n    <!-- Status Cell -->\n    <div class=\"task-row__status table-cell status-cell\" @click.stop>\n      <CustomSelect\n        :model-value=\"task.status || 'planned'\"\n        :options=\"statusOptions\"\n        placeholder=\"Select status...\"\n        @update:model-value=\"(val) => $emit('updateStatus', String(val))\"\n      />\n    </div>\n\n    <!-- Priority Badge -->\n    <TaskRowPriority\n      :priority=\"task.priority\"\n      @update:priority=\"(val) => $emit('updatePriority', val)\"\n    />\n\n    <!-- Due Date Cell -->\n    <TaskRowDueDate\n      :due-date=\"task.dueDate\"\n      @update:due-date=\"(val) => $emit('updateDueDate', val)\"\n    />\n\n    <!-- Progress Bar -->\n    <div class=\"task-row__progress\">\n      <div v-if=\"task.progress && task.progress > 0\" class=\"task-row__progress-bar\" :style=\"{ '--progress': `${task.progress}%` }\">\n        <div class=\"task-row__progress-bg\" />\n        <div class=\"task-row__progress-fill\" />\n        <span class=\"task-row__progress-text\">{{ task.progress }}%</span>\n      </div>\n      <span v-else class=\"task-row__no-progress\">-</span>\n    </div>\n\n    <!-- Action Buttons -->\n    <TaskRowActions\n      @start-timer=\"$emit('startTimer')\"\n      @edit=\"$emit('edit')\"\n      @duplicate=\"$emit('duplicate')\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from 'vue'\nimport type { Task } from '@/stores/tasks'\nimport { useTimerStore } from '@/stores/timer'\nimport DoneToggle from '@/components/tasks/DoneToggle.vue'\nimport CustomSelect from '@/components/common/CustomSelect.vue'\nimport TaskRowTitle from './row/TaskRowTitle.vue'\nimport TaskRowProject from './row/TaskRowProject.vue'\nimport TaskRowPriority from './row/TaskRowPriority.vue'\nimport TaskRowDueDate from './row/TaskRowDueDate.vue'\nimport TaskRowActions from './row/TaskRowActions.vue'\n\ninterface Props {\n  task: Task\n  indentLevel: number\n  selected: boolean\n  isMobile: boolean\n  isFocused: boolean\n  isHovered: boolean\n  isDragging: boolean\n  isDropTarget: boolean\n  isOverdue: boolean\n  hasSubtasks: boolean\n  completedSubtaskCount: number\n  totalSubtasks: number\n  isAllSubtasksCompleted: boolean\n  titleAlignmentClasses: any\n  projectVisual: any\n  projectDisplayName: string\n  statusOptions: Array<{ label: string, value: string }>\n}\n\nconst props = defineProps<Props>()\n\ndefineEmits<{\n  dragstart: [event: DragEvent]\n  dragend: [event: DragEvent]\n  dragover: [event: DragEvent]\n  drop: [event: DragEvent]\n  dragleave: [event: DragEvent]\n  rowClick: [event: MouseEvent]\n  contextMenu: [event: MouseEvent]\n  focusin: [event: FocusEvent]\n  focusout: [event: FocusEvent]\n  mouseenter: [event: MouseEvent]\n  mouseleave: [event: MouseEvent]\n  keydown: [event: KeyboardEvent]\n  touchstart: [event: TouchEvent]\n  touchend: [event: TouchEvent]\n  toggleComplete: []\n  updateStatus: [val: string]\n  updateProjectId: [val: string | null]\n  updatePriority: [val: string]\n  updateDueDate: [val: string | null]\n  startTimer: []\n  edit: []\n  duplicate: []\n}>()\n\nconst timerStore = useTimerStore()\n\n// Timer active state\nconst isTimerActive = computed(() => {\n  return timerStore.isTimerActive && timerStore.currentTaskId === props.task.id\n})\n\n</script>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/QuickTaskCreate.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/QuickTaskCreateModal.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/SortProgress.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/TaskContextMenu.vue","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":387,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":387,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12733,12736],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12733,12736],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'event' is defined but never used. Allowed unused args must match /^_/u.","line":470,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":470,"endColumn":28}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<template>\n  <div\n    v-if=\"isVisible\"\n    ref=\"menuRef\"\n    class=\"context-menu\"\n    :style=\"menuPosition\"\n  >\n    <!-- Header for inbox/batch operations -->\n    <div v-if=\"showInboxHeader\" class=\"context-menu-header\">\n      {{ displayHeaderText }}\n    </div>\n\n    <!-- Edit Task (only show for single task, not batch) -->\n    <button v-if=\"!isBatchOperation\" class=\"menu-item\" @click=\"handleEdit\">\n      <Pencil :size=\"16\" class=\"menu-icon\" />\n      <span class=\"menu-text\">Edit</span>\n      <span class=\"menu-shortcut\">Ctrl+E</span>\n    </button>\n\n    <div v-if=\"!isBatchOperation\" class=\"menu-divider\" />\n\n    <!-- AI Assist -->\n    <button class=\"menu-item menu-item--ai\" @click=\"openAIAssist\">\n      <Sparkles :size=\"16\" class=\"menu-icon menu-icon--ai\" />\n      <span class=\"menu-text\">AI Assist</span>\n    </button>\n\n    <!-- Date Section - Compact Pills -->\n    <div class=\"menu-section menu-section--tight\">\n      <div class=\"section-header section-header--inline\">\n        <Calendar :size=\"12\" class=\"section-icon\" />\n        <span class=\"section-title\">Date</span>\n      </div>\n      <div class=\"pill-row\">\n        <button class=\"pill-btn pill-btn--sm\" @click=\"setDueDate('today')\">\n          Today\n        </button>\n        <button class=\"pill-btn pill-btn--sm\" @click=\"setDueDate('tomorrow')\">\n          Tmrw\n        </button>\n        <button class=\"pill-btn pill-btn--sm\" @click=\"setDueDate('weekend')\">\n          Wknd\n        </button>\n        <button class=\"pill-btn pill-btn--sm\" @click=\"setDueDate('nextweek')\">\n          +1wk\n        </button>\n        <NPopover\n          trigger=\"click\"\n          placement=\"right-start\"\n          :show=\"showDatePicker\"\n          @update:show=\"showDatePicker = $event\"\n        >\n          <template #trigger>\n            <button class=\"pill-btn pill-btn--sm pill-btn--icon\" title=\"Pick date\">\n              <CalendarPlus :size=\"12\" />\n            </button>\n          </template>\n          <div class=\"date-picker-popover\" @click.stop>\n            <NDatePicker\n              panel\n              type=\"date\"\n              :value=\"currentDueDateTimestamp\"\n              :actions=\"null\"\n              @update:value=\"handleDatePickerSelect\"\n            />\n            <div class=\"date-picker-footer\">\n              <button class=\"footer-btn\" @click=\"setDueDate('nextmonth'); showDatePicker = false\">\n                +1mo\n              </button>\n              <button class=\"footer-btn\" @click=\"setDueDate('twomonths'); showDatePicker = false\">\n                +2mo\n              </button>\n              <button class=\"footer-btn\" @click=\"setDueDate('nextquarter'); showDatePicker = false\">\n                +3mo\n              </button>\n              <button class=\"footer-btn\" @click=\"setDueDate('halfyear'); showDatePicker = false\">\n                +6mo\n              </button>\n              <button class=\"footer-btn footer-btn--now\" @click=\"setDueDate('today'); showDatePicker = false\">\n                Now\n              </button>\n            </div>\n          </div>\n        </NPopover>\n      </div>\n    </div>\n\n    <!-- Done for now - prominent action -->\n    <button class=\"menu-item menu-item--highlight\" @click=\"handleDoneForNow\">\n      <Clock :size=\"16\" class=\"menu-icon\" />\n      <span class=\"menu-text\">Done for now</span>\n      <span class=\"menu-hint\">→ Tomorrow</span>\n    </button>\n\n    <div class=\"menu-divider\" />\n\n    <!-- Priority Section - Compact Pills -->\n    <div class=\"menu-section menu-section--tight\">\n      <div class=\"section-header section-header--inline\">\n        <Flag :size=\"12\" class=\"section-icon\" />\n        <span class=\"section-title\">Priority</span>\n      </div>\n      <div class=\"pill-row\">\n        <button\n          class=\"pill-btn pill-btn--sm pill-btn--priority-high\"\n          :class=\"{ active: currentTask?.priority === 'high' }\"\n          @click=\"setPriority('high')\"\n        >\n          <span class=\"priority-dot high\" />\n          High\n        </button>\n        <button\n          class=\"pill-btn pill-btn--sm pill-btn--priority-medium\"\n          :class=\"{ active: currentTask?.priority === 'medium' }\"\n          @click=\"setPriority('medium')\"\n        >\n          <span class=\"priority-dot medium\" />\n          Med\n        </button>\n        <button\n          class=\"pill-btn pill-btn--sm pill-btn--priority-low\"\n          :class=\"{ active: currentTask?.priority === 'low' }\"\n          @click=\"setPriority('low')\"\n        >\n          <span class=\"priority-dot low\" />\n          Low\n        </button>\n      </div>\n    </div>\n\n    <!-- Status & Duration Row -->\n    <div class=\"inline-row\">\n      <!-- Status with Submenu -->\n      <div\n        class=\"inline-select\"\n        @mouseenter=\"openSubmenu('status', $event)\"\n        @mouseleave=\"closeSubmenu('status')\"\n      >\n        <CheckCircle :size=\"14\" class=\"inline-icon\" />\n        <span class=\"inline-value\">{{ currentStatusLabel || 'Status' }}</span>\n        <ChevronDown :size=\"12\" class=\"inline-arrow\" />\n      </div>\n\n      <!-- Duration with Submenu -->\n      <div\n        class=\"inline-select\"\n        @mouseenter=\"openSubmenu('duration', $event)\"\n        @mouseleave=\"closeSubmenu('duration')\"\n      >\n        <Clock :size=\"14\" class=\"inline-icon\" />\n        <span class=\"inline-value\">{{ currentDurationLabel || 'Time' }}</span>\n        <ChevronDown :size=\"12\" class=\"inline-arrow\" />\n      </div>\n    </div>\n\n    <!-- Decomposed Submenus -->\n    <!-- BUG-1095: Pass parentVisible to ensure submenus close when parent closes -->\n    <StatusSubmenu\n      :is-visible=\"showStatusSubmenu\"\n      :parent-visible=\"isVisible\"\n      :style=\"statusSubmenuStyle\"\n      :current-status=\"currentTask?.status\"\n      @mouseenter=\"keepSubmenuOpen\"\n      @mouseleave=\"closeSubmenu('status')\"\n      @select=\"(s: string) => { closeAllSubmenusNow(); setStatus(s as 'planned' | 'in_progress' | 'done') }\"\n    />\n\n    <DurationSubmenu\n      :is-visible=\"showDurationSubmenu\"\n      :parent-visible=\"isVisible\"\n      :style=\"durationSubmenuStyle\"\n      :current-duration=\"currentTask?.estimatedDuration\"\n      @mouseenter=\"keepSubmenuOpen\"\n      @mouseleave=\"closeSubmenu('duration')\"\n      @select=\"(d: number | null) => { closeAllSubmenusNow(); setDuration(d) }\"\n    />\n\n    <!-- Quick Actions Row -->\n    <div class=\"action-bar\">\n      <button\n        class=\"action-btn action-btn--done\"\n        :class=\"{ active: currentTask?.status === 'done' }\"\n        title=\"Mark Done (D)\"\n        @click=\"toggleDone\"\n      >\n        <CheckCircle :size=\"16\" />\n        <span class=\"action-label\">Done</span>\n      </button>\n      <button class=\"action-btn action-btn--start\" title=\"Start Now (S)\" @click=\"startTaskNow\">\n        <Play :size=\"16\" />\n        <span class=\"action-label\">Start</span>\n      </button>\n      <button class=\"action-btn action-btn--timer\" title=\"Start Timer (Space)\" @click=\"startTimer\">\n        <Timer :size=\"16\" />\n        <span class=\"action-label\">Timer</span>\n      </button>\n      <button class=\"action-btn action-btn--focus\" title=\"Focus Mode (F)\" @click=\"enterFocus\">\n        <Eye :size=\"16\" />\n        <span class=\"action-label\">Focus</span>\n      </button>\n    </div>\n\n    <!-- More Actions with Submenu -->\n    <div\n      class=\"menu-item has-submenu\"\n      @mouseenter=\"openSubmenu('more', $event)\"\n      @mouseleave=\"closeSubmenu('more')\"\n    >\n      <MoreHorizontal :size=\"16\" class=\"menu-icon\" />\n      <span class=\"menu-text\">More</span>\n      <ChevronRight :size=\"14\" class=\"submenu-arrow\" />\n    </div>\n\n    <MoreSubmenu\n      :is-visible=\"showMoreSubmenu\"\n      :parent-visible=\"isVisible\"\n      :style=\"moreSubmenuStyle\"\n      :is-batch-operation=\"isBatchOperation\"\n      :task-id=\"currentTask?.id\"\n      @mouseenter=\"keepSubmenuOpen\"\n      @mouseleave=\"closeSubmenu('more')\"\n      @done-for-now=\"() => { closeAllSubmenusNow(); handleDoneForNow() }\"\n      @duplicate=\"() => { closeAllSubmenusNow(); duplicateTask() }\"\n      @pin-quick-task=\"() => { closeAllSubmenusNow(); pinAsQuickTask() }\"\n      @move-to-section=\"taskId => { closeAllSubmenusNow(); $emit('moveToSection', taskId); $emit('close') }\"\n      @clear-selection=\"() => { closeAllSubmenusNow(); clearSelection() }\"\n    />\n\n    <div class=\"menu-divider\" />\n\n    <!-- Delete -->\n    <button class=\"menu-item danger\" @click=\"deleteTask\">\n      <Trash2 :size=\"16\" class=\"menu-icon\" />\n      <span class=\"menu-text\">{{ deleteText }}</span>\n    </button>\n\n    <!-- AI Assist Popover -->\n    <AITaskAssistPopover\n      :is-visible=\"showAIAssist\"\n      :task=\"currentTask\"\n      :x=\"aiAssistPosition.x\"\n      :y=\"aiAssistPosition.y\"\n      context=\"context-menu\"\n      @close=\"closeAIAssist\"\n      @accept-priority=\"handleAIAcceptPriority\"\n      @accept-breakdown=\"handleAIAcceptBreakdown\"\n      @accept-date=\"handleAIAcceptDate\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, onUnmounted, watch, inject } from 'vue'\nimport { useTaskStore } from '@/stores/tasks'\nimport { useCanvasStore } from '@/stores/canvas'\nimport {\n  Calendar,\n  CalendarPlus,\n  CheckCircle,\n  Timer,\n  Clock,\n  Eye,\n  Play,\n  Flag,\n  ChevronRight,\n  ChevronDown,\n  Pencil,\n  Trash2,\n  MoreHorizontal,\n  Sparkles\n} from 'lucide-vue-next'\nimport { NPopover, NDatePicker } from 'naive-ui'\nimport { FOCUS_MODE_KEY } from '@/composables/useFocusMode'\nimport type { FocusModeState } from '@/composables/useFocusMode'\nimport type { Task } from '@/stores/tasks'\n\n// New Architecture Imports\nimport { useTaskContextMenuActions } from '@/composables/tasks/useTaskContextMenuActions'\nimport { useQuickTasks } from '@/composables/useQuickTasks'\nimport { useToast } from '@/composables/useToast'\nimport { statusOptions } from './context-menu/constants'\nimport StatusSubmenu from './context-menu/StatusSubmenu.vue'\nimport DurationSubmenu from './context-menu/DurationSubmenu.vue'\nimport MoreSubmenu from './context-menu/MoreSubmenu.vue'\nimport AITaskAssistPopover from '@/components/ai/AITaskAssistPopover.vue'\n\ninterface Props {\n  isVisible: boolean\n  x: number\n  y: number\n  task: Task | null\n  compactMode?: boolean\n  selectedCount?: number\n  contextTask?: Task | null\n}\n\nconst props = defineProps<Props>()\n\nconst emit = defineEmits<{\n  close: []\n  edit: [taskId: string]\n  confirmDelete: [taskId: string, instanceId?: string, isCalendarEvent?: boolean]\n  clearSelection: []\n  setPriority: [priority: 'low' | 'medium' | 'high']\n  setStatus: [status: 'planned' | 'in_progress' | 'done']\n  setDueDate: [dateType: 'today' | 'tomorrow' | 'weekend' | 'nextweek']\n  enterFocusMode: []\n  deleteSelected: []\n  setDuration: [duration: number | null]\n  moveToSection: [taskId: string]\n}>()\n\n// Use the new composable for business logic\nconst {\n  currentTask,\n  isBatchOperation,\n  handleEdit,\n  setDueDate,\n  setPriority,\n  setStatus,\n  setDuration,\n  toggleDone,\n  startTaskNow,\n  startTimer,\n  duplicateTask,\n  deleteTask,\n  clearSelection\n} = useTaskContextMenuActions(props, emit)\n\nconst focusModeState = inject<FocusModeState | null>(FOCUS_MODE_KEY, null)\nconst enterFocusModeFn = focusModeState?.enterFocusMode || null\n\n// Direct store access for custom date handling\nconst taskStore = useTaskStore()\nconst canvasStore = useCanvasStore()\n\nconst menuRef = ref<HTMLElement | null>(null)\nconst showDatePicker = ref(false)\n\n// AI Assist popover state\nconst showAIAssist = ref(false)\nconst aiAssistPosition = ref({ x: 0, y: 0 })\n\n// Submenu state\nconst showStatusSubmenu = ref(false)\nconst showDurationSubmenu = ref(false)\nconst showMoreSubmenu = ref(false)\nconst submenuTimeout = ref<ReturnType<typeof setTimeout> | null>(null)\nconst statusSubmenuPosition = ref({ x: 0, y: 0 })\nconst durationSubmenuPosition = ref({ x: 0, y: 0 })\nconst moreSubmenuPosition = ref({ x: 0, y: 0 })\n\n// Computed properties for display\nconst showInboxHeader = computed(() => {\n  return (props.selectedCount && props.selectedCount > 0) || props.contextTask\n})\n\nconst displayHeaderText = computed(() => {\n  if (props.contextTask) {\n    return props.contextTask.title\n  } else if (props.selectedCount && props.selectedCount > 1) {\n    return `${props.selectedCount} selected`\n  }\n  return ''\n})\n\nconst currentStatusLabel = computed(() => {\n  const status = currentTask.value?.status\n  return statusOptions.find(s => s.value === status)?.label || ''\n})\n\nconst currentDurationLabel = computed(() => {\n  const duration = currentTask.value?.estimatedDuration\n  if (!duration) return ''\n  if (duration === 15) return '15m'\n  if (duration === 30) return '30m'\n  if (duration === 60) return '1h'\n  if (duration === 120) return '2h'\n  return `${duration}m`\n})\n\nconst deleteText = computed(() => {\n  if (isBatchOperation.value) {\n    return `Delete ${props.selectedCount}`\n  }\n  const task = currentTask.value\n  return (task && 'isCalendarEvent' in task && (task as any).isCalendarEvent) ? 'Remove' : 'Delete'\n})\n\n// Date picker value (timestamp in milliseconds for Naive UI)\nconst currentDueDateTimestamp = computed(() => {\n  const dueDate = currentTask.value?.dueDate\n  if (!dueDate) return null\n  const date = new Date(dueDate)\n  return isNaN(date.getTime()) ? null : date.getTime()\n})\n\n// Handle date selection from picker - directly update task store\nconst handleDatePickerSelect = async (timestamp: number | null) => {\n  if (!timestamp || !currentTask.value) return\n\n  // Use local date components to avoid timezone shift\n  const date = new Date(timestamp)\n  const year = date.getFullYear()\n  const month = String(date.getMonth() + 1).padStart(2, '0')\n  const day = String(date.getDate()).padStart(2, '0')\n  const formattedDate = `${year}-${month}-${day}`\n\n  // Close the popover first\n  showDatePicker.value = false\n\n  // Update the task directly via task store\n  try {\n    await taskStore.updateTaskWithUndo(currentTask.value.id, { dueDate: formattedDate })\n    canvasStore.requestSync('user:context-menu')\n  } catch (error) {\n    console.error('Error updating task due date:', error)\n  }\n\n  emit('close')\n}\n\n// Handle \"Done for now\" - reschedule task to tomorrow with tracking badge\nconst handleDoneForNow = async () => {\n  // BUG-1095: Close menu FIRST to prevent \"stuck\" menu\n  emit('close')\n\n  if (!currentTask.value) return\n\n  const { showToast } = useToast()\n\n  // Calculate tomorrow's date\n  const tomorrow = new Date()\n  tomorrow.setDate(tomorrow.getDate() + 1)\n  const year = tomorrow.getFullYear()\n  const month = String(tomorrow.getMonth() + 1).padStart(2, '0')\n  const day = String(tomorrow.getDate()).padStart(2, '0')\n  const tomorrowStr = `${year}-${month}-${day}`\n\n  try {\n    // Set both dueDate and doneForNowUntil to track the badge\n    await taskStore.updateTaskWithUndo(currentTask.value.id, {\n      dueDate: tomorrowStr,\n      doneForNowUntil: tomorrowStr\n    })\n    canvasStore.requestSync('user:context-menu')\n    showToast('Moved to tomorrow', 'success', { duration: 2000 })\n  } catch (error) {\n    console.error('Error updating task due date:', error)\n    showToast('Failed to reschedule task', 'error')\n  }\n}\n\n// FEATURE-1248: Pin task as quick task shortcut\nconst { pinFromTask } = useQuickTasks()\nconst pinAsQuickTask = async () => {\n    emit('close')\n    if (!currentTask.value) return\n    const { showToast } = useToast()\n    try {\n        await pinFromTask(currentTask.value)\n        showToast('Pinned as Quick Task', 'success', { duration: 2000 })\n    } catch (error) {\n        console.error('Error pinning quick task:', error)\n        showToast('Failed to pin task', 'error')\n    }\n}\n\n// AI Assist handlers\nconst openAIAssist = (event: MouseEvent) => {\n  const menuRect = menuRef.value?.getBoundingClientRect()\n  if (menuRect) {\n    aiAssistPosition.value = {\n      x: menuRect.right + 4,\n      y: menuRect.top\n    }\n  } else {\n    aiAssistPosition.value = { x: props.x + 240, y: props.y }\n  }\n  showAIAssist.value = true\n}\n\nconst closeAIAssist = () => {\n  showAIAssist.value = false\n}\n\nconst handleAIAcceptPriority = (priority: string, duration: number) => {\n  if (!currentTask.value) return\n  const validPriority = ['low', 'medium', 'high'].includes(priority) ? priority as 'low' | 'medium' | 'high' : undefined\n  if (validPriority) setPriority(validPriority)\n  if (duration) setDuration(duration)\n  emit('close')\n}\n\nconst handleAIAcceptBreakdown = async (tasks: Array<{ title: string; priority?: string }>) => {\n  for (const t of tasks) {\n    const validPriority = ['low', 'medium', 'high'].includes(t.priority || '') ? t.priority as 'low' | 'medium' | 'high' : 'medium'\n    await taskStore.createTask({\n      title: t.title,\n      priority: validPriority,\n      status: 'planned'\n    })\n  }\n  showAIAssist.value = false\n  emit('close')\n}\n\nconst handleAIAcceptDate = async (date: string) => {\n  if (!currentTask.value) return\n  try {\n    await taskStore.updateTaskWithUndo(currentTask.value.id, { dueDate: date })\n    canvasStore.requestSync('user:context-menu')\n  } catch (error) {\n    console.error('Error updating task due date from AI:', error)\n  }\n  showAIAssist.value = false\n  emit('close')\n}\n\n// Menu positioning\nconst menuPosition = computed(() => {\n  if (!menuRef.value) {\n    return { left: props.x + 'px', top: props.y + 'px' }\n  }\n\n  const menuHeight = menuRef.value.offsetHeight || 400\n  const menuWidth = menuRef.value.offsetWidth || 240\n  const viewportHeight = window.innerHeight\n  const viewportWidth = window.innerWidth\n  const padding = 8\n\n  let left = props.x\n  let top = props.y\n\n  if (top + menuHeight > viewportHeight - padding) {\n    top = props.y - menuHeight\n  }\n  if (left + menuWidth > viewportWidth - padding) {\n    left = viewportWidth - menuWidth - padding\n  }\n  if (left < padding) left = padding\n  if (top < padding) top = padding\n\n  return { left: left + 'px', top: top + 'px', position: 'absolute' as const }\n})\n\n// Submenu styles\nconst statusSubmenuStyle = computed(() => ({\n  left: statusSubmenuPosition.value.x + 'px',\n  top: statusSubmenuPosition.value.y + 'px'\n}))\n\nconst durationSubmenuStyle = computed(() => ({\n  left: durationSubmenuPosition.value.x + 'px',\n  top: durationSubmenuPosition.value.y + 'px'\n}))\n\nconst moreSubmenuStyle = computed(() => ({\n  left: moreSubmenuPosition.value.x + 'px',\n  top: moreSubmenuPosition.value.y + 'px'\n}))\n\n// Submenu handlers\nconst openSubmenu = (type: 'status' | 'duration' | 'more', event: MouseEvent) => {\n  if (submenuTimeout.value) {\n    clearTimeout(submenuTimeout.value)\n    submenuTimeout.value = null\n  }\n\n  // BUG-1095: Close ALL other submenus before opening a new one\n  showStatusSubmenu.value = false\n  showDurationSubmenu.value = false\n  showMoreSubmenu.value = false\n\n  const target = event.currentTarget as HTMLElement\n  const triggerRect = target.getBoundingClientRect()\n  const menuRect = menuRef.value?.getBoundingClientRect()\n  const submenuWidth = 150\n\n  // BUG-1095: Position to the right of the MENU, not the trigger\n  let x = menuRect ? menuRect.right + 4 : triggerRect.right + 4\n  // Y position stays relative to trigger for vertical alignment\n  let y = triggerRect.top\n\n  // Flip to left if not enough space on right\n  if (x + submenuWidth > window.innerWidth - 8) {\n    x = menuRect ? menuRect.left - submenuWidth - 4 : triggerRect.left - submenuWidth - 4\n  }\n\n  const submenuHeight = type === 'more' ? 100 : 180\n  if (y + submenuHeight > window.innerHeight - 8) {\n    y = window.innerHeight - submenuHeight - 8\n  }\n\n  if (type === 'status') {\n    statusSubmenuPosition.value = { x, y }\n    showStatusSubmenu.value = true\n  } else if (type === 'duration') {\n    durationSubmenuPosition.value = { x, y }\n    showDurationSubmenu.value = true\n  } else {\n    moreSubmenuPosition.value = { x, y }\n    showMoreSubmenu.value = true\n  }\n}\n\nconst keepSubmenuOpen = () => {\n  if (submenuTimeout.value) {\n    clearTimeout(submenuTimeout.value)\n    submenuTimeout.value = null\n  }\n}\n\nconst closeSubmenu = (type: 'status' | 'duration' | 'more') => {\n  submenuTimeout.value = setTimeout(() => {\n    if (type === 'status') showStatusSubmenu.value = false\n    else if (type === 'duration') showDurationSubmenu.value = false\n    else showMoreSubmenu.value = false\n  }, 150)\n}\n\n// BUG-1095: Immediately close ALL submenus - no timeout\nconst closeAllSubmenusNow = () => {\n  if (submenuTimeout.value) {\n    clearTimeout(submenuTimeout.value)\n    submenuTimeout.value = null\n  }\n  showStatusSubmenu.value = false\n  showDurationSubmenu.value = false\n  showMoreSubmenu.value = false\n}\n\nconst enterFocus = () => {\n  // BUG-1095: Close submenus first\n  closeAllSubmenusNow()\n  emit('close')\n\n  if (currentTask.value && !isBatchOperation.value && enterFocusModeFn) {\n    enterFocusModeFn(currentTask.value.id)\n  } else if (isBatchOperation.value) {\n    emit('enterFocusMode')\n  }\n}\n\n// Click outside handler\nconst handleClickOutside = (event: MouseEvent) => {\n  const target = event.target as HTMLElement\n  if (target.closest('.submenu')) return\n  if (menuRef.value && !menuRef.value.contains(target)) {\n    emit('close')\n  }\n}\n\nwatch(() => props.isVisible, (isVisible) => {\n  if (isVisible) {\n    setTimeout(() => document.addEventListener('click', handleClickOutside), 0)\n  } else {\n    document.removeEventListener('click', handleClickOutside)\n    showStatusSubmenu.value = false\n    showDurationSubmenu.value = false\n    showMoreSubmenu.value = false\n    showAIAssist.value = false\n  }\n})\n\nonUnmounted(() => {\n  document.removeEventListener('click', handleClickOutside)\n  if (submenuTimeout.value) clearTimeout(submenuTimeout.value)\n})\n</script>\n\n<style scoped>\n.context-menu {\n  position: absolute;\n  background: var(--overlay-component-bg);\n  backdrop-filter: var(--overlay-component-backdrop);\n  -webkit-backdrop-filter: var(--overlay-component-backdrop);\n  border: var(--overlay-component-border);\n  border-radius: var(--radius-lg);\n  box-shadow: var(--overlay-component-shadow);\n  padding: var(--space-2) 0;\n  min-width: 240px;\n  max-width: 280px;\n  z-index: var(--z-dropdown);\n  animation: menuSlideIn var(--duration-fast) var(--ease-out);\n}\n\n@keyframes menuSlideIn {\n  from { opacity: 0; transform: scale(0.96) translateY(-4px); }\n  to { opacity: 1; transform: scale(1) translateY(0); }\n}\n\n.context-menu-header {\n  padding: var(--space-1_5) var(--space-3);\n  font-size: var(--text-xs);\n  font-weight: 600;\n  color: var(--text-muted);\n  background: var(--glass-bg-light);\n  border-bottom: 1px solid var(--glass-border-light);\n  margin-bottom: var(--space-1);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/* Menu Items */\n.menu-item {\n  width: 100%;\n  background: transparent;\n  border: none;\n  color: var(--text-primary);\n  padding: var(--space-2) var(--space-3);\n  font-size: var(--text-sm);\n  text-align: left;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  transition: background var(--duration-fast);\n}\n\n.menu-item:hover { background: var(--glass-bg-heavy); }\n.menu-item.active { color: var(--brand-primary); }\n.menu-item.danger { color: var(--danger-text); }\n.menu-item.danger:hover { background: var(--danger-bg-subtle); }\n\n/* Highlighted menu item - stands out */\n.menu-item--highlight {\n  background: var(--amber-bg-light);\n  border-left: var(--space-0_75) solid var(--amber-text);\n  margin: var(--space-1) var(--space-2);\n  border-radius: var(--radius-md);\n  width: calc(100% - var(--space-4));\n}\n.menu-item--highlight:hover {\n  background: var(--amber-bg-medium);\n}\n.menu-item--highlight .menu-icon {\n  color: var(--amber-text);\n}\n\n.menu-hint {\n  font-size: var(--text-xs);\n  color: var(--text-muted);\n  opacity: 0.7;\n}\n\n.menu-icon { flex-shrink: 0; opacity: 0.8; }\n.menu-text { flex: 1; }\n.menu-shortcut { color: var(--text-muted); font-size: var(--text-xs); opacity: 0.6; }\n\n.menu-divider {\n  height: 1px;\n  background: var(--glass-bg-heavy);\n  margin: var(--space-2) 0;\n}\n\n/* Sections */\n.menu-section { padding: var(--space-1_5) var(--space-3); }\n.menu-section--tight { padding: var(--space-1_5) var(--space-3) var(--space-2); }\n\n.section-header {\n  display: flex;\n  align-items: center;\n  gap: var(--space-1_5);\n  margin-bottom: var(--space-2);\n}\n\n.section-header--inline {\n  margin-bottom: var(--space-1_5);\n}\n\n.section-icon { color: var(--text-muted); opacity: 0.6; }\n.section-title {\n  font-size: var(--text-xs);\n  font-weight: 600;\n  color: var(--text-muted);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n/* Pill Row */\n.pill-row {\n  display: flex;\n  gap: var(--space-1_5);\n  flex-wrap: nowrap;\n}\n\n.pill-btn {\n  padding: var(--space-1) var(--space-2_5);\n  border-radius: var(--radius-xl);\n  background: var(--glass-bg-heavy);\n  border: 1px solid var(--glass-border);\n  color: var(--text-secondary);\n  font-size: var(--text-xs);\n  font-weight: 500;\n  cursor: pointer;\n  transition: all var(--duration-fast) var(--spring-smooth);\n  display: flex;\n  align-items: center;\n  gap: var(--space-1);\n  white-space: nowrap;\n}\n\n.pill-btn--sm { padding: var(--space-1) var(--space-2); font-size: var(--text-xs); }\n\n.pill-btn:hover {\n  background: var(--glass-border);\n  border-color: var(--glass-border-hover);\n  color: var(--text-primary);\n}\n\n.pill-btn.active {\n  background: var(--brand-bg-subtle);\n  border-color: var(--brand-primary);\n  color: var(--brand-primary);\n}\n\n.pill-btn--icon {\n  padding: var(--space-0_5) var(--space-1);\n  min-width: 24px;\n  justify-content: center;\n}\n\n/* Priority Pills */\n.pill-btn--priority-high:hover,\n.pill-btn--priority-high.active {\n  background: var(--priority-high-bg);\n  border-color: var(--color-priority-high);\n  color: var(--color-priority-high);\n}\n\n.pill-btn--priority-medium:hover,\n.pill-btn--priority-medium.active {\n  background: var(--priority-medium-bg);\n  border-color: var(--color-priority-medium);\n  color: var(--color-priority-medium);\n}\n\n.pill-btn--priority-low:hover,\n.pill-btn--priority-low.active {\n  background: var(--priority-low-bg);\n  border-color: var(--color-priority-low);\n  color: var(--color-priority-low);\n}\n\n.priority-dot {\n  width: var(--space-1_75);\n  height: var(--space-1_75);\n  border-radius: var(--radius-full);\n}\n\n.priority-dot.high { background: var(--color-priority-high); }\n.priority-dot.medium { background: var(--color-priority-medium); }\n.priority-dot.low { background: var(--color-priority-low); }\n\n/* Date Picker Popover */\n.date-picker-popover {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-2);\n}\n\n.date-picker-footer {\n  display: flex;\n  gap: var(--space-1);\n  justify-content: flex-end;\n  padding-top: var(--space-2);\n  border-top: 1px solid var(--glass-border);\n}\n\n.footer-btn {\n  padding: 0 var(--space-2);\n  height: var(--space-7);\n  background: transparent;\n  border: 1px solid var(--glass-border);\n  border-radius: var(--radius-sm);\n  color: var(--text-secondary);\n  font-size: var(--text-xs);\n  font-weight: var(--font-medium);\n  cursor: pointer;\n  transition: all var(--duration-fast);\n}\n\n.footer-btn:hover {\n  background: var(--glass-bg-medium);\n  border-color: var(--brand-primary);\n  color: var(--brand-primary);\n}\n\n.footer-btn--now {\n  background: var(--brand-primary);\n  border-color: var(--brand-primary);\n  color: white;\n}\n\n.footer-btn--now:hover {\n  background: var(--brand-primary-hover, var(--brand-primary));\n}\n\n/* Inline Row for Status/Duration */\n.inline-row {\n  display: flex;\n  gap: var(--space-2);\n  padding: var(--space-1_5) var(--space-3) var(--space-2_5);\n}\n\n.inline-select {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  gap: var(--space-1_5);\n  padding: var(--space-1_5) var(--space-2_5);\n  background: var(--glass-bg-medium);\n  border: 1px solid var(--glass-bg-heavy);\n  border-radius: var(--radius-md);\n  cursor: pointer;\n  transition: all var(--duration-fast) var(--spring-smooth);\n}\n\n.inline-select:hover {\n  background: var(--glass-bg-heavy);\n  border-color: var(--glass-border-hover);\n}\n\n.inline-icon { color: var(--text-muted); flex-shrink: 0; }\n.inline-value { flex: 1; font-size: var(--text-xs); color: var(--text-secondary); }\n.inline-arrow { color: var(--text-muted); opacity: 0.5; }\n\n/* Action Bar */\n.action-bar {\n  display: flex;\n  gap: var(--space-2);\n  padding: var(--space-2) var(--space-3);\n  justify-content: space-between;\n}\n\n.action-btn {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: var(--space-1);\n  padding: var(--space-2_5) var(--space-1_5);\n  background: var(--glass-bg-medium);\n  border: 1px solid var(--glass-bg-heavy);\n  border-radius: var(--radius-md);\n  cursor: pointer;\n  transition: all var(--duration-fast) var(--spring-smooth);\n  color: var(--text-secondary);\n}\n\n.action-btn:hover {\n  background: var(--glass-bg-heavy);\n  border-color: var(--glass-border-hover);\n  color: var(--text-primary);\n}\n\n.action-btn--done { color: var(--color-work); }\n.action-btn--done:hover { background: var(--status-done-bg); border-color: var(--color-work); }\n.action-btn--done.active {\n  background: var(--status-done-bg);\n  border-color: var(--color-work);\n  color: var(--color-work);\n}\n\n.action-btn--start { color: var(--color-break); }\n.action-btn--start:hover { background: var(--status-in-progress-bg); border-color: var(--color-break); }\n\n.action-btn--timer { color: var(--brand-primary); }\n.action-btn--timer:hover { background: var(--brand-bg-subtle); border-color: var(--brand-primary); }\n\n.action-btn--focus { color: var(--color-focus); }\n.action-btn--focus:hover { background: var(--status-on-hold-bg); border-color: var(--color-focus); }\n\n.action-label { font-size: var(--text-xs); font-weight: 500; text-transform: uppercase; letter-spacing: 0.3px; }\n\n/* AI Assist Menu Item */\n.menu-item--ai {\n  color: var(--brand-primary);\n}\n\n.menu-item--ai:hover {\n  background: var(--brand-bg-subtle);\n}\n\n.menu-icon--ai {\n  color: var(--brand-primary);\n  opacity: 1;\n}\n\n/* Submenu */\n.has-submenu { position: relative; }\n.submenu-arrow { color: var(--text-muted); margin-left: auto; }\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/TaskEditModal.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/TaskList.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/TaskRow.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/TaskTable.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/context-menu/DurationSubmenu.vue","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'props' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":34,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":12}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\n<template>\n  <Teleport to=\"body\">\n    <div\n      v-if=\"isVisible && parentVisible\"\n      class=\"submenu\"\n      :style=\"style\"\n      @mouseenter=\"$emit('mouseenter')\"\n      @mouseleave=\"$emit('mouseleave')\"\n    >\n      <button\n        v-for=\"dur in durationOptions\"\n        :key=\"dur.value ?? 'none'\"\n        class=\"menu-item menu-item--sm\"\n        :class=\"{ active: currentDuration === dur.value }\"\n        @click.stop=\"handleSelect(dur.value)\"\n      >\n        <component\n          :is=\"dur.icon\"\n          :size=\"14\"\n          class=\"duration-icon\"\n          :class=\"[dur.class]\"\n        />\n        <span class=\"menu-text\">{{ dur.label }}</span>\n      </button>\n    </div>\n  </Teleport>\n</template>\n\n<script setup lang=\"ts\">\nimport { durationOptions } from './constants'\nimport type { CSSProperties } from 'vue'\n\nconst props = defineProps<{\n  isVisible: boolean\n  parentVisible?: boolean // BUG-1095: Track parent menu visibility\n  style: CSSProperties\n  currentDuration?: number | null\n}>()\n\nconst emit = defineEmits<{\n  select: [duration: number | null]\n  mouseenter: []\n  mouseleave: []\n}>()\n\n// BUG-1095: Handle selection with immediate emit\nconst handleSelect = (duration: number | null) => {\n  emit('select', duration)\n}\n</script>\n\n<style scoped>\n/* Styles copied from TaskContextMenu.vue */\n.submenu {\n  position: fixed;\n  background: var(--overlay-component-bg);\n  backdrop-filter: var(--overlay-component-backdrop);\n  border: var(--overlay-component-border);\n  border-radius: var(--radius-lg);\n  box-shadow: var(--overlay-component-shadow);\n  padding: var(--space-1) 0;\n  min-width: 130px;\n  z-index: calc(var(--z-dropdown) + 1);\n  animation: menuSlideIn var(--duration-fast) var(--ease-out);\n}\n\n@keyframes menuSlideIn {\n  from { opacity: 0; transform: scale(0.96) translateY(-4px); }\n  to { opacity: 1; transform: scale(1) translateY(0); }\n}\n\n.menu-item {\n  width: 100%;\n  background: transparent;\n  border: none;\n  color: var(--text-primary);\n  padding: var(--space-1_5) var(--space-2_5);\n  font-size: var(--text-xs);\n  text-align: left;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  transition: background var(--duration-fast);\n}\n\n.menu-item:hover { background: var(--glass-bg-heavy); }\n.menu-item.active { color: var(--brand-primary); }\n\n.menu-text { flex: 1; }\n\n.duration-icon { flex-shrink: 0; }\n.duration-icon.quick { color: var(--green-text); }\n.duration-icon.short { color: var(--color-work); }\n.duration-icon.medium { color: var(--orange-text); }\n.duration-icon.long { color: var(--danger-text); }\n.duration-icon.none { color: var(--text-muted); }\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/context-menu/MoreSubmenu.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/context-menu/StatusSubmenu.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/context-menu/constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/done-toggle/DoneToggleVisuals.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/drag-handle/DragHandleGhost.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/drag-handle/DragHandleHints.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/drag-handle/DragHandleVisuals.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/edit/RecurrenceSelector.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/edit/TaskEditChildTasks.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/edit/TaskEditHeader.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/edit/TaskEditMetadata.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/edit/TaskEditSubtasks.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/row/TaskRowActions.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/row/TaskRowDueDate.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/row/TaskRowPriority.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/row/TaskRowProject.vue","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'props' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":92,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":92,"endColumn":12},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":93,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":93,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3038,3041],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3038,3041],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"<template>\n  <div class=\"task-row__project\" @click.stop>\n    <!-- Categorized: Show emoji -->\n    <span\n      v-if=\"visual.type === 'emoji'\"\n      class=\"project-emoji-badge project-visual--emoji\"\n      :title=\"`Project: ${projectDisplayName}`\"\n      @click=\"toggleDropdown\"\n    >\n      <ProjectEmojiIcon\n        :emoji=\"visual.content\"\n        size=\"xs\"\n      />\n    </span>\n    <!-- Categorized: Show color circle -->\n    <span\n      v-else-if=\"visual.type === 'css-circle'\"\n      class=\"project-emoji-badge project-visual--css-circle\"\n      :title=\"`Project: ${projectDisplayName}`\"\n      @click=\"toggleDropdown\"\n    >\n      <div\n        class=\"project-css-circle\"\n        :style=\"{ '--project-color': visual.color }\"\n      />\n    </span>\n    <!-- Uncategorized: Show subtle question mark -->\n    <span\n      v-else\n      class=\"project-placeholder\"\n      title=\"Click to assign a project\"\n      @click=\"toggleDropdown\"\n    >❓</span>\n\n    <!-- Project Selector Dropdown -->\n    <Transition name=\"dropdown-slide\">\n      <div v-if=\"isOpen\" class=\"project-dropdown\">\n        <div class=\"project-dropdown__list\">\n          <!-- Uncategorized option -->\n          <button\n            class=\"project-dropdown__item\"\n            :class=\"{ 'is-active': !currentProjectId }\"\n            @click=\"selectProject(null)\"\n          >\n            <span class=\"project-dropdown__icon\">❓</span>\n            <span class=\"project-dropdown__name\">Uncategorized</span>\n            <Check v-if=\"!currentProjectId\" :size=\"14\" class=\"project-dropdown__check\" />\n          </button>\n\n          <!-- Project items -->\n          <button\n            v-for=\"project in projects\"\n            :key=\"project.id\"\n            class=\"project-dropdown__item\"\n            :class=\"{ 'is-active': currentProjectId === project.id }\"\n            @click=\"selectProject(project.id)\"\n          >\n            <span class=\"project-dropdown__icon\">\n              <ProjectEmojiIcon\n                v-if=\"project.colorType === 'emoji' && project.emoji\"\n                :emoji=\"project.emoji\"\n                size=\"xs\"\n              />\n              <div\n                v-else-if=\"project.color\"\n                class=\"project-dropdown__color\"\n                :style=\"{ backgroundColor: Array.isArray(project.color) ? project.color[0] : project.color }\"\n              />\n            </span>\n            <span class=\"project-dropdown__name\">{{ project.name }}</span>\n            <Check v-if=\"currentProjectId === project.id\" :size=\"14\" class=\"project-dropdown__check\" />\n          </button>\n        </div>\n      </div>\n    </Transition>\n\n    <!-- Click outside overlay -->\n    <div\n      v-if=\"isOpen\"\n      class=\"project-dropdown__overlay\"\n      @click=\"closeDropdown\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, onMounted, onUnmounted } from 'vue'\nimport { Check } from 'lucide-vue-next'\nimport { useProjectStore } from '@/stores/projects'\nimport ProjectEmojiIcon from '@/components/base/ProjectEmojiIcon.vue'\n\nconst props = defineProps<{\n  visual: any\n  projectDisplayName: string\n  currentProjectId?: string | null\n}>()\n\nconst emit = defineEmits<{\n  'update:projectId': [projectId: string | null]\n}>()\n\nconst projectStore = useProjectStore()\nconst isOpen = ref(false)\n\nconst projects = computed(() => projectStore.projects)\n\nconst toggleDropdown = () => {\n  isOpen.value = !isOpen.value\n}\n\nconst closeDropdown = () => {\n  isOpen.value = false\n}\n\nconst selectProject = (projectId: string | null) => {\n  emit('update:projectId', projectId)\n  closeDropdown()\n}\n\n// Handle escape key to close dropdown\nconst handleEscapeKey = (event: KeyboardEvent) => {\n  if (event.key === 'Escape') {\n    closeDropdown()\n  }\n}\n\nonMounted(() => {\n  document.addEventListener('keydown', handleEscapeKey)\n})\n\nonUnmounted(() => {\n  document.removeEventListener('keydown', handleEscapeKey)\n})\n</script>\n\n<style scoped>\n.task-row__project {\n  grid-area: project;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n}\n\n.project-emoji-badge {\n  background: transparent;\n  border: none;\n  color: var(--text-secondary);\n  cursor: pointer;\n  transition: all var(--spring-smooth) ease;\n  padding: var(--space-0_5);\n  border-radius: var(--radius-full);\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: var(--space-1);\n}\n\n.project-emoji-badge:hover {\n  background: var(--surface-hover);\n  transform: translateY(-1px) translateZ(0);\n}\n\n.project-css-circle {\n  width: var(--project-indicator-size-md, 24px);\n  height: var(--project-indicator-size-md, 24px);\n  border-radius: 50%;\n  background: var(--project-color);\n  box-shadow: var(--project-indicator-shadow-inset);\n  position: relative;\n  transition: all var(--spring-smooth) ease;\n}\n\n.project-emoji-badge:hover .project-css-circle {\n  transform: translateZ(0) scale(1.15);\n  box-shadow:\n    var(--project-indicator-shadow-inset),\n    0 0 16px var(--project-color),\n    0 0 32px var(--project-color);\n}\n\n/* Subtle placeholder for uncategorized tasks */\n.project-placeholder {\n  color: var(--text-muted);\n  font-size: var(--text-sm);\n  opacity: 0.5;\n  cursor: pointer;\n  transition: opacity var(--duration-fast) ease;\n}\n\n.project-placeholder:hover {\n  opacity: 0.8;\n}\n\n/* Project Selector Dropdown - Using design tokens for consistency */\n.project-dropdown {\n  position: absolute;\n  bottom: calc(100% + 4px); /* ADHD: Position ABOVE the trigger, not buried below */\n  left: 50%;\n  transform: translateX(-50%);\n  z-index: var(--z-tooltip); /* High z-index to ensure visibility */\n\n  /* Glass morphism - using design tokens with solid fallback */\n  background-color: var(--overlay-component-bg);\n  background: var(--overlay-component-bg);\n  backdrop-filter: var(--overlay-component-backdrop);\n  -webkit-backdrop-filter: var(--overlay-component-backdrop);\n  border: var(--overlay-component-border);\n  box-shadow: var(--overlay-component-shadow-up);\n  border-radius: var(--radius-md);\n\n  min-width: 160px;\n  max-width: 220px;\n  max-height: 240px;\n  overflow: hidden;\n\n  /* Ensure backdrop-filter works and dropdown appears above other elements */\n  isolation: isolate;\n}\n\n.project-dropdown__list {\n  overflow-y: auto;\n  max-height: 200px;\n  padding: var(--space-1);\n}\n\n.project-dropdown__item {\n  display: flex;\n  align-items: center;\n  gap: var(--space-2);\n  width: 100%;\n  padding: var(--space-1_5) var(--space-2);\n  border: none !important;\n  background: none !important;\n  background-color: transparent !important;\n  color: var(--text-primary) !important;\n  font-size: var(--text-xs);\n  text-align: left;\n  cursor: pointer;\n  transition: all var(--duration-normal) var(--spring-smooth);\n  border-radius: var(--radius-md);\n  user-select: none;\n  white-space: nowrap;\n  min-height: 28px;\n}\n\n.project-dropdown__item:hover {\n  background: var(--glass-bg-heavy) !important;\n  background-color: var(--glass-bg-heavy) !important;\n}\n\n.project-dropdown__item.is-active {\n  /* Simple checkmark indicator, no background highlight */\n}\n\n.project-dropdown__icon {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: var(--space-5);\n  height: var(--space-5);\n  flex-shrink: 0;\n}\n\n.project-dropdown__color {\n  width: var(--space-3_5);\n  height: var(--space-3_5);\n  border-radius: var(--radius-full);\n}\n\n.project-dropdown__name {\n  flex: 1;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.project-dropdown__check {\n  flex-shrink: 0;\n  opacity: 0.7;\n}\n\n.project-dropdown__overlay {\n  position: fixed;\n  inset: 0;\n  z-index: var(--z-dropdown);\n}\n\n/* Dropdown transitions - slides down from above */\n.dropdown-slide-enter-active,\n.dropdown-slide-leave-active {\n  transition: all var(--duration-fast) ease;\n}\n\n.dropdown-slide-enter-from {\n  opacity: 0;\n  transform: translateX(-50%) translateY(4px); /* Slide down from above */\n}\n\n.dropdown-slide-leave-to {\n  opacity: 0;\n  transform: translateX(-50%) translateY(4px);\n}\n\n/* Custom scrollbar for dropdown list */\n.project-dropdown__list::-webkit-scrollbar {\n  width: var(--space-1);\n}\n\n.project-dropdown__list::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.project-dropdown__list::-webkit-scrollbar-thumb {\n  background: var(--glass-border);\n  border-radius: var(--radius-sm);\n}\n</style>\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/tasks/row/TaskRowTitle.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/timer/QuickTaskDropdown.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/ui/AuthStatusNotice.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/ui/BraveBanner.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/ui/LocalModeBanner.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/ui/WelcomeModal.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/weeklyplan/DayColumn.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/weeklyplan/WeeklyPlanGrid.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]},{"filePath":"/media/endlessblink/data/my-projects/ai-development/productivity/flow-state/src/components/weeklyplan/WeeklyTaskCard.vue","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]},{"ruleId":"vue/component-tags-order","replacedBy":["block-order"]},{"ruleId":"vue/script-setup-uses-vars","replacedBy":[]}]}]
