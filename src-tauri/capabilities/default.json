{
  "$schema": "../gen/schemas/desktop-schema.json",
  "identifier": "default",
  "description": "Default capabilities for FlowState desktop app",
  "windows": ["main"],
  "permissions": [
    "core:default",
    {
      "identifier": "shell:allow-execute",
      "allow": [
        {
          "name": "docker",
          "cmd": "docker",
          "args": ["info", "--format", { "validator": "\\{\\{.*\\}\\}" }]
        },
        {
          "name": "docker",
          "cmd": "docker",
          "args": ["desktop", "start"]
        },
        {
          "name": "docker",
          "cmd": "docker",
          "args": ["--version"]
        },
        {
          "name": "open-macos",
          "cmd": "open",
          "args": ["-a", "Docker", "--background"]
        },
        {
          "name": "cmd-windows",
          "cmd": "cmd",
          "args": ["/c", "start", "", { "validator": "C:\\\\Program Files\\\\Docker\\\\Docker\\\\Docker Desktop\\.exe" }]
        },
        {
          "name": "systemctl-linux",
          "cmd": "systemctl",
          "args": ["--user", "start", "docker-desktop"]
        },
        {
          "name": "curl",
          "cmd": "curl",
          "args": ["-s", "-o", "/dev/null", "-w", "%{http_code}", { "validator": "http://127\\.0\\.0\\.1:\\d+/.*" }, "--max-time", { "validator": "\\d+" }]
        },
        {
          "name": "curl",
          "cmd": "curl",
          "args": ["-s", "-o", "/dev/null", "-w", "%{http_code}", { "validator": "http://127\\.0\\.0\\.1:\\d+/.*" }, "-H", { "validator": "apikey:.*" }, "--max-time", { "validator": "\\d+" }]
        },
        {
          "name": "supabase",
          "cmd": "supabase",
          "args": ["status", "-o", "json"]
        },
        {
          "name": "supabase",
          "cmd": "supabase",
          "args": ["start"]
        },
        {
          "name": "supabase",
          "cmd": "supabase",
          "args": ["stop"]
        },
        {
          "name": "supabase",
          "cmd": "supabase",
          "args": ["--version"]
        },
        {
          "name": "notify-send",
          "cmd": "notify-send",
          "args": true
        }
      ]
    },
    {
      "identifier": "http:allow-fetch",
      "allow": [
        { "url": "http://127.0.0.1:**" },
        { "url": "http://localhost:**" },
        { "url": "https://**" }
      ]
    },
    {
      "identifier": "http:allow-fetch-cancel",
      "allow": [
        { "url": "http://127.0.0.1:**" },
        { "url": "http://localhost:**" },
        { "url": "https://**" }
      ]
    },
    {
      "identifier": "http:allow-fetch-cancel-body",
      "allow": [
        { "url": "http://127.0.0.1:**" },
        { "url": "http://localhost:**" },
        { "url": "https://**" }
      ]
    },
    {
      "identifier": "http:allow-fetch-read-body",
      "allow": [
        { "url": "http://127.0.0.1:**" },
        { "url": "http://localhost:**" },
        { "url": "https://**" }
      ]
    },
    {
      "identifier": "http:allow-fetch-send",
      "allow": [
        { "url": "http://127.0.0.1:**" },
        { "url": "http://localhost:**" },
        { "url": "https://**" }
      ]
    },
    "shell:allow-open",
    "oauth:default",
    "updater:default",
    "updater:allow-check",
    "updater:allow-download-and-install",
    "process:default",
    "dialog:default",
    "dialog:allow-save",
    "dialog:allow-open",
    "fs:default",
    "store:default",
    {
      "identifier": "fs:allow-write-text-file",
      "allow": [
        { "path": "$DOWNLOAD/**" },
        { "path": "$HOME/**" }
      ]
    },
    {
      "identifier": "fs:allow-mkdir",
      "allow": [
        { "path": "$HOME/**" }
      ]
    },
    {
      "identifier": "fs:allow-exists",
      "allow": [
        { "path": "$HOME/**" }
      ]
    }
  ]
}
