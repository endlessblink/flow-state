/* GLOBAL OVERRIDES - Extracted from App.vue */

/* RTL Support */
[dir="rtl"] .sidebar {
    border-right: none !important;
    border-left: 1px solid var(--glass-border-hover) !important;
    box-shadow: var(--shadow-2xl), inset 1px 0 0 var(--glass-bg-heavy) !important;
}

[dir="rtl"] .sidebar-slide-enter-from,
[dir="rtl"] .sidebar-slide-leave-to {
    transform: translateX(100%) !important;
}

/* =============================================================================
   CRISP ICON RENDERING - Prevent blur from backdrop-filter (TASK-157)
   ============================================================================= */

/* All Lucide SVG icons - force GPU layer for crisp rendering */
svg.lucide,
[class*="lucide-"] {
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    shape-rendering: geometricPrecision;
    /* Prevent blur inheritance from backdrop-filter parents */
    isolation: isolate;
}

/* Icon buttons - ensure crisp rendering */
.filter-toggle svg,
.done-toggle svg,
.done-column-toggle svg,
.view-type-btn svg,
.nav-btn svg,
.today-btn svg,
button svg {
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    shape-rendering: geometricPrecision;
}

/* =============================================================================
   KANBAN STYLES - TODOIST-INSPIRED CLEAN LAYOUT (TASK-157)
   ============================================================================= */

/* Columns - Ultra-subtle outline (TickTick style) */
.kanban-column {
    background: transparent !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    border: none !important;
    border-radius: 0 !important;
    padding: var(--space-2) !important;
    box-shadow: none !important;
    min-width: 240px !important;
    width: 280px !important;
    flex-shrink: 0 !important;
    /* Subtle left border as column separator */
    border-left: 1px solid rgba(255, 255, 255, 0.06) !important;
}

.kanban-column:first-child {
    border-left: none !important;
}

.kanban-column:hover {
    background: transparent !important;
    box-shadow: none !important;
    transform: none !important;
}

/* Column Header - Just text, no box */
.kanban-column .column-header {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    margin-bottom: var(--space-3) !important;
    padding: var(--space-1) 0 !important;
    background: transparent !important;
    border: none !important;
    border-radius: 0 !important;
    backdrop-filter: none !important;
}

.kanban-column .column-title {
    color: rgba(255, 255, 255, 0.6) !important;
    font-weight: 500 !important;
    font-size: 13px !important;
    text-transform: none !important;
    letter-spacing: normal !important;
    text-shadow: none !important;
}

.kanban-column .task-count {
    font-size: var(--text-xs) !important;
    color: var(--text-muted) !important;
    background: transparent !important;
    padding: 0 !important;
    border: none !important;
    min-width: auto !important;
}

/* Add task button in column - subtle */
.kanban-column .add-task-btn {
    opacity: 0.4 !important;
    background: transparent !important;
    border: none !important;
    padding: var(--space-1) !important;
}

.kanban-column .add-task-btn:hover {
    opacity: 1 !important;
    transform: none !important;
    box-shadow: none !important;
}

/* Tasks Container - clean spacing */
.kanban-column .tasks-container {
    gap: var(--space-2) !important;
    padding: var(--space-2) !important;
}

/* Empty column state - minimal */
.kanban-column .empty-column {
    padding: var(--space-4) !important;
    background: transparent !important;
    border: 1px dashed var(--border-subtle) !important;
    border-radius: var(--radius-md) !important;
}

/* WIP indicators - subtle */
.kanban-column.wip-warning,
.kanban-column.wip-exceeded {
    border-left: none !important;
    background: transparent !important;
}

.kanban-column.wip-warning .task-count,
.kanban-column.wip-exceeded .task-count {
    color: var(--color-warning) !important;
}

/* Task Card Badges - Minimal text style like TickTick */
.task-card-badges .meta-badge {
    background: transparent !important;
    border: none !important;
    color: rgba(255, 255, 255, 0.45) !important;
    font-size: 12px !important;
    padding: 0 !important;
}

.task-card-badges .priority-badge {
    background: transparent !important;
    padding: 0 !important;
}

.task-card-badges .priority-badge.priority-high {
    color: rgba(239, 68, 68, 0.7) !important;
}

.task-card-badges .priority-badge.priority-medium {
    color: rgba(255, 255, 255, 0.35) !important;
}

.task-card-badges .priority-badge.priority-low {
    color: rgba(96, 165, 250, 0.6) !important;
}

.task-card-badges .priority-dot {
    width: 5px !important;
    height: 5px !important;
}

/* TASK-157: Minimal Board Header */
.kanban-header--minimal {
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    padding: var(--space-2) var(--space-4) !important;
    border-bottom: none !important;
    background: transparent !important;
}

.kanban-header--minimal .board-title {
    font-size: var(--text-base) !important;
    font-weight: 600 !important;
    color: var(--text-primary) !important;
    margin: 0 !important;
}

.kanban-header--minimal .task-count--subtle {
    font-size: var(--text-sm) !important;
    color: var(--text-muted) !important;
    font-weight: 400 !important;
    margin-left: var(--space-2) !important;
}

.header-controls--minimal {
    display: flex !important;
    align-items: center !important;
    gap: var(--space-2) !important;
}

.filter-toggle,
.done-column-toggle {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    width: 32px !important;
    height: 32px !important;
    border-radius: var(--radius-md) !important;
    background: transparent !important;
    border: none !important;
    color: var(--text-muted) !important;
    cursor: pointer !important;
    transition: all var(--duration-fast) var(--ease-out) !important;
}

.filter-toggle:hover,
.done-column-toggle:hover {
    background: var(--glass-bg-heavy) !important;
    color: var(--text-primary) !important;
}

.filter-toggle.active,
.done-column-toggle.active {
    background: var(--color-primary-alpha, rgba(99, 102, 241, 0.15)) !important;
    color: var(--color-primary, #6366f1) !important;
}

/* Collapsible Filter Bar */
.filter-bar {
    padding: var(--space-2) var(--space-4) !important;
    border-bottom: 1px solid var(--border-subtle) !important;
    background: rgba(0, 0, 0, 0.2) !important;
}

/* Slide-down transition */
.slide-down-enter-active,
.slide-down-leave-active {
    transition: all var(--duration-normal) var(--ease-out);
    overflow: hidden;
}

.slide-down-enter-from,
.slide-down-leave-to {
    opacity: 0;
    max-height: 0;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
}

.slide-down-enter-to,
.slide-down-leave-from {
    max-height: 60px;
}

/* TASK-157: Minimal Swimlane Header */
.swimlane-header--minimal {
    display: flex !important;
    align-items: center !important;
    padding: var(--space-1) var(--space-2) !important;
    background: transparent !important;
    border: none !important;
    border-bottom: none !important;
    margin-bottom: var(--space-1) !important;
}

.swimlane-header--minimal .header-content--swimlane {
    display: flex !important;
    align-items: center !important;
    gap: var(--space-2) !important;
}

.swimlane-header--minimal .collapse-btn {
    padding: var(--space-0_5) !important;
    background: transparent !important;
    border: none !important;
    color: var(--text-muted) !important;
    cursor: pointer !important;
}

.swimlane-header--minimal .project-name {
    font-size: var(--text-sm) !important;
    font-weight: 500 !important;
    color: var(--text-secondary) !important;
    margin: 0 !important;
}

.swimlane-header--minimal .task-count--subtle {
    font-size: var(--text-xs) !important;
    color: var(--text-muted) !important;
    font-weight: 400 !important;
}

/* SMART VIEW BADGES AND FILTERS */
.uncategorized-filter {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    width: 100%;
    padding: var(--space-3) var(--space-4);
    background: transparent;
    border: 1px solid transparent;
    border-radius: var(--radius-lg);
    color: var(--text-muted);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    cursor: pointer;
    transition: all var(--duration-normal) var(--spring-smooth);
}

.uncategorized-filter.active {
    background: var(--brand-primary-bg-subtle);
    border-color: var(--brand-primary-border-medium);
    color: var(--brand-primary);
    font-weight: var(--font-semibold);
}

/* REUSABLE GLOBAL THEME OVERRIDES */
.app {
    background: var(--app-background-gradient);
    color: var(--text-primary);
}

.breadcrumb-item {
    color: var(--text-muted);
}

.breadcrumb-item:hover {
    color: var(--text-secondary);
}

.breadcrumb-item.current {
    color: var(--text-primary);
}

.title-main {
    color: var(--text-primary);
}

/* Timer Active States - Stroke + Glow Design (no fill) */
.timer-display.timer-active {
    /* No solid fill - transparent background */
    background: transparent;
    /* Visible stroke border */
    border: 1.5px solid var(--timer-work-stroke);
    /* Multi-layered glow effect */
    box-shadow: var(--timer-work-stroke-glow);
    /* Subtle backdrop for contrast */
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
}

.timer-display.timer-active:hover {
    /* Intensify glow on hover */
    box-shadow: var(--timer-work-stroke-glow-intense);
}

.timer-display.timer-break {
    /* No solid fill - transparent background */
    background: transparent;
    /* Visible stroke border - orange for breaks */
    border: 1.5px solid var(--timer-break-stroke);
    /* Multi-layered glow effect */
    box-shadow: var(--timer-break-stroke-glow);
    /* Subtle backdrop for contrast */
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
}

.timer-display.timer-break:hover {
    /* Intensify glow on hover */
    box-shadow: var(--timer-break-stroke-glow-intense);
}

/* VIEW TRANSITIONS */
.fade-enter-active,
.fade-leave-active {
    transition: opacity var(--duration-normal) var(--var(--ease-out)-out), transform var(--duration-normal) ease;
}

.fade-enter-from {
    opacity: 0;
    transform: translateY(8px);
}

.fade-leave-to {
    opacity: 0;
    transform: translateY(-8px);
}

/* CUSTOM SCROLLBAR - Minimal & Modern */
.view-wrapper::-webkit-scrollbar {
    width: 8px;
}

.view-wrapper::-webkit-scrollbar-track {
    background: var(--glass-bg-soft);
    border-radius: var(--radius-full);
}

.view-wrapper::-webkit-scrollbar-thumb {
    background: var(--glass-border);
    border-radius: var(--radius-full);
    transition: background var(--duration-fast) ease;
}

.view-wrapper::-webkit-scrollbar-thumb:hover {
    background: var(--glass-border-soft);
}

/* VIEW WRAPPER LAYOUT */
.view-wrapper {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    /* BUG-049: Allow internal view scrolling */
    padding-inline-end: var(--space-2);
    width: 100%;
    height: 100%;
    min-height: 0;
    min-width: 1px;
}

/* =============================================================================
   NAIVE UI DATE PICKER - DARK THEME OVERRIDE (BUG-367/TASK-368)
   ============================================================================= */

/* Date picker panel - purple-tinted background */
.n-date-picker-panel,
.n-date-panel,
.n-date-panel-calendar {
    background: var(--overlay-component-bg, rgba(35, 32, 55, 0.98)) !important;
    border: 1px solid var(--glass-border, rgba(255, 255, 255, 0.08)) !important;
    border-radius: var(--radius-lg, 12px) !important;
}

/* Date picker header (month/year navigation) */
.n-date-panel-header {
    background: transparent !important;
    border-bottom: 1px solid var(--glass-border, rgba(255, 255, 255, 0.08)) !important;
}

.n-date-panel-header__value,
.n-date-panel-header button {
    color: var(--text-primary, rgba(255, 255, 255, 0.95)) !important;
}

/* Weekday labels */
.n-date-panel-weekdays,
.n-date-panel-weekdays__day {
    color: var(--text-muted, rgba(255, 255, 255, 0.45)) !important;
    background: transparent !important;
}

/* Date cells */
.n-date-panel-date,
.n-date-panel-date__trigger {
    color: var(--text-secondary, rgba(255, 255, 255, 0.7)) !important;
    background: transparent !important;
    border-radius: var(--radius-md, 8px) !important;
}

.n-date-panel-date:hover .n-date-panel-date__trigger {
    background: var(--glass-bg-heavy, rgba(255, 255, 255, 0.08)) !important;
    color: var(--text-primary, rgba(255, 255, 255, 0.95)) !important;
}

/* =============================================================================
   DATE PICKER - Refined Minimal Design (TASK-368)

   Design Philosophy: Stroke-based selection for unobtrusive elegance
   - Today: White text + subtle bottom border (marks "now" in time)
   - Selected: Green stroke + green text, NO fill (selection without weight)
   - Today + Selected: Green text + green stroke + green bottom border
   - Excluded: Clearly dimmed (other month dates)
   ============================================================================= */

/* Base date cell - ensure clean slate with explicit reset */
.n-date-panel .n-date-panel-date .n-date-panel-date__trigger {
    background: transparent !important;
    background-color: transparent !important;
    border: 2px solid transparent !important;
    border-radius: 6px !important;
    transition: all 0.15s ease !important;
}

/* Today indicator: white text + dot below */
.n-date-panel .n-date-panel-date.n-date-panel-date--current:not(.n-date-panel-date--selected) {
    color: #ffffff !important;
    font-weight: 600 !important;
    position: relative !important;
}

/* White dot for today (not selected) */
.n-date-panel .n-date-panel-date.n-date-panel-date--current:not(.n-date-panel-date--selected)::after {
    content: '' !important;
    position: absolute !important;
    bottom: 3px !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    width: 4px !important;
    height: 4px !important;
    border-radius: 50% !important;
    background: rgba(255, 255, 255, 0.8) !important;
    pointer-events: none !important;
    z-index: 1 !important;
}

/* Selected date: green stroke + green text, NO fill */
.n-date-panel .n-date-panel-date.n-date-panel-date--selected {
    color: #10b981 !important;
    font-weight: 600 !important;
}

.n-date-panel .n-date-panel-date.n-date-panel-date--selected .n-date-panel-date__trigger {
    background: transparent !important;
    border: 2px solid #10b981 !important;
}

/* Today + Selected: green stroke + green text + green dot */
.n-date-panel .n-date-panel-date.n-date-panel-date--current.n-date-panel-date--selected {
    color: #10b981 !important;
    font-weight: 600 !important;
    position: relative !important;
}

.n-date-panel .n-date-panel-date.n-date-panel-date--current.n-date-panel-date--selected .n-date-panel-date__trigger {
    background: transparent !important;
    border: 2px solid #10b981 !important;
}

/* Green dot for today + selected */
.n-date-panel .n-date-panel-date.n-date-panel-date--current.n-date-panel-date--selected::after {
    content: '' !important;
    position: absolute !important;
    bottom: 3px !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    width: 4px !important;
    height: 4px !important;
    border-radius: 50% !important;
    background: #10b981 !important;
    pointer-events: none !important;
    z-index: 1 !important;
}

/* Hover state - subtle highlight */
.n-date-panel .n-date-panel-date:not(.n-date-panel-date--selected):not(.n-date-panel-date--excluded):hover .n-date-panel-date__trigger {
    background: rgba(255, 255, 255, 0.08) !important;
    border-color: rgba(255, 255, 255, 0.2) !important;
}

/* Dates outside current month - CLEARLY dimmed with multiple approaches */
.n-date-panel .n-date-panel-date.n-date-panel-date--excluded .n-date-panel-date__trigger,
.n-date-panel-date--excluded .n-date-panel-date__trigger,
.n-date-panel-date.n-date-panel-date--excluded > .n-date-panel-date__trigger,
div.n-date-panel-date--excluded .n-date-panel-date__trigger {
    color: rgba(255, 255, 255, 0.15) !important;
    opacity: 0.35 !important;
    --n-item-text-color: rgba(255, 255, 255, 0.15) !important;
}

/* Fallback: target all excluded date elements */
.n-date-panel-date--excluded {
    opacity: 0.35 !important;
}

/* Calendar navigation arrows */
.n-date-panel-header__prev,
.n-date-panel-header__next,
.n-date-panel-header__fast-prev,
.n-date-panel-header__fast-next {
    color: var(--text-muted, rgba(255, 255, 255, 0.45)) !important;
    transition: all 0.15s ease !important;
}

.n-date-panel-header__prev:hover,
.n-date-panel-header__next:hover,
.n-date-panel-header__fast-prev:hover,
.n-date-panel-header__fast-next:hover {
    color: var(--text-primary, rgba(255, 255, 255, 0.95)) !important;
    background: var(--glass-bg-heavy, rgba(255, 255, 255, 0.08)) !important;
}

/* =============================================================================
   DATE PICKER - Action & Shortcut Buttons (Glass Morphism)
   No solid fills — glass bg + colored border + colored text + blur
   Override Naive UI's internal CSS vars: --n-color, --n-text-color, --n-border
   ============================================================================= */

/* ALL buttons inside date panel — reset to glass baseline */
.n-date-panel .n-button {
    --n-color: transparent !important;
    --n-color-hover: rgba(255, 255, 255, 0.06) !important;
    --n-color-pressed: rgba(78, 205, 196, 0.1) !important;
    --n-color-focus: rgba(78, 205, 196, 0.08) !important;
    --n-text-color: var(--text-secondary, rgba(255, 255, 255, 0.7)) !important;
    --n-text-color-hover: var(--text-primary, rgba(255, 255, 255, 0.95)) !important;
    --n-text-color-pressed: #4ECDC4 !important;
    --n-text-color-focus: var(--text-primary, rgba(255, 255, 255, 0.95)) !important;
    --n-border: 1px solid rgba(255, 255, 255, 0.08) !important;
    --n-border-hover: 1px solid rgba(255, 255, 255, 0.15) !important;
    --n-border-pressed: 1px solid #4ECDC4 !important;
    --n-border-focus: 1px solid rgba(78, 205, 196, 0.4) !important;
    --n-ripple-color: rgba(78, 205, 196, 0.2) !important;
}

/* "Now" / confirm button — teal glass accent */
.n-date-panel .n-button--primary-type {
    --n-color: transparent !important;
    --n-color-hover: rgba(78, 205, 196, 0.1) !important;
    --n-color-pressed: rgba(78, 205, 196, 0.15) !important;
    --n-color-focus: rgba(78, 205, 196, 0.08) !important;
    --n-text-color: #4ECDC4 !important;
    --n-text-color-hover: #4ECDC4 !important;
    --n-text-color-pressed: #4ECDC4 !important;
    --n-text-color-focus: #4ECDC4 !important;
    --n-border: 1px solid #4ECDC4 !important;
    --n-border-hover: 1px solid #4ECDC4 !important;
    --n-border-pressed: 1px solid #4ECDC4 !important;
    --n-border-focus: 1px solid #4ECDC4 !important;
}

