/* Global Vue Flow Overrides to prevent rasterization */

/* 1. The Container/Viewport */
.vue-flow__transformation-pane,
.vue-flow__viewport {
    /* BUG-1216: will-change: auto keeps text crisp and typing responsive.
     * will-change: transform was tried but causes sluggish typing (GPU re-rasterization on keystroke).
     * Zoom smoothness is handled by debounced onMoveEnd in useCanvasOrchestrator. */
    will-change: auto !important;
    backface-visibility: hidden !important;
}

/* 2. The Nodes */
.vue-flow__node {
    /* CRITICAL: Disable "will-change: transform" which Vue Flow adds inline.
     This prevents the browser from pre-rasterizing the node as a texture. */
    will-change: auto !important;

    /* NOTE: Do NOT set transform here - Vue Flow uses transform for positioning!
     * The translateZ(0) trick breaks node dragging. */
    backface-visibility: hidden !important;

    /* BUG-1216: Removed text-rendering: optimizeLegibility — forces expensive kerning
     * calculations on every node. Browser defaults are sufficient for canvas task cards. */

    /* BUG-1216: style containment prevents CSS counter/property leaks between nodes.
     * layout+paint containment removed — interferes with text input inside nodes. */
    contain: style;
}

/* 3. BUG-1116: Disable ALL transitions during drag to prevent lag
 * Vue Flow adds .dragging class to nodes being dragged.
 * CSS transitions on transform cause perceived lag as the node
 * "animates" to cursor position instead of snapping instantly. */
.vue-flow__node.dragging,
.vue-flow__node.dragging *,
.vue-flow__node.is-dragging,
.vue-flow__node.is-dragging *,
.vue-flow__node.selected.dragging,
.vue-flow__node.selected.dragging *,
.vue-flow__node.selected.is-dragging,
.vue-flow__node.selected.is-dragging * {
    transition: none !important;
    /* Also disable any animations */
    animation: none !important;
}