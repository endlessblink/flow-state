
Running 2 tests using 2 workers

ğŸš€ Navigating to /#/canvas...
ğŸš€ Navigating to /#/canvas...
BROWSER [debug]: [vite] connecting...
BROWSER [debug]: [vite] connecting...
BROWSER [debug]: [vite] connected.
BROWSER [debug]: [vite] connected.
BROWSER [log]: ğŸ“¥ [STATIC_CACHE] Loading: /src/assets/styles.css
BROWSER [log]: ğŸš€ [MAIN] Starting app initialization...
BROWSER [log]: ğŸŒ [MAIN] Browser environment detected
BROWSER [log]: ğŸ“Š [MAIN] Monitoring systems active
BROWSER [log]: ğŸ” [DEBUG] No refHistoryInstance exists, calling initializeRefHistory()
BROWSER [log]: ğŸ“¥ [STATIC_CACHE] Loading: /src/assets/styles.css
BROWSER [log]: ğŸš€ [MAIN] Starting app initialization...
BROWSER [log]: ğŸŒ [MAIN] Browser environment detected
BROWSER [log]: ğŸ“Š [MAIN] Monitoring systems active
BROWSER [log]: ğŸ” [DEBUG] No refHistoryInstance exists, calling initializeRefHistory()
BROWSER [log]: Initial tab visibility: visible
BROWSER [log]: Added tab visibility listeners for: visibilitychange
BROWSER [log]: ğŸš€ [APP] Starting strictly ordered initialization (Supabase Mode)...
BROWSER [log]: Initial tab visibility: visible
BROWSER [log]: Added tab visibility listeners for: visibilitychange
BROWSER [log]: ğŸš€ [APP] Starting strictly ordered initialization (Supabase Mode)...
BROWSER [log]: [GROUPS] breakGroupCycles called with 0 groups
BROWSER [log]: [GROUPS] Parent relationships: []
BROWSER [log]: [GROUPS] No cycles detected in group parents
BROWSER [log]: ğŸ§™â€â™‚ï¸ Running task migrations...
BROWSER [log]: ğŸ‘¤ [APP] Guest mode: starting with fresh empty app
BROWSER [log]: âš¡ [APP] Loading stores from Supabase...
BROWSER [log]: [GROUPS] breakGroupCycles called with 0 groups
BROWSER [log]: [GROUPS] Parent relationships: []
BROWSER [log]: [GROUPS] No cycles detected in group parents
BROWSER [info]: â„¹ï¸ [DATABASE] User not authenticated, skipping notification load | Context: {"operation":"loadScheduledNotifications"}
BROWSER [log]: [SafariITP] User interaction recorded - ITP counter reset
BROWSER [log]: [SafariITP] User interaction recorded - ITP counter reset
BROWSER [log]: ğŸ‘¤ [AUTH] Auth state changed: INITIAL_SESSION undefined
BROWSER [log]: ğŸ‘¤ [AUTH] Auth state changed: INITIAL_SESSION undefined
BROWSER [log]: ğŸ‘¤ [AUTH] Auth state changed: INITIAL_SESSION undefined
BROWSER [log]: [GROUPS] breakGroupCycles called with 0 groups
BROWSER [log]: [GROUPS] Parent relationships: []
BROWSER [log]: [GROUPS] No cycles detected in group parents
BROWSER [log]: ğŸ§™â€â™‚ï¸ Running task migrations...
BROWSER [log]: ğŸ‘¤ [APP] Guest mode: starting with fresh empty app
BROWSER [log]: âš¡ [APP] Loading stores from Supabase...
BROWSER [log]: [GROUPS] breakGroupCycles called with 0 groups
BROWSER [log]: [GROUPS] Parent relationships: []
BROWSER [log]: [GROUPS] No cycles detected in group parents
BROWSER [info]: â„¹ï¸ [DATABASE] User not authenticated, skipping notification load | Context: {"operation":"loadScheduledNotifications"}
BROWSER [log]: [SafariITP] User interaction recorded - ITP counter reset
BROWSER [log]: [SafariITP] User interaction recorded - ITP counter reset
BROWSER [log]: ğŸ‘¤ [AUTH] Auth state changed: INITIAL_SESSION undefined
BROWSER [log]: ğŸ‘¤ [AUTH] Auth state changed: INITIAL_SESSION undefined
BROWSER [log]: ğŸ‘¤ [AUTH] Auth state changed: INITIAL_SESSION undefined
BROWSER [log]: ğŸš€ [ORCHESTRATOR] onMounted starting...
BROWSER [log]: âœ“ [RECONCILE] All 0 canvas tasks have correct parentId
BROWSER [startGroup]: [HIERARCHY] Group Hierarchy Summary
BROWSER [log]: Total: 0 groups (0 root, 0 nested)
BROWSER [endGroup]: console.groupEnd
BROWSER [log]: ğŸš€ [ORCHESTRATOR] Initial syncNodes...
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Calling syncNodes {hasTasks: false}
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Resolving tasks...
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Tasks resolved: {count: 0}
BROWSER [log]: ğŸš€ [ORCHESTRATOR] onMounted starting...
BROWSER [log]: âœ“ [RECONCILE] All 0 canvas tasks have correct parentId
BROWSER [startGroup]: [HIERARCHY] Group Hierarchy Summary
BROWSER [log]: Total: 0 groups (0 root, 0 nested)
BROWSER [endGroup]: console.groupEnd
BROWSER [log]: ğŸš€ [ORCHESTRATOR] Initial syncNodes...
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Calling syncNodes {hasTasks: false}
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Resolving tasks...
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Tasks resolved: {count: 0}
â³ Waiting for .canvas-layout...
â³ Waiting for .vue-flow__pane...
âœ… Canvas ready
ğŸ›  Opening Create Group modal...
â³ Waiting for .canvas-layout...
BROWSER [log]: ğŸŒ [GLOBAL HANDLER] handleKeydown called (bubble phase): {key: Shift, shiftKey: true, ctrlKey: false, metaKey: false, altKey: false}
BROWSER [log]: ğŸš« [GLOBAL HANDLER] shouldIgnoreElement result: false {targetElement: body, ignoreInputs: true, ignoreModals: true}
BROWSER [log]: ğŸŒ [GLOBAL HANDLER] handleKeydown called (bubble phase): {key: G, shiftKey: true, ctrlKey: false, metaKey: false, altKey: false}
BROWSER [log]: ğŸš« [GLOBAL HANDLER] shouldIgnoreElement result: false {targetElement: body, ignoreInputs: true, ignoreModals: true}
â³ Waiting for .vue-flow__pane...
ğŸ›  Filling group details...
âœ… Canvas ready
ğŸ›  Opening Create Group modal...
BROWSER [log]: ğŸŒ [GLOBAL HANDLER] handleKeydown called (bubble phase): {key: Shift, shiftKey: true, ctrlKey: false, metaKey: false, altKey: false}
BROWSER [log]: ğŸš« [GLOBAL HANDLER] shouldIgnoreElement result: false {targetElement: body, ignoreInputs: true, ignoreModals: true}
BROWSER [log]: ğŸŒ [GLOBAL HANDLER] handleKeydown called (bubble phase): {key: G, shiftKey: true, ctrlKey: false, metaKey: false, altKey: false}
BROWSER [log]: ğŸš« [GLOBAL HANDLER] shouldIgnoreElement result: false {targetElement: body, ignoreInputs: true, ignoreModals: true}
BROWSER [log]: â• createGroupWithUndo called with: Tomorrow
BROWSER [debug]: â­ï¸ [GUEST] Skipping saveGroup - not authenticated
BROWSER [log]: ğŸ‘€ [ORCHESTRATOR] canvasStore.groups changed {count: 1}
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Calling syncNodes {hasTasks: false}
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Resolving tasks...
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Tasks resolved: {count: 0}
BROWSER [startGroup]: [INVARIANT] 1 violation(s) detected in syncStoreToCanvas
BROWSER [warning]: 1 WARNING(s):
BROWSER [warning]:   [B] group group-1768241658943-fs3vafn: Vue Flow position doesn't match expected (absolute) {storeAbsolute: Object, parentGroupId: null, expectedVueFlowPos: Object, actualVueFlowPos: Object, delta: Object}
BROWSER [endGroup]: console.groupEnd
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Calling syncNodes {hasTasks: false}
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Resolving tasks...
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Tasks resolved: {count: 0}
ğŸ›  Filling group details...
â³ Waiting for group node...
BROWSER [log]: â• createGroupWithUndo called with: Today
BROWSER [debug]: â­ï¸ [GUEST] Skipping saveGroup - not authenticated
BROWSER [log]: ğŸ‘€ [ORCHESTRATOR] canvasStore.groups changed {count: 1}
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Calling syncNodes {hasTasks: false}
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Resolving tasks...
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Tasks resolved: {count: 0}
BROWSER [startGroup]: [INVARIANT] 1 violation(s) detected in syncStoreToCanvas
BROWSER [warning]: 1 WARNING(s):
BROWSER [warning]:   [B] group group-1768241658985-cu5rg1e: Vue Flow position doesn't match expected (absolute) {storeAbsolute: Object, parentGroupId: null, expectedVueFlowPos: Object, actualVueFlowPos: Object, delta: Object}
BROWSER [endGroup]: console.groupEnd
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Calling syncNodes {hasTasks: false}
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Resolving tasks...
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Tasks resolved: {count: 0}
â³ Waiting for group node...
ğŸ›  Opening Quick Task Create modal...
ğŸ›  Opening Quick Task Create modal...
ğŸ›  Filling task details...
BROWSER [log]: â• createTaskWithUndo called with: {title: Smart Task Today, description: , canvasPosition: Object, parentId: undefined, status: planned}
ğŸ›  Filling task details...
BROWSER [debug]: â­ï¸ [GUEST] Skipping saveTasks - not authenticated
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Calling syncNodes {hasTasks: false}
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Resolving tasks...
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Tasks resolved: {count: 1}
BROWSER [log]: ğŸ‘€ [ORCHESTRATOR] taskCountByGroupId changed - syncing nodes
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Calling syncNodes {hasTasks: false}
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Resolving tasks...
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Tasks resolved: {count: 1}
BROWSER [log]: â• createTaskWithUndo called with: {title: Smart Task Tomorrow, description: , canvasPosition: Object, parentId: undefined, status: planned}
BROWSER [debug]: â­ï¸ [GUEST] Skipping saveTasks - not authenticated
BROWSER [startGroup]: [INVARIANT] 1 violation(s) detected in syncStoreToCanvas
BROWSER [warning]: 1 WARNING(s):
BROWSER [warning]:   [B] group group-1768241658985-cu5rg1e: Vue Flow position doesn't match expected (absolute) {storeAbsolute: Object, parentGroupId: null, expectedVueFlowPos: Object, actualVueFlowPos: Object, delta: Object}
BROWSER [endGroup]: console.groupEnd
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Calling syncNodes {hasTasks: false}
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Resolving tasks...
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Tasks resolved: {count: 1}
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Calling syncNodes {hasTasks: false}
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Resolving tasks...
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Tasks resolved: {count: 1}
BROWSER [log]: ğŸ‘€ [ORCHESTRATOR] taskCountByGroupId changed - syncing nodes
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Calling syncNodes {hasTasks: false}
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Resolving tasks...
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Tasks resolved: {count: 1}
â³ Waiting for task node...
ğŸ–± Dragging Task into Group...
BROWSER [startGroup]: [INVARIANT] 1 violation(s) detected in syncStoreToCanvas
BROWSER [warning]: 1 WARNING(s):
BROWSER [warning]:   [B] group group-1768241658943-fs3vafn: Vue Flow position doesn't match expected (absolute) {storeAbsolute: Object, parentGroupId: null, expectedVueFlowPos: Object, actualVueFlowPos: Object, delta: Object}
BROWSER [endGroup]: console.groupEnd
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Calling syncNodes {hasTasks: false}
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Resolving tasks...
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Tasks resolved: {count: 1}
â³ Waiting for task node...
ğŸ–± Dragging Task into Group...
BROWSER [debug]: â­ï¸ [GUEST] Skipping saveTasks - not authenticated
BROWSER [log]: âœ¨ [SMART-GROUP] Applying properties from "Today" to task "Smart Task Today": {dueDate: 2026-01-12}
BROWSER [debug]: â­ï¸ [GUEST] Skipping saveTasks - not authenticated
BROWSER [log]: ğŸ‘€ [ORCHESTRATOR] taskCountByGroupId changed - syncing nodes
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Calling syncNodes {hasTasks: false}
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Resolving tasks...
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Tasks resolved: {count: 1}
BROWSER [log]: [DEBUG HEADER REACT] group-1768241658985-cu5rg1e {direct: 1, aggregated: 1, oldDirect: 0, oldAggregated: 0}
BROWSER [startGroup]: [INVARIANT] 2 violation(s) detected in syncStoreToCanvas
BROWSER [warning]: 2 WARNING(s):
BROWSER [warning]:   [B] group group-1768241658985-cu5rg1e: Vue Flow position doesn't match expected (absolute) {storeAbsolute: Object, parentGroupId: null, expectedVueFlowPos: Object, actualVueFlowPos: Object, delta: Object}
BROWSER [warning]:   [B] task fb28a43d-d2f9-4254-b254-655d1eef7b60: Vue Flow position doesn't match expected (relative) {storeAbsolute: Object, parentId: group-1768241658985-cu5rg1e, expectedVueFlowPos: Object, actualVueFlowPos: Object}
BROWSER [endGroup]: console.groupEnd
ğŸ” Verifying date badge...
ğŸ“Š Expected date text: 12/01/2026
âœ… Date verified via badge!
BROWSER [error]: Failed to load resource: the server responded with a status of 406 (Not Acceptable)
BROWSER [debug]: â­ï¸ [GUEST] Skipping saveTasks - not authenticated
BROWSER [log]: âœ¨ [SMART-GROUP] Applying properties from "Tomorrow" to task "Smart Task Tomorrow": {dueDate: 2026-01-13}
BROWSER [debug]: â­ï¸ [GUEST] Skipping saveTasks - not authenticated
BROWSER [log]: ğŸ‘€ [ORCHESTRATOR] taskCountByGroupId changed - syncing nodes
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Calling syncNodes {hasTasks: false}
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Resolving tasks...
BROWSER [log]: ğŸ‘‰ [ORCHESTRATOR] Tasks resolved: {count: 1}
BROWSER [log]: [DEBUG HEADER REACT] group-1768241658943-fs3vafn {direct: 1, aggregated: 1, oldDirect: 0, oldAggregated: 0}
BROWSER [startGroup]: [INVARIANT] 2 violation(s) detected in syncStoreToCanvas
BROWSER [warning]: 2 WARNING(s):
BROWSER [warning]:   [B] group group-1768241658943-fs3vafn: Vue Flow position doesn't match expected (absolute) {storeAbsolute: Object, parentGroupId: null, expectedVueFlowPos: Object, actualVueFlowPos: Object, delta: Object}
BROWSER [warning]:   [B] task 1c60966f-f914-4eec-98a7-126ebafa9982: Vue Flow position doesn't match expected (relative) {storeAbsolute: Object, parentId: group-1768241658943-fs3vafn, expectedVueFlowPos: Object, actualVueFlowPos: Object}
BROWSER [endGroup]: console.groupEnd
ğŸ” Verifying date badge...
ğŸ“Š Expected date text: 13/01/2026
âœ… Date verified via badge!
BROWSER [error]: Failed to load resource: the server responded with a status of 406 (Not Acceptable)
  âœ“  1 [chromium] â€º tests/smart-group-dates.spec.ts:22:5 â€º Smart Group Dates â€º should update task dueDate when dropped into "Today" group (2.9s)
  âœ“  2 [chromium] â€º tests/smart-group-dates.spec.ts:78:5 â€º Smart Group Dates â€º should update task dueDate when dropped into "Tomorrow" group (3.0s)

  2 passed (3.9s)
